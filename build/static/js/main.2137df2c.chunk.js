(this["webpackJsonptonva-admins"]=this["webpackJsonptonva-admins"]||[]).push([[0],[,,,,,function(e,t,n){"use strict";var r=n(23);n.d(t,"CacheIds",(function(){return r.a})),n.d(t,"PageItems",(function(){return r.c})),n.d(t,"uid",(function(){return r.h}));var a=n(18);n.d(t,"CenterApiBase",(function(){return a.b})),n.d(t,"UqApi",(function(){return a.e})),n.d(t,"appInFrame",(function(){return a.f})),n.d(t,"host",(function(){return a.h}));var i=n(15);n.o(i,"Badge")&&n.d(t,"Badge",(function(){return i.Badge})),n.o(i,"CAppBase")&&n.d(t,"CAppBase",(function(){return i.CAppBase})),n.o(i,"CBase")&&n.d(t,"CBase",(function(){return i.CBase})),n.o(i,"CSub")&&n.d(t,"CSub",(function(){return i.CSub})),n.o(i,"Controller")&&n.d(t,"Controller",(function(){return i.Controller})),n.o(i,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return i.DropdownActions})),n.o(i,"EasyDate")&&n.d(t,"EasyDate",(function(){return i.EasyDate})),n.o(i,"EasyTime")&&n.d(t,"EasyTime",(function(){return i.EasyTime})),n.o(i,"Edit")&&n.d(t,"Edit",(function(){return i.Edit})),n.o(i,"FA")&&n.d(t,"FA",(function(){return i.FA})),n.o(i,"Form")&&n.d(t,"Form",(function(){return i.Form})),n.o(i,"Image")&&n.d(t,"Image",(function(){return i.Image})),n.o(i,"LMR")&&n.d(t,"LMR",(function(){return i.LMR})),n.o(i,"List")&&n.d(t,"List",(function(){return i.List})),n.o(i,"Media")&&n.d(t,"Media",(function(){return i.Media})),n.o(i,"Muted")&&n.d(t,"Muted",(function(){return i.Muted})),n.o(i,"NavView")&&n.d(t,"NavView",(function(){return i.NavView})),n.o(i,"Page")&&n.d(t,"Page",(function(){return i.Page})),n.o(i,"PropGrid")&&n.d(t,"PropGrid",(function(){return i.PropGrid})),n.o(i,"SearchBox")&&n.d(t,"SearchBox",(function(){return i.SearchBox})),n.o(i,"VPage")&&n.d(t,"VPage",(function(){return i.VPage})),n.o(i,"View")&&n.d(t,"View",(function(){return i.View})),n.o(i,"centerApi")&&n.d(t,"centerApi",(function(){return i.centerApi})),n.o(i,"nav")&&n.d(t,"nav",(function(){return i.nav})),n.o(i,"start")&&n.d(t,"start",(function(){return i.start}));n(77);var s=n(33);n.o(s,"Badge")&&n.d(t,"Badge",(function(){return s.Badge})),n.o(s,"CAppBase")&&n.d(t,"CAppBase",(function(){return s.CAppBase})),n.o(s,"CBase")&&n.d(t,"CBase",(function(){return s.CBase})),n.o(s,"CSub")&&n.d(t,"CSub",(function(){return s.CSub})),n.o(s,"Controller")&&n.d(t,"Controller",(function(){return s.Controller})),n.o(s,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return s.DropdownActions})),n.o(s,"EasyDate")&&n.d(t,"EasyDate",(function(){return s.EasyDate})),n.o(s,"EasyTime")&&n.d(t,"EasyTime",(function(){return s.EasyTime})),n.o(s,"Edit")&&n.d(t,"Edit",(function(){return s.Edit})),n.o(s,"FA")&&n.d(t,"FA",(function(){return s.FA})),n.o(s,"Form")&&n.d(t,"Form",(function(){return s.Form})),n.o(s,"Image")&&n.d(t,"Image",(function(){return s.Image})),n.o(s,"LMR")&&n.d(t,"LMR",(function(){return s.LMR})),n.o(s,"List")&&n.d(t,"List",(function(){return s.List})),n.o(s,"Media")&&n.d(t,"Media",(function(){return s.Media})),n.o(s,"Muted")&&n.d(t,"Muted",(function(){return s.Muted})),n.o(s,"NavView")&&n.d(t,"NavView",(function(){return s.NavView})),n.o(s,"Page")&&n.d(t,"Page",(function(){return s.Page})),n.o(s,"PropGrid")&&n.d(t,"PropGrid",(function(){return s.PropGrid})),n.o(s,"SearchBox")&&n.d(t,"SearchBox",(function(){return s.SearchBox})),n.o(s,"VPage")&&n.d(t,"VPage",(function(){return s.VPage})),n.o(s,"View")&&n.d(t,"View",(function(){return s.View})),n.o(s,"centerApi")&&n.d(t,"centerApi",(function(){return s.centerApi})),n.o(s,"nav")&&n.d(t,"nav",(function(){return s.nav})),n.o(s,"start")&&n.d(t,"start",(function(){return s.start}));var c=n(115);n.d(t,"CAppBase",(function(){return c.a})),n.d(t,"CBase",(function(){return c.b})),n.d(t,"CSub",(function(){return c.c})),n.d(t,"centerApi",(function(){return c.d})),n.d(t,"start",(function(){return c.e}));var u=n(26);n.d(t,"Controller",(function(){return u.a})),n.d(t,"VPage",(function(){return u.b})),n.d(t,"View",(function(){return u.c}))},,,,,,,,,,function(e,t,n){"use strict";n(64);var r=n(19);n.d(t,"NavView",(function(){return r.a})),n.d(t,"nav",(function(){return r.b}));var a=n(86);n.d(t,"Page",(function(){return a.a}));var i=n(87);n.o(i,"Ax")&&n.d(t,"Ax",(function(){return i.Ax})),n.o(i,"Badge")&&n.d(t,"Badge",(function(){return i.Badge})),n.o(i,"CAppBase")&&n.d(t,"CAppBase",(function(){return i.CAppBase})),n.o(i,"CBase")&&n.d(t,"CBase",(function(){return i.CBase})),n.o(i,"CSub")&&n.d(t,"CSub",(function(){return i.CSub})),n.o(i,"Controller")&&n.d(t,"Controller",(function(){return i.Controller})),n.o(i,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return i.DropdownActions})),n.o(i,"EasyDate")&&n.d(t,"EasyDate",(function(){return i.EasyDate})),n.o(i,"EasyTime")&&n.d(t,"EasyTime",(function(){return i.EasyTime})),n.o(i,"Edit")&&n.d(t,"Edit",(function(){return i.Edit})),n.o(i,"FA")&&n.d(t,"FA",(function(){return i.FA})),n.o(i,"Form")&&n.d(t,"Form",(function(){return i.Form})),n.o(i,"Image")&&n.d(t,"Image",(function(){return i.Image})),n.o(i,"LMR")&&n.d(t,"LMR",(function(){return i.LMR})),n.o(i,"List")&&n.d(t,"List",(function(){return i.List})),n.o(i,"Media")&&n.d(t,"Media",(function(){return i.Media})),n.o(i,"Muted")&&n.d(t,"Muted",(function(){return i.Muted})),n.o(i,"PropGrid")&&n.d(t,"PropGrid",(function(){return i.PropGrid})),n.o(i,"SearchBox")&&n.d(t,"SearchBox",(function(){return i.SearchBox})),n.o(i,"UserView")&&n.d(t,"UserView",(function(){return i.UserView})),n.o(i,"VPage")&&n.d(t,"VPage",(function(){return i.VPage})),n.o(i,"View")&&n.d(t,"View",(function(){return i.View})),n.o(i,"centerApi")&&n.d(t,"centerApi",(function(){return i.centerApi})),n.o(i,"resOptions")&&n.d(t,"resOptions",(function(){return i.resOptions})),n.o(i,"setGlobalRes")&&n.d(t,"setGlobalRes",(function(){return i.setGlobalRes})),n.o(i,"setRes")&&n.d(t,"setRes",(function(){return i.setRes})),n.o(i,"start")&&n.d(t,"start",(function(){return i.start})),n.o(i,"t")&&n.d(t,"t",(function(){return i.t}));var s=n(112);n.d(t,"Form",(function(){return s.a}));var c=n(114);n.d(t,"Edit",(function(){return c.a}));var u=n(35);n.d(t,"resOptions",(function(){return u.b})),n.d(t,"setGlobalRes",(function(){return u.c})),n.d(t,"setRes",(function(){return u.d})),n.d(t,"t",(function(){return u.e}));n(49);var o=n(40);n.d(t,"Image",(function(){return o.a}));n(67);var l=n(116);n.d(t,"List",(function(){return l.a}));var h=n(92);n.d(t,"DropdownActions",(function(){return h.a}));var p=n(93);n.d(t,"EasyDate",(function(){return p.a})),n.d(t,"EasyTime",(function(){return p.b}));var d=n(117);n.d(t,"PropGrid",(function(){return d.a}));var f=n(46);n.d(t,"Badge",(function(){return f.a})),n.d(t,"FA",(function(){return f.b})),n.d(t,"LMR",(function(){return f.c})),n.d(t,"Muted",(function(){return f.d}));var v=n(94);n.d(t,"Media",(function(){return v.a}));var b=n(95);n.d(t,"SearchBox",(function(){return b.a}));var m=n(96);n.d(t,"UserView",(function(){return m.a}));var j=n(97);n.d(t,"Ax",(function(){return j.a}));n(98);var O=n(99);n.o(O,"CAppBase")&&n.d(t,"CAppBase",(function(){return O.CAppBase})),n.o(O,"CBase")&&n.d(t,"CBase",(function(){return O.CBase})),n.o(O,"CSub")&&n.d(t,"CSub",(function(){return O.CSub})),n.o(O,"Controller")&&n.d(t,"Controller",(function(){return O.Controller})),n.o(O,"VPage")&&n.d(t,"VPage",(function(){return O.VPage})),n.o(O,"View")&&n.d(t,"View",(function(){return O.View})),n.o(O,"centerApi")&&n.d(t,"centerApi",(function(){return O.centerApi})),n.o(O,"start")&&n.d(t,"start",(function(){return O.start}))},,,function(e,t,n){"use strict";n.d(t,"l",(function(){return r.b})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"j",(function(){return p.h})),n.d(t,"e",(function(){return p.d})),n.d(t,"d",(function(){return p.c})),n.d(t,"o",(function(){return p.j})),n.d(t,"n",(function(){return p.i})),n.d(t,"b",(function(){return p.a})),n.d(t,"c",(function(){return p.b})),n.d(t,"i",(function(){return p.g})),n.d(t,"p",(function(){return p.l})),n.d(t,"f",(function(){return v.a})),n.d(t,"m",(function(){return b.b})),n.d(t,"h",(function(){return b.a})),n.d(t,"k",(function(){return m.a}));n(39);var r=n(55),a=n(1),i=n.n(a),s=n(2),c=n(3),u=n(4),o=n(6),l=n(7),h=n(41),p=n(32),d=new(function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"guest",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("",{});case 2:t=e.sent,e.t0=typeof t,e.next="string"===e.t0?7:"object"===e.t0?8:6;break;case 6:return e.abrupt("return");case 7:return e.abrupt("return",Object(h.a)(t));case 8:return n=Object(h.a)(t.token),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unitFromName",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return n=e.sent,e.abrupt("return",n&&n.unit);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(p.a))("tv/guest/",void 0),f=function(){function e(t,n){Object(c.a)(this,e),this._params=void 0,this.method="POST",this.waiting=void 0,this._params=t,this.waiting=n}return Object(u.a)(e,[{key:"buildParams",value:function(){return this.params}},{key:"params",get:function(){return this._params}},{key:"headers",get:function(){}}]),e}(),v=n(28),b=n(42),m=n(63)},function(e,t,n){"use strict";n.d(t,"a",(function(){return z})),n.d(t,"b",(function(){return H}));var r,a,i,s=n(14),c=n(12),u=n(10),o=(n(24),n(0)),l=n(22),h=n(1),p=n.n(h),d=n(2),f=n(3),v=n(4),b=n(13),m=n(6),j=n(7),O=n(8),y=n(9),x=n(17),g=n.n(x),k=n(27),w=n(32),C=n(39),A=function(e,t){Object(w.i)(e,t),C.a.setCenterToken(t)},N=n(18),S=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).reApi=Object(d.a)(p.a.mark((function t(){var n,r,a,i,s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.clearError(),n=e.props,r=n.channel,a=n.url,i=n.options,s=n.resolve,c=n.reject,t.next=4,Object(N.l)(r,a,i,s,c);case 4:case"end":return t.stop()}}),t)}))),e.close=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.clearError();case 1:case"end":return t.stop()}}),t)}))),e}return Object(v.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.error,r=t.url;if("object"===typeof n){var a=[];for(var i in n)a.push(Object(o.jsxs)("li",{children:[Object(o.jsx)("label",{children:i}),Object(o.jsx)("div",{style:{wordWrap:"break-word"},children:n[i]})]},i));e=Object(o.jsx)("ul",{children:a})}else e=Object(o.jsx)("div",{children:n});return Object(o.jsx)("div",{children:Object(o.jsx)("article",{children:Object(o.jsxs)("main",{className:"va-error",children:[Object(o.jsx)("div",{children:"\u7f51\u7edc\u51fa\u73b0\u95ee\u9898"}),Object(o.jsx)("div",{children:"\u70b9\u51fb\u91cd\u65b0\u8bbf\u95ee"}),Object(o.jsxs)("div",{style:{wordWrap:"break-word"},children:["url: ",r]}),e,Object(o.jsxs)("div",{className:"p-3",children:[Object(o.jsx)("button",{type:"button",onClick:this.reApi,children:"\u91cd\u65b0API"}),Object(o.jsx)("button",{type:"button",onClick:this.close,children:"\u5173\u95ed"})]})]})})})}}]),n}(O.Component),P=function(e){var t=e.message;return Object(o.jsx)(k.a,{header:"\u7cfb\u7edf\u63d0\u9192",children:Object(o.jsx)("div",{className:"px-3",children:t})})},I=n(28),U=n(23),E=n(35),_=n(49),R=n(64),T=(n(85),n(131),n(132),n(133),n(46)),V=n(58),q=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var r;Object(f.a)(this,n),(r=t.call(this,e)).timerHandler=void 0,r.reload=function(){clearInterval(r.timerHandler),H.reload()};var a=e.seconds;return void 0===a?Object(V.a)(r):(r.state={seconds:a},a<=0?Object(V.a)(r):(r.timerHandler=setInterval((function(){var e=r.state.seconds;--e<=0?r.reload():r.setState({seconds:e})}),1e3),r))}return Object(v.a)(n,[{key:"render",value:function(){var e,t;return this.state.seconds>0?(e="\u7a0b\u5e8f\u5347\u7ea7\u4e2d...",t=this.state.seconds+"\u79d2\u949f\u4e4b\u540e\u81ea\u52a8\u91cd\u542f\u52a8"):(e="\u7a0b\u5e8f\u9700\u8981\u5347\u7ea7",t="\u8bf7\u70b9\u51fb\u4e0b\u9762\u6309\u94ae\u91cd\u542f"),Object(o.jsx)(k.a,{header:!1,children:Object(o.jsxs)("div",{className:"text-center p-5",children:[Object(o.jsxs)("div",{className:"text-info py-5",children:[Object(o.jsx)("span",{className:"text-danger",children:e}),Object(o.jsx)("br",{}),t,Object(o.jsx)("br",{}),Object(o.jsx)("span",{className:"small text-muted",children:this.props.message})]}),Object(o.jsx)("button",{className:"btn btn-danger",onClick:this.reload,children:"\u7acb\u523b\u91cd\u542f"})]})})}}]),n}(O.Component),F=function(e){return Object(o.jsx)(k.a,{header:"\u5347\u7ea7\u8f6f\u4ef6",back:"close",children:Object(o.jsxs)("div",{className:"py-5 px-3 my-5 mx-2 border bg-white rounded",children:[Object(o.jsx)("div",{className:"text-center text-info",children:"\u5347\u7ea7\u5c06\u6e05\u9664\u6240\u6709\u672c\u673a\u7f13\u51b2\u533a\u5185\u5bb9\uff0c\u5e76\u4ece\u670d\u52a1\u5668\u91cd\u65b0\u5b89\u88c5\u7a0b\u5e8f\uff01"}),Object(o.jsx)("div",{className:"text-center mt-5",children:Object(o.jsx)("button",{className:"btn btn-danger mr-3",onClick:function(){return e.confirm(!0)},children:"\u786e\u8ba4\u5347\u7ea7"})})]})})},L=n(77),D=new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i").test(navigator.userAgent),B=[],M=1,z=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).stack=void 0,r.waitCount=0,r.waitTimeHandler=void 0,r.upgradeUq=function(){H.start()},r.isHistoryBack=!1,r.navBack=function(){var e=Date.now();r.isHistoryBack=!0,r.back(!0),r.isHistoryBack=!1,console.log("///\\\\ ".concat(Date.now()-e,"ms backbutton pressed - nav level: ").concat(r.stack.length))},r.back=Object(d.a)(p.a.mark((function e(){var t,n,a,i,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(s.length>0&&void 0!==s[0])||s[0],n=r.stack,0!==(a=n.length)){e.next=5;break}return e.abrupt("return");case 5:if(1!==a){e.next=8;break}return window.self!==window.top&&window.top.postMessage({type:"pop-app"},"*"),e.abrupt("return");case 8:if(i=n[a-1],!0!==t||!i.confirmClose){e.next=17;break}return e.next=12,i.confirmClose();case 12:if(e.t0=e.sent,!0!==e.t0){e.next=15;break}r.pop();case 15:e.next=18;break;case 17:r.pop();case 18:case"end":return e.stop()}}),e)}))),r.clearError=function(){r.setState({fetchError:void 0})},r.stack=[],r.state={stack:r.stack,wait:0,fetchError:void 0},H.set(Object(b.a)(r)),r}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("popstate",this.navBack),e.next=3,H.init();case 3:return e.next=5,H.start();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startWait",value:function(){var e=this;0===this.waitCount&&(this.setState({wait:1}),this.waitTimeHandler=U.e.setTimeout("NavView.startWait",(function(){e.waitTimeHandler=void 0,e.setState({wait:2})}),1e3)),++this.waitCount,this.setState({fetchError:void 0})}},{key:"endWait",value:function(){var e=this;U.e.setTimeout(void 0,(function(){--e.waitCount,0===e.waitCount&&(void 0!==e.waitTimeHandler&&(U.e.clearTimeout(e.waitTimeHandler),e.waitTimeHandler=void 0),e.setState({wait:0}))}),100)}},{key:"onError",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=t.error)){e.next=14;break}if(!0!==n.unauthorized){e.next=6;break}return e.next=5,H.showLogin(void 0);case 5:return e.abrupt("return");case 6:e.t0=n.type,e.next="unauthorized"===e.t0?9:"sheet-processing"===e.t0?12:14;break;case 9:return e.next=11,H.showLogin(void 0);case 11:return e.abrupt("return");case 12:return H.push(Object(o.jsx)(P,{message:"\u5355\u636e\u6b63\u5728\u5904\u7406\u4e2d\u3002\u8bf7\u91cd\u65b0\u64cd\u4f5c\uff01"})),e.abrupt("return");case 14:this.setState({fetchError:t});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.show(Object(o.jsx)(k.a,{header:!1,children:Object(o.jsxs)("div",{children:["UQ\u5347\u7ea7\u4e86\uff0c\u8bf7\u70b9\u51fb\u6309\u94ae\u5347\u7ea7 ",Object(o.jsx)("br",{}),Object(o.jsxs)("small",{className:"text-muted",children:[t," ver-",n]}),Object(o.jsx)("button",{className:"btn btn-primary",onClick:this.upgradeUq,children:"\u5347\u7ea7"})]})}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"show",value:function(e,t){return this.clear(),this.push(e,t)}},{key:"push",value:function(e,t){this.removeCeased(),this.stack.length>0&&window.history.pushState("forward",null,null);var n=M++;return this.stack.push({key:n,view:e,ceased:!1,disposer:t}),this.refresh(),n}},{key:"replace",value:function(e,t){var n=void 0,r=this.stack;r.length>0&&(n=r.pop());var a=M++;return this.stack.push({key:a,view:e,ceased:!1,disposer:t}),void 0!==n&&this.dispose(n.disposer),this.refresh(),a}},{key:"ceaseTop",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack.length-1,n=0;n<e&&!(t<0);n++,t--){var r=this.stack[t];r.ceased=!0}}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack,n=t.length;if(!(e<=0||n<=1)){n<e&&(e=n);for(var r=0,a=0;a<e&&0!==t.length;a++)this.popAndDispose(),++r;r>=n&&r--,this.refresh(),this.isHistoryBack}}},{key:"popTo",value:function(e){if(void 0!==e&&void 0!==this.stack.find((function(t){return t.key===e})))for(;this.stack.length>0;){var t=this.stack.length;if(this.stack[t-1].key===e)break;this.pop()}}},{key:"topKey",value:function(){var e=this.stack.length;if(0!==e)return this.stack[e-1].key}},{key:"removeCeased",value:function(){for(;;){var e=this.stack.length-1;if(e<0)break;if(!1===this.stack[e].ceased)break;var t=this.stack.pop().disposer;this.dispose(t)}this.refresh()}},{key:"popAndDispose",value:function(){this.removeCeased();var e=this.stack.pop();if(void 0!==e){var t=e.disposer;return this.dispose(t),this.removeCeased(),e}}},{key:"dispose",value:function(e){void 0!==e&&(void 0===this.stack.find((function(t){return t.disposer===e}))&&e())}},{key:"clear",value:function(){for(this.stack.length;this.stack.length>0;)this.popAndDispose()}},{key:"regConfirmClose",value:function(e){var t=this.stack,n=t.length;0!==n&&(t[n-1].confirmClose=e)}},{key:"confirmBox",value:function(e){return window.confirm(e)}},{key:"render",value:function(){var e=this.state,t=e.wait,n=e.fetchError,r=this.state.stack,a=r.length-1,i=null,s=null;switch(t){case 1:i=Object(o.jsx)("div",{className:"va-wait va-wait1"});break;case 2:i=Object(o.jsx)("div",{className:"va-wait va-wait2",children:Object(o.jsx)(_.a,{})})}n&&(s=Object(o.jsx)(S,Object(l.a)({clearError:this.clearError},n)));var c=!0===H.testing&&Object(o.jsx)("span",{className:"cursor-pointer position-fixed",style:{top:0,left:"0.2rem",zIndex:90001},children:Object(o.jsx)(T.b,{className:"text-warning",name:"info-circle"})});return Object(o.jsxs)(o.Fragment,{children:[r.map((function(e,t){var n=e.key,r=e.view;return Object(o.jsx)("div",{style:t<a?{visibility:"hidden",position:"absolute"}:void 0,children:r},n)})),i,s,c]})}},{key:"refresh",value:function(){this.setState({stack:this.stack})}},{key:"level",get:function(){return this.stack.length}}]),n}(O.Component),H=new(r=function(){function e(){var t=this;Object(f.a)(this,e),this.navView=void 0,this.wsHost=void 0,this.local=new U.b,this.navigo=void 0,this.navSettings=void 0,Object(c.a)(this,"user",a,this),this.testing=void 0,this.language=void 0,this.culture=void 0,this.resUrl=void 0,this.hashParam=void 0,this.centerHost=void 0,this.arrs=["/test","/test/"],this.windowOnError=function(e,t,n,r,a){console.error("windowOnError"),console.error(a)},this.windowOnUnhandledRejection=function(e){console.error("windowOnUnhandledRejection"),console.error(e.reason)},this.windowOnClick=function(e){console.error("windowOnClick")},this.windowOnMouseMove=function(e){console.log("navigator.userAgent: "+navigator.userAgent),console.log("mouse move (%s, %s)",e.x,e.y)},this.windowOnScroll=function(e){console.log("scroll event")},this.forceDevelopment=void 0,this.navLogin=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H.showLogin(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.history.back());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.navLogout=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H.showLogout(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.history.back());case 1:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.navRegister=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H.showRegister();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.navForget=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H.showForget();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.navPageRoutes=void 0,this.doneSysRoutes=!1,this.sysRoutes={"/login":this.navLogin,"/logout":this.navLogout,"/register":this.navRegister,"/forget":this.navForget},this.isWebNav=!1,this.backIcon=Object(o.jsx)("i",{className:"fa fa-angle-left"}),this.closeIcon=Object(o.jsx)("i",{className:"fa fa-close"}),this.pageWebNav=void 0,this.showPrivacyPage=function(){var e=t.getPrivacyContent();e?t.privacyPage(e):H.push(Object(o.jsx)(k.a,{header:"\u9690\u79c1\u653f\u7b56",children:Object(o.jsx)("div",{className:"p-3",children:"AppConfig \u4e2d\u6ca1\u6709\u5b9a\u4e49 privacy\u3002\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u5b57\u7b26\u4e32\uff0c\u6216\u8005url\u3002markdown\u683c\u5f0f"})}))},this.privacyPage=function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={__html:t},H.push(Object(o.jsx)(k.a,{header:"\u9690\u79c1\u653f\u7b56",children:Object(o.jsx)("div",{className:"p-3",dangerouslySetInnerHTML:n})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createLogin=L.a,this.login=void 0,this.reload=Object(d.a)(p.a.mark((function e(){var t,n,r,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Promise((function(e,t){setTimeout(e,100)})),!("serviceWorker"in navigator)){e.next=6;break}return e.next=4,Promise.race([t,navigator.serviceWorker.ready]);case 4:(n=e.sent)&&n.unregister();case 6:window.document.location.reload(),(r=window.plus)&&((a=r.webview)?a.reload&&a.reload(!0):(i=r.webView)&&i.reload&&i.reload(!0));case 9:case"end":return e.stop()}}),e)}))),this.resetAll=function(){t.push(Object(o.jsx)(F,{confirm:function(e){!0===e?(t.showReloadPage("\u5f7b\u5e95\u5347\u7ea7"),localStorage.clear()):t.pop()}}))};var n=E.b.lang,r=E.b.district;this.language=n,this.culture=r,this.testing=!1}return Object(v.a)(e,[{key:"set",value:function(e){this.navView=e}},{key:"onReceive",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.k.dispatch(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadUnitJson",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.unitJsonPath(),e.next=4,fetch(t,{});case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r.unit);case 11:return e.prev=11,e.t0=e.catch(0),this.local.unit.remove(),e.abrupt("return");case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPredefinedUnitName",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.getElementById("unit"))){e.next=3;break}return e.abrupt("return",t.innerText);case 3:if(t=document.getElementById("unit.json")){e.next=8;break}return e.next=7,this.loadUnitJson();case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,n=t.innerHTML,r=JSON.parse(n),e.abrupt("return",r.unit);case 14:return e.prev=14,e.t0=e.catch(8),e.next=18,this.loadUnitJson();case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadPredefinedUnit",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UNIT)){e.next=3;break}return e.abrupt("return",Number(t));case 3:if(void 0===(r=this.local.unit.get())){e.next=16;break}if(!0===U.e.isDevelopment){e.next=7;break}return e.abrupt("return",r.id);case 7:return e.next=9,this.getPredefinedUnitName();case 9:if(void 0!==(n=e.sent)){e.next=12;break}return e.abrupt("return");case 12:if(r.name!==n){e.next=14;break}return e.abrupt("return",r.id);case 14:e.next=21;break;case 16:return e.next=18,this.getPredefinedUnitName();case 18:if(void 0!==(n=e.sent)){e.next=21;break}return e.abrupt("return");case 21:return e.next=23,N.g.unitFromName(n);case 23:return void 0!==(a=e.sent)&&this.local.unit.set({id:a,name:n}),e.abrupt("return",a);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(e){this.navSettings=e}},{key:"unitJsonPath",value:function(){var e=document.location,t=e.origin,n=e.pathname;n=n.toLowerCase();var r,a=Object(s.a)(this.arrs);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(!0===n.endsWith(i)){n=n.substr(0,n.length-i.length);break}}}catch(c){a.e(c)}finally{a.f()}return!0!==n.endsWith("/")&&!0!==n.endsWith("\\")||(n=n.substr(0,n.length-1)),t+n+"/unit.json"}},{key:"init",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r,a,i,s,c,u,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.testing=U.e.testing,!0===this.forceDevelopment&&(U.e.isDevelopment=!0),e.next=4,N.h.start(this.testing);case 4:if(void 0!==(t=document.location.hash)&&t.length>0&&((n=Object(I.g)())<0&&(n=void 0),this.hashParam=t.substring(1,n)),r=N.h.url,a=N.h.ws,i=N.h.resHost,this.centerHost=r,this.resUrl=Object(N.m)(i),this.wsHost=a,Object(N.o)(r),void 0!==(s=this.local.guest.get())){e.next=16;break}return e.next=15,N.g.guest();case 15:s=e.sent;case 16:if(s){e.next=19;break}throw Error("guest can not be undefined");case 19:if(H.setGuest(s),c=Object(I.f)(),u=Object(I.j)(c),void 0===c||window===window.parent){e.next=27;break}if(void 0===u){e.next=27;break}return console.log("this.ws = wsBridge in sub frame"),window.self!==window.parent&&window.parent.postMessage({type:"sub-frame-started",hash:u.hash},"*"),e.abrupt("return");case 27:return e.next=29,this.loadPredefinedUnit();case 29:o=e.sent,u.predefinedUnit=o;case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.onerror=this.windowOnError,window.onunhandledrejection=this.windowOnUnhandledRejection,!0===D&&(document.onselectstart=function(){return!1},document.oncontextmenu=function(){return!1}),H.clear(),this.startWait(),void 0!==(t=this.local.user.get())){e.next=17;break}if(void 0===(n=this.navView.props.notLogined)){e.next=14;break}return e.next=12,n();case 12:e.next=16;break;case 14:return e.next=16,H.showLogin(void 0);case 16:return e.abrupt("return");case 17:return e.next=19,H.logined(t);case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error(e.t0);case 25:return e.prev=25,this.endWait(),e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[0,21,25,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"resolveRoute",value:function(){void 0!==this.navigo&&this.navigo.resolve()}},{key:"on",value:function(){return void 0===this.navigo&&(this.navigo=new R.a,!0!==this.isWebNav&&this.navigo.historyAPIUpdateMethod("replaceState")),this.navigo.on(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"navigateToLogin",value:function(){H.navigate("/login")}},{key:"openSysPage",value:function(e){var t=this.sysRoutes[e];void 0!==t?t(void 0):alert(e+" is not defined in sysRoutes")}},{key:"routeFromNavPage",value:function(e){var t=this;return function(n,r){e&&(t.isWebNav&&H.clear(),e(n))}}},{key:"onNavRoute",value:function(e){this.on(this.routeFromNavPage(e))}},{key:"onNavRoutes",value:function(e){!1===this.doneSysRoutes&&(this.doneSysRoutes=!0,this.internalOnNavRoutes(this.sysRoutes)),this.internalOnNavRoutes(e)}},{key:"internalOnNavRoutes",value:function(e){if(e){this.navPageRoutes=g.a.merge(this.navPageRoutes,e);var t={};for(var n in e){var r=e[n];t[n]=this.routeFromNavPage(r)}this.on(t)}}},{key:"setIsWebNav",value:function(){this.isWebNav=!0,this.backIcon=Object(o.jsx)("i",{className:"fa fa-arrow-left"}),this.closeIcon=Object(o.jsx)("i",{className:"fa fa-close"})}},{key:"navigate",value:function(e,t){if(this.navigo)return!0===this.testing&&(e+="#test"),this.navigo.navigate(e,t);alert('Is not in webnav state, cannot navigate to url "'+e+'"')}},{key:"go",value:function(e,t,n){void 0!==this.navigo?this.navigate(t,n):e()}},{key:"showAppView",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=this.navView.props.onLogined)){e.next=4;break}return H.push(Object(o.jsx)("div",{children:"NavView has no prop onLogined"})),e.abrupt("return");case 4:return H.clear(),e.next=7,n(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setGuest",value:function(e){this.local.guest.set(e),A(0,e.token)}},{key:"saveLocalUser",value:function(){this.local.user.set(this.user)}},{key:"loadMe",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.p.me();case 2:t=e.sent,this.user.icon=t.icon,this.user.nick=t.nick;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"internalLogined",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(N.j)(),console.log("logined: %s",JSON.stringify(t)),this.user=t,this.saveLocalUser(),A(t.id,t.token),H.clear(),void 0===n){e.next=10;break}n(t),e.next=16;break;case 10:if(!0!==this.isWebNav){e.next=14;break}this.navigate("/index"),e.next=16;break;case 14:return e.next=16,this.showAppView(r);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"logined",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalLogined(t,n,!1);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"userLogined",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalLogined(t,n,!0);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loginTop",value:function(e){return this.navSettings&&this.navSettings.loginTop||e}},{key:"privacyEntry",value:function(){if(this.getPrivacyContent())return Object(o.jsx)("div",{className:"text-center",children:Object(o.jsx)("button",{className:"btn btn-sm btn-link",onClick:this.showPrivacyPage,children:Object(o.jsx)("small",{className:"text-muted",children:"\u9690\u79c1\u653f\u7b56"})})})}},{key:"getPrivacyContent",value:function(){if(this.navSettings)return this.navSettings.privacy}},{key:"setCreateLogin",value:function(e){this.createLogin=e}},{key:"getLogin",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.login){e.next=2;break}return e.abrupt("return",this.login);case 2:return e.next=4,this.createLogin();case 4:return e.abrupt("return",this.login=e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showLogin",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLogin();case 2:e.sent.showLogin(t,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"showLogout",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLogin();case 2:e.sent.showLogout(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showRegister",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLogin();case 2:e.sent.showRegister();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showForget",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLogin();case 2:e.sent.showForget();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.f.unit=void 0,this.local.logoutClear(),this.user=void 0,Object(N.j)(),n=this.local.guest.get(),Object(N.n)(0,n&&n.token),this.clear(),void 0!==t){e.next=12;break}return e.next=10,H.start();case 10:e.next=14;break;case 12:return e.next=14,t();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLogin();case 2:e.sent.showChangePassword();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startWait",value:function(){var e;null===(e=this.navView)||void 0===e||e.startWait()}},{key:"endWait",value:function(){var e;null===(e=this.navView)||void 0===e||e.endWait()}},{key:"onError",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navView.onError(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navView.showUpgradeUq(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"show",value:function(e,t){this.navView.show(e,t)}},{key:"push",value:function(e,t){this.navView.push(e,t)}},{key:"replace",value:function(e,t){this.navView.replace(e,t)}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.navView.pop(e)}},{key:"topKey",value:function(){return this.navView.topKey()}},{key:"popTo",value:function(e){this.navView.popTo(e)}},{key:"clear",value:function(){var e;null===(e=this.navView)||void 0===e||e.clear()}},{key:"navBack",value:function(){this.navView.navBack()}},{key:"ceaseTop",value:function(e){this.navView.ceaseTop(e)}},{key:"removeCeased",value:function(){this.navView.removeCeased()}},{key:"back",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(n.length>0&&void 0!==n[0])||n[0],e.next=3,this.navView.back(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"regConfirmClose",value:function(e){this.navView.regConfirmClose(e)}},{key:"confirmBox",value:function(e){return this.navView.confirmBox(e)}},{key:"navToApp",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n,r,a,i){var s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){var u=!0===s.centerHost.includes("http://localhost:")?"sheet_debug":"sheet",l=void 0===i?Object(I.c)(t,n):Object(I.c)(t,n,u,[r,a,i]);console.log("navToApp: %s",JSON.stringify(l)),H.push(Object(o.jsxs)("article",{className:"app-container",children:[Object(o.jsx)("span",{id:l.hash,onClick:function(){return s.back()},children:Object(o.jsx)("i",{className:"fa fa-arrow-left"})}),Object(o.jsx)("iframe",{src:l.url,title:String(i)})]}),(function(){e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"navToSite",value:function(e){window.open(e)}},{key:"log",value:function(e){B.push(e)}},{key:"logMark",value:function(){var e=new Date;i=e.getTime(),B.push("log-mark: "+e.toTimeString())}},{key:"logStep",value:function(e){B.push(e+": "+((new Date).getTime()-i))}},{key:"showReloadPage",value:function(e){this.push(Object(o.jsx)(q,{message:e,seconds:-1}))}},{key:"checkVersion",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r,a,i,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.location.href,t+=(t.indexOf("?")>=0?"&":"?")+"_t_t_="+(new Date).getTime(),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.text();case 7:return r=e.sent,a=new DOMParser,i=a.parseFromString(r,"text/html"),s=i.getElementsByTagName("html"),c=s[0].getAttribute("data-version"),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"guest",get:function(){var e=this.local.guest;if(void 0===e)return 0;var t=e.get();return void 0===t?0:t.guest}},{key:"oem",get:function(){return this.navSettings&&this.navSettings.oem}},{key:"isMobile",get:function(){return D}},{key:"level",get:function(){return this.navView.level}},{key:"logs",get:function(){return B}}]),e}(),a=Object(u.a)(r.prototype,"user",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),r)},,,,function(e,t,n){"use strict";n.d(t,"h",(function(){return i.a})),n.d(t,"c",(function(){return s.a})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"e",(function(){return m.a})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return y})),n.d(t,"d",(function(){return x}));n(41);var r,a,i=n(37),s=n(62),c=n(1),u=n.n(c),o=n(2),l=n(14),h=n(12),p=n(3),d=n(4),f=n(10),v=(n(24),n(9)),b=(r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(p.a)(this,e),this.maxCount=void 0,this.arr=[],Object(h.a)(this,"dict",a,this),this.maxCount=t}return Object(d.a)(e,[{key:"loadIds",value:function(e){var t,n=[],r=Object(l.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(null!==a){var i=this.dict.get(a);void 0===i&&(n.push(a),i={id:a},this.dict.set(a,i))}}}catch(s){r.e(s)}finally{r.f()}this.loadId(n)}},{key:"get",value:function(e){if(void 0===e||null===e)return null;var t=this.dict.get(e);return void 0===t&&(this.dict.set(e,{id:e}),this.loadId([e]),t=this.dict.get(e)),t}},{key:"setItem",value:function(e,t){void 0===t?(this.dict.set(e,null),this.arr.push({id:e})):(this.dict.set(e,t),this.arr.push(t)),this.arr.length>this.maxCount&&(t=this.arr.shift(),this.dict.delete(t.id))}},{key:"loadId",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,i,s,c,o,h,p=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadIds(t);case 2:if(void 0!==(n=e.sent)){e.next=27;break}r=Object(l.a)(t),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=17;break}if(null!==(i=a.value)){e.next=11;break}return e.abrupt("continue",15);case 11:return e.next=13,this._loadId(i);case 13:s=e.sent,this.setItem(i,s);case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:e.next=29;break;case 27:c=Object(l.a)(t);try{for(h=function(){var e=o.value,t=n.find((function(t){return t.id===e}));p.setItem(e,t)},c.s();!(o=c.n()).done;)h()}catch(u){c.e(u)}finally{c.f()}case 29:case"end":return e.stop()}}),e,this,[[5,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),a=Object(f.a)(r.prototype,"dict",[v.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),r),m=(n(47),n(51)),j=function(){function e(){Object(p.a)(this,e),this.user=m.a.localDb.child("user"),this.guest=m.a.localDb.child("guest"),this.unit=m.a.localDb.child("unit"),this._user=void 0,this._guest=void 0,this._unit=void 0}return Object(d.a)(e,[{key:"readToMemory",value:function(){this._user=this.user.get(),this._guest=this.guest.get(),this._unit=this.unit.get()}},{key:"saveToLocalStorage",value:function(){this.user.set(this._user),this.guest.set(this._guest),this.unit.set(this._unit)}},{key:"logoutClear",value:function(){[this.user,this.unit].forEach((function(e){return e.remove()}))}}]),e}();function O(e,t){if(e&&t){var n=Object.keys(e);t=t.toLowerCase();for(var r=0,a=n;r<a.length;r++){var i=a[r];if(i.toLowerCase()===t)return e[i]}}}var y=/^[0-9]*$/,x=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return C}));var r,a,i,s,c,u=n(0),o=n(1),l=n.n(o),h=n(2),p=n(3),d=n(4),f=n(8),v=n.n(f),b=n(17),m=n.n(b),j=n(15),O=n(23),y=n(18),x=function(){function e(t){var n=this;Object(p.a)(this,e),this.res=void 0,this.x=void 0,this._t={},this.t=void 0,this.icon=void 0,this.label=void 0,this.isDev=O.e.isDevelopment,this.pageWebNav=void 0,this.receiveHandlerId=void 0,this.dispose=function(){y.k.unregisterReceiveHandler(n.receiveHandlerId),n.onDispose()},this.onMessageReceive=function(){var e=Object(h.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.onMessage(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._resolve_$=void 0,this.topPageKey=void 0,this.res=t||{},this.x=this.res.x||{},this.t=function(e){return n.internalT(e)||e}}return Object(d.a)(e,[{key:"user",get:function(){return j.nav.user}},{key:"isLogined",get:function(){var e=j.nav.user;return void 0!==e&&e.id>0}}]),Object(d.a)(e,[{key:"beforeInit",value:function(){}},{key:"afterInit",value:function(){}},{key:"init",value:function(){this.beforeInit(),this.pageWebNav=this.getPageWebNav(),this.afterInit()}},{key:"internalT",value:function(e){return this._t[e]}},{key:"getWebNav",value:function(){return this.webNav}},{key:"getPageWebNav",value:function(){}},{key:"navigate",value:function(e){j.nav.navigate(e)}},{key:"setRes",value:function(e){if(void 0!==e){var t=j.resOptions.$lang,n=j.resOptions.$district;if(m.a.merge(this._t,e),void 0!==t){var r=e[t];if(void 0!==r){m.a.merge(this._t,r);var a=r[n];void 0!==a&&m.a.merge(this._t,a)}}}}},{key:"onDispose",value:function(){}},{key:"isMe",value:function(e){if(null===e)return!1;var t=this.user.id;switch(typeof e){default:return!1;case"string":return Number(e)===t;case"number":return e===t;case"object":return e.id===t}}},{key:"openVPage",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new t(this),e.next=3,a.open(n,r);case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"replaceVPage",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new t(this),e.next=3,a.replaceOpen(n,r);case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"renderView",value:function(e,t){return new e(this).render(t)}},{key:"event",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onEvent(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEvent",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"msg",value:function(e){alert(e)}},{key:"errorPage",value:function(e,t){this.openPage(Object(u.jsx)(j.Page,{header:"App error!",children:Object(u.jsx)("pre",{children:"string"===typeof t?t:t.message})}))}},{key:"onMessage",value:function(e){}},{key:"beforeStart",value:function(){var e=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"registerReceiveHandler",value:function(){this.receiveHandlerId=y.k.registerReceiveHandler(this.onMessageReceive)}},{key:"start",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n,r,a,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerReceiveHandler(),e.next=3,this.beforeStart();case 3:if(!1!==e.sent){e.next=6;break}return e.abrupt("return");case 6:for(n=i.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=i[a];return e.next=9,this.internalStart.apply(this,[t].concat(r));case 9:return e.next=11,this.afterStart();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n,r,a,i=this,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=s.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=s[a];return void 0===this._resolve_$&&(this._resolve_$=[]),e.abrupt("return",new Promise(function(){var e=Object(h.a)(l.a.mark((function e(n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i._resolve_$.push(n),e.next=3,i.start.apply(i,[t].concat(r));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"vCall",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n){var r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===this._resolve_$&&(this._resolve_$=[]),e.abrupt("return",new Promise(function(){var e=Object(h.a)(l.a.mark((function e(a,i){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r._resolve_$.push(a),e.next=3,new t(r).open(n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"returnCall",value:function(e){if(void 0!==this._resolve_$){var t=this._resolve_$.pop();void 0!==t?t(e):alert("the Controller call already returned, or not called")}}},{key:"openPage",value:function(e,t){var n;void 0!==t&&(n=function(){t(void 0)}),j.nav.push(e,n)}},{key:"replacePage",value:function(e,t){j.nav.replace(e,t)}},{key:"backPage",value:function(){j.nav.back()}},{key:"closePage",value:function(e){j.nav.pop(e)}},{key:"ceasePage",value:function(e){j.nav.ceaseTop(e)}},{key:"go",value:function(e,t,n){j.nav.go(e,t,n)}},{key:"removeCeased",value:function(){j.nav.removeCeased()}},{key:"regConfirmClose",value:function(e){j.nav.regConfirmClose(e)}},{key:"startAction",value:function(){this.topPageKey=j.nav.topKey()}},{key:"SetTopKey",value:function(e){this.topPageKey=e}},{key:"popToTopPage",value:function(){j.nav.popTo(this.topPageKey)}},{key:"confirm",value:function(){var e=Object(h.a)(l.a.mark((function e(t){var n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(h.a)(l.a.mark((function e(r,a){var i,s,c,o,p,d,f,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.caption,s=t.message,c=t.ok,o=t.yes,p=t.no,d=t.classNames,f=function(e){n.closePage(),r(e)},v=[],void 0!==c&&v.push(Object(u.jsx)("button",{className:"btn btn-primary mr-3",onClick:function(){return f("ok")},children:c},"ok")),void 0!==o&&v.push(Object(u.jsx)("button",{className:"btn btn-success mr-3",onClick:function(){return f("yes")},children:o},"yes")),void 0!==p&&v.push(Object(u.jsx)("button",{className:"btn btn-outline-danger mr-3",onClick:function(){return f("no")},children:p},"no")),n.openPage(Object(u.jsx)(j.Page,{header:i||"\u8bf7\u786e\u8ba4",back:"close",children:Object(u.jsxs)("div",{className:d||"rounded bg-white m-5 p-3 border",children:[Object(u.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:s}),Object(u.jsx)("div",{className:"mt-3 d-flex align-items-center justify-content-center",children:v})]})})),j.nav.regConfirmClose(Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(void 0),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"webNav",get:function(){}},{key:"isWebNav",get:function(){return j.nav.isWebNav}},{key:"isCalling",get:function(){return void 0!==this._resolve_$}},{key:"TopKey",get:function(){return this.topPageKey}}]),e}(),g=function(){function e(t){Object(p.a)(this,e),this.controller=void 0,this.res=void 0,this.x=void 0,this.t=void 0,this.controller=t,this.res=t.res,this.x=t.x,this.t=t.t}return Object(d.a)(e,[{key:"navigate",value:function(e){this.controller.navigate(e)}},{key:"isMe",value:function(e){return this.controller.isMe(e)}},{key:"renderVm",value:function(e,t){return new e(this.controller).render(t)}},{key:"openVPage",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new t(this.controller).open(n,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"event",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.event(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"go",value:function(e,t,n){this.controller.go(e,t,n)}},{key:"vCall",value:function(){var e=Object(h.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.vCall(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"returnCall",value:function(e){this.controller.returnCall(e)}},{key:"renderUser",value:function(e,t,n){var r=function(e){var r=e.name,a=e.nick,i=e.icon;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(j.Image,{src:i,className:t||"w-1c h-1c mr-2"}),Object(u.jsx)("span",{className:n,children:a||r})]})};return Object(u.jsx)(j.UserView,{user:e,render:r})}},{key:"renderUserText",value:function(e){return Object(u.jsx)(j.UserView,{user:e,render:function(e){var t=e.name,n=e.nick;return Object(u.jsx)(u.Fragment,{children:n||t})}})}},{key:"renderMe",value:function(e,t){var n=this.controller.user;if(n)return this.renderUser(n.id,e,t)}},{key:"openPage",value:function(e,t,n){var r=typeof t;"object"===r||"undefined"===r?this.controller.openPage(f.createElement(e,t),n):this.controller.openPage(Object(u.jsxs)(j.Page,{header:"param type error",children:["View.openPage param must be object, but here is ",r]}),n)}},{key:"replacePage",value:function(e,t){this.controller.replacePage(f.createElement(e,t))}},{key:"openPageElement",value:function(e,t){this.controller.openPage(e,t)}},{key:"replacePageElement",value:function(e,t){this.controller.replacePage(e,t)}},{key:"backPage",value:function(){this.controller.backPage()}},{key:"closePage",value:function(e){this.controller.closePage(e)}},{key:"ceasePage",value:function(e){this.controller.ceasePage(e)}},{key:"removeCeased",value:function(){this.controller.removeCeased()}},{key:"regConfirmClose",value:function(e){this.controller.regConfirmClose(e)}},{key:"popToTopPage",value:function(){this.controller.popToTopPage()}},{key:"isDev",get:function(){return O.e.isDevelopment}},{key:"isWebNav",get:function(){return this.controller.isWebNav}}]),e}(),k=n(6),w=n(7),C=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).retOnClosePage=void 0,e}return Object(d.a)(n,[{key:"open",value:function(e,t){var n,r=this;this.init(e),void 0!==t&&(n=function(){return t(r.retOnClosePage)}),this.openPageElement(this.renderPage(),n)}},{key:"replaceOpen",value:function(e,t){var n,r=this;this.init(e),void 0!==t&&(n=function(){return t(r.retOnClosePage)}),this.replacePageElement(this.renderPage(),n)}},{key:"render",value:function(e){return this.init(e),this.renderPage()}},{key:"init",value:function(e){}},{key:"header",value:function(){return null}},{key:"right",value:function(){return null}},{key:"content",value:function(){return null}},{key:"footer",value:function(){return null}},{key:"logout",value:function(){return!1}},{key:"renderPage",value:function(){var e=this,t=this.header();t||(t=!1);var n=this.logout();return Object(u.jsx)(j.Page,{header:t,right:this.right(),footer:this.footer(),onScroll:function(t){return e.onPageScroll(t)},onScrollTop:function(t){return e.onPageScrollTop(t)},onScrollBottom:function(t){return e.onPageScrollBottom(t)},back:this.back,headerClassName:this.headerClassName,className:this.className,afterBack:function(){return e.afterBack()},tabsProps:this.tabsProps,logout:n,webNav:this.controller.pageWebNav,children:this.content()})}},{key:"onPageScroll",value:function(e){}},{key:"onPageScrollTop",value:function(){var e=Object(h.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onPageScrollBottom",value:function(){var e=Object(h.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterBack",value:function(){}},{key:"back",get:function(){return"back"}},{key:"headerClassName",get:function(){return null}},{key:"className",get:function(){return null}},{key:"tabsProps",get:function(){return null}}]),n}(g),A=n(12),N=n(13),S=n(10),P=(n(24),n(9)),I=n(11);r=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).props={label:"\u7f16\u8f91"},Object(A.a)(e,"value",a,Object(N.a)(e)),Object(A.a)(e,"newValue",i,Object(N.a)(e)),Object(A.a)(e,"isChanged",s,Object(N.a)(e)),Object(A.a)(e,"error",c,Object(N.a)(e)),e.onChange=function(t){e.newValue=t.target.value;var n=e.value;e.isChanged=e.newValue!==n},e.onBlur=function(t){e.verifyValue()},e.onFocus=function(){e.error=void 0},e.onEdit=function(){var t=e.props,n=t.label,r=t.maxLength,a=t.placeholder,i=t.onValueChange,s=function(){e.verifyValue(),void 0===e.error&&(e.value=e.newValue,e.closePage(),i&&i(e.value))},c=v.a.createElement(Object(I.a)((function(){return Object(u.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!e.isChanged,onClick:s,children:"\u4fdd\u5b58"})})));e.openPage(Object(u.jsx)(j.Page,{header:n,right:c,children:Object(u.jsxs)("div",{className:"m-3",children:[Object(u.jsx)("input",{type:"text",onChange:e.onChange,onKeyDown:function(e){13===e.keyCode&&s()},onBlur:e.onBlur,onFocus:e.onFocus,className:"form-control",defaultValue:e.value,maxLength:r}),v.a.createElement(Object(I.a)((function(){return a&&Object(u.jsx)("div",{className:"small muted m-2",children:a})}))),e.error&&Object(u.jsx)("div",{className:"text-danger",children:e.error})]})}))},e}return Object(d.a)(n,[{key:"internalStart",value:function(){var e=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(e,t){var n=this;return this.value=e,t&&m.a.merge(this.props,t),v.a.createElement(Object(I.a)((function(){return Object(u.jsxs)(u.Fragment,{children:[n.renderValue(),n.renderPencil()]})})))}},{key:"renderValue",value:function(){return Object(u.jsx)(u.Fragment,{children:this.value})}},{key:"renderPencil",value:function(){return Object(u.jsxs)("span",{onClick:this.onEdit,className:"cursor-pointer",children:["\xa0 ",Object(u.jsx)(j.FA,{className:"text-info",name:"pencil-square-o"})," \xa0"]})}},{key:"verifyValue",value:function(){}}]),n}(x),a=Object(S.a)(r.prototype,"value",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(S.a)(r.prototype,"newValue",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=Object(S.a)(r.prototype,"isChanged",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=Object(S.a)(r.prototype,"error",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null})},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,a=n(0),i=n(3),s=n(4),c=n(6),u=n(7),o=n(8),l=n(11),h=n(65),p=n(66),d=n(44),f=n(19),v=Object(l.a)(r=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;Object(i.a)(this,n),(r=t.call(this,e)).tabsView=void 0;var a=e.tabsProps;return a&&(r.tabsView=new p.a(a)),r}return Object(s.a)(n,[{key:"renderHeader",value:function(e){var t=this.props,n=t.back,r=t.header,a=t.right,i=t.headerClassName,s=t.afterBack,c=t.logout;if(!1!==r){var u=!1,o={back:n,center:r,right:a,logout:c,className:i,afterBack:s};if(void 0!==e){u=!0;var l=e.renderPageHeader;if(l)return l(o)}else u=!1;return Object(h.a)(o,u)}}},{key:"renderFooter",value:function(e){var t=this.props.footer;if(t){var n=Object(a.jsx)("footer",{children:t});return e?n:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("section",{className:"tv-page-footer",children:n}),n]})}}},{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){if(this.tabsView)return o.createElement(this.tabsView.content);var e,t=this.props,n=t.onScroll,r=t.onScrollTop,i=t.onScrollBottom,s=t.children,c=t.className,u=t.webNav;e=u||f.b.pageWebNav;var l=Object(a.jsxs)(a.Fragment,{children:[this.renderHeader(e),Object(a.jsx)("main",{children:s}),this.renderFooter(e)]});return e?Object(a.jsx)(d.b,{onScroll:n,onScrollTop:r,onScrollBottom:i,className:c,webNav:e,children:l}):Object(a.jsx)(d.a,{onScroll:n,onScrollTop:r,onScrollBottom:i,className:c,children:l})}}]),n}(o.Component))||r},function(e,t,n){"use strict";n.d(t,"i",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"h",(function(){return O})),n.d(t,"j",(function(){return N})),n.d(t,"g",(function(){return S})),n.d(t,"f",(function(){return P})),n.d(t,"c",(function(){return I})),n.d(t,"e",(function(){return _})),n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return q}));var r=n(1),a=n.n(r),i=n(2),s=n(3),c=n(4),u=n(17),o=n.n(u),l=n(15),h=n(37),p=n(32),d=n(39),f=n(42),v={};function b(){for(var e in v)v[e]=void 0}var m={},j=new(function(){function e(){Object(s.a)(this,e),this.hash=void 0,this._unit=void 0,this.page=void 0,this.param=void 0}return Object(c.a)(e,[{key:"unit",get:function(){return this._unit},set:function(e){this._unit=e}}]),e}());function O(){return window.self!==window.parent}function y(e){var t=e.data,n=e.source;Object(d.b)(n),function(e){var t=document.getElementById(e);void 0!==t&&(t.hidden=!0)}(t.hash);var r=o.a.clone(l.nav.user);r.type="init-sub-win",n.postMessage(r,"*")}function x(e){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("initSubWin: set nav.user",t),n=l.nav.user=t,Object(p.i)(n.id,n.token),e.next=5,l.nav.showAppView();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(a.a.mark((function e(t,n){var r,i,s,c,u,o,l,h,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=m[t])){e.next=3;break}return e.abrupt("return",{name:n,db:void 0,url:void 0,token:void 0});case 3:return i=r.unit,s=r.predefinedUnit,(i=i||s)||console.error("no unit defined in unit.json or in index.html, or not logined in",i),c=n.split("/"),u={unit:i,uqOwner:c[0],uqName:c[1],appOwner:c[2],appName:c[3]},console.log("uqTokenApi.uq onReceiveAppApiMessage",u),e.next=11,p.k.uq(u);case 11:return o=e.sent,l=o.db,h=o.url,d=o.token,e.abrupt("return",{name:n,db:l,url:h,token:d});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,c,u,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.apiName,r=t.db,i=t.url,s=t.urlTest,c=t.token,void 0!==(u=E[n])){e.next=4;break}throw new Error("error app api return");case 4:o=f.a.getUrlOrTest(r,i,s),console.log("onAppApiReturn(message:any): url="+i+", real="+o),u.resolve({name:n,db:r,url:o,token:c});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){if(e){var t=e.split("-"),n=t.length;if(n>0){var r=1;j.hash=t[r++],n>0&&(j.unit=Number(t[r++])),n>1&&(j.page=t[r++]),n>2&&(j.param=t.slice(r++))}}return j}function S(){var e=document.location.hash;if(void 0!==e&&e.length>0){var t=e.lastIndexOf("#tv-");return t<0&&(t=e.lastIndexOf("#tvdebug-")),t}return-1}function P(){var e=S();if(!(e<0))return document.location.hash.substring(e)}function I(e,t,n,r){for(var a;;){if(a=Object(h.a)(),void 0===m[a]){m[a]={hash:a,unit:t};break}}if(e+="#tv-"+a+"-"+t,void 0!==n&&(e+="-"+n,void 0!==r))for(var i=0;i<r.length;i++)e+="-"+r[i];return{url:e,hash:a}}function U(){var e=j.unit,t=j.predefinedUnit,n=e||t;if(void 0===n)throw new Error("no unit defined in unit.json or not logined in");return n}window.addEventListener("message",function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data,e.t0=r.type,e.next="sub-frame-started"===e.t0?4:"ws"===e.t0?6:"init-sub-win"===e.t0?9:"pop-app"===e.t0?12:"center-api"===e.t0?15:"center-api-return"===e.t0?18:"app-api"===e.t0?20:"app-api-return"===e.t0?25:30;break;case 4:return y(t),e.abrupt("break",34);case 6:return e.next=8,l.nav.onReceive(r.msg);case 8:return e.abrupt("break",34);case 9:return e.next=11,x(r);case 11:return e.abrupt("break",34);case 12:return window.console.log("///\\\\\\ pop-app"),l.nav.navBack(),e.abrupt("break",34);case 15:return e.next=17,L(t.source,r);case 17:return e.abrupt("break",34);case 18:return B(r),e.abrupt("break",34);case 20:return e.next=22,k(r.hash,r.apiName);case 22:return i=e.sent,t.source.postMessage({type:"app-api-return",apiName:r.apiName,db:i.db,url:i.url,token:i.token},"*"),e.abrupt("break",34);case 25:return console.log("app-api-return: %s",JSON.stringify(r)),console.log("await onAppApiReturn(message);"),e.next=29,C(r);case 29:return e.abrupt("break",34);case 30:if(!0!==(null===(n=r.source)||void 0===n?void 0:n.startsWith("react-devtools"))){e.next=32;break}return e.abrupt("break",34);case 32:return window.console.log("message: %s",JSON.stringify(r)),e.abrupt("break",34);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var E={};function _(e,t,n,r,a){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(a.a.mark((function e(t,n,r,s,c){var u,o,l,h,d,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O()){e.next=12;break}return u=U(),e.next=4,p.k.uq({unit:u,uqOwner:n,uqName:r,appOwner:s,appName:c});case 4:return void 0===(o=e.sent).token&&(o.token=p.f),l=o.db,h=o.url,d=o.urlTest,b=f.a.getUrlOrTest(l,h,d),console.log("realUrl: %s",b),o.url=b,v[t]=o,e.abrupt("return",o);case 12:if(console.log("**** before buildAppUq ****",j),void 0===E[t]){e.next=16;break}return e.abrupt("return");case 16:return e.abrupt("return",new Promise((function(e,n){E[t]={resolve:function(){var n=Object(i.a)(a.a.mark((function n(r){var i,s,c,u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r;case 2:i=n.sent,s=i.db,c=i.url,u=i.token,v[t]={name:t,db:s,url:c,token:u},E[t]=void 0,console.log("**** after buildAppUq ****",j),e();case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),reject:n},(window.opener||window.parent).postMessage({type:"app-api",apiName:t,hash:j.hash},"*")})));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return v[e]}var V={};function q(e,t,n){return F.apply(this,arguments)}function F(){return(F=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("bridgeCenterApi: url=%s, method=%s",t,n),e.next=3,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(i,s){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(h.a)(),void 0!==V[c]){e.next=5;break}return V[c]={id:c,resolve:i,reject:s},e.abrupt("break",7);case 5:e.next=0;break;case 7:(window.opener||window.parent).postMessage({type:"center-api",callId:c,url:t,method:n,body:r},"*");case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return D.apply(this,arguments)}function D(){return(D=Object(i.a)(a.a.mark((function e(t,n){var r,i,s,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.callId,i=n.url,s=n.method,c=n.body,e.next=3,p.e.directCall(i,s,c);case 3:u=e.sent,t.postMessage({type:"center-api-return",callId:r,result:u},"*");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=e.callId,n=e.result,r=V[t];void 0!==r&&(V[t]=void 0,r.resolve(n))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(1),a=n.n(r),i=n(2),s=n(14),c=n(3),u=n(4),o=n(23),l="\n",h="\\ntbfvr",p=h.charCodeAt(0),d=h.charCodeAt(1),f=h.charCodeAt(2),v=h.charCodeAt(3),b=h.charCodeAt(4),m=h.charCodeAt(5),j=h.charCodeAt(6),O="\n\t\b\f\v\r",y=O.charCodeAt(0),x=O.charCodeAt(1),g=O.charCodeAt(2),k=O.charCodeAt(3),w=O.charCodeAt(4),C=O.charCodeAt(5),A=function(){function e(t,n,r){Object(c.a)(this,e),this.jName=void 0,this.schema=void 0,this.ver=0,this.sys=void 0,this.uq=void 0,this.name=void 0,this.typeId=void 0,this.cache=void 0,this.uqApi=void 0,this.fields=void 0,this.arrFields=void 0,this.returns=void 0,this.face=void 0,this.fieldMaps={},this.uq=t,this.name=n,this.typeId=r,this.sys=this.name.indexOf("$")>=0,this.cache=this.uq.localMap.item(this.name),this.uqApi=this.uq.uqApi}return Object(u.a)(e,[{key:"sName",get:function(){return this.jName||this.name}}]),Object(u.a)(e,[{key:"fieldMap",value:function(e){void 0===e&&(e="$");var t=this.fieldMaps[e];if(void 0===t){var n;if("$"===e)n=this.fields;else if(void 0!==this.arrFields){var r=this.arrFields.find((function(t){return t.name===e}));void 0!==r&&(n=r.fields)}else if(void 0!==this.returns){var a=this.returns.find((function(t){return t.name===e}));void 0!==a&&(n=a.fields)}if(void 0===n)return{};t={};var i,c=Object(s.a)(n);try{for(c.s();!(i=c.n()).done;){var u=i.value;t[u.name]=u}}catch(o){c.e(o)}finally{c.f()}this.fieldMaps[e]=t}return t}},{key:"loadSchema",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.schema){e.next=2;break}return e.abrupt("return");case 2:if(t=this.cache.get()){e.next=7;break}return e.next=6,this.uq.loadEntitySchema(this.name);case 6:t=e.sent;case 7:return this.buildSchema(t),e.next=10,this.loadValues();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildSchema",value:function(e){this.setSchema(e),this.buildFieldsTuid()}},{key:"loadValues",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"clearSchema",value:function(){this.schema=void 0}},{key:"setSchema",value:function(e){if(void 0!==e){var t=e.name,n=e.version;this.ver=n||0,this.setJName(t),this.cache.set(e),this.schema=e,this.buildFieldsTuid()}}},{key:"setJName",value:function(e){e!==this.name&&(this.jName=e)}},{key:"buildFieldsTuid",value:function(){var e=this.schema,t=e.fields,n=e.arrs,r=e.returns;this.uq.buildFieldTuid(this.fields=t),this.uq.buildArrFieldsTuid(this.arrFields=n,t),this.uq.buildArrFieldsTuid(this.returns=r,t)}},{key:"schemaStringify",value:function(){return JSON.stringify(this.schema,(function(e,t){if("_tuid"!==e)return t}),4)}},{key:"tuidFromName",value:function(e,t){if(void 0!==this.schema){var n=this.schema,r=n.fields,a=n.arrs,i=this.uq,s=e.toLowerCase();if(void 0===t)return o(s,r);if(void 0!==a){var c=t.toLowerCase(),u=a.find((function(e){return e.name===c}));if(void 0!==u)return o(s,u.fields)}}function o(e,t){if(void 0!==t){var n=t.find((function(t){return t.name===e}));if(void 0!==n)return i.getTuid(n.tuid)}}}},{key:"buildParams",value:function(e){var t={},n=this.fields;void 0!==n&&this.buildFieldsParams(t,n,e);var r=this.arrFields;if(void 0!==r){var a,i=Object(s.a)(r);try{for(i.s();!(a=i.n()).done;){var c=a.value,u=c.name,o=c.fields;if(void 0!==e[u]){var l=[];t[u]=l;var h,p=Object(s.a)(e);try{for(p.s();!(h=p.n()).done;){var d=h.value,f={};this.buildFieldsParams(f,o,d),l.push(f)}}catch(v){p.e(v)}finally{p.f()}}}}catch(v){i.e(v)}finally{i.f()}}return t}},{key:"buildFieldsParams",value:function(e,t,n){var r,a=Object(s.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=i.name,u=i.type,o=n[c],l=void 0;switch(u){case"datetime":l=this.buildDateTimeParam(o);break;case"date":l=o instanceof Date?"".concat(o.getFullYear(),"-").concat(o.getMonth()+1,"-").concat(o.getDate()):o;break;default:switch(typeof o){default:l=o;break;case"object":if(o instanceof Date){l=o;break}var h=i._tuid;l=void 0===h?o.id:h.getIdFromObj(o)}}e[c]=l}}catch(p){a.e(p)}finally{a.f()}}},{key:"buildDateTimeParam",value:function(e){var t;switch(typeof e){default:throw new Error("escape datetime field in pack data error: value="+e);case"undefined":return;case"object":t=e;break;case"string":case"number":t=new Date(e)}return Math.floor(t.getTime()/1e3)}},{key:"buildDateParam",value:function(e){var t;switch(typeof e){default:throw new Error("escape datetime field in pack data error: value="+e);case"undefined":return"";case"string":return e;case"object":t=e;break;case"number":t=new Date(e)}var n=t.toISOString(),r=n.indexOf("T");return r>0?n.substr(0,r):n}},{key:"pack",value:function(e){var t=[],n=this.fields;void 0!==n&&this.packRow(t,n,e);var r=this.arrFields;if(void 0!==r){var a,i=Object(s.a)(r);try{for(i.s();!(a=i.n()).done;){var c=a.value,u=c.name,l=c.fields,h=Object(o.f)(e,u);this.packArr(t,l,h)}}catch(p){i.e(p)}finally{i.f()}}return t.join("")}},{key:"escape",value:function(e,t){var n=e[t.name];switch(t.type){case"datetime":return this.buildDateTimeParam(n);default:switch(typeof n){default:return n;case"object":var r=t._tuid;return void 0===r?n.id:r.getIdFromObj(n);case"string":for(var a=n.length,i="",s=0,c=0;c<a;c++){var u=void 0;switch(n.charCodeAt(c)){default:continue;case p:u="\\\\";break;case x:u="\\t";break;case y:u="\\n";break;case k:u="\\f";break;case w:u="\\v";break;case g:u="\\b";break;case C:u="\\r"}i+=n.substring(s,c)+u,s=c+1}return i+n.substring(s);case"undefined":return""}}}},{key:"packRow",value:function(e,t,n){var r=t.length;if(0!==r){var a="";a+=this.escape(n,t[0]);for(var i=1;i<r;i++){var s=t[i];a+="\t"+this.escape(n,s)}e.push(a+l)}}},{key:"packArr",value:function(e,t,n){if(void 0!==n)if(0===n.length)e.push(l);else{var r,a=Object(s.a)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.packRow(e,t,i)}}catch(c){a.e(c)}finally{a.f()}}else e.push(l);e.push(l)}},{key:"cacheFieldsInValue",value:function(e,t){var n,r=Object(s.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=a.name,c=a._tuid;if(void 0!==c){var u=e[i];e[i]=c.boxId(u)}}}catch(o){r.e(o)}finally{r.f()}}},{key:"unpackTuidIdsOfFields",value:function(e,t){if(void 0===t)return e;var n,r=[],a=Object(s.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i)for(var c=i.length,u=0;u<c;){if(10===i.charCodeAt(u)){++u;break}var o={};u=this.unpackRow(o,t,i,u),r.push(o)}}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"unpackSheet",value:function(e){var t={},n=this.fields,r=0;void 0!==n&&(r=this.unpackRow(t,n,e,r));var a=this.arrFields;if(void 0!==a){var i,c=Object(s.a)(a);try{for(c.s();!(i=c.n()).done;){var u=i.value;r=this.unpackArr(t,u,e,r)}}catch(o){c.e(o)}finally{c.f()}}return t}},{key:"unpackReturns",value:function(e,t){var n={},r=0,a=t||this.returns;if(void 0!==a){var i,c=Object(s.a)(a);try{for(c.s();!(i=c.n()).done;){var u=i.value;r=this.unpackArr(n,u,e,r)}}catch(o){c.e(o)}finally{c.f()}}return n}},{key:"unpackRow",value:function(e,t,n,r){for(var a=0,i=0,s=r,c=0,u=n.length,o=t.length;r<u;r++)if(a=i,9===(i=n.charCodeAt(r))){var l=t[c],h=l.name;if(8!==a){if(r>s){var p=n.substring(s,r);e[h]=this.to(e,p,l)}}else e[h]=null;if(s=r+1,++c>=o)return(r=n.indexOf("\n",s))>=0?++r:r=u,r}else if(10===i){var d=t[c],f=d.name;if(8!==a){if(r>s){var v=n.substring(s,r);e[f]=this.to(e,v,d)}}else e[f]=null;return++c,++r}var b=t[c],m=b.name;if(8!==a){var j=n.substring(s);e[m]=this.to(e,j,b)}return u}},{key:"to",value:function(e,t,n){switch(n.type){default:return t;case"text":case"char":return this.reverseNT(t);case"datetime":case"time":case"timestamp":var r=Number(t);return!0===isNaN(r)?new Date(t):new Date(1e3*r);case"date":var a=t.split("-");return new Date(Number(a[0]),Number(a[1])-1,Number(a[2]));case"tinyint":case"smallint":case"int":case"bigint":case"dec":return Number(t);case"id":var i=Number(t),s=n._tuid;return void 0===s?i:s.boxId(i)}}},{key:"reverseNT",value:function(e){if(void 0!==e&&null!==e){for(var t=e.length,n="",r=0,a=0;a<t;a++){if(e.charCodeAt(a)===p){if(a===t-1)break;var i=void 0;switch(e.charCodeAt(a+1)){default:continue;case p:i="\\";break;case d:i="\n";break;case f:i="\t";break;case v:i="\b";break;case b:i="\f";break;case m:i="\v";break;case j:i="\r"}n+=e.substring(r,a)+i,r=a+2,++a}}return n+=e.substring(r,t)}}},{key:"unpackArr",value:function(e,t,n,r){for(var a=r,i=[],s=n.length,c=t.name,u=t.fields;r<s;){var o=n.charCodeAt(r);if(10===o){if(r===a){if(10!==(o=n.charCodeAt(r)))throw new Error("upackArr: arr\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f10\uff0c\u5219\u5fc5\u987b\u7d27\u8ddf\u4e00\u4e2a10\uff0c\u8868\u793a\u6574\u4e2aarr\u7684\u7ed3\u675f");++r}++r;break}var l={};i.push(l),r=this.unpackRow(l,u,n,r)}return e[c]=i,r}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r,a,i,s=n(14),c=n(0),u=n(1),o=n.n(u),l=n(2),h=n(12),p=n(3),d=n(4),f=n(10),v=(n(24),n(8),n(19)),b=n(9),m=n(40),j=(r=function(){function e(t,n,r,s,c){Object(p.a)(this,e),this.edit=void 0,this.name=void 0,this._itemSchema=void 0,this._uiItem=void 0,this.value=void 0,this.label=void 0,Object(h.a)(this,"error",a,this),Object(h.a)(this,"isChanged",i,this),this.newValue=void 0,this.edit=t,this._itemSchema=n,this._uiItem=r,this.value=c;var u=n.name;this.name=u,this.label=s}return Object(d.a)(e,[{key:"itemSchema",get:function(){return this._itemSchema}},{key:"uiItem",get:function(){return this._uiItem}},{key:"editInRow",get:function(){return!1}}]),Object(d.a)(e,[{key:"init",value:function(){}},{key:"start",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalStart();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"end",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalEnd();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){var e,t,n,r=this,a=this._itemSchema,i=a.name,s=a.type,u=this._uiItem;if(void 0===u)t=i;else{t=u.label,n=u.labelHide;var o=u.Templet;if(void 0!==o)"function"===typeof o?void 0!==this.value&&(e=o(this.value)):e={templet:o};else if(void 0!==this.value)switch(u.widget){case"radio":case"select":var l=u.list;e=Object(c.jsx)("b",{children:l.find((function(e){return e.value===r.value})).title});break;case"id":e=Object(c.jsxs)("b",{children:["no templet for ",i,"=",this.value]})}}if(void 0===e)switch(s){default:e=this.value?Object(c.jsx)("b",{children:this.value}):Object(c.jsxs)("small",{className:"text-muted",children:["[",!0===n?t:"\u65e0","]"]});break;case"image":e=Object(c.jsx)(m.a,{className:"w-4c h-4c",src:this.value})}return e}},{key:"internalEnd",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.b.pop();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"verifyValue",value:function(){if(void 0!==this.uiItem){var e=this.uiItem.rules;if(void 0!==e){var t=this.newValue;if(Array.isArray(e)){var n,r=Object(s.a)(e);try{for(r.s();!(n=r.n()).done;){var a=i(n.value);if(void 0!==a){this.error=a;break}}}catch(c){r.e(c)}finally{r.f()}}else this.error=i(e)}}function i(e,n){var r=e(t);if(void 0!==r)return"object"!==typeof r?r:JSON.stringify(r)}}}]),e}(),a=Object(f.a)(r.prototype,"error",[b.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(f.a)(r.prototype,"isChanged",[b.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r)},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return d}));var r=n(1),a=n.n(r),i=n(2),s=n(3),c=n(4),u=n(6),o=n(7),l=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(s.a)(this,n),(a=t.call(this,r,i)).tries=void 0,a._entity=void 0,a.tries=0,a._entity=e,a}return Object(c.a)(n,[{key:"request",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.loadSchema();case 2:return e.next=4,this.innerRequest();case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"innerCall",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.uqApi.xcall(this);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"innerRequest",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.innerCall();case 2:if(t=e.sent,n=t.$uq,r=t.$modify,i=t.res,this.entity.uq.pullModify(r),void 0!==n){e.next=8;break}return s=this.xresult(i),e.abrupt("return",s);case 8:return e.next=10,this.retry(n);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xresult",value:function(e){return e}},{key:"retry",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(++this.tries,!(this.tries>5)){e.next=3;break}throw new Error("can not get right uq response schema, 5 tries");case 3:return this.rebuildSchema(t),e.next=6,this.innerRequest();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rebuildSchema",value:function(e){var t=e.uq,n=e.entity;void 0!==t&&this.entity.uq.buildEntities(t),void 0!==n&&this.entity.setSchema(n)}},{key:"entity",get:function(){return this._entity}},{key:"headers",get:function(){var e=this.entity,t=e.ver,n=e.uq.uqVersion;return{uq:"".concat(n),en:"".concat(t)}}}]),n}(n(18).a),h=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"entity",get:function(){return this._entity}}]),n}(l),p=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"xresult",value:function(e){return this.entity.unpackReturns(e)}},{key:"buildParams",value:function(){return this.entity.buildParams(this.params)}},{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"query/".concat(this.entity.name)}}]),n}(l),d=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"buildParams",value:function(){var e,t=this.params,n=t.pageStart,r=t.pageSize,a=t.params;return(e=void 0===a?{key:""}:this.entity.buildParams(a)).$pageStart=n,e.$pageSize=r,e}},{key:"xresult",value:function(e){return this.entity.unpackReturns(e)}},{key:"params",get:function(){return this._params}},{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"query-page/".concat(this.entity.name)}}]),n}(l)},function(e,t,n){"use strict";n.d(t,"h",(function(){return A})),n.d(t,"d",(function(){return N})),n.d(t,"c",(function(){return I})),n.d(t,"j",(function(){return U})),n.d(t,"f",(function(){return R})),n.d(t,"i",(function(){return V})),n.d(t,"a",(function(){return q})),n.d(t,"k",(function(){return L})),n.d(t,"e",(function(){return D})),n.d(t,"b",(function(){return B})),n.d(t,"g",(function(){return M})),n.d(t,"l",(function(){return H}));var r=n(14),a=n(1),i=n.n(a),s=n(2),c=n(3),u=n(4),o=n(6),l=n(7),h=n(17),p=n.n(h),d=n(28),f=n(19),v=n(23),b=["POST","PUT"],m=function(){function e(t,n,r){var a=this;Object(c.a)(this,e),this.timeout=void 0,this.ui=void 0,this.hostUrl=void 0,this.apiToken=void 0,this.startWait=function(e){!0===e&&void 0!==a.ui&&a.ui.startWait()},this.endWait=function(e,t){void 0!==a.ui&&a.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.ui){e.next=3;break}return e.next=3,a.ui.showError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.hostUrl=t,this.apiToken=n,this.ui=r,this.timeout=!0===v.e.isDevelopment?5e5:5e4}return Object(u.a)(e,[{key:"used",value:function(){this.post("",{})}},{key:"xcall",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a,s,c,u,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.buildOptions(),a=n.headers,s=n.path,c=n.method,void 0!==a)for(o in u=r.headers,a)u[o]=encodeURI(a[o]);return r.method=c,l=n.buildParams(),b.indexOf(c)>=0&&void 0!==l&&(r.body=JSON.stringify(l)),e.next=8,this.innerFetch(t+s,r,n.waiting);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"innerFetchResult",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.innerFetch(t,n,r);case 2:return a=e.sent,e.abrupt("return",a.res);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a,s,c,u,o,l,h,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:void 0,a=p.length>2?p[2]:void 0,!n){e.next=26;break}if(!((s=Object.keys(n)).length>0)){e.next=26;break}c="?",u=Object(r.a)(s),e.prev=7,u.s();case 9:if((o=u.n()).done){e.next=18;break}if(l=o.value,void 0!==n[l]){e.next=14;break}return e.abrupt("continue",16);case 14:t+=c+l+"="+n[l],c="&";case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),u.e(e.t0);case 23:return e.prev=23,u.f(),e.finish(23);case 26:return(h=this.buildOptions()).method="GET",e.next=30,this.innerFetchResult(t,h,a);case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this,[[7,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method="POST",a.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,a,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method="PUT",a.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,a,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method="DELETE",a.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,a,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(t,n,r,a,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,a,c){var u,o,l,h,p,d,b,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e,t){switch(typeof e){case"string":void 0!==t&&(e+=" "+t);break;case"object":for(var r={ex:t},i=0,s=Object.keys(e);i<s.length;i++){var l=s[i];r[l]=e[l]}e=r}return{channel:u,url:o,options:n,resolve:a,reject:c,error:e}},u=this,this.startWait(r),o=t,e.prev=4,console.log("%s-%s %s",n.method,o,n.body||""),h=Date.now(),p=v.e.setTimeout(void 0,(function(){u.endWait(t+" timeout endWait: "+(Date.now()-h)+"ms",c)}),this.timeout),e.next=10,fetch(encodeURI(o),n);case 10:if(!1!==(d=e.sent).ok){e.next=17;break}throw v.e.clearTimeout(p),console.log("ok false endWait"),u.endWait(),console.log("call error %s",d.statusText),d.statusText;case 17:if(!((b=d.headers.get("content-type"))&&b.indexOf("json")>=0)){e.next=22;break}return e.abrupt("return",d.json().then(function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.e.clearTimeout(p),u.endWait(),!0!==t.ok){e.next=5;break}return"object"!==typeof t||Array.isArray(t),e.abrupt("return",a(t));case 5:if(void 0!==(n=t.error)){e.next=11;break}return e.next=9,u.showError(l("not valid tonva json"));case 9:e.next=14;break;case 11:return e.next=13,u.showError(l(n,"retJson.error"));case 13:c(n);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.showError(l(t,"catch res.json()"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:return e.next=24,d.text();case 24:m=e.sent,v.e.clearTimeout(p),console.log("text endWait"),u.endWait(),a(m);case 29:e.next=40;break;case 31:if(e.prev=31,e.t0=e.catch(4),this.endWait(t,c),"string"!==typeof e.t0){e.next=39;break}if(!0!==e.t0.toLowerCase().startsWith("unauthorized")){e.next=39;break}return f.b.logout(),e.abrupt("return");case 39:console.error("fecth error (no nav.showError): "+t);case 40:case 41:case"end":return e.stop()}}),e,this,[[4,31]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}())},{key:"callFetch",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a,c=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.buildOptions()).method=n,a.body=r,e.next=5,new Promise(function(){var e=Object(s.a)(i.a.mark((function e(n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.fetch(t,a,!0,n,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"buildOptions",value:function(){return{headers:this.buildHeaders(),method:void 0,body:void 0}}},{key:"buildHeaders",value:function(){var e=f.b.language,t=f.b.culture,n={"Content-Type":"application/json;charset=UTF-8"},r=e;return t&&(r+="-"+t),n["Accept-Language"]=r,this.apiToken&&(n.Authorization=this.apiToken),n}}]),e}(),j=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"innerFetch",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a,c=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.hostUrl+t,void 0!==this.apiToken||!Object(d.h)()){e.next=5;break}return e.next=4,Object(d.d)(a,n.method,n.body);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,new Promise(function(){var e=Object(s.a)(i.a.mark((function e(t,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.fetch(a,n,r,t,s);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(m),O=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"innerFetch",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){var a,c=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.hostUrl+t,e.next=3,new Promise(function(){var e=Object(s.a)(i.a.mark((function e(t,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.fetch(a,n,r,t,s);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(m),y=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"startWait",value:function(){f.b.startWait()}},{key:"endWait",value:function(){f.b.endWait()}},{key:"showError",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.b.endWait(),e.next=3,f.b.onError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.showUpgradeUq(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),x=n(55),g=n(42),k=n(41),w={},C={};function A(){w={},C={},S={},Object(d.i)()}var N=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e,r,a,i,s,u,o){var l;return Object(c.a)(this,n),(l=t.call(this,e,o)).access=void 0,l.appOwner=void 0,l.appName=void 0,l.uqOwner=void 0,l.uqName=void 0,l.uq=void 0,l.appOwner=r,l.appName=a,s&&(l.uqOwner=i,l.uqName=s,l.uq=i+"/"+s),l.access=u,l.showWaiting=o,l}return Object(u.a)(n,[{key:"init",value:function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)(this.uq,this.uqOwner,this.uqName,this.appOwner,this.appName);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHttpChannel",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,c,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this.showWaiting||void 0===this.showWaiting?(t=w,n=new y):t=C,void 0===(a=t[this.uq])){e.next=7;break}if(!1!==Array.isArray(a)){e.next=5;break}return e.abrupt("return",a);case 5:e.next=8;break;case 7:a=t[this.uq]=[];case 8:return c=a,e.abrupt("return",new Promise(function(){var e=Object(s.a)(i.a.mark((function e(s,o){var l,h,p,f,v,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.push({resolve:s,reject:o}),1===c.length){e.next=3;break}return e.abrupt("return");case 3:if(l=Object(d.b)(u.uq)){e.next=8;break}return e.next=7,u.init();case 7:l=Object(d.b)(u.uq);case 8:p=(h=l).url,f=h.token,u.token=f,a=new O(p,f,n),t[u.uq]=a,v=Object(r.a)(c);try{for(v.s();!(b=v.n()).done;)b.value.resolve(a)}catch(i){v.e(i)}finally{v.f()}case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAccess",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0===this.access?"":this.access.join("|"),e.next=3,this.get("access",{acc:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allSchemas",value:function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("all-schemas");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"schema",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("schema/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queueModify",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("queue-modify",{start:t,page:n,entities:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getRoles",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,a,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("get-roles");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:n=t.split("|"),a=[],s=Object(r.a)(n),e.prev=8,s.s();case 10:if((c=s.n()).done){e.next=18;break}if(u=(u=c.value).trim()){e.next=15;break}return e.abrupt("continue",16);case 15:a.push(u);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:if(0!==a.length){e.next=28;break}return e.abrupt("return",null);case 28:return e.abrupt("return",a);case 29:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAllRoleUsers",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("get-all-role-users");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserRoles",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("set-user-roles",{theUser:t,roles:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteUserRoles",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("delete-user-roles",{theUser:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.a),S={};var P,I=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,"tv/",void 0,void 0,void 0,void 0,void 0,!0)).unitId=void 0,r.unitId=e,r}return Object(u.a)(n,[{key:"getHttpChannel",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=S[this.unitId])){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,this.buildChannel();case 5:return e.abrupt("return",S[this.unitId]=e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildChannel",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,r,a,s,c,u,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new y,n=new B("tv/",void 0),e.next=4,n.unitxUq(this.unitId);case 4:return r=e.sent,a=r.token,s=r.db,c=r.url,u=r.urlTest,o=g.a.getUrlOrTest(s,c,u),this.token=a,e.abrupt("return",new O(o,a,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(N);function U(e){console.log("setCenterUrl %s",e),P=e,_=void 0,E=void 0}var E,_,R=void 0,T=0;function V(e,t){T=e,R=t,console.log("setCenterToken %s",t),_=void 0,E=void 0}var q=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getHttpChannel",value:function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0===this.showWaiting||void 0===this.showWaiting?void 0!==E?E:E=new j(P,R,new y):void 0!==_?_:_=new j(P,R));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.a),F="uqTokens",L=new(function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).localMap=v.e.localDb.map(F),e}return Object(u.a)(n,[{key:"uq",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,s,c,u,o,l,h,d,f,v,b,m,j,O,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uqOwner,r=t.uqName,a=n+"/"+r,s=this.localMap.child(a),e.prev=3,void 0!==(c=s.get())&&(o=(u=c).unit,l=u.user,o===t.unit&&l===T||(s.remove(),c=void 0)),h=Math.floor(Date.now()/1e3),void 0===c){e.next=11;break}if(f=(d=c).tick,!(void 0!==(v=d.value)&&h-f<86400)){e.next=11;break}return e.abrupt("return",p.a.clone(v));case 11:return(b=p.a.clone(t)).testing=g.a.testing,e.next=15,this.get("app-uq",b);case 15:if(void 0!==(m=e.sent)){e.next=20;break}throw j=t.unit,O=t.uqOwner,y=t.uqName,"center get app-uq(unit=".concat(j,", '").concat(O,"/").concat(y,"') - not exists or no unit-service");case 20:return c={unit:t.unit,user:T,tick:h,value:m},s.set(c),e.abrupt("return",p.a.clone(m));case 25:throw e.prev=25,e.t0=e.catch(3),s.remove(),e.t0;case 29:case"end":return e.stop()}}),e,this,[[3,25]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(q))("tv/tie/",void 0),D=new(function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"directCall",value:function(e,t,n){return this.call(e,t,n)}}]),n}(q))("",void 0),B=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"uqs",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/app-uqs",{appOwner:t,appName:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uqsPure",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/app-uqs",{appOwner:t,appName:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unitxUq",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/unitx-uq",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("tie/change-password",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(q);function M(e,t){return z.apply(this,arguments)}function z(){return(z=Object(s.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new B("tv/",void 0),e.next=3,r.uqs(t,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=new(function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"login",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/login",t);case 2:n=e.sent,e.t0=typeof n,e.next="string"===e.t0?7:"object"===e.t0?8:6;break;case 6:return e.abrupt("return");case 7:return e.abrupt("return",Object(k.b)(n));case 8:return r=n.token,a=Object(k.b)(r),s=n.nick,c=n.icon,s&&(a.nick=s),c&&(a.icon=c),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendVerify",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/set-verify",{account:t,type:n,oem:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"checkVerify",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/check-verify",{account:t,verify:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isExists",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/is-exists",{account:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/reset-password",{account:t,password:n,verify:r,type:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"userSetProp",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("tie/user-set-prop",{prop:t,value:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"me",value:function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/me");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"user",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromKey",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-from-key",{key:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(q))("tv/",void 0)},function(e,t,n){"use strict";n(68),n(29),n(45),n(38),n(69);var r=n(52);n.o(r,"Badge")&&n.d(t,"Badge",(function(){return r.Badge})),n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"Controller")&&n.d(t,"Controller",(function(){return r.Controller})),n.o(r,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return r.DropdownActions})),n.o(r,"EasyDate")&&n.d(t,"EasyDate",(function(){return r.EasyDate})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"Media")&&n.d(t,"Media",(function(){return r.Media})),n.o(r,"Muted")&&n.d(t,"Muted",(function(){return r.Muted})),n.o(r,"NavView")&&n.d(t,"NavView",(function(){return r.NavView})),n.o(r,"Page")&&n.d(t,"Page",(function(){return r.Page})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"UQsMan")&&n.d(t,"UQsMan",(function(){return r.UQsMan})),n.o(r,"VPage")&&n.d(t,"VPage",(function(){return r.VPage})),n.o(r,"View")&&n.d(t,"View",(function(){return r.View})),n.o(r,"centerApi")&&n.d(t,"centerApi",(function(){return r.centerApi})),n.o(r,"nav")&&n.d(t,"nav",(function(){return r.nav})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start}));n(70),n(72),n(71),n(73);var a=n(102);n.d(t,"UQsMan",(function(){return a.a}));n(78),n(74),n(103)},,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return l}));var r=n(17),a=n.n(r),i={lang:void 0,$lang:void 0,district:void 0,$district:void 0};function s(e){var t=i.lang,n=i.district,r={};if(void 0===e)return r;a.a.merge(r,e._);var s=e[t];if(void 0===s)return r;a.a.merge(r,s._);var c=s[n];if(void 0===c)return r;a.a.merge(r,c);var u=r.entity;if(void 0!==u)for(var o in u)u[o.toLowerCase()]=u[o];return r}!function(){var e,t,n=navigator.languages&&navigator.languages[0]||navigator.language;if(n){var r=n.split("-");e=r[0],r.length>1&&(t=r[1].toUpperCase())}else e="zh",t="CN";!function(e,t){i.lang=e,i.$lang="$"+e,i.district=t,i.$district="$"+t}(e,t)}();var c={};function u(e,t){if(void 0!==t){var n=i.$lang,r=i.$district;if(a.a.merge(e,t),void 0!==n){var s=t[n];if(void 0!==s){a.a.merge(e,s);var c=s[r];void 0!==c&&a.a.merge(e,c)}}return function(t){return e[t]||t}}}function o(e){u(c,e)}function l(e){return c[e]||e}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function a(){for(var e=r.length,t="",n=0;n<8;n++)t+=r.charAt(Math.floor(Math.random()*e));return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r,a,i=n(25),s=n(12),c=n(13),u=n(21),o=n(20),l=n(10),h=(n(24),n(1)),p=n.n(h),d=n(2),f=n(3),v=n(4),b=n(6),m=n(7),j=n(17),O=n.n(j),y=n(9),x=n(23),g=n(29),k=n(31),w=(x.c,function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return n}((r=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(f.a)(this,n);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return(e=t.call.apply(t,[this].concat(i))).pageStart=void 0,e.pageSize=void 0,e.params=void 0,e.more=void 0,e.startField=void 0,Object(s.a)(e,"list",a,Object(c.a)(e)),e.returns=void 0,e.isPaged=void 0,e}return Object(v.a)(n,[{key:"setSchema",value:function(e){Object(u.a)(Object(o.a)(n.prototype),"setSchema",this).call(this,e);var t=e.returns;this.isPaged=t&&void 0!==t.find((function(e){return"$page"===e.name}))}},{key:"resetPage",value:function(e,t){this.pageStart=void 0,this.pageSize=e,this.params=t,this.more=!1,this.list=void 0}},{key:"loadPage",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.pageSize){e.next=2;break}throw new Error("call resetPage(size:number, params:any) first");case 2:if(void 0===this.pageStart){e.next=10;break}e.t0=this.startField.type,e.next="date"===e.t0||"time"===e.t0||"datetime"===e.t0?8:6;break;case 6:return t=this.pageStart,e.abrupt("break",10);case 8:return t=this.pageStart.getTime(),e.abrupt("break",10);case 10:return e.next=12,this.page(this.params,t,this.pageSize+1);case 12:n=e.sent,r=n.$page,this.list=y.n.array([],{deep:!1}),void 0!==r&&(r.length>this.pageSize?(this.more=!0,r.pop(),s=this.returns.find((function(e){return"$page"===e.name})),this.startField=s.fields[0],this.pageStart=r[r.length-1][this.startField.name]):this.more=!1,(a=this.list).push.apply(a,Object(i.a)(r)));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pageCaller",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new k.c(this,e,t)}},{key:"page",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n,r){var a,i,s,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(c.length>3&&void 0!==c[3])||c[3],i={pageStart:n,pageSize:r,params:t},e.next=4,this.pageCaller(i,a).request();case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"queryCaller",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new k.d(this,e,t)}},{key:"query",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.queryCaller(t,n).request();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"table",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,a,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],e.next=3,this.query(t,n);case 3:r=e.sent,e.t0=p.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=10;break}return a=e.t1.value,e.abrupt("return",r[a]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"obj",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.table(t,n);case 3:if(!((r=e.sent).length>0)){e.next=6;break}return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scalar",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,a,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],e.next=3,this.obj(t,n);case 3:r=e.sent,e.t0=p.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=10;break}return a=e.t1.value,e.abrupt("return",r[a]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"query"}},{key:"hasMore",get:function(){return this.more}}]),n}(g.a),a=Object(l.a)(r.prototype,"list",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)))},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return b}));var r,a=n(6),i=n(7),s=n(1),c=n.n(s),u=n(2),o=n(3),l=n(4),h=n(63);function p(e){void 0!==r&&r.postMessage({type:"ws",msg:e},"*")}function d(e){r=e}var f=function(){function e(){Object(o.a)(this,e),this.messageHub=h.a}return Object(l.a)(e,[{key:"receive",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.messageHub.dispatch(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),v=1,b=(new(function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).wsBaseId="WsBridge seed "+v++,e}return n}(f)),function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(o.a)(this,n),(a=t.call(this)).wsBaseId="WSChannel seed "+v++,a.wsHost=void 0,a.token=void 0,a.ws=void 0,a.wsHost=e,a.token=r,a}return Object(l.a)(n,[{key:"connect",value:function(){var e=this;if(void 0===this.ws){var t=this;return new Promise((function(r,a){var i=new WebSocket(e.wsHost,e.token||n.centerToken);console.log("connect webSocket %s",e.wsHost),i.onopen=function(n){console.log("webSocket connected %s",e.wsHost),t.ws=i,r()},i.onerror=function(e){a("webSocket can't open!")},i.onmessage=function(){var e=Object(u.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wsMessage(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.onclose=function(e){t.ws=void 0,console.log("webSocket closed!")}}))}}},{key:"close",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=void 0)}},{key:"wsMessage",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("websocket message: %s",t.data),p(n=JSON.parse(t.data)),e.next=6,this.receive(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ws msg error: ",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendWs",value:function(e){var t=this;this.connect().then((function(){t.ws.send(e)}))}}],[{key:"setCenterToken",value:function(e){n.centerToken=e}}]),n}(f));b.centerToken=void 0},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=(n(8),n(16)),i=n.n(a),s=n(19);function c(e){var t,n=e.className,a=e.style,c=e.src,u=e.altImage;if(c){if(0!==c.indexOf("."))return!0===c.startsWith(":")&&(c=s.b.resUrl+c.substr(1)),Object(r.jsx)("img",{src:c,className:n,alt:"img",style:a,onError:function(e){e.currentTarget.src=u||"https://tv.jkchemical.com/imgs/0001.png"}});t=c.substr(1)}else t="file-o";return Object(r.jsx)("span",{className:i()(n,"image-none"),style:a,children:Object(r.jsx)("i",{className:"fa fa-"+t})})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(81),a=n.n(r);function i(e){var t=a()(e);return{id:t.id,name:t.name,guest:t.guest,token:e}}function s(e){return{id:0,guest:a()(e).guest,token:e}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return y}));var r=n(1),a=n.n(r),i=n(2),s=n(3),c=n(4),u=n(14),o=n(23),l="https://tv.jkchemical.com",h=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_RES_HOST||l,p="localhost:3015",d={centerhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_CENTER_DEBUG_HOST||"localhost:3000",local:!1},reshost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_RES_DEBUG_HOST||"localhost:3015",local:!1},uqhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_HOST||p,local:!1},unitxhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_HOST||p,local:!1},"uq-build":{value:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_BUILDER_HOST||"localhost:3009",local:!1}},f=["https://","http://"];function v(e){return!0===function(e){var t,n=Object(u.a)(f);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!0===e.startsWith(r))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}(e)?e.endsWith("/")?e:e+"/":"http://".concat(e,"/")}function b(e){return v(e)}function m(e){var t="https://";return!0===e.startsWith(t)?(!0===(e=e.substr(t.length)).endsWith("/")&&(e=e.substr(0,e.length-1)),"wss://"+e+"/tv/"):"ws://".concat(e,"/tv/")}function j(e){if(e)return v(e)+"res/"}var O={method:"GET",mode:"no-cors",headers:{"Content-Type":"text/plain"}},y=new(function(){function e(){Object(s.a)(this,e),this.testing=void 0,this.url=void 0,this.ws=void 0,this.resHost=void 0}return Object(c.a)(e,[{key:"start",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.testing=t,!0!==o.e.isDevelopment){e.next=5;break}return e.next=5,this.tryLocal();case 5:n=this.getCenterHost(),this.url=b(n),this.ws=m(n),this.resHost=this.getResHost();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"debugHostUrl",value:function(e){return"http://".concat(e,"/hello")}},{key:"tryLocal",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,s,c,u,o,l,h,p,f,v,b,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in t=[],n=[],r=function(e){var t=d[e].value;n.findIndex((function(e){return e===t}))<0&&n.push(t)},d)r(i);for(s=0,c=n;s<c.length;s++)u=c[s],o=this.debugHostUrl(u),t.push(g(o));return e.next=7,Promise.all(t);case 7:for(l=e.sent,h=n.length,p=0;p<h;p++)for(b in f=l[p],v=n[p],d)(m=d[b]).value===v&&(m.local=f);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCenterHost",value:function(){var e=d.centerhost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")||!0===o.e.isDevelopment&&!0===n?t:l}},{key:"getResHost",value:function(){var e=d.reshost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")||!0===o.e.isDevelopment&&!0===n?t:h}},{key:"getUrlOrDebug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uqhost";if(!1===o.e.isDevelopment)return e;var n=d[t];if(void 0===n)return e;var r=n.value,a=n.local;return!1===a?e:"http://".concat(r,"/")}},{key:"getUrlOrTest",value:function(e,t,n){var r;return n?t||(t=n,this.testing=!0):(n=t)||console.error("no server set for "+e),!0===this.testing?("-"!==n&&(t=n),r="uq/test/"+e+"/"):r="uq/prod/"+e+"/",!1===(t=this.getUrlOrDebug(t)).endsWith("/")&&(t+="/"),t+r}},{key:"localCheck",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}());function x(e){return new Promise((function(t,n){fetch(e,O).then((function(e){e.text().then(t).catch(n)})).catch(n);var r=new Error("Connection timed out");o.e.setTimeout("fetchLocalCheck",n,2e3,r)}))}function g(e){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}},function(e,t,n){"use strict";var r=n(75);n.o(r,"MultiStep")&&n.d(t,"MultiStep",(function(){return r.MultiStep})),n.o(r,"TonvaForm")&&n.d(t,"TonvaForm",(function(){return r.TonvaForm}));var a=n(111);n.d(t,"MultiStep",(function(){return a.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var r=n(0),a=n(1),i=n.n(a),s=n(2),c=n(6),u=n(7),o=n(3),l=n(4),h=n(8),p=n.n(h),d=function(){function e(t){Object(o.a)(this,e),this.el=void 0,this.el=t}return Object(l.a)(e,[{key:"scrollToTop",value:function(){var e=this;setTimeout((function(){return e.el.scrollTo(0,0)}),20)}},{key:"scrollToBottom",value:function(){var e=this;setTimeout((function(){return e.el.scrollTo(0,e.el.scrollTop+e.el.offsetHeight)}),20)}}]),e}(),f=100,v=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).bottomTime=0,e.topTime=0,e.div=void 0,e.refDiv=function(t){t?(e.div=t,e.div.addEventListener("resize",e.onResize)):e.div&&e.div.removeEventListener("resize",e.onResize)},e.onResize=function(e){console.error("div resize")},e.onScroll=function(){var t=Object(s.a)(i.a.mark((function t(n){var r,a,s,c,u,o,l,h;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.onScroll,s=r.onScrollTop,c=r.onScrollBottom,a&&a(n),u=n.target,o=new d(u),u.scrollTop<30&&void 0!==s&&(l=(new Date).getTime())-e.topTime>f&&(e.topTime=l,s(o).then((function(e){if(!0===e){var t=u.scrollHeight,n=200;n>t&&(n=t),u.scrollTop=n}}))),u.scrollTop+u.offsetHeight>u.scrollHeight-30&&void 0!==c&&(h=(new Date).getTime())-e.bottomTime>f&&(e.bottomTime=h,c(o));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"eachChild",value:function(e,t){var n=this,r=e.props;if(void 0!==r){var a=r.children;void 0!==a&&p.a.Children.forEach(a,(function(e,r){var a=e._$scroll;a&&a(t),console.log(e.toString()),n.eachChild(e,t)}))}}}]),n}(p.a.Component),b=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style;return Object(r.jsx)("div",{ref:this.refDiv,className:"tv-page",onScroll:this.onScroll,style:n,children:Object(r.jsx)("article",{className:t,children:this.props.children})})}}]),n}(v),m=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n=this.props,a=n.className,i=n.style,s=n.webNav,c=s.navHeader,u=s.navRawHeader,o=s.navFooter,l=s.navRawFooter;return u?e=u:c&&(e=Object(r.jsx)("header",{children:Object(r.jsx)("main",{children:c})})),l?t=l:o&&(t=Object(r.jsx)("footer",{children:Object(r.jsx)("main",{children:o})})),Object(r.jsxs)("div",{ref:this.refDiv,className:"tv-page-webnav",onScroll:this.onScroll,style:i,children:[e,Object(r.jsx)("article",{className:a,children:this.props.children}),t]})}}]),n}(v)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(1),a=n.n(r),i=n(2),s=n(3),c=n(4),u=n(6),o=n(7),l=n(29),h=n(31),p=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"submit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(i.length>1&&void 0!==i[1])||i[1],n=new d(this,t),e.next=4,n.request();case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitReturns",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new f(this,t).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitConvert",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new v(this,t).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"action"}}]),n}(l.a)),d=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"buildParams",value:function(){return{data:this.entity.pack(this.params)}}},{key:"path",get:function(){return"action/"+this.entity.name}}]),n}(h.a),f=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"xresult",value:function(e){for(var t=this.entity.returns,n=t.length,r={},a=0;a<n;a++){r[t[a].name]=e[a]}return r}},{key:"path",get:function(){return"action/"+this.entity.name+"/returns"}}]),n}(d),v=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"buildParams",value:function(){return{data:this.params}}},{key:"path",get:function(){return"action-convert/"+this.entity.name}}]),n}(d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return m}));var r,a,i=n(0),s=n(3),c=n(4),u=n(6),o=n(7),l=n(8),h=n(11),p=n(16),d=n.n(p),f=(n(134),Object(h.a)(r=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.badge,a=t.size,s=t.color,c=t.badgeAlign,u=t.badgeVertical,o=t.children,l=d()(n,"va-badge",a&&"va-badge-"+a,"va-badge-"+(s||"secondary"),c&&"va-badg-"+c,u&&"va-badg-"+u);return r&&(e=Object(i.jsx)("b",{children:r})),Object(i.jsxs)("div",{className:l,children:[o,e]})}}]),n}(l.Component))||r),v=(n(135),Object(h.a)(a=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e,t,n,r=this.props,a=r.className,s=r.left,c=r.children,u=r.right,o=r.onClick;return void 0!==s&&(e=Object(i.jsx)("header",{children:s})),void 0!==u&&(t=Object(i.jsx)("footer",{children:u})),void 0!==o&&(n="cursor-pointer"),Object(i.jsxs)("div",{className:d()("va-lmr",a,n),onClick:o,children:[e,Object(i.jsx)("div",{children:c}),t]})}}]),n}(l.Component))||a),b=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.className,r=e.size,a=e.spin,s=e.fixWidth,c=e.border,u=e.pull,o=e.pulse,l=e.rotate,h=e.flip,p=e.inverse,f=d()(n,"fa",t&&"fa-"+t,r&&"fa-"+r,s&&"fa-fw",c&&"fa-border",u&&"fa-pull-"+u,a&&"fa-spin",o&&"fa-pulse",l&&"fa-rotate-"+l,h&&"fa-flip-"+h,p&&"fa-inverse");return Object(i.jsx)("i",{className:f})}}]),n}(l.Component),m=(l.Component,l.Component,function(e){return Object(i.jsx)("small",{className:d()("text-muted",e.className),style:e.style,children:e.children})})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(14),a=n(6),i=n(7),s=n(3),c=n(4),u=n(17),o=n.n(u),l=new(function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"getItem",value:function(e){return localStorage.getItem(e)}},{key:"setItem",value:function(e,t){localStorage.setItem(e,t)}},{key:"removeItem",value:function(e){localStorage.removeItem(e)}}]),e}()),h=function(){function e(t,n){Object(s.a)(this,e),this.local=void 0,this.key=void 0,this.local=t,this.key=n}return Object(c.a)(e,[{key:"get",value:function(){try{var e=this.local.getItem(this.key);if(null===e)return;if(void 0===e)return;return JSON.parse(e)}catch(t){return void this.local.removeItem(this.key)}}},{key:"set",value:function(e){var t=JSON.stringify(e,(function(e,t){if("_tuid"!==e)return t}));this.local.setItem(this.key,t)}},{key:"remove",value:function(e){void 0===e?this.local.removeItem(this.key):this.local.removeLocal(e)}},{key:"child",value:function(e){return this.local.child(e)}},{key:"arr",value:function(e){return this.local.arr(e)}},{key:"map",value:function(e){return this.local.map(e)}}]),e}(),p=function(){function e(t){Object(s.a)(this,e),this.caches=void 0,this.locals=void 0,this.name=void 0,this.name=t,this.caches={},this.locals={}}return Object(c.a)(e,[{key:"getItem",value:function(e){var t=this.keyForGet(e);if(void 0!==t)return l.getItem(t)}},{key:"setItem",value:function(e,t){var n=this.keyForSet(e);l.setItem(n,t)}},{key:"removeItem",value:function(e){var t=this.keyForSet(e);void 0!==t&&localStorage.removeItem(t)}},{key:"arr",value:function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new d(r)}return n}},{key:"map",value:function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new f(r)}return n}},{key:"removeLocal",value:function(e){var t=e.name,n=this.keyForRemove(t);if(void 0!==n){var r=this.locals[t];void 0===r?r=new d(n):this.locals[t]=void 0,r.removeAll()}}},{key:"child",value:function(e){var t=String(e),n=this.caches[t];return void 0!==n?n:this.caches[t]=new h(this,e)}}]),e}(),d=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).index=void 0;var a=l.getItem(r.name);return r.index=null===a?[]:a.split("\n").map((function(e){return Number(e)})),r}return Object(c.a)(n,[{key:"saveIndex",value:function(){l.setItem(this.name,this.index.join("\n"))}},{key:"keyForGet",value:function(e){if(!(o.a.indexOf(this.index,e)<0))return"".concat(this.name,".").concat(e)}},{key:"keyForSet",value:function(e){var t=o.a.indexOf(this.index,e);return t<0?(this.index.unshift(e),this.index.length>500&&this.index.pop()):(this.index.splice(t,1),this.index.unshift(e)),this.saveIndex(),"".concat(this.name,".").concat(e)}},{key:"keyForRemove",value:function(e){var t=o.a.indexOf(this.index,e);if(!(t<0))return this.index.splice(t,1),this.saveIndex(),"".concat(this.name,".").concat(e)}},{key:"removeAll",value:function(){var e,t=Object(r.a)(this.index);try{for(t.s();!(e=t.n()).done;){var n=e.value;l.removeItem("".concat(this.name,".").concat(n))}}catch(a){t.e(a)}finally{t.f()}l.removeItem(this.name),this.index.splice(0)}},{key:"item",value:function(e){return this.child(e)}}]),n}(p),f=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).index=void 0,r.max=void 0,r.max=0,r.index={};var a=l.getItem(r.name);null!==a&&a.split("\n").forEach((function(e){var t=e.indexOf("\t");if(!(t<0)){var n=e.substr(0,t),a=Number(e.substr(t+1));!0!==isNaN(a)&&(r.index[n]=a,a>r.max&&(r.max=a))}}));return r}return Object(c.a)(n,[{key:"saveIndex",value:function(){var e=[];for(var t in this.index){var n=this.index[t];void 0!==n&&e.push("".concat(t,"\t").concat(n))}l.setItem(this.name,e.join("\n"))}},{key:"keyForGet",value:function(e){var t=this.index[e];if(void 0!==t)return"".concat(this.name,".").concat(t)}},{key:"keyForSet",value:function(e){var t=this.index[e];return void 0===t&&(++this.max,t=this.max,this.index[e]=t,this.saveIndex()),"".concat(this.name,".").concat(t)}},{key:"keyForRemove",value:function(e){var t=this.index[e];if(void 0!==t)return this.index[e]=void 0,this.saveIndex(),"".concat(this.name,".").concat(t)}},{key:"removeAll",value:function(){for(var e in this.index)l.removeItem("".concat(this.name,".").concat(this.index[e])),this.index[e]=void 0;l.removeItem(this.name),this.max=0}},{key:"item",value:function(e){return this.child(e)}}]),n}(p)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n(1),i=n.n(a),s=n(2),c=n(3),u=n(4),o=(n(8),n(11)),l=function(e,t,n){return Object(r.jsxs)(r.Fragment,{children:[e,": ",h(t)]})};function h(e){var t="{";if(void 0===e)return"undefined";for(var n in e){var r=e[n];if(t+=n+": ",void 0===r)t+="undefined";else if(null===r)t+="null";else switch(typeof r){default:t+=r;break;case"function":t+="function";break;case"object":t+="{obj}"}t+=", "}return t+"}"}var p=function(){function e(t,n,r){Object(c.a)(this,e),this.id=void 0,this.tuid=void 0,this.ui=void 0,this.isUndefined=void 0,this.id=Number(t),this.tuid=n,this.ui=r,this.isUndefined=void 0===this.tuid}return Object(u.a)(e,[{key:"equ",value:function(e){return void 0!==e&&null!==e&&("object"===typeof e?this.id===e.id:this.id===e)}},{key:"render",value:function(e,t){if(void 0!==this.id&&null!==this.id&&!0!==isNaN(this.id)){var n=this.boxName,a=this.obj;if(!0===this.isUndefined)return void 0!==e?e(a,t):l(n,a);switch(typeof a){case"undefined":return Object(r.jsxs)("span",{className:"text-black-50",children:[n," undefined"]});case"number":return Object(r.jsxs)("span",{className:"text-light",children:[n," ",this.id]})}if(void 0===e&&(e=this.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){var i=e(a);return void 0!==i?i:Object(r.jsxs)("span",{className:"text-danger",children:[n," ",this.id]})}return l(n,a)}}},{key:"assure",value:function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuid.assureBox(this.id);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"obj",get:function(){return this.tuid.valueFromId(this.id)}},{key:"boxName",get:function(){return this.tuid.name}}]),e}();Object(o.a)((function(e){var t=e.tuidValue,n=e.ui,a=e.x,i=e.nullUI;if(void 0===t)return void 0===i?Object(r.jsx)("small",{className:"text-muted",children:"[\u65e0]"}):i();if(null===t)return void 0===i?Object(r.jsx)(r.Fragment,{children:"[null]"}):i();var s=typeof t;switch(s){default:if(void 0===n)return Object(r.jsxs)(r.Fragment,{children:[s,"-",t]});var c=n(t,a);return void 0!==c?c:Object(r.jsx)(r.Fragment,{children:t});case"object":var u=function(e,t,n){var a,i=e;switch(typeof e){case"undefined":a=Object(r.jsx)(r.Fragment,{children:"boxId undefined"});break;case"number":a=Object(r.jsxs)(r.Fragment,{children:["id:",e]});break;default:if("function"!==typeof i.render){if(void 0!==t)return t(e,n);a=l(i.boxName,e)}}return void 0!==a?Object(r.jsx)("del",{className:"text-danger",children:a}):i.render(t,n)}(t,n,a);return void 0!==u?u:void 0===i?Object(r.jsx)(r.Fragment,{children:"id null"}):i();case"number":return Object(r.jsxs)(r.Fragment,{children:["id...",t]})}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);n(8);function a(){return Object(r.jsx)("div",{className:"d-flex h-100 align-items-center justify-content-center",children:Object(r.jsx)("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Y})),n.d(t,"b",(function(){return Z}));var r,a,i,s,c,u,o,l,h,p,d,f=n(0),v=n(3),b=n(4),m=n(21),j=n(20),O=n(6),y=n(7),x=n(8),g=n(17),k=n.n(g),w=n(14),C=n(25),A=n(12),N=n(13),S=(n(24),n(10)),P=n(9),I=(r=function(){function e(t){Object(v.a)(this,e),this.formView=void 0,this.formView=t}return Object(b.a)(e,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"col-sm-10",children:this.renderControl()})}},{key:"clear",value:function(){}},{key:"clearErrors",value:function(){}},{key:"readValues",value:function(e){}},{key:"setError",value:function(e,t){}},{key:"setInitValues",value:function(e){}},{key:"isOk",value:function(){return this.validate(),!this.hasError}},{key:"validate",value:function(){}},{key:"hasError",get:function(){return!1}},{key:"filled",get:function(){return!1}}]),e}(),Object(S.a)(r.prototype,"hasError",[P.g],Object.getOwnPropertyDescriptor(r.prototype,"hasError"),r.prototype),Object(S.a)(r.prototype,"filled",[P.g],Object.getOwnPropertyDescriptor(r.prototype,"filled"),r.prototype),r),U=(a=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(e,r,a){var u;return Object(v.a)(this,n),(u=t.call(this,e))._field=void 0,u._face=void 0,u.props=void 0,u.rules=void 0,u.element=void 0,Object(A.a)(u,"isOK",i,Object(N.a)(u)),Object(A.a)(u,"error",s,Object(N.a)(u)),Object(A.a)(u,"value",c,Object(N.a)(u)),u._field=r,u._face=a,u.init(),u.setProps(),u}return Object(b.a)(n,[{key:"ref",value:function(e){this.element=e}},{key:"init",value:function(){this.rules=[];var e,t=this._field.rules;void 0!==t&&(!0===Array.isArray(t)?(e=this.rules).push.apply(e,Object(C.a)(t)):this.rules.push(t))}},{key:"setProps",value:function(){return this.props={ref:this.ref.bind(this),name:this._field.name}}},{key:"clearValue",value:function(){this.value=void 0}},{key:"clear",value:function(){this.clearErrors(),this.clearValue()}},{key:"clearErrors",value:function(){this.isOK=void 0,this.error=void 0}},{key:"readValues",value:function(e){e[this._field.name]=this.value}},{key:"setError",value:function(e,t){}},{key:"setInitValues",value:function(e){}},{key:"getValueFromElement",value:function(){return this.value}},{key:"validate",value:function(){try{var e=this.getValueFromElement();if(this.rules.length>0){var t,n,r=Object(w.a)(this.rules);try{for(r.s();!(n=r.n()).done;){var a=n.value;console.log("validate: %s",e);var i=a(e);if(console.log("validate: %s err: %s",e,i),!0===i)this.error=void 0,t=!0;else if(void 0!==i)return this.error=i,void(this.isOK=!1)}}catch(i){r.e(i)}finally{r.f()}this.isOK=t}this.value=e}catch(s){this.error=s.message}}},{key:"render",value:function(){var e;if(void 0!==this._face){var t=this._face.notes;void 0!==t&&(e=Object(f.jsx)("small",{className:"text-muted",children:t}))}return Object(f.jsxs)("div",{className:"col-sm-10",children:[this.renderControl(),e]})}},{key:"hasError",get:function(){return void 0!==this.error}},{key:"filled",get:function(){return void 0!==this.value&&this.value!==this._field.defaultValue}}]),n}(I),i=Object(S.a)(a.prototype,"isOK",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=Object(S.a)(a.prototype,"error",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=Object(S.a)(a.prototype,"value",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(S.a)(a.prototype,"hasError",[P.g],Object.getOwnPropertyDescriptor(a.prototype,"hasError"),a.prototype),Object(S.a)(a.prototype,"filled",[P.g],Object.getOwnPropertyDescriptor(a.prototype,"filled"),a.prototype),a),E=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).element=void 0,e.trueValue=void 0,e.falseValue=void 0,e}return Object(b.a)(n,[{key:"init",value:function(){Object(m.a)(Object(j.a)(n.prototype),"init",this).call(this);var e=this.field,t=e.trueValue,r=e.falseValue;void 0===t&&(this.trueValue=1),void 0===r&&(this.falseValue=0)}},{key:"setProps",value:function(){Object(m.a)(Object(j.a)(n.prototype),"setProps",this).call(this),k.a.assign(this.props,{onChange:this.onChange.bind(this)})}},{key:"clearValue",value:function(){this.element.checked=this._field.defaultValue===this.trueValue,this.value=this.getValueFromElement()}},{key:"setInitValues",value:function(e){var t=e[this._field.name];void 0===t&&(t=this._field.defaultValue)}},{key:"getValueFromElement",value:function(){return this.element.checked?this.trueValue:this.falseValue}},{key:"onChange",value:function(){this.value=this.getValueFromElement()}},{key:"renderControl",value:function(){return Object(f.jsx)("div",{className:"form-control-static",children:Object(f.jsx)("label",{className:"form-control",children:Object(f.jsxs)("label",{className:"custom-control custom-checkbox mb-0",children:[Object(f.jsx)("input",{type:"checkbox",name:this._field.name,ref:this.props.ref,onChange:this.props.onChange,className:"custom-control-input"}),Object(f.jsx)("span",{className:"custom-control-indicator"}),Object(f.jsx)("span",{className:"custom-control-description",children:this.face.label})]})})})}},{key:"field",get:function(){return this._field}},{key:"face",get:function(){return this._face}}]),n}(U),_=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"renderControl",value:function(){var e=this;return Object(f.jsx)("div",{className:"form-control-static",children:Object(f.jsx)("div",{className:"form-control",children:this.face.list.map((function(t,n){var r;return r="object"!==typeof t?t:t.text,Object(f.jsxs)("label",{className:"custom-control custom-radio w-25",children:[Object(f.jsx)("input",{type:"radio",name:e._field.name,className:"custom-control-input"}),Object(f.jsx)("span",{className:"custom-control-indicator"}),Object(f.jsx)("span",{className:"custom-control-description",children:r})]},n)}))})})}},{key:"face",get:function(){return this._face}}]),n}(U),R=n(22),T=n(16),V=n.n(T),q=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).element=void 0,e}return Object(b.a)(n,[{key:"init",value:function(){Object(m.a)(Object(j.a)(n.prototype),"init",this).call(this),!0===this._field.required&&this.rules.push((function(e){return null!==e&&void 0!==e&&0!==e.trim().length||"\u5fc5\u987b\u586b\u5165\u8981\u6c42\u5185\u5bb9"}))}},{key:"getValueFromElement",value:function(){return this.parseValue(this.element.value)}},{key:"setProps",value:function(){Object(m.a)(Object(j.a)(n.prototype),"setProps",this).call(this),k.a.assign(this.props,{onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onChange:this.onChange.bind(this)});var e=this._face;return void 0!==e&&k.a.assign(this.props,{placeholder:e.placeholder}),this.props}},{key:"parseValue",value:function(e){return e}},{key:"onBlur",value:function(){this.validate()}},{key:"onChange",value:function(){console.log("onChange"),this.validate()}},{key:"onFocus",value:function(){this.clearErrors()}},{key:"className",value:function(){return V()({"form-control":!0,"has-success":!0===this.isOK,"is-invalid":void 0!==this.error,"is-valid":void 0===this.error&&!0===this.isOK})}},{key:"renderInput",value:function(){return Object(f.jsx)("input",Object(R.a)({className:this.className()},this.props))}},{key:"ref",value:function(e){Object(m.a)(Object(j.a)(n.prototype),"ref",this).call(this,e),e&&(e.value=void 0===this.value?"":this.value)}},{key:"renderError",value:function(){return void 0===this.error?null:Object(f.jsx)("div",{className:"invalid-feedback",children:this.error})}},{key:"clearValue",value:function(){Object(m.a)(Object(j.a)(n.prototype),"clearValue",this).call(this),this.element.value=""}},{key:"setError",value:function(e,t){this._field.name===e&&(this.error=t)}},{key:"setInitValues",value:function(e){var t=e[this._field.name];void 0!==t&&(this.value=t)}},{key:"renderControl",value:function(){return Object(f.jsxs)(x.Fragment,{children:[this.renderInput(),this.renderError()]})}}]),n}(U),F=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).el=void 0,e}return Object(b.a)(n,[{key:"setProps",value:function(){var e=Object(m.a)(Object(j.a)(n.prototype),"setProps",this).call(this),t=this.field.maxLength,r=this.face.rows;return g.assign(e,{maxLength:t,rows:r}),e}},{key:"renderInput",value:function(){var e=this;return Object(f.jsx)("textarea",Object(R.a)({ref:function(t){e.el=t,void 0!==t&&(t.value="")},className:this.className()},this.props))}},{key:"face",get:function(){return this._face}},{key:"field",get:function(){return this._field}}]),n}(q),L=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(e,r,a){var i;return Object(v.a)(this,n),(i=t.call(this,e,r,a)).element=void 0,i.ref=i.ref.bind(Object(N.a)(i)),i}return Object(b.a)(n,[{key:"getValueFromElement",value:function(){var e=this.element.selectedOptions[0].value;switch(this._field.type){case"number":e=Number(e);break;case"date":e=new Date(e);break;case"bool":"string"===typeof e&&(e="true"===e.toLowerCase())}return e}},{key:"renderControl",value:function(){var e=this.face.list,t=[];return void 0===this.face.default&&t.push(Object(f.jsx)("option",{value:void 0,children:"\u8bf7\u9009\u62e9"},-1)),t.push.apply(t,Object(C.a)(e.map((function(e,t){var n,r;return"object"!==typeof e?n=r=e:(n=e.text,r=e.value),Object(f.jsx)("option",{value:r,children:n},t)})))),Object(f.jsx)("div",{className:"form-control-static",children:Object(f.jsx)("select",{name:this._field.name,className:"form-control",ref:this.ref,children:t})})}},{key:"face",get:function(){return this._face}}]),n}(U),D=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"renderControl",value:function(){return Object(f.jsx)("div",{className:"form-control-plaintext",children:Object(f.jsxs)("div",{className:"alert alert-primary",role:"alert",children:["don't know how to create control",Object(f.jsx)("br",{}),"field: ",JSON.stringify(this._field)," must be object ",Object(f.jsx)("br",{}),"face: ",JSON.stringify(this._face)," must be object ",Object(f.jsx)("br",{})]})})}}]),n}(U),B=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(e,r){var a;return Object(v.a)(this,n),(a=t.call(this,e)).element=void 0,a.element=r,a}return Object(b.a)(n,[{key:"renderControl",value:function(){return Object(f.jsx)("div",{className:"form-control-plaintext",children:this.element})}}]),n}(I),M=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"setProps",value:function(){var e=Object(m.a)(Object(j.a)(n.prototype),"setProps",this).call(this);return k.a.assign(e,{type:"text",maxLength:this.field.maxLength}),e}},{key:"parseValue",value:function(e){if(void 0!==e&&0!==e.trim().length)return e}},{key:"field",get:function(){return this._field}}]),n}(q),z=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"setProps",value:function(){var e=Object(m.a)(Object(j.a)(n.prototype),"setProps",this).call(this);return k.a.assign(e,{type:"password",maxLength:this.field.maxLength}),e}}]),n}(M),H=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).value=void 0,e.extraChars=void 0,e}return Object(b.a)(n,[{key:"init",value:function(){Object(m.a)(Object(j.a)(n.prototype),"init",this).call(this),this.extraChars=[];var e=this.field,t=e.min,r=e.max;switch(void 0!==t?(this.rules.push((function(e){if(void 0!==e)return!(e<t)||"\u6700\u5c0f\u503c\u4e3a"+t})),t<0&&this.extraChars.push(45)):this.extraChars.push(45),void 0!==r&&this.rules.push((function(e){if(void 0!==e)return!(e>r)||"\u6700\u5927\u503c\u4e3a"+r})),this._field.type){case"dec":case"number":this.extraChars.push(46)}}},{key:"parseValue",value:function(e){if(void 0!==e&&0!==e.trim().length){var t=Number.parseFloat(e);if(isNaN(t))throw new Error("\u65e0\u6548\u7684\u6570\u5b57");return t}}},{key:"setProps",value:function(){Object(m.a)(Object(j.a)(n.prototype),"setProps",this).call(this),k.a.assign(this.props,{type:"number",step:this._field.step,onKeyPress:this.onKeyPress.bind(this)})}},{key:"onKeyPress",value:function(e){var t=e.charCode;if(!(8===t||0===t||13===t||t>=48&&t<=57))if(void 0!==this.extraChars&&this.extraChars.indexOf(t)>=0)switch(t){case 46:this.onKeyDot();break;case 45:this.onKeyNeg(),e.preventDefault()}else e.preventDefault()}},{key:"onKeyDot",value:function(){var e=this.element.value;e.indexOf(".")>=0&&(this.element.value=e.replace(".",""))}},{key:"onKeyNeg",value:function(){var e=this.element.value,t=e.indexOf("-");e=t>=0?e.replace("-",""):"-"+e,this.element.value=e}},{key:"field",get:function(){return this._field}}]),n}(q),W=n(1),$=n.n(W),G=n(2),K=(u=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(A.a)(e,"caption",o,Object(N.a)(e)),e.onClick=Object(G.a)($.a.mark((function t(){var n,r,a,i,s,c,u;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.face,r=n.pick,a=n.fromPicked,t.next=3,r(e.face,e.formView.props,e.formView.readValues());case 3:if(void 0!==(i=t.sent)){t.next=7;break}return e.value=void 0,t.abrupt("return");case 7:if(void 0!==a){t.next=10;break}return e.value=i.id,t.abrupt("return");case 10:s=a(i),c=s.id,u=s.caption,e.value=c,e.caption=u;case 13:case"end":return t.stop()}}),t)}))),e.onPicked=function(t){e.value=t.id},e}return Object(b.a)(n,[{key:"setInitValues",value:function(e){var t=e[this._field.name];this.value=t}},{key:"controlContent",value:function(){var e=this.face,t=e.itemFromId,n=e.fromPicked,r=e.initCaption;if(void 0===this.value)return r||"\u8bf7\u9009\u62e9Id";if(void 0!==this.caption)return this.caption;if(void 0!==t&&void 0!==n){var a=t(this.value);if(a){var i=n(a);if(void 0!==i)return i.caption}}return String(this.value)}},{key:"renderControl",value:function(){var e=this.face,t=e.tuid,n=e.input;return void 0===n?Object(f.jsx)("div",{className:"form-control-plaintext px-2 border text-primary rounded cursor-pointer",onClick:this.onClick,children:this.controlContent()}):Object(f.jsx)("div",{className:"form-control-static ",children:Object(f.jsx)(n.component,{id:this.value,ui:t})})}},{key:"face",get:function(){return this._face}},{key:"hasError",get:function(){return!0===this._field.required&&void 0===this.value}}]),n}(U),o=Object(S.a)(u.prototype,"caption",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(S.a)(u.prototype,"hasError",[P.g],Object.getOwnPropertyDescriptor(u.prototype,"hasError"),u.prototype),u),Q=(l=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(e,r,a){var i;return Object(v.a)(this,n),i=t.call(this,e,r,a),Object(A.a)(i,"caption",h,Object(N.a)(i)),i.onIdChanged=i.onIdChanged.bind(Object(N.a)(i)),i}return Object(b.a)(n,[{key:"face",get:function(){return this._face}}]),Object(b.a)(n,[{key:"onIdChanged",value:function(e){this.value=e.id}},{key:"setInitValues",value:function(e){var t=e[this._field.name];this.value=t}},{key:"buildContent",value:function(){var e=this;return x.createElement(this.face.input.component,Object(R.a)({id:this.value,onFormValues:function(){return e.formView.readValues()},onIdChanged:this.onIdChanged},this.face))}},{key:"renderControl",value:function(){return Object(f.jsx)("div",{className:"form-control-static ",children:this.buildContent()})}}]),n}(U),h=Object(S.a)(l.prototype,"caption",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l),J=n(11),X=(p=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(A.a)(e,"caption",d,Object(N.a)(e)),e.onClick=Object(G.a)($.a.mark((function t(){var n,r,a,i,s,c,u;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.face,r=n.pick,a=n.fromPicked,t.next=3,r(e.face,e.formView.props,e.formView.readValues());case 3:if(void 0!==(i=t.sent)){t.next=7;break}return e.value=void 0,t.abrupt("return");case 7:s=a(i),c=s.id,u=s.caption,e.value=c,e.caption=u;case 10:case"end":return t.stop()}}),t)}))),e.view=Object(J.a)((function(){var t,n=e.face.content;return t=void 0===e.value||null===e.value?"\u8bf7\u9009\u62e9":Object(f.jsx)(n,{id:e.value}),Object(f.jsx)("div",{className:"form-control-plaintext px-2 border text-primary rounded cursor-pointer bg-light",onClick:e.onClick,children:t})})),e}return Object(b.a)(n,[{key:"setInitValues",value:function(e){var t=e[this._field.name];this.value=t}},{key:"renderControl",value:function(){return x.createElement(this.view)}},{key:"face",get:function(){return this._face}}]),n}(U),d=Object(S.a)(p.prototype,"caption",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p),Y=function(e){Object(O.a)(n,e);var t=Object(y.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this,e)).otherClick=r.otherClick.bind(Object(N.a)(r)),r}return Object(b.a)(n,[{key:"otherClick",value:function(){var e=this.formView.props.onOther;void 0!==e&&e(this.formView.readValues())}},{key:"renderControl",value:function(){console.log("buttons.renderControl");var e=this.formView.nothing,t=this.formView.hasError,n=this.formView.props;console.log("buttons.renderControl nothing:%s hasError:%s",e,t);var r,a=n.submitButton,i=n.otherButton;return void 0!==i&&(r=Object(f.jsx)("button",{className:"btn btn-outline-info ml-auto",onClick:this.otherClick,children:i})),Object(f.jsxs)("div",{className:"d-flex justify-content-start",children:[Object(f.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:e||t,children:a||"\u63d0\u4ea4"}),r]})}}]),n}(I),Z=function(e,t){t.label;return void 0!==t.group?function(e,t,n){return new D(e,n,void 0)}(e,0,t):void 0!==t.field?function(e,t,n){var r=n.field,a=n.face;switch(typeof r){case"string":r={name:r,type:"string"};break;case"object":break;default:return new D(e,r,a)}var i=r.type||"string";if(void 0===a){if(void 0===(a=te[i]))return new D(e,r,a)}else if(void 0===a.type){var s=te[i];a.type=void 0===s?"string":s.type}return new(ee[a.type||i]||D)(e,r,a)}(e,0,t):new B(e,t.help)},ee={string:M,password:z,number:H,checkbox:E,radiobox:_,select:L,"pick-id":K,"pick-tuid":Q,textarea:F,pick:X},te={string:{type:"string"},number:{type:"number"},int:{type:"number"},dec:{type:"number"},bool:{type:"checkbox"}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(47);var a=function(){var t=/(\btest\b)/i.test(document.location.href);return{testing:t,isDevelopment:!1,localDb:new r.a(!0===t?"$$":"$"),setTimeout:function(t,n,r){for(var a,i=arguments.length,s=new Array(i>3?i-3:0),c=3;c<i;c++)s[c-3]=arguments[c];return(a=e).setTimeout.apply(a,[n,r].concat(s))},clearTimeout:function(t){e.clearTimeout(t)},setInterval:function(t,n){for(var r,a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s];return(r=e).setInterval.apply(r,[t,n].concat(i))},clearInterval:function(t){e.clearInterval(t)}}}()}).call(this,n(60))},function(e,t,n){"use strict";var r=n(100);n.o(r,"Badge")&&n.d(t,"Badge",(function(){return r.Badge})),n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"Controller")&&n.d(t,"Controller",(function(){return r.Controller})),n.o(r,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return r.DropdownActions})),n.o(r,"EasyDate")&&n.d(t,"EasyDate",(function(){return r.EasyDate})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"Media")&&n.d(t,"Media",(function(){return r.Media})),n.o(r,"Muted")&&n.d(t,"Muted",(function(){return r.Muted})),n.o(r,"NavView")&&n.d(t,"NavView",(function(){return r.NavView})),n.o(r,"Page")&&n.d(t,"Page",(function(){return r.Page})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"TuidImport")&&n.d(t,"TuidImport",(function(){return r.TuidImport})),n.o(r,"TuidInner")&&n.d(t,"TuidInner",(function(){return r.TuidInner})),n.o(r,"UQsMan")&&n.d(t,"UQsMan",(function(){return r.UQsMan})),n.o(r,"VPage")&&n.d(t,"VPage",(function(){return r.VPage})),n.o(r,"View")&&n.d(t,"View",(function(){return r.View})),n.o(r,"centerApi")&&n.d(t,"centerApi",(function(){return r.centerApi})),n.o(r,"nav")&&n.d(t,"nav",(function(){return r.nav})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start}));var a=n(118);n.d(t,"TuidImport",(function(){return a.a})),n.d(t,"TuidInner",(function(){return a.b}));var i=n(101);n.d(t,"TuidsCache",(function(){return i.a}));n(48)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(0),a=n(6),i=n(7),s=n(3),c=n(4),u=(n(8),n(50)),o=function(){function e(t,n){if(Object(s.a)(this,e),this.form=void 0,this.row=void 0,this.control=void 0,this.form=t,this.row=n,void 0===n.type){var r=n.createControl;void 0===r&&(r=t.createControl),void 0===r&&(r=u.b),this.control=r(t,n)}}return Object(c.a)(e,[{key:"isOk",value:function(){return void 0===this.control||this.control.isOk()}},{key:"contains",value:function(e){var t=this.row.field;if(void 0!==t)return e===t.name;var n=this.row.group;return void 0!==n&&void 0!==n.find((function(t){return t.field.name===e}))}},{key:"clear",value:function(){void 0!==this.control&&this.control.clear()}},{key:"clearErrors",value:function(){void 0!==this.control&&this.control.clearErrors()}},{key:"readValues",value:function(e){void 0!==this.control&&this.control.readValues(e)}},{key:"setError",value:function(e,t){void 0!==this.control&&this.control.setError(e,t)}},{key:"setInitValues",value:function(e){void 0!==this.control&&this.control.setInitValues(e)}},{key:"hasError",get:function(){return this.control.hasError}},{key:"filled",get:function(){return this.control.filled}}]),e}(),l=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(e){return Object(r.jsx)("div",{className:"form-group",children:this.row},e)}},{key:"hasError",get:function(){return!1}},{key:"filled",get:function(){return!1}}]),n}(o),h=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(e){return Object(r.jsxs)("div",{className:"form-group row",children:[Object(r.jsx)("label",{className:"col-sm-2 col-form-label",children:this.row.label}),this.control.render()]},e)}}]),n}(o);function p(e,t){return new h(e,t)}function d(e,t){return new l(e,t)}},function(e,t,n){"use strict";var r=n(104);n.d(t,"unitCaption",(function(){return r.a}));n(105),n(106)},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(1),a=n.n(r),i=n(3),s=n(4),c=n(2);function u(e,t,n,r,a){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(a.a.mark((function e(t,n,r,i,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch(n,r,!1,i,s);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(){function e(t,n){Object(i.a)(this,e),this.token=void 0,this.path=void 0,this.showWaiting=void 0,this.path=t||"",this.showWaiting=n}return Object(s.a)(e,[{key:"xcall",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return n=e.sent,e.next=5,n.xcall(this.path,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return i=e.sent,e.next=5,i.callFetch(t,n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:void 0,e.next=3,this.getHttpChannel();case 3:return r=e.sent,e.next=6,r.get(this.path+t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.post(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.put(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.delete(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r,a,i=n(1),s=n.n(i),c=n(2),u=n(0),o=n(12),l=n(3),h=n(4),p=n(13),d=n(6),f=n(7),v=n(10),b=(n(24),n(8)),m=n(11),j=n(9),O=n(67),y=n(19),x=(r=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),Object(o.a)(e,"resId",a,Object(p.a)(e)),e.page=Object(m.a)((function(t){var n=t.resolve,r=e.uiItem&&e.uiItem.size;return Object(u.jsx)(O.a,{label:"\u66f4\u6539"+e.label,id:e.resId,size:r,onSaved:function(e){n(e)}})})),e}return Object(h.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resId=this.value,e.abrupt("return",new Promise((function(e,n){y.b.push(b.createElement(t.page,{resolve:e,reject:n}),(function(){return n()}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uiItem",get:function(){return this._uiItem}}]),n}(n(30).a),a=Object(v.a)(r.prototype,"resId",[j.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r,a,i,s,c,u,o,l=n(25),h=n(1),p=n.n(h),d=n(2),f=n(12),v=n(3),b=n(4),m=n(10),j=(n(24),n(17)),O=n.n(j),y=n(9),x=(r=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(v.a)(this,e),this.isFirst=!0,this.pageItemAction=void 0,this.itemConverter=void 0,Object(f.a)(this,"loading",a,this),Object(f.a)(this,"beforeLoad",i,this),Object(f.a)(this,"loaded",s,this),this._items=void 0,Object(f.a)(this,"allLoaded",c,this),Object(f.a)(this,"topDiv",u,this),Object(f.a)(this,"bottomDiv",o,this),this.scrollToTop=function(){t.scrollIntoView(t.topDiv)},this.scrollToBottom=function(){t.scrollIntoView(t.bottomDiv)},this.param=void 0,this.firstSize=100,this.pageStart=void 0,this.pageSize=30,this.appendPosition="tail",this.sortOrder=void 0,this.changing=!1,void 0===n&&(n=!1),this._items=y.n.array([],{deep:n})}return Object(b.a)(e,[{key:"setEachPageItem",value:function(e){this.pageItemAction=e}},{key:"setItemConverter",value:function(e){this.itemConverter=e}},{key:"scrollIntoView",value:function(e){setTimeout((function(){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView()}),20)}},{key:"getPageId",value:function(e){}},{key:"setPageStart",value:function(e){this.pageStart=this.getPageId(e)}},{key:"load",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n,r){var a,i,s,c,u,o,l,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadResults(t,n,r);case 2:if(a=e.sent,i=a.$page,!this.itemConverter){e.next=9;break}for(s=[],c=i.length,u=0;u<c;u++)o=this.itemConverter(i[u],a),s.push(o);return e.abrupt("return",s);case 9:if(void 0!==this.pageItemAction)for(l=i.length,h=0;h<l;h++)this.pageItemAction(i[h],a);return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.isFirst=!0,this.beforeLoad=!0,this.loaded=!1,this.param=void 0,this.allLoaded=!1,this.pageStart=void 0,this._items.clear()}},{key:"append",value:function(e){"tail"===this.appendPosition?this._items.unshift(e):this._items.push(e)}},{key:"first",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this.beforeLoad=!1,this.param=t,e.next=5,this.more();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"attach",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r,a,i,s,c,u,o,l,h,d,f,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.sortOrder){e.next=3;break}return console.error("\u6ca1\u6709\u5b9a\u4e49\u589e\u51cf\u5e8f\uff0c\u65e0\u6cd5attach"),e.abrupt("return");case 3:if(!0!==this.changing){e.next=5;break}return e.abrupt("return");case 5:this.changing=!0,t=this._items,n="asc"===this.sortOrder,"tail"===this.appendPosition?(r=t[0],a=this.scrollToTop,i=function(e){return t.unshift(e)}):(s=t.length,r=t[s-1],a=this.scrollToBottom,i=function(e){return t.splice(s,0,e)}),c=this.getPageId(r),u=void 0,o=0,l=50;case 12:if(!(o<l)){e.next=39;break}return e.next=15,this.load(this.param,u,3);case 15:if(h=e.sent,0!==(d=h.length)){e.next=19;break}return e.abrupt("break",39);case 19:f=0;case 20:if(!(f<d)){e.next=37;break}if(v=h[f],u=this.getPageId(v),!0!==n){e.next=29;break}if(!(u>=c)){e.next=27;break}return l=0,e.abrupt("break",37);case 27:e.next=32;break;case 29:if(!(u<=c)){e.next=32;break}return l=0,e.abrupt("break",37);case 32:i(v),++o;case 34:f++,e.next=20;break;case 37:e.next=12;break;case 39:this.changing=!1,o>0&&a();case 41:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.changing){e.next=2;break}return e.abrupt("return");case 2:return this.changing=!0,e.next=5,this.load(this.param,void 0,this.firstSize>this.pageSize?this.firstSize:this.pageSize);case 5:t=e.sent,this._items.clear(),this.setLoaded(t),this.changing=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRefreshPageId",value:function(e){return this.getPageId(e)}},{key:"onLoad",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoaded",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"more",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.allLoaded){e.next=2;break}return e.abrupt("return",!1);case 2:if(!0!==this.loading){e.next=4;break}return e.abrupt("return",!0);case 4:if(!0!==this.changing){e.next=6;break}return e.abrupt("return",!0);case 6:return this.loading=!0,this.changing=!0,e.next=10,this.onLoad();case 10:return void 0===this.pageStart&&this.setPageStart(void 0),t=this.pageSize+1,!0===this.isFirst&&this.firstSize>this.pageSize&&(t=this.firstSize+1),e.next=15,this.load(this.param,this.pageStart,t);case 15:return n=e.sent,this.loaded=!0,r=n.length,!0===this.isFirst&&r>this.firstSize||!1===this.isFirst&&r>this.pageSize?(this.allLoaded=!1,--r,n.splice(r,1)):this.allLoaded=!0,this.setLoaded(n),this.isFirst=!1,this.onLoaded(),this.changing=!1,this.loading=!1,e.abrupt("return",!this.allLoaded);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setLoaded",value:function(e){var t,n,r=e.length;0===r?(this.setPageStart(void 0),this._items.clear()):(this.setPageStart(e[r-1]),"tail"===this.appendPosition?(t=this._items).push.apply(t,Object(l.a)(e)):(n=this._items).unshift.apply(n,Object(l.a)(e.reverse())))}},{key:"findItem",value:function(e){var t=this,n=this.getPageId(e),r=O.a.findIndex(this._items,(function(e){return t.getPageId(e)===n}));if(!(r<0))return this._items[r]}},{key:"items",get:function(){return!0===this.beforeLoad?null:!1!==this.loaded?this._items:void 0}}]),e}(),a=Object(m.a)(r.prototype,"loading",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(m.a)(r.prototype,"beforeLoad",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s=Object(m.a)(r.prototype,"loaded",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=Object(m.a)(r.prototype,"allLoaded",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(m.a)(r.prototype,"items",[y.g],Object.getOwnPropertyDescriptor(r.prototype,"items"),r.prototype),u=Object(m.a)(r.prototype,"topDiv",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"$$top"}}),o=Object(m.a)(r.prototype,"bottomDiv",[y.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"$$bottom"}}),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),a=n.n(r),i=n(2),s=n(3),c=n(4),u=new(function(){function e(){Object(s.a)(this,e),this.handlerSeed=1,this.anyHandlers={},this.msgHandlers={}}return Object(c.a)(e,[{key:"registerReceiveHandler",value:function(){var e,t=this.handlerSeed++,n=arguments.length<=0?void 0:arguments[0];switch(typeof n){case"string":e=arguments.length<=1?void 0:arguments[1],this.msgHandlers[t]={type:n,handler:e};break;case"function":this.anyHandlers[t]=n}return t}},{key:"unregisterReceiveHandler",value:function(e){delete this.anyHandlers[e],delete this.msgHandlers[e]}},{key:"dispatch",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.$type,e.t0=a.a.keys(this.anyHandlers);case 2:if((e.t1=e.t0()).done){e.next=8;break}return r=e.t1.value,e.next=6,this.anyHandlers[r](t);case 6:e.next=2;break;case 8:e.t2=a.a.keys(this.msgHandlers);case 9:if((e.t3=e.t2()).done){e.next=18;break}if(i=e.t3.value,s=this.msgHandlers[i],c=s.type,u=s.handler,c===n){e.next=14;break}return e.abrupt("continue",9);case 14:return e.next=16,u(t);case 16:e.next=9;break;case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(25),a=n(3),i=n(4),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#";Object(a.a)(this,e),this.root=void 0,this._routes=[],this._useHash=void 0,this._hash=void 0,this._paused=void 0,this._destroyed=void 0,this._lastRouteResolved=void 0,this._notFoundHandler=void 0,this._defaultHandler=void 0,this._usePushState=void 0,this._genericHooks=void 0,this._historyUpdateMethod=void 0,this.timout=void 0,this._onLocationChange=function(){console.log("_onLocationChange"),t.resolve()},this.root=null,this._useHash=r,this._hash=i||"#",this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!r&&e.isPushStateAvailable(),this._genericHooks=null,this._historyUpdateMethod="pushState",n?this.root=r?n.replace(/\/$/,"/"+this._hash):n.replace(/\/$/,""):r&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}return Object(i.a)(e,null,[{key:"isPushStateAvailable",value:function(){return!("undefined"===typeof window||!window.history||!window.history.pushState)}},{key:"clean",value:function(t){return t instanceof RegExp?t:e.cleanUrl(t)}},{key:"cleanUrl",value:function(e){return e.replace(/\/+$/,"").replace(/^\/+/,"^/")}},{key:"regExpResultToParams",value:function(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce((function(e,n,r){return null===e&&(e={}),e[t[r]]=decodeURIComponent(n),e}),null):null}},{key:"replaceDynamicURLParts",value:function(t){var n=[];return{regexp:t instanceof RegExp?t:new RegExp(t.replace(e.PARAMETER_REGEXP,(function(t,r,a){return n.push(a),e.REPLACE_VARIABLE_REGEXP})).replace(e.WILDCARD_REGEXP,e.REPLACE_WILDCARD)+e.FOLLOWED_BY_SLASH_REGEXP,e.MATCH_REGEXP_FLAGS),paramNames:n}}},{key:"getUrlDepth",value:function(e){return e.replace(/\/$/,"").split("/").length}},{key:"compareUrlDepth",value:function(t,n){return e.getUrlDepth(n)-e.getUrlDepth(t)}},{key:"findMatchedRoutes",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.map((function(n){var r=e.replaceDynamicURLParts(e.clean(n.route)),a=r.regexp,i=r.paramNames,s=t.replace(/^\/+/,"/").match(a),c=e.regExpResultToParams(s,i);return!!s&&{match:s,route:n,params:c}})).filter((function(e){return e}))}},{key:"match",value:function(t,n){return e.findMatchedRoutes(t,n)[0]||!1}},{key:"root",value:function(t,n){var r=RegExp("\\/:\\D(\\w*)","g"),a=n.map((function(e){var n=e.route;if(""===n||"*"===n)return t;"string"===typeof n&&(n=n.replace(r,"\\/(\\w|%|[\u4e00-\u9fcc])+"));var a=n+"";return t.split(new RegExp(a))[0]})),i=e.cleanUrl(t),s=a.length;if(0===s)return i;var c=a[0];return 1===s?c:a.reduce((function(e,t){return e.length>t.length&&(e=t),e}),c)}},{key:"isHashChangeAPIAvailable",value:function(){return"undefined"!==typeof window&&"onhashchange"in window}},{key:"extractGETParameters",value:function(e){return e.split(/\?(.*)?$/).slice(1).join("")}},{key:"getOnlyURL",value:function(t,n,r){var a,i=function(e){return e.split(/\?(.*)?$/)[0]};return"undefined"===typeof r&&(r="#"),e.isPushStateAvailable()&&!n?i(t).split(r)[0]:(a=t.split(r)).length>1?i(a[1]):i(a[0])}},{key:"manageHooks",value:function(e,t,n,r){if(t&&"object"===typeof t){if(t.before)return void t.before((function(){var r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r&&(e(),t.after&&t.after(n))}),n);if(t.after)return e(),void(t.after&&t.after(n))}e()}},{key:"isHashedRoot",value:function(t,n,r){if(e.isPushStateAvailable()&&!n)return!1;if(!t.match(r))return!1;var a=t.split(r);return a.length<2||""===a[1]}}]),Object(i.a)(e,[{key:"navigate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=e||"",this._usePushState)t=(t=(t=(n?"":this._getRoot()+"/")+e.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/")).replace("/#test/","/"),this._historyUpdate({},"",t),this.resolve();else if("undefined"!==typeof window){e=e.replace(new RegExp("^"+this._hash),"");var r=window,a=r.location;a.href=a.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e}return this}},{key:"on",value:function(){var t=this,n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1];switch(typeof n){case"function":this._defaultHandler={handler:n,hooks:r},this._notFoundHandler||(this._notFoundHandler=this._defaultHandler);break;case"object":var a=Object.keys(n).sort(e.compareUrlDepth);a.forEach((function(e){return t.on(e,n[e])}));break;default:if(arguments.length<2)break;if("/"===n){this._defaultHandler={handler:"object"===typeof r?r.uses:r,hooks:arguments.length<=2?void 0:arguments[2]};break}this._add(n,r,arguments.length<=2?void 0:arguments[2])}return this}},{key:"off",value:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce((function(t,n){return n.handler!==e&&t.push(n),t}),[]),this}},{key:"notFound",value:function(e,t){return this._notFoundHandler={handler:e,hooks:t},this}},{key:"resolve",value:function(t){var n=this,a=t||this._cLoc(),i=this._getRoot(),s=a.replace(i,"");if(this._useHash){s=s.replace(new RegExp("^\\/"+this._hash),"/")}var c=e.extractGETParameters(t||this._cLoc()),u=e.getOnlyURL(s,this._useHash,this._hash);if(!1===u.startsWith("/")&&(u="/"+u),this._paused)return!1;if(this._lastRouteResolved&&u===this._lastRouteResolved.url&&c===this._lastRouteResolved.query)return this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1;var o=e.match(u,this._routes),l=function(t){e.manageHooks((function(){e.manageHooks((function(){n._callLeave(),n._lastRouteResolved={url:u,query:c,hooks:t.hooks},t.handler(c)}),t.hooks)}),n._genericHooks)};if(!1===o)return this._defaultHandler&&(""===u||"/"===u||u===this._hash||e.isHashedRoot(u,this._useHash,this._hash))?(l(this._defaultHandler),!0):(this._notFoundHandler&&l(this._notFoundHandler),!1);var h=o;if(h){this._callLeave(),this._lastRouteResolved={url:u,query:c,hooks:h.route.hooks,params:h.params,name:h.route.name};var p=h.route.handler;return e.manageHooks((function(){e.manageHooks((function(){h.route.route instanceof RegExp?p.apply(void 0,Object(r.a)(h.match.slice(1,h.match.length))):p(h.params,c)}),h.route.hooks,h.params,n._genericHooks)}),this._genericHooks,h.params),h}}},{key:"destroy",value:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this.timout),"undefined"!==typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))}},{key:"updatePageLinks",value:function(){var e=this;"undefined"!==typeof document&&this._findLinks().forEach((function(t){t.hasListenerAttached||(t.addEventListener("click",(function(n){if((n.ctrlKey||n.metaKey)&&"a"===n.currentTarget.tagName.toLowerCase())return!1;var r=e.getLinkPath(t);e._destroyed||(n.preventDefault(),e.navigate(r.replace(/\/+$/,"").replace(/^\/+/,"/")))})),t.hasListenerAttached=!0)}))}},{key:"generate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce((function(n,r){if(r.name===e)for(var a in n=r.route.toString(),t)n=n.replace(":"+a,t[a]);return n}),"");return this._useHash?this._hash+n:n}},{key:"link",value:function(e){return this._getRoot()+e}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,this._historyUpdateMethod=e?"replaceState":"pushState"}},{key:"resume",value:function(){this.pause(!1)}},{key:"historyAPIUpdateMethod",value:function(e){return"undefined"===typeof e?this._historyUpdateMethod:(this._historyUpdateMethod=e,e)}},{key:"disableIfAPINotAvailable",value:function(){e.isPushStateAvailable()||this.destroy()}},{key:"lastRouteResolved",value:function(){return this._lastRouteResolved}},{key:"getLinkPath",value:function(e){return e.getAttribute("href")}},{key:"hooks",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){this._genericHooks=e}))},{key:"_add",value:function(e,t,n){return"string"===typeof e&&(e=encodeURI(e)),this._routes.push("object"===typeof t?{route:e,handler:t.uses,name:t.as,hooks:n||t.hooks}:{route:e,handler:t,name:void 0,hooks:n}),this._add}},{key:"_historyUpdate",value:function(e,t,n){switch(this._historyUpdateMethod){default:throw Error("unknow history method "+this._historyUpdateMethod);case"pushState":return void window.history.pushState(e,t,n);case"replaceState":return void window.history.replaceState(e,t,n)}}},{key:"_getRoot",value:function(){if(null===this.root){var t=this._cLoc().split("?")[0];this.root=e.root(t,this._routes)}return this.root.replace("#test","")}},{key:"_listen",value:function(){var t=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if(e.isHashChangeAPIAvailable())window.addEventListener("hashchange",this._onLocationChange);else{var n=this._cLoc();!function e(){var r=t._cLoc();n!==r&&(n=r,t.resolve()),t.timout&&clearTimeout(t.timout),t.timout=setTimeout(e,200)}()}}},{key:"_cLoc",value:function(){if("undefined"!==typeof window){var t=window.location.href;return e.cleanUrl(t)}return""}},{key:"_findLinks",value:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))}},{key:"_callLeave",value:function(){var e=this._lastRouteResolved;if(e){var t=e.params,n=e.hooks;n&&n.leave&&n.leave(t)}}}]),e}();s.PARAMETER_REGEXP=/([:*])(\w+)/g,s.WILDCARD_REGEXP=/\*/g,s.REPLACE_VARIABLE_REGEXP="([^\\/]+)",s.REPLACE_WILDCARD="(?:.*)",s.FOLLOWED_BY_SLASH_REGEXP="(?:\\/$|$)",s.MATCH_REGEXP_FLAGS="";new s},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(3),a=n(4),i=n(6),s=n(7),c=n(0),u=n(1),o=n.n(u),l=n(2),h=n(8),p=n(19);function d(e,t){var n=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.b.back();case 2:(n=e.afterBack)&&n();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=p.b.level>1||window.self!==window.top,a=e.back,i=e.right,s=e.center,u=e.logout,h=e.className,d=e.ex;if(!0!==t||a||i||s){var f,v;if(void 0!==u&&window.self===window.top&&("boolean"===typeof u&&!0===u||"function"===typeof u)){var b=p.b.user;if(void 0!==b){var m=b.nick,j=b.name;v=Object(c.jsxs)("div",{className:"d-flex align-items-center",children:[Object(c.jsx)("small",{className:"text-light",children:m||j}),Object(c.jsx)("div",{className:"ml-2 py-2 px-3 cursor-pointer",role:"button",onClick:function(){var t=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!==typeof(n=e.logout)){t.next=4;break}return t.next=4,n();case 4:return t.next=6,p.b.logout(void 0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();p.b.showLogout(t)},children:Object(c.jsx)("i",{className:"fa fa-sign-out fa-lg"})})]})}}if(r)switch(e.back){case"none":f=void 0;break;default:case"back":case"close":f=Object(c.jsx)("nav",{onClick:n,children:p.b.backIcon})}window.self!==window.top&&console.log(document.location.href),void 0===f&&"string"===typeof s&&(s=Object(c.jsx)("div",{className:"px-3",children:s}));var O=(i||v)&&Object(c.jsxs)("aside",{children:[i," ",v]}),y=Object(c.jsxs)("header",{className:h,children:[Object(c.jsxs)("nav",{children:[f,Object(c.jsx)("div",{children:s}),O]}),d]});return!0===t?y:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("section",{className:"tv-page-header",children:y}),y]})}}h.Component},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r,a,i,s,c,u,o,l,h=n(6),p=n(7),d=n(0),f=n(1),v=n.n(f),b=n(2),m=n(12),j=n(3),O=n(4),y=n(10),x=(n(24),n(8)),g=n(9),k=n(11),w=n(16),C=n.n(w),A=(n(130),n(44)),N=(r=function(){function e(){Object(j.a)(this,e),Object(m.a)(this,"loaded",a,this),this.name=void 0,Object(m.a)(this,"selected",i,this),this.caption=void 0,this.contentBuilder=void 0,this.page=void 0,this.notify=void 0,this.load=void 0,this.onShown=void 0,this.onScroll=void 0,this.onScrollTop=void 0,this.onScrollBottom=void 0,this.className=void 0,this._content=void 0}return Object(O.a)(e,[{key:"shown",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.onShown){e.next=3;break}return e.next=3,this.onShown();case 3:if(void 0===this.load){e.next=8;break}if(!1!==this.loaded){e.next=8;break}return e.next=7,this.load();case 7:this.loaded=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"content",get:function(){return this.load&&!1===this.loaded?null:(!1===this.selected||this._content||(void 0!==this.contentBuilder?this._content=this.contentBuilder():void 0!==this.page?this._content=this.page.content():this._content=Object(d.jsx)("div",{className:"p-5",children:"tab \u5e94\u8be5\u5b9a\u4e49content\u6216\u8005page"})),this._content)}}]),e}(),a=Object(y.a)(r.prototype,"loaded",[g.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(y.a)(r.prototype,"selected",[g.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r),S=(s=function(){function e(t){var n=this;Object(j.a)(this,e),this.props=void 0,this.size=void 0,this.tabBg=void 0,this.sep=void 0,Object(m.a)(this,"selectedTab",c,this),Object(m.a)(this,"tabArr",u,this),this.tabClick=function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}if(void 0!==(t=n.selectedTab)){e.next=8;break}if(void 0!==n.tabArr){e.next=5;break}return e.abrupt("return");case 5:if(0!==n.tabArr.length){e.next=7;break}return e.abrupt("return");case 7:t=n.tabArr[0];case 8:return n.selectedTab.selected=!1,t.selected=!0,n.selectedTab=t,e.next=13,t.shown();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.tabs=Object(k.a)((function(){var e,t,r=n.props,a=r.tabPosition,i=r.borderColor;i&&(e={borderColor:i,borderStyle:"solid",borderTopWidth:1,borderLeftWidth:1,borderRightWidth:1,borderBottomWidth:1},t={borderColor:i,borderStyle:"solid",borderTopWidth:1,borderBottomWidth:1,borderLeftWidth:0,borderRightWidth:0},"top"===a?(e.borderBottomWidth=0,e.borderTopLeftRadius=10,e.borderTopRightRadius=10,t.borderTopWidth=0):(e.borderTopWidth=0,e.borderBottomLeftRadius=10,e.borderBottomRightRadius=10,t.borderBottomWidth=0));var s=C()("tv-tabs",n.tabBg,n.sep,"tv-tabs-"+n.size);return Object(d.jsx)("div",{className:s,children:n.tabArr.map((function(r,a){var i,s=r.selected,c=r.caption,u=r.notify;if(void 0!==u){var o=u.get();void 0!==o&&(o>0?i=Object(d.jsx)("u",{children:o>99?"99+":o}):o<0&&(i=Object(d.jsx)("u",{className:"dot"})))}return Object(d.jsx)("div",{onClick:function(){return n.tabClick(r)},style:!0===s?e:t,children:Object(d.jsxs)("div",{children:[i,c(s)]})},a)}))})})),this.content=Object(k.a)((function(){var e={visibility:"hidden"};return Object(d.jsx)(d.Fragment,{children:n.tabArr.map((function(t,r){var a,i,s,c,u=n.props.tabPosition,o=t.content,l=t.page,h=t.onScroll,p=t.onScrollTop,f=t.onScrollBottom,v=t.className,b=x.createElement(n.tabs);void 0!==l&&(a=l.header(),i=l.footer());var m,j={visibility:"hidden"};return"top"===u?(s=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("section",{className:"tv-page-header",children:Object(d.jsxs)("header",{children:[b,a]})}),Object(d.jsxs)("header",{style:j,children:[b,a]})]}),void 0!==i&&(c=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("footer",{style:j,children:i}),Object(d.jsx)("section",{className:"tv-page-footer",children:Object(d.jsx)("footer",{children:i})})]}))):(void 0!==a&&(s=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("section",{className:"tv-page-header",children:Object(d.jsx)("header",{children:a})}),Object(d.jsx)("header",{style:j,children:a})]})),c=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("footer",{style:j,children:[i,b]}),Object(d.jsx)("section",{className:"tv-page-footer",children:Object(d.jsxs)("footer",{children:[i,b]})})]})),!1===t.selected&&(m=e),Object(d.jsxs)(A.a,{className:v,style:m,onScroll:h,onScrollTop:p,onScrollBottom:f,children:[s,o,c]},r)}))})})),this.props=t;var r=t.size,a=t.tabs,i=t.tabBg,s=t.sep,o=t.selected;this.size=r||"md",this.tabArr=a.map((function(e){var t=new N,r=e.name,a=e.caption,i=e.content,s=e.page,c=e.notify,u=e.load,l=e.onShown,h=e.isSelected,p=e.onScroll,d=e.onScrollTop,f=e.onScrollBottom,v=e.className;return t.name=r,!0!==h&&r!==o||(n.selectedTab=t),t.selected=!1,t.caption=a,void 0!==i?t.contentBuilder=i:void 0!==s&&(t.page=s),t.notify=c,t.load=u,t.onShown=l,t.onScroll=p,t.onScrollTop=d,t.onScrollBottom=f,t.className=v,t})),this.tabBg=i,this.sep=s,void 0===this.selectedTab&&(this.selectedTab=this.tabArr[0]),this.selectedTab.selected=!0}return Object(O.a)(e,[{key:"render",value:function(){var e,t,n=this.props.tabPosition,r=x.createElement(this.tabs),a={display:"none"};return"top"===n?e=Object(d.jsx)("header",{children:r}):t=Object(d.jsx)("footer",{children:r}),Object(d.jsxs)(d.Fragment,{children:[e,this.tabArr.map((function(e,t){var n;return!1===e.selected&&(n=a),Object(d.jsx)("div",{className:C()(e.className),style:n,children:e.content},t)})),t]})}}]),e}(),c=Object(y.a)(s.prototype,"selectedTab",[g.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=Object(y.a)(s.prototype,"tabArr",[g.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s);Object(k.a)(o=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(j.a)(this,n),(r=t.call(this,e)).tabsView=void 0,r.tabsView=new S(e),setTimeout((function(){r.tabsView.tabClick(void 0)}),100),r}return Object(O.a)(n,[{key:"render",value:function(){return this.tabsView.render()}}]),n}(x.Component)),Object(k.a)(l=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(j.a)(this,n),(r=t.call(this,e)).tabsView=void 0,r.tabsView=new S(e),setTimeout((function(){r.tabsView.tabClick(void 0)}),100),r}return Object(O.a)(n,[{key:"render",value:function(){return x.createElement(this.tabsView.content)}}]),n}(x.Component))},function(e,t,n){"use strict";n.d(t,"a",(function(){return ie}));var r,a,i,s,c,u,o,l,h,p,d,f,v,b,m,j,O,y,x,g,k,w,C,A,N,S,P,I,U,E,_,R,T,V=n(0),q=n(1),F=n.n(q),L=n(2),D=n(12),B=n(3),M=n(4),z=n(13),H=n(6),W=n(7),$=n(10),G=(n(24),n(8)),K=n(19),Q=n(49),J=n(40),X=n(27),Y=n(11),Z=n(9),ee=n(46),te=Object(Y.a)((a=function(e){Object(H.a)(n,e);var t=Object(W.a)(n);function n(){var e;Object(B.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).fileInput=void 0,Object(D.a)(e,"fileName",i,Object(z.a)(e)),e.upload=function(){var t=Object(L.a)(F.a.mark((function t(n){var r,a,i,s;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=K.b.resUrl+"upload",n||(n=e.buildFormData()),t.prev=2,K.b.startWait(),(a=new Headers).append("Access-Control-Allow-Origin","*"),t.next=8,fetch(r,{method:"POST",body:n,headers:a});case 8:return i=t.sent,t.next=11,i.json();case 11:return s=t.sent,t.abrupt("return",":"+s.res.id);case 15:return t.prev=15,t.t0=t.catch(2),console.error("%s %s",r,t.t0),t.abrupt("return",{error:t.t0});case 19:return t.prev=19,K.b.endWait(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[2,15,19,22]])})));return function(e){return t.apply(this,arguments)}}(),e.onFilesChange=function(t){var n=e.props.onFilesChange;n&&n(t);for(var r=t.target.files,a=r.length,i=[],s=0;s<a;s++)i.push(r.item(s).name);e.fileName=i.join(", ")},e}return Object(M.a)(n,[{key:"buildFormData",value:function(){var e=this.props.maxSize;void 0===e||e<=0?e=1e11:e*=1024;for(var t=this.fileInput.files,n=new FormData,r=t.length,a=0;a<r;a++){var i=t[a];if(i.size>e)return null;n.append("files[]",i,i.name)}}},{key:"getFile0",value:function(){return this.fileInput.files[0]}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.multiple,a=t.label;return Object(V.jsxs)("div",{children:[Object(V.jsxs)("label",{className:"btn btn-outline-success",children:[a||"\u9009\u62e9\u6587\u4ef6",Object(V.jsx)("input",{className:n,ref:function(t){return e.fileInput=t},onChange:this.onFilesChange,type:"file",name:"file",multiple:r,style:{display:"none"}})]}),"\xa0",this.fileName]})}}]),n}(G.Component),i=Object($.a)(a.prototype,"fileName",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=a))||r;function ne(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2?arguments[2]:void 0;for(r=r||["B","K","M","G","TB"];(t=r.shift())&&e>1024;)e/=1024;return("B"===t?e:e.toFixed(void 0===n?2:n))+t}var re=1600,ae=400,ie=Object(Y.a)((g=x=function(e){Object(H.a)(n,e);var t=Object(W.a)(n);function n(e){var r;return Object(B.a)(this,n),(r=t.call(this,e)).imgBaseSize=void 0,r.imageTypes=void 0,r.suffix=void 0,r.resUploader=void 0,Object(D.a)(r,"file",u,Object(z.a)(r)),Object(D.a)(r,"desImgWidth",o,Object(z.a)(r)),Object(D.a)(r,"desImgHeight",l,Object(z.a)(r)),Object(D.a)(r,"desImgSize",h,Object(z.a)(r)),Object(D.a)(r,"srcImgWidth",p,Object(z.a)(r)),Object(D.a)(r,"srcImgHeight",d,Object(z.a)(r)),Object(D.a)(r,"isChanged",f,Object(z.a)(r)),Object(D.a)(r,"resId",v,Object(z.a)(r)),Object(D.a)(r,"enableUploadButton",b,Object(z.a)(r)),Object(D.a)(r,"srcImage",m,Object(z.a)(r)),Object(D.a)(r,"desImage",j,Object(z.a)(r)),Object(D.a)(r,"fileError",O,Object(z.a)(r)),Object(D.a)(r,"uploaded",y,Object(z.a)(r)),r.onFileChange=function(e){if(r.fileError=void 0,r.uploaded=!1,r.enableUploadButton=e.target.files.length>0,r.enableUploadButton){r.file=e.target.files[0];var t=r.file.name.lastIndexOf(".");if(t>=0&&(r.suffix=r.file.name.substr(t+1).toLowerCase()),r.imageTypes.indexOf(r.suffix)<0)return void(r.fileError="\u56fe\u7247\u7c7b\u578b\u5fc5\u987b\u662f ".concat(r.imageTypes.join(", ")," \u4e2d\u7684\u4e00\u79cd"));var n=new FileReader;n.readAsDataURL(r.file),n.onload=Object(L.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.srcImage=n.result,e.t0=r.suffix,e.next="svg"===e.t0?7:4;break;case 4:return e.next=6,r.setSize(r.props.size);case 6:return e.abrupt("break",11);case 7:return r.imgBaseSize=ae,r.desImgSize=r.srcImage.length,r.desImage=r.srcImage,e.abrupt("break",11);case 11:case"end":return e.stop()}}),e)})))}},r.compress=function(){return new Promise((function(e,t){var n=new Image;n.src=r.srcImage,n.onload=function(){var t=n.width,a=n.height;r.srcImgWidth=t,r.srcImgHeight=a;var i,s,c=t/a;r.imgBaseSize<0||t<=r.imgBaseSize&&a<=r.imgBaseSize?(i=t,s=a):c<0?s=(i=r.imgBaseSize)/c:i=(s=r.imgBaseSize)*c,r.desImgWidth=Math.round(i),r.desImgHeight=Math.round(s);var u=document.createElement("canvas"),o=u.getContext("2d"),l=document.createAttribute("width");l.nodeValue=String(i);var h=document.createAttribute("height");h.nodeValue=String(s),u.setAttributeNode(l),u.setAttributeNode(h),o.drawImage(n,0,0,i,s);var p=u.toDataURL("image/"+r.suffix,.7),d=r.convertBase64UrlToBlob(p);r.desImgSize=d.size,r.desImgSize>3145728&&(r.fileError="\u56fe\u7247\u5927\u4e8e3M\uff0c\u65e0\u6cd5\u4e0a\u4f20",r.enableUploadButton=!1),e(p)}}))},r.upload=Object(L.a)(F.a.mark((function e(){var t,n,a,i,s,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.resUploader){e.next=2;break}return e.abrupt("return");case 2:return t=new FormData,n=r.convertBase64UrlToBlob(r.desImage),t.append("image",n,r.file.name),e.next=7,r.resUploader.upload(t);case 7:if("object"!==typeof(a=e.sent)){e.next=24;break}i=a.error,s=typeof i,e.t0=s,e.next="undefined"===e.t0?14:"string"===e.t0?16:"object"===e.t0?18:20;break;case 14:return c="error: undefined",e.abrupt("break",22);case 16:return c=i,e.abrupt("break",22);case 18:return c=i.message,e.abrupt("break",22);case 20:return c=String(c),e.abrupt("break",22);case 22:return r.fileError="error: "+s+" - "+c,e.abrupt("return");case 24:r.resId=a,r.isChanged=r.resId!==r.props.id,r.uploaded=!0;case 27:case"end":return e.stop()}}),e)}))),r.onSaved=function(){var e=r.props.onSaved;e&&e(r.resId)},r.showOrgImage=function(){K.b.push(Object(V.jsx)(X.a,{header:"\u539f\u56fe",children:Object(V.jsx)("div",{className:"p-3 text-center",children:Object(V.jsx)(J.a,{className:"h-min-4c",style:{maxWidth:"100%"},src:r.srcImage})})}))},r.resId=e.id,r.imageTypes=e.imageTypes||n.imageTypes,r}return Object(M.a)(n,[{key:"setSize",value:function(){var e=Object(L.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="sm"===e.t0?3:"md"===e.t0?5:"lg"===e.t0?7:"xl"===e.t0?9:"raw"===e.t0?11:3;break;case 3:return this.imgBaseSize=180,e.abrupt("break",13);case 5:return this.imgBaseSize=ae,e.abrupt("break",13);case 7:return this.imgBaseSize=800,e.abrupt("break",13);case 9:return this.imgBaseSize=re,e.abrupt("break",13);case 11:return this.imgBaseSize=-1,e.abrupt("break",13);case 13:return e.next=15,this.compress();case 15:this.desImage=e.sent;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertBase64UrlToBlob",value:function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return new Blob([i],{type:n})}},{key:"levelDiv",value:function(){var e=this;if(!this.props.size){var t=[{caption:"\u5c0f\u56fe",size:"sm"}];if((this.srcImgHeight>ae||this.srcImgWidth>ae)&&t.push({caption:"\u4e2d\u56fe",size:"md"}),(this.srcImgHeight>800||this.srcImgWidth>800)&&t.push({caption:"\u5927\u56fe",size:"lg"}),(this.srcImgHeight>re||this.srcImgWidth>re)&&(t.push({caption:"\u8d85\u5927\u56fe",size:"xl"}),t.push({caption:"\u539f\u56fe",size:"raw"})),!(t.length<2))return Object(V.jsx)("div",{children:t.map((function(t,n){var r=t.caption,a=t.size;return Object(V.jsxs)("label",{className:"mr-3",children:[Object(V.jsx)("input",{type:"radio",name:"size",onChange:function(){return e.setSize(a)},defaultChecked:0===n})," ",r]},n)}))})}}},{key:"render",value:function(){var e=this,t=this.props.label,n=Object(V.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!this.isChanged,onClick:this.onSaved,children:"\u4fdd\u5b58"});return Object(V.jsx)(X.a,{header:t||"\u66f4\u6539\u56fe\u7247",right:n,children:Object(V.jsxs)("div",{className:"my-3 px-3 py-3 bg-white",children:[Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{className:"mb-3",children:[Object(V.jsx)(te,{ref:function(t){return e.resUploader=t},multiple:!1,maxSize:2048,label:"\u9009\u62e9\u56fe\u7247\u6587\u4ef6",onFilesChange:this.onFileChange}),Object(V.jsxs)("div",{className:"small text-muted",children:["\u652f\u6301 ",this.imageTypes.join(", ")," \u683c\u5f0f\u56fe\u7247\u3002"]}),this.fileError&&Object(V.jsx)("div",{className:"text-danger",children:this.fileError})]}),Object(V.jsx)(ee.c,{left:!0===this.uploaded?Object(V.jsx)("div",{className:"text-success p-2",children:"\u4e0a\u4f20\u6210\u529f\uff01"}):this.file&&this.desImgSize>0&&Object(V.jsxs)("div",{className:"mb-3 d-flex align-items-end",children:[Object(V.jsxs)("div",{className:"mr-5",children:[this.levelDiv(),Object(V.jsxs)("div",{children:["\u5206\u8fa8\u7387\uff1a",this.desImgWidth," x ",this.desImgHeight,"\xa0 \xa0 \u6587\u4ef6\u5927\u5c0f\uff1a",ne(this.desImgSize)]})]}),Object(V.jsx)("button",{className:"btn btn-primary",disabled:!this.enableUploadButton,onClick:this.upload,children:"\u4e0a\u4f20"})]}),right:this.desImage&&Object(V.jsxs)("button",{className:"btn btn-link btn-sm text-right mb-3",onClick:this.showOrgImage,children:["\u539f\u56fe\u5927\u5c0f: ",ne(this.file.size),Object(V.jsx)("br",{}),"\u5206\u8fa8\u7387\uff1a",this.srcImgWidth," x ",this.srcImgHeight]})})]}),Object(V.jsx)("div",{className:"text-center",style:{border:!0===this.uploaded?"2px solid green":"1px dotted gray",padding:"8px"},children:Object(V.jsx)(J.a,{className:"h-min-4c",style:{maxWidth:"100%"},src:this.desImage})})]})})}}]),n}(G.Component),x.imageTypes=["gif","jpg","jpeg","png","svg","apng","bmp","ico","cur","tiff","tif","webp"],c=g,u=Object($.a)(c.prototype,"file",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object($.a)(c.prototype,"desImgWidth",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=Object($.a)(c.prototype,"desImgHeight",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=Object($.a)(c.prototype,"desImgSize",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object($.a)(c.prototype,"srcImgWidth",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=Object($.a)(c.prototype,"srcImgHeight",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=Object($.a)(c.prototype,"isChanged",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=Object($.a)(c.prototype,"resId",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=Object($.a)(c.prototype,"enableUploadButton",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object($.a)(c.prototype,"srcImage",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=Object($.a)(c.prototype,"desImage",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=Object($.a)(c.prototype,"fileError",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=Object($.a)(c.prototype,"uploaded",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=c))||s;Object(Y.a)((T=R=function(e){Object(H.a)(n,e);var t=Object(W.a)(n);function n(e){var r;return Object(B.a)(this,n),(r=t.call(this,e)).suffix=void 0,r.resUploader=void 0,Object(D.a)(r,"content",C,Object(z.a)(r)),Object(D.a)(r,"file",A,Object(z.a)(r)),Object(D.a)(r,"fileSize",N,Object(z.a)(r)),Object(D.a)(r,"isChanged",S,Object(z.a)(r)),Object(D.a)(r,"resId",P,Object(z.a)(r)),Object(D.a)(r,"enableUploadButton",I,Object(z.a)(r)),Object(D.a)(r,"fileError",U,Object(z.a)(r)),Object(D.a)(r,"uploaded",E,Object(z.a)(r)),Object(D.a)(r,"uploading",_,Object(z.a)(r)),r.onFileChange=function(e){if(r.fileError=void 0,r.uploaded=!1,r.enableUploadButton=e.target.files.length>0,r.enableUploadButton){r.file=e.target.files[0];var t=r.file.name.lastIndexOf(".");if(t>=0&&(r.suffix=r.file.name.substr(t+1).toLowerCase()),n.audioTypes.indexOf(r.suffix)<0)return void(r.fileError="\u97f3\u9891\u7c7b\u578b\u5fc5\u987b\u662f ".concat(n.audioTypes.join(", ")," \u4e2d\u7684\u4e00\u79cd"));var a=new FileReader;a.readAsDataURL(r.file),a.onload=Object(L.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.content=a.result,r.fileSize=r.content.length;case 2:case"end":return e.stop()}}),e)})))}},r.upload=Object(L.a)(F.a.mark((function e(){var t,n,a,i,s,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.resUploader){e.next=2;break}return e.abrupt("return");case 2:return r.uploading=!0,t=new FormData,n=r.convertBase64UrlToBlob(r.content),t.append("image",n,r.file.name),e.next=8,r.resUploader.upload(t);case 8:if("object"!==typeof(a=e.sent)){e.next=25;break}i=a.error,s=typeof i,e.t0=s,e.next="undefined"===e.t0?15:"string"===e.t0?17:"object"===e.t0?19:21;break;case 15:return c="error: undefined",e.abrupt("break",23);case 17:return c=i,e.abrupt("break",23);case 19:return c=i.message,e.abrupt("break",23);case 21:return c=String(c),e.abrupt("break",23);case 23:return r.fileError="error: "+s+" - "+c,e.abrupt("return");case 25:r.resId=a,r.isChanged=r.resId!==r.props.id,r.uploaded=!0;case 28:case"end":return e.stop()}}),e)}))),r.onSaved=function(){var e=r.props.onSaved;e&&e(r.resId)},r.resId=e.id,r}return Object(M.a)(n,[{key:"convertBase64UrlToBlob",value:function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return new Blob([i],{type:n})}},{key:"render",value:function(){var e=this,t=this.props.label,r=Object(V.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!this.isChanged,onClick:this.onSaved,children:"\u4fdd\u5b58"});return Object(V.jsxs)(X.a,{header:t||"\u66f4\u6539\u6587\u4ef6",right:r,children:[Object(V.jsx)("div",{className:"my-3 px-3 py-3 bg-white",children:Object(V.jsx)("div",{children:Object(V.jsxs)("div",{className:"mb-3",children:[Object(V.jsx)(te,{ref:function(t){return e.resUploader=t},multiple:!1,maxSize:2048,label:"\u9009\u62e9\u97f3\u9891\u6587\u4ef6",onFilesChange:this.onFileChange}),Object(V.jsxs)("div",{className:"small text-muted",children:["\u652f\u6301 ",n.audioTypes.join(", ")," \u683c\u5f0f\u3002"]}),this.fileError&&Object(V.jsx)("div",{className:"text-danger",children:this.fileError})]})})}),Object(V.jsx)(ee.c,{left:!0===this.uploaded?Object(V.jsx)("div",{className:"text-success p-2",children:"\u4e0a\u4f20\u6210\u529f\uff01"}):!0===this.uploading?Object(V.jsx)("div",{className:"m-3",children:Object(V.jsx)(Q.a,{})}):this.file&&this.content&&Object(V.jsxs)("div",{className:"m-3",children:[Object(V.jsxs)("div",{className:"mb-3",children:["\u6587\u4ef6\u5927\u5c0f\uff1a",ne(this.fileSize)]}),Object(V.jsx)("button",{className:"btn btn-primary",disabled:!this.enableUploadButton,onClick:this.upload,children:"\u4e0a\u4f20"})]})})]})}}]),n}(G.Component),R.audioTypes=["mp3","wav"],w=T,C=Object($.a)(w.prototype,"content",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object($.a)(w.prototype,"file",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object($.a)(w.prototype,"fileSize",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=Object($.a)(w.prototype,"isChanged",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object($.a)(w.prototype,"resId",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=Object($.a)(w.prototype,"enableUploadButton",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=Object($.a)(w.prototype,"fileError",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=Object($.a)(w.prototype,"uploaded",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=Object($.a)(w.prototype,"uploading",[Z.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=w))},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(14),a=n(1),i=n.n(a),s=n(2),c=n(3),u=n(4),o=n(17),l=n.n(o),h=n(18),p=n(52),d=n(45),f=n(69),v=n(38),b=n(70),m=n(71),j=n(72),O=n(73),y=n(48),x=n(78),g=n(74);var k=function(){function e(t,n,r,a){var i=this;Object(c.a)(this,e),this.enums={},this.actions={},this.sheets={},this.queries={},this.books={},this.maps={},this.histories={},this.pendings={},this.tags={},this.tuidsCache=void 0,this.localAccess=void 0,this.tvs=void 0,this.localMap=void 0,this.localModifyMax=void 0,this.tuids={},this.createBoxId=void 0,this.newVersion=void 0,this.uqOwner=void 0,this.uqName=void 0,this.name=void 0,this.uqApi=void 0,this.id=void 0,this.uqVersion=void 0,this.createBoxIdFromTVs=function(e,t){var n=e.name;return new y.a(t,e,i.tvs[n])},this.tuidArr=[],this.actionArr=[],this.enumArr=[],this.sheetArr=[],this.queryArr=[],this.bookArr=[],this.mapArr=[],this.historyArr=[],this.pendingArr=[],this.tagArr=[],this.createBoxId=r,void 0===r&&(this.createBoxId=this.createBoxIdFromTVs,this.tvs=a||{});var s=n.id,u=n.uqOwner,o=n.uqName,l=n.access,d=n.newVersion;this.newVersion=d,this.uqOwner=u,this.uqName=o,this.id=s,this.name=u+"/"+o,this.uqVersion=0,this.localMap=t.localMap.map(this.name),this.localModifyMax=this.localMap.child("$modifyMax"),this.localAccess=this.localMap.child("$access");var f;if(f=null===l||void 0===l||"*"===l?[]:l.split(";").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),"$$$/$unitx"===this.name)this.uqApi=new h.d(h.f.unit);else{var v=t.appOwner,b=t.appName;this.uqApi=new h.e("tv/",v,b,u,o,f,!0)}this.tuidsCache=new p.TuidsCache(this)}return Object(u.a)(e,[{key:"tuid",value:function(e){return this.tuids[e.toLowerCase()]}},{key:"tuidDiv",value:function(e,t){var n=this.tuids[e.toLowerCase()];return n&&n.div(t.toLowerCase())}},{key:"action",value:function(e){return this.actions[e.toLowerCase()]}},{key:"sheet",value:function(e){return this.sheets[e.toLowerCase()]}},{key:"query",value:function(e){return this.queries[e.toLowerCase()]}},{key:"book",value:function(e){return this.books[e.toLowerCase()]}},{key:"map",value:function(e){return this.maps[e.toLowerCase()]}},{key:"history",value:function(e){return this.histories[e.toLowerCase()]}},{key:"pending",value:function(e){return this.pendings[e.toLowerCase()]}},{key:"sheetFromTypeId",value:function(e){for(var t in this.sheets){var n=this.sheets[t];if(n.typeId===e)return n}}},{key:"init",value:function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.init();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEntities",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.localAccess.get()){e.next=6;break}return e.next=5,this.uqApi.loadAccess();case 5:t=e.sent;case 6:if(t){e.next=8;break}return e.abrupt("return");case 8:this.buildEntities(t),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"buildEntities",value:function(e){this.localAccess.set(e);var t=e.access,n=e.tuids,r=e.version;this.uqVersion=r,this.buildTuids(n),this.buildAccess(t)}},{key:"buildTuids",value:function(e){for(var t in e){var n=e[t],r=n.typeId,a=n.from;this.newTuid(t,r,a).sys=!0}for(var i in e){var s=e[i];this.getTuid(i).setSchema(s)}for(var c in this.tuids){this.tuids[c].buildFieldsTuid()}}},{key:"loadEntitySchema",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.schema(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAllSchemas",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.allSchemas();case 2:t=e.sent,[this.actionArr,this.enumArr,this.sheetArr,this.queryArr,this.bookArr,this.mapArr,this.historyArr,this.pendingArr,this.tagArr].forEach((function(e){e.forEach((function(e){var n=t[e.name.toLowerCase()];if(n){var r=n.call;r&&e.buildSchema(r)}}))}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTuid",value:function(e){return this.tuids[e]}},{key:"buildAccess",value:function(e){for(var t in e){var n=e[t];switch(typeof n){case"string":this.fromType(t,n);break;case"object":this.fromObj(t,n)}}}},{key:"cacheTuids",value:function(e){this.tuidsCache.cacheTuids(e)}},{key:"newEnum",value:function(e,t){var n=this.enums[e];return void 0!==n||(n=this.enums[e]=new g.a(this,e,t),this.enumArr.push(n)),n}},{key:"newAction",value:function(e,t){var n=this.actions[e];return void 0!==n||(n=this.actions[e]=new d.a(this,e,t),this.actionArr.push(n)),n}},{key:"newTuid",value:function(e,t,n){var r=this.tuids[e];return void 0!==r||(r=void 0!==n?new p.TuidImport(this,e,t,n):new p.TuidInner(this,e,t),this.tuids[e]=r,this.tuidArr.push(r)),r}},{key:"newQuery",value:function(e,t){var n=this.queries[e];return void 0!==n||(n=this.queries[e]=new v.a(this,e,t),this.queryArr.push(n)),n}},{key:"newBook",value:function(e,t){var n=this.books[e];return void 0!==n||(n=this.books[e]=new b.a(this,e,t),this.bookArr.push(n)),n}},{key:"newMap",value:function(e,t){var n=this.maps[e];return void 0!==n||(n=this.maps[e]=new j.a(this,e,t),this.mapArr.push(n)),n}},{key:"newTag",value:function(e,t){var n=this.tags[e];return void 0!==n||(n=this.tags[e]=new x.a(this,e,t),this.tagArr.push(n)),n}},{key:"newHistory",value:function(e,t){var n=this.histories[e];if(void 0===n)return n=this.histories[e]=new m.a(this,e,t),this.historyArr.push(n),n}},{key:"newPending",value:function(e,t){var n=this.pendings[e];if(void 0===n)return n=this.pendings[e]=new O.a(this,e,t),this.pendingArr.push(n),n}},{key:"newSheet",value:function(e,t){var n=this.sheets[e];return void 0!==n||(n=this.sheets[e]=new f.a(this,e,t),this.sheetArr.push(n)),n}},{key:"fromType",value:function(e,t){var n=t.split("|");t=n[0];var r=Number(n[1]);switch(t){case"tuid":break;case"action":this.newAction(e,r);break;case"query":this.newQuery(e,r);break;case"book":this.newBook(e,r);break;case"map":this.newMap(e,r);break;case"history":this.newHistory(e,r);break;case"sheet":this.newSheet(e,r);break;case"pending":this.newPending(e,r);break;case"tag":this.newTag(e,r);break;case"enum":this.newEnum(e,r)}}},{key:"fromObj",value:function(e,t){switch(t.$){case"sheet":this.buildSheet(e,t)}}},{key:"buildSheet",value:function(e,t){var n=this.sheets[e];void 0===n&&(n=this.newSheet(e,t.id)),n.build(t)}},{key:"buildFieldTuid",value:function(e,t){var n=this;if(void 0!==e){var a,i=Object(r.a)(e);try{for(i.s();!(a=i.n()).done;){var s=a.value,c=s.tuid;if(void 0!==c){var u=this.getTuid(c);void 0!==u&&(s._tuid=u.buildTuidBox())}}}catch(p){i.e(p)}finally{i.f()}var o,l=Object(r.a)(e);try{var h=function(){var r=o.value,a=r.owner;if(void 0===a)return"continue";var i=e.find((function(e){return e.name===a}));if(void 0===i&&(void 0!==t&&(i=t.find((function(e){return e.name===a}))),void 0===i))throw new Error("owner field ".concat(a," is undefined"));var s=r.arr,c=r.tuid,u=n.getTuid(i._tuid.tuid.name);if(void 0===u)return"continue";var l=u.div(s||c);if(r._tuid=l&&l.buildTuidDivBox(i),void 0===r._tuid)throw new Error("owner field ".concat(a," is not tuid"))};for(l.s();!(o=l.n()).done;)h()}catch(p){l.e(p)}finally{l.f()}}}},{key:"buildArrFieldsTuid",value:function(e,t){if(void 0!==e){var n,a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value.fields;void 0!==i&&this.buildFieldTuid(i,t)}}catch(s){a.e(s)}finally{a.f()}}}},{key:"pullModify",value:function(e){this.tuidsCache.pullModify(e)}},{key:"entities",get:function(){return l.a.merge({},this.actions,this.sheets,this.queries,this.books,this.maps,this.histories,this.pendings,this.tuids,this.tags)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(1),a=n.n(r),i=n(2),s=n(14),c=n(3),u=n(4),o=n(21),l=n(20),h=n(6),p=n(7),d=n(29),f=n(62),v=n(31),b=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).states=void 0,e.verify=void 0,e}return Object(u.a)(n,[{key:"setSchema",value:function(e){Object(o.a)(Object(l.a)(n.prototype),"setSchema",this).call(this,e),this.states=e.states,this.verify=e.verify}},{key:"build",value:function(e){this.states=[];var t,n=Object(s.a)(e.ops);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.states.push({name:r,actions:void 0})}}catch(a){n.e(a)}finally{n.f()}}},{key:"createSheetState",value:function(e,t){var n={name:e,actions:[]},r=n.actions;for(var a in t){var i={name:a};r.push(i)}return n}},{key:"save",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.uq.id,i={app:r,discription:t,data:n},e.next=4,new j(this,i).request();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveDebugDirect",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.uq.id,i={app:r,discription:t,data:n},e.next=4,new O(this,i).request();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"action",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new y(this,{id:t,flow:n,state:r,action:i}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"actionDebugDirect",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new x(this,{id:t,flow:n,state:r,action:i}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unpack",value:function(e){var t=e[0][0];return{brief:t,data:this.unpackSheet(t.data),flows:e[1]}}},{key:"getSheet",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new g(this,t).request();case 2:if(0!==(n=e.sent)[0].length){e.next=7;break}return e.next=6,this.getArchive(t);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",this.unpack(n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArchive",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new k(this,t).request();case 2:return n=e.sent,e.abrupt("return",this.unpack(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArchives",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={pageStart:t,pageSize:n},e.next=3,new w(this,r).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStateSheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={state:t,pageStart:n,pageSize:r},e.next=3,new C(this,i).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createPageStateItems",value:function(){return new P(this)}},{key:"stateSheetCount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new A(this,void 0).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"userSheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={state:t,user:n,pageStart:r,pageSize:i},e.next=3,new N(this,s).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"mySheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={state:t,pageStart:n,pageSize:r},e.next=3,new S(this,i).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"sheet"}}]),n}(d.a)),m=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix=void 0,e}return Object(u.a)(n,[{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/").concat(this.suffix)}}]),n}(v.b),j=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"buildParams",value:function(){var e=this.params,t=e.app,n=e.discription,r=e.data;return{app:t,discription:n,data:this.entity.pack(r)}}},{key:"xresult",value:function(e){var t=this.entity.verify;if(void 0===t)return e;var n=e.verify;if(void 0===n||0===n.length)return e.verify=void 0,e;var r=t.returns;return e.verify=this.entity.unpackReturns(n,r),e}},{key:"path",get:function(){return"sheet/".concat(this.entity.name)}}]),n}(m),O=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/direct")}}]),n}(j),y=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="PUT",e}return Object(u.a)(n,[{key:"path",get:function(){return"sheet/".concat(this.entity.name)}}]),n}(m),x=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/direct")}}]),n}(y),g=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(u.a)(n,[{key:"buildParams",value:function(){}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/get/").concat(this.params)}}]),n}(m),k=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(u.a)(n,[{key:"buildParams",value:function(){}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/archive/").concat(this.params)}}]),n}(m),w=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix="archives",e}return n}(m),C=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix="states",e}return n}(m),A=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e.suffix="statecount",e}return Object(u.a)(n,[{key:"xresult",value:function(e){return this.entity.states.map((function(t){var n=t.name,r=0,a=e.find((function(e){return e.state===n}));return void 0!==a&&(r=a.count),{state:n,count:r}}))}}]),n}(m),N=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix="user-sheets",e}return Object(u.a)(n,[{key:"xresult",value:function(e){return e}}]),n}(m),S=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).suffix="my-sheets",e}return Object(u.a)(n,[{key:"xresult",value:function(e){return e}}]),n}(m),P=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,!0)).sheet=void 0,r.sheet=e,r.pageSize=10,r}return Object(u.a)(n,[{key:"loadResults",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sheet.getStateSheets(t,n,r);case 2:return i=e.sent,e.abrupt("return",{$page:i});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getPageId",value:function(e){return void 0===e?0:e.id}}]),n}(f.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n(4),i=n(6),s=n(7),c=n(38),u=n(31),o=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).queryApiName="book",e}return Object(a.a)(n,[{key:"queryCaller",value:function(e){return new l(this,e)}},{key:"typeName",get:function(){return"book"}}]),n}(c.a),l=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"path",get:function(){return"book/".concat(this.entity.name)}}]),n}(u.d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),a=n(4),i=n(6),s=n(7),c=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).queryApiName="history",e}return Object(a.a)(n,[{key:"typeName",get:function(){return"history"}}]),n}(n(38).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(1),a=n.n(r),i=n(2),s=n(3),c=n(4),u=n(21),o=n(20),l=n(6),h=n(7),p=n(29),d=n(45),f=n(31),v=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).keys=void 0,e.actions={},e.queries={},e.schemaFrom=void 0,e}return Object(c.a)(n,[{key:"setSchema",value:function(e){Object(u.a)(Object(o.a)(n.prototype),"setSchema",this).call(this,e),this.schemaFrom=this.schema.from;var t=e.actions,r=e.queries,a=e.keys;for(var i in this.uq.buildFieldTuid(this.keys=a),t){var s=t[i],c=s.name,l=this.uq.newAction(c,void 0);l.setSchema(s),l.buildFieldsTuid(),this.actions[i]=l}for(var h in r){var p=r[h],d=p.name,f=this.uq.newQuery(d,void 0);f.setSchema(p),f.buildFieldsTuid(),this.queries[h]=f}}},{key:"add",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new m(this,t).request();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"del",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new j(this,t).request();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new O(this,void 0).request();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"page",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new y(this,{pageStart:n,pageSize:r,param:t}).request();case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"query",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new x(this,t),e.next=3,n.request();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"table",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.query(t);case 2:n=e.sent,e.t0=a.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.abrupt("return",n[r]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"obj",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.table(t);case 2:if(!((n=e.sent).length>0)){e.next=5;break}return e.abrupt("return",n[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scalar",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.obj(t);case 2:n=e.sent,e.t0=a.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.abrupt("return",n[r]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"map"}}]),n}(p.a),b=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"innerCall",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCaller(this.params),e.next=3,this.entity.uqApi.xcall(t);case 3:return n=e.sent,r=t.xresult(n.res),e.abrupt("return",{res:r});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildParams",value:function(){return Object(u.a)(Object(o.a)(n.prototype),"buildParams",this).call(this)}},{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){}}]),n}(f.b),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getCaller",value:function(e){return new g(this.entity,this.entity.actions.add,e)}}]),n}(b),j=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getCaller",value:function(e){return new k(this.entity,this.entity.actions.add,e)}}]),n}(b),O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getCaller",value:function(e){return new w(this.entity,this.entity.queries.all,e)}}]),n}(b),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getCaller",value:function(e){return new C(this.entity,this.entity.queries.page,e)}}]),n}(b),x=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getCaller",value:function(e){return new A(this.entity,this.entity.queries.query,e)}}]),n}(b),g=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(c.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/add")}},{key:"headers",get:function(){}}]),n}(d.b),k=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(c.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/del")}},{key:"headers",get:function(){}}]),n}(d.b),w=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(c.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/all")}},{key:"headers",get:function(){}}]),n}(f.c),C=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(c.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/page")}},{key:"headers",get:function(){}}]),n}(f.c),A=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this,r,a)).map=void 0,i.map=e,i}return Object(c.a)(n,[{key:"path",get:function(){return"map/".concat(this.map.name,"/query")}},{key:"headers",get:function(){}}]),n}(f.d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),a=n(4),i=n(6),s=n(7),c=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).queryApiName="pending",e}return Object(a.a)(n,[{key:"typeName",get:function(){return"pending"}}]),n}(n(38).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),a=n(4),i=n(6),s=n(7),c=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"typeName",get:function(){return"enum"}}]),n}(n(29).a)},function(e,t,n){"use strict";var r=n(107);n.o(r,"MultiStep")&&n.d(t,"MultiStep",(function(){return r.MultiStep})),n.o(r,"TonvaForm")&&n.d(t,"TonvaForm",(function(){return r.TonvaForm}));var a=n(108);n.o(a,"MultiStep")&&n.d(t,"MultiStep",(function(){return a.MultiStep})),n.o(a,"TonvaForm")&&n.d(t,"TonvaForm",(function(){return a.TonvaForm}));var i=n(109);n.o(i,"MultiStep")&&n.d(t,"MultiStep",(function(){return i.MultiStep})),n.o(i,"TonvaForm")&&n.d(t,"TonvaForm",(function(){return i.TonvaForm}));n(53),n(76);var s=n(110);n.d(t,"TonvaForm",(function(){return s.a}));n(50)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r,a=n(1),i=n.n(a),s=n(2),c=n(0),u=n(14),o=n(3),l=n(4),h=n(10),p=(n(8),n(9)),d=n(5),f=n(50),v=n(53),b=(r=function(){function e(t){Object(o.a)(this,e),this.uid=void 0,this.rows=[],this.buttonsRow=void 0,this.props=void 0,this.createControl=void 0,this.uid=Object(d.uid)(),this.props=t,this.buildRows(t),this.createControl=t.createControl,this.onSubmit=this.onSubmit.bind(this)}return Object(l.a)(e,[{key:"readValues",value:function(){var e,t={},n=Object(u.a)(this.rows);try{for(n.s();!(e=n.n()).done;){e.value.readValues(t)}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"clear",value:function(){var e,t=Object(u.a)(this.rows);try{for(t.s();!(e=t.n()).done;){e.value.clear()}}catch(n){t.e(n)}finally{t.f()}}},{key:"clearErrors",value:function(){var e,t=Object(u.a)(this.rows);try{for(t.s();!(e=t.n()).done;){e.value.clearErrors()}}catch(n){t.e(n)}finally{t.f()}}},{key:"setError",value:function(e,t){var n,r=Object(u.a)(this.rows);try{for(r.s();!(n=r.n()).done;){n.value.setError(e,t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"setInitValues",value:function(e){if(void 0!==e){var t,n=Object(u.a)(this.rows);try{for(n.s();!(t=n.n()).done;){t.value.setInitValues(e)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"buildRows",value:function(e){var t=e.formRows,n=e.createRow;if(void 0!==t){var r,a=Object(u.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.rows.push(this.buildRow(i,n))}}catch(s){a.e(s)}finally{a.f()}!0!==this.props.readOnly&&(this.buttonsRow=this.buildRow({createControl:this.createButtons.bind(this)},void 0))}else this.rows.push(Object(v.b)(this,Object(c.jsx)("div",{className:"text-warning",children:"TonvaForm need formRows defined"})))}},{key:"buildRow",value:function(e,t){var n;return void 0!==e.type?n=v.b:void 0===(n=e.createRow)&&void 0===(n=t)&&(n=v.a),n(this,e)}},{key:"createButtons",value:function(e,t){return new f.a(e)}},{key:"isOk",value:function(){var e,t=!0,n=Object(u.a)(this.rows);try{for(n.s();!(e=n.n()).done;){e.value.isOk()||(t=!1)}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("form",{onSubmit:this.onSubmit,children:[this.rows.map((function(t,n){return t.render(e.uid+n)})),this.buttons()]})}},{key:"buttons",value:function(){if(void 0!==this.buttonsRow)return this.buttonsRow.render(this.uid+this.rows.length)}},{key:"onSubmit",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.isOk()){e.next=3;break}return e.abrupt("return");case 3:return n=this.readValues(),e.next=6,this.props.onSubmit(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasError",get:function(){var e=this.rows.map((function(e,t){return t+": "+e.hasError+"\n"}));return console.log(e),this.rows.some((function(e){return e.hasError}))}},{key:"nothing",get:function(){return this.rows.every((function(e){return!e.filled}))}}]),e}(),Object(h.a)(r.prototype,"hasError",[p.g],Object.getOwnPropertyDescriptor(r.prototype,"hasError"),r.prototype),Object(h.a)(r.prototype,"nothing",[p.g],Object.getOwnPropertyDescriptor(r.prototype,"nothing"),r.prototype),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r,a,i=n(0),s=n(1),c=n.n(s),u=n(2),o=n(12),l=n(3),h=n(4),p=n(13),d=n(6),f=n(7),v=n(10),b=(n(24),n(8)),m=n(9),j=n(15),O=n(18);r=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],r.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},Object(o.a)(r,"data",a,Object(p.a)(r)),r.onItemChanged=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,e.next=3,O.p.userSetProp(i,n);case 3:r.data[i]=n,j.nav.user[i]=n,j.nav.saveLocalUser();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var i=j.nav.user,s=i.nick,h=i.icon;return r.data={nick:s,icon:h},r}return Object(h.a)(n,[{key:"render",value:function(){return Object(i.jsx)(j.Page,{header:"\u4e2a\u4eba\u4fe1\u606f",children:Object(i.jsx)(j.Edit,{schema:this.schema,uiSchema:this.uiSchema,data:this.data,onItemChanged:this.onItemChanged})})}}]),n}(b.Component),a=Object(v.a)(r.prototype,"data",[m.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n(113);function y(){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,113));case 2:return t=e.sent,e.abrupt("return",new t.CLogin(void 0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(1),a=n.n(r),i=n(2),s=n(14),c=n(3),u=n(4),o=n(6),l=n(7),h=n(29),p=n(0),d=(n(8),{height:"auto"}),f=function(){function e(t){Object(c.a)(this,e),this.tag=void 0,this.tag=t}return Object(u.a)(e,[{key:"render",value:function(e){var t;return t="number"===typeof e?[this.tag.nameFromId(e)]:this.tag.namesFromIds(e),Object(p.jsx)("div",{className:"d-flex flex-wrap ",children:t.map((function(e,t){return Object(p.jsx)("div",{className:"mx-2 border border-muted rounded px-3 bg-light",children:e},t)}))})}},{key:"renderRadios",value:function(e,t){var n=this,r=this.tag.values.map((function(r,a){return Object(p.jsx)("div",{className:"col",children:n.renderRadio(r,e,t)},a)}));return this.renderView(t,r)}},{key:"renderChecks",value:function(e,t){var n=this,r=void 0===e?void 0:e.split("|").map((function(e){return Number(e)})),a=this.tag.values.map((function(e,a){var i=void 0===r?void 0:r.indexOf(e.id)>=0;return Object(p.jsx)("div",{className:"col",children:n.renderCheck(e,i,t)},a)}));return this.renderView(t,a)}},{key:"renderView",value:function(e,t){var n=e.className,r=e.wrapClassName;return r=r?"row "+r:"row row-cols-2 row-cols-sm-3 row-cols-md-4",Object(p.jsx)("div",{className:n,style:d,children:Object(p.jsx)("div",{className:r,children:t})})}},{key:"renderRadio",value:function(e,t,n){var r=e.id,a=e.name,i=n.inputs,s=n.inputName,c=n.onInputChange,u=i&&function(e){return i[r]=e};return Object(p.jsxs)("label",{className:"form-radio-inline",children:[Object(p.jsx)("input",{ref:u,type:"radio",name:s,value:r,defaultChecked:t===r,onChange:c}),a]})}},{key:"renderCheck",value:function(e,t,n){var r=e.id,a=e.name,i=n.inputs,s=n.onInputChange,c=i&&function(e){return i[r]=e};return Object(p.jsxs)("label",{className:"form-radio-inline",children:[Object(p.jsx)("input",{ref:c,type:"checkbox",value:r,defaultChecked:t,onChange:s}),a]})}}]),e}(),v=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).values=void 0,e.coll={},e._view=void 0,e}return Object(u.a)(n,[{key:"nameFromId",value:function(e){var t=this.coll[e];return void 0===t?void 0:t.name}},{key:"namesFromIds",value:function(e){var t,n=[],r=Object(s.a)(e.split("|"));try{for(r.s();!(t=r.n()).done;){var a=t.value,i=this.coll[Number(a)],c=void 0===i?void 0:i.name;void 0!==c&&n.push(c)}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"loadValues",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c,u,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.values){e.next=2;break}return e.abrupt("return",this.values);case 2:return this.values=[],e.next=5,this.uqApi.get("tag/values/"+this.name);case 5:if(void 0!==(t=e.sent)){e.next=8;break}return e.abrupt("return");case 8:n=t.split("\n"),r=Object(s.a)(n),e.prev=10,r.s();case 12:if((i=r.n()).done){e.next=23;break}if(0!==(c=i.value).length){e.next=16;break}return e.abrupt("continue",21);case 16:u=c.split("\t"),o=Number(u[0]),l={id:o,name:u[1],ext:u[2]},this.values.push(l),this.coll[o]=l;case 21:e.next=12;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(10),r.e(e.t0);case 28:return e.prev=28,r.f(),e.finish(28);case 31:return e.abrupt("return",this.values);case 32:case"end":return e.stop()}}),e,this,[[10,25,28,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"tag"}},{key:"view",get:function(){return void 0!==this._view?this._view:this._view=new f(this)}}]),n}(h.a)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));n(35);var r={_:{required:"required",number:"not valid number",integer:"not valid integer",min:"min value is ${min}",max:"max value is ${max}"},zh:{_:{required:"\u5fc5\u987b\u586b",number:"\u9700\u8981\u6570\u5b57",integer:"\u9700\u8981\u6574\u6570",min:"\u4e0d\u80fd\u5c0f\u4e8e${min}",max:"\u4e0d\u80fd\u5927\u4e8e${max}"}}},a={_:{none:"[none]"},zh:{_:{none:"[\u65e0]"}}}},,,,,,function(e,t,n){"use strict";var r=n(27);n.d(t,"a",(function(){return r.a}));n(66),n(44),n(65)},function(e,t,n){"use strict";var r=n(88);n.o(r,"Ax")&&n.d(t,"Ax",(function(){return r.Ax})),n.o(r,"Badge")&&n.d(t,"Badge",(function(){return r.Badge})),n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"Controller")&&n.d(t,"Controller",(function(){return r.Controller})),n.o(r,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return r.DropdownActions})),n.o(r,"EasyDate")&&n.d(t,"EasyDate",(function(){return r.EasyDate})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"Media")&&n.d(t,"Media",(function(){return r.Media})),n.o(r,"Muted")&&n.d(t,"Muted",(function(){return r.Muted})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"UserView")&&n.d(t,"UserView",(function(){return r.UserView})),n.o(r,"VPage")&&n.d(t,"VPage",(function(){return r.VPage})),n.o(r,"View")&&n.d(t,"View",(function(){return r.View})),n.o(r,"centerApi")&&n.d(t,"centerApi",(function(){return r.centerApi})),n.o(r,"resOptions")&&n.d(t,"resOptions",(function(){return r.resOptions})),n.o(r,"setGlobalRes")&&n.d(t,"setGlobalRes",(function(){return r.setGlobalRes})),n.o(r,"setRes")&&n.d(t,"setRes",(function(){return r.setRes})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start})),n.o(r,"t")&&n.d(t,"t",(function(){return r.t}));var a=n(89);n.o(a,"Ax")&&n.d(t,"Ax",(function(){return a.Ax})),n.o(a,"Badge")&&n.d(t,"Badge",(function(){return a.Badge})),n.o(a,"CAppBase")&&n.d(t,"CAppBase",(function(){return a.CAppBase})),n.o(a,"CBase")&&n.d(t,"CBase",(function(){return a.CBase})),n.o(a,"CSub")&&n.d(t,"CSub",(function(){return a.CSub})),n.o(a,"Controller")&&n.d(t,"Controller",(function(){return a.Controller})),n.o(a,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return a.DropdownActions})),n.o(a,"EasyDate")&&n.d(t,"EasyDate",(function(){return a.EasyDate})),n.o(a,"EasyTime")&&n.d(t,"EasyTime",(function(){return a.EasyTime})),n.o(a,"Edit")&&n.d(t,"Edit",(function(){return a.Edit})),n.o(a,"FA")&&n.d(t,"FA",(function(){return a.FA})),n.o(a,"Form")&&n.d(t,"Form",(function(){return a.Form})),n.o(a,"Image")&&n.d(t,"Image",(function(){return a.Image})),n.o(a,"LMR")&&n.d(t,"LMR",(function(){return a.LMR})),n.o(a,"List")&&n.d(t,"List",(function(){return a.List})),n.o(a,"Media")&&n.d(t,"Media",(function(){return a.Media})),n.o(a,"Muted")&&n.d(t,"Muted",(function(){return a.Muted})),n.o(a,"PropGrid")&&n.d(t,"PropGrid",(function(){return a.PropGrid})),n.o(a,"SearchBox")&&n.d(t,"SearchBox",(function(){return a.SearchBox})),n.o(a,"UserView")&&n.d(t,"UserView",(function(){return a.UserView})),n.o(a,"VPage")&&n.d(t,"VPage",(function(){return a.VPage})),n.o(a,"View")&&n.d(t,"View",(function(){return a.View})),n.o(a,"centerApi")&&n.d(t,"centerApi",(function(){return a.centerApi})),n.o(a,"resOptions")&&n.d(t,"resOptions",(function(){return a.resOptions})),n.o(a,"setGlobalRes")&&n.d(t,"setGlobalRes",(function(){return a.setGlobalRes})),n.o(a,"setRes")&&n.d(t,"setRes",(function(){return a.setRes})),n.o(a,"start")&&n.d(t,"start",(function(){return a.start})),n.o(a,"t")&&n.d(t,"t",(function(){return a.t}));n(90);var i=n(91);n.o(i,"Ax")&&n.d(t,"Ax",(function(){return i.Ax})),n.o(i,"Badge")&&n.d(t,"Badge",(function(){return i.Badge})),n.o(i,"CAppBase")&&n.d(t,"CAppBase",(function(){return i.CAppBase})),n.o(i,"CBase")&&n.d(t,"CBase",(function(){return i.CBase})),n.o(i,"CSub")&&n.d(t,"CSub",(function(){return i.CSub})),n.o(i,"Controller")&&n.d(t,"Controller",(function(){return i.Controller})),n.o(i,"DropdownActions")&&n.d(t,"DropdownActions",(function(){return i.DropdownActions})),n.o(i,"EasyDate")&&n.d(t,"EasyDate",(function(){return i.EasyDate})),n.o(i,"EasyTime")&&n.d(t,"EasyTime",(function(){return i.EasyTime})),n.o(i,"Edit")&&n.d(t,"Edit",(function(){return i.Edit})),n.o(i,"FA")&&n.d(t,"FA",(function(){return i.FA})),n.o(i,"Form")&&n.d(t,"Form",(function(){return i.Form})),n.o(i,"Image")&&n.d(t,"Image",(function(){return i.Image})),n.o(i,"LMR")&&n.d(t,"LMR",(function(){return i.LMR})),n.o(i,"List")&&n.d(t,"List",(function(){return i.List})),n.o(i,"Media")&&n.d(t,"Media",(function(){return i.Media})),n.o(i,"Muted")&&n.d(t,"Muted",(function(){return i.Muted})),n.o(i,"PropGrid")&&n.d(t,"PropGrid",(function(){return i.PropGrid})),n.o(i,"SearchBox")&&n.d(t,"SearchBox",(function(){return i.SearchBox})),n.o(i,"UserView")&&n.d(t,"UserView",(function(){return i.UserView})),n.o(i,"VPage")&&n.d(t,"VPage",(function(){return i.VPage})),n.o(i,"View")&&n.d(t,"View",(function(){return i.View})),n.o(i,"centerApi")&&n.d(t,"centerApi",(function(){return i.centerApi})),n.o(i,"resOptions")&&n.d(t,"resOptions",(function(){return i.resOptions})),n.o(i,"setGlobalRes")&&n.d(t,"setGlobalRes",(function(){return i.setGlobalRes})),n.o(i,"setRes")&&n.d(t,"setRes",(function(){return i.setRes})),n.o(i,"start")&&n.d(t,"start",(function(){return i.start})),n.o(i,"t")&&n.d(t,"t",(function(){return i.t}))},function(e,t){},function(e,t){},function(e,t,n){"use strict";n(14)},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(0),a=n(3),i=n(4),s=n(6),c=n(7),u=n(8),o=n(16),l=n.n(o),h=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).menu=void 0,r.button=void 0,r.handleDocumentClick=function(e){!1!==r.state.dropdownOpen&&(r.button&&r.button.contains(e.target)||r.menu&&r.toggle())},r.toggle=function(){r.setState({dropdownOpen:!r.state.dropdownOpen})},r.state={dropdownOpen:!1},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick),document.addEventListener("touchstart",this.handleDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("touchstart",this.handleDocumentClick)}},{key:"render",value:function(){var e=this,t=this.props,n=t.icon,a=t.actions,i=t.isRight,s=t.className,c=t.itemIconClass,u=t.itemCaptionClass;void 0===i&&(i=!0);var o=a.some((function(e){return void 0!==e.icon})),h=this.state.dropdownOpen,p=s||"cursor-pointer dropdown-toggle btn btn-sm";return Object(r.jsxs)("div",{className:"dropdown",children:[Object(r.jsx)("button",{ref:function(t){return e.button=t},className:p,"data-toggle":"dropdown","aria-expanded":h,onClick:this.toggle,children:Object(r.jsx)("i",{className:l()("fa fa-fw ","fa-"+(n||"ellipsis-v"))})}),Object(r.jsx)("div",{ref:function(t){return e.menu=t},className:l()({"dropdown-menu":!0,"dropdown-menu-right":i,show:h}),children:a.map((function(e,t){if(!e)return Object(r.jsx)("div",{className:"dropdown-divider"},t);var n,a=e.icon,i=e.caption,s=e.action,h=e.iconClass,p=e.captionClass;if(void 0===a&&void 0===i)return Object(r.jsx)("div",{className:"dropdown-divider"});if(!0===o&&(void 0!==a&&(a="fa-"+a),n=Object(r.jsx)("i",{className:l()("mr-2","fa",a,"fa-fw",h||c),"aria-hidden":!0})),void 0===s)return Object(r.jsxs)("h6",{className:"dropdown-header",children:[n," ",i]});return Object(r.jsxs)("a",{className:"dropdown-item",href:"#/",onClick:function(e){e.preventDefault(),s()},onTouchStart:function(e){s()},children:[n," ",Object(r.jsx)("span",{className:p||u,children:i})]},t)}))})]})}}]),n}(u.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(3),a=n(4),i=n(6),s=n(7),c=n(8),u=n(15),o={md:function(e,t){return"".concat(e,"-").concat(t)},ymd:function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)},yesterday:"Yday",today:"Today",tomorrow:"Tmw",$zh:{md:function(e,t){return"".concat(e,"\u6708").concat(t,"\u65e5")},ymd:function(e,t,n){return"".concat(e,"\u5e74").concat(t,"\u6708").concat(n,"\u65e5")},yesterday:"\u6628\u5929",today:"\u4eca\u5929",tomorrow:"\u660e\u5929"},$en:{md:function(e,t){return"".concat(e,"-").concat(t)},ymd:function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)},yesterday:"Yday",today:"Today",tomorrow:"Tmw"}};function l(e){return o[e]}function h(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;switch(typeof e){default:n=e;break;case"string":n=new Date(e);break;case"number":n=new Date(1e3*e)}var a,i,s,c,u,o,h=new Date,p=n;a=h.getTime()-p.getTime();var d=p.getHours(),f=p.getMinutes();i=h.getDate(),s=p.getDate(),c=p.getMonth()+1,u=p.getFullYear(),o=h.getFullYear();var v=!1,b=a<-864e5?u===o?(v=!0,l("md")(c,s)):(v=!0,l("ymd")(u,c,s)):a<864e5?s!==i?(v=!0,l(a<0?"tomorrow":"yesterday")):!0===t?(v=!0,""):l("today"):u===o?l("md")(c,s):l("ymd")(u,c,s),m=d+(f<10?":0":":")+f;return!0===v||!0===r?b+" "+m:b}Object(u.setRes)(o,o);var p=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return h(this.props.date,!1)}}]),n}(c.Component),d=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props;return h(e.date,!0,e.always)}}]),n}(c.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n(3),i=n(4),s=n(6),c=n(7),u=n(8),o=n(16),l=n.n(o),h=n(15),p=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.icon,a=t.main,i=t.discription,s=t.px,c=t.py;e="string"===typeof i?Object(r.jsx)("div",{children:i}):i;var u=l()("media",void 0===s?"px-0":"px-"+s,void 0===c?"py-2":"py-"+c);return Object(r.jsxs)("div",{className:u,children:[Object(r.jsx)(h.Image,{className:"mr-3 w-4c h-4c",src:n}),Object(r.jsxs)("div",{className:"media-body",children:[Object(r.jsx)("h5",{className:"mt-0",children:a}),e]})]})}}]),n}(u.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r,a,i=n(0),s=n(1),c=n.n(s),u=n(2),o=n(12),l=n(3),h=n(4),p=n(13),d=n(6),f=n(7),v=n(10),b=(n(24),n(8)),m=n(16),j=n.n(m),O=n(9),y=(r=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).input=void 0,e.key=null,Object(o.a)(e,"disabled",a,Object(p.a)(e)),e.onChange=function(t){e.key=t.target.value,void 0!==e.key&&(e.key=e.key.trim(),""===e.key&&(e.key=void 0)),!0!==e.props.allowEmptySearch&&(e.disabled=!e.key)},e.onSubmit=function(){var t=Object(u.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),null===e.key&&(e.key=e.props.initKey||""),!0===e.props.allowEmptySearch){t.next=6;break}if(e.key){t.next=5;break}return t.abrupt("return");case 5:e.input&&(e.input.disabled=!0);case 6:return t.next=8,e.props.onSearch(e.key);case 8:e.input&&(e.input.disabled=!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(h.a)(n,[{key:"clear",value:function(){this.input&&(this.input.value="")}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.className,a=n.inputClassName,s=n.onFocus,c=n.label,u=n.placeholder,o=n.buttonText,l=n.maxLength;switch(n.size){default:case"sm":e="input-group-sm";break;case"md":e="input-group-md";break;case"lg":e="input-group-lg"}return Object(i.jsx)("form",{className:r,onSubmit:this.onSubmit,children:Object(i.jsxs)("div",{className:j()("input-group",e),children:[c&&Object(i.jsx)("div",{className:"input-group-addon align-self-center mr-2",children:c}),Object(i.jsx)("input",{ref:function(e){return t.input=e},onChange:this.onChange,type:"text",name:"key",onFocus:s,className:j()("form-control",a||"border-primary"),placeholder:u,defaultValue:this.props.initKey,maxLength:l}),Object(i.jsx)("div",{className:"input-group-append",children:Object(i.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:this.disabled,children:[Object(i.jsx)("i",{className:"fa fa-search"}),Object(i.jsx)("i",{className:"fa"}),o]})})]})})}}]),n}(b.Component),a=Object(v.a)(r.prototype,"disabled",[O.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(3),i=n(4),s=(n(8),n(16)),c=n.n(s),u=n(19),o=n(11),l=n(9),h=n(18),p=new(function(){function e(t){Object(a.a)(this,e),this.loader=void 0,this.onLoaded=void 0,this.map=Object(l.n)(new Map),void 0===t&&(t=function(e){return h.p.user(e)}),this.loader=t}return Object(i.a)(e,[{key:"use",value:function(e,t){e&&("object"===typeof e&&(e=e.id),e&&(this.onLoaded=t,e=Number(e),void 0===this.map.get(e)&&this.map.set(e,e)))}},{key:"getValue",value:function(e){var t=this;if(e){switch(typeof e){case"object":if(!(e=e.id))return}var n=this.map.get(e);if(n)switch(typeof n){default:return n;case"number":return n<0||(this.map.set(e,-e),this.loader(e).then((function(n){n||(n=null),t.map.set(e,n),t.onLoaded&&t.onLoaded(n)})).catch((function(e){console.error(e)}))),e}}}}]),e}())(void 0),d=(Object(o.a)((function(e){var t=e.className,n=e.style,a=e.id,i=e.altImage,s=e.noneImage,o=p.getValue(a);switch(typeof o){case"undefined":case"number":return Object(r.jsx)("div",{className:c()(t,"image-none"),style:n,children:s||Object(r.jsx)("i",{className:"fa fa-file-o"})})}var l=o.icon;return l?(!0===l.startsWith(":")&&(l=u.b.resUrl+l.substr(1)),Object(r.jsx)("img",{src:l,className:t,alt:"img",style:n,onError:function(e){e.currentTarget.src=i||"https://tv.jkchemical.com/imgs/0001.png"}})):Object(r.jsx)("div",{className:c()(t,"image-none"),style:n,children:Object(r.jsx)("i",{className:"fa fa-file-o"})})})),Object(o.a)((function(e){var t=e.id,n=e.user,a=e.render,i=e.onLoaded;if(null===n)return Object(r.jsx)(r.Fragment,{children:"null"});switch(typeof n){case"undefined":n=p.getValue(t);break;case"object":var s=n.id;f(s,i),n=p.getValue(s);break;case"number":f(n,i),n=p.getValue(n);break;case"string":f(Number(n),i),n=p.getValue(Number(n));break;default:n=void 0}switch(typeof n){case"undefined":case"number":return Object(r.jsx)(r.Fragment,{children:n})}return a(n)})));function f(e,t){e&&("object"===typeof e&&(e=e.id),p.use(e,t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(22),a=n(0),i=(n(8),n(16)),s=n.n(i),c=n(19),u=function(e){var t=e.href,n=e.children,i=e.className,u=e.onClick;if(!0===c.b.isWebNav){var o=e.aClassName;if(!t)return Object(a.jsx)("span",{className:"text-danger",children:"Error: href not defined in Ax"});return Object(a.jsx)("a",Object(r.a)(Object(r.a)({},e),{},{className:s()(i,o),onClick:function(e){var n;return e.preventDefault(),u?n=u(e):(c.b.navigate(t),n=!1),n},children:n}))}var l=e.naClassName;return u||(u=function(){return c.b.openSysPage(t),!1}),Object(a.jsx)("span",{className:s()(i,"cursor-pointer",l),onClick:u,children:n})}},function(e,t,n){"use strict";n(0),n(8),n(11)},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n.n(r),i=n(14),s=n(2),c=n(3),u=n(4),o=n(23),l=function(){function e(t){var n=this;Object(c.a)(this,e),this.uq=void 0,this.modifyMax=void 0,this.cacheTimer=void 0,this.loadIds=function(){n.clearCacheTimer();var e=n.uq.tuids;for(var t in e){e[t].cacheIds()}},this.uq=t}return Object(u.a)(e,[{key:"cacheTuids",value:function(e){this.clearCacheTimer(),this.cacheTimer=o.e.setTimeout("TuidsCache.cacheTuids",this.loadIds,e)}},{key:"clearCacheTimer",value:function(){void 0!==this.cacheTimer&&(o.e.clearTimeout(this.cacheTimer),this.cacheTimer=void 0)}},{key:"pullModify",value:function(e){if(void 0!==e){var t=Math.floor(Date.now()/1e3);void 0===this.modifyMax&&(this.modifyMax=this.uq.localModifyMax.get(),void 0===this.modifyMax&&(this.modifyMax={max:e,seconds:t},this.uq.localModifyMax.set(this.modifyMax)));var n=this.modifyMax,r=n.max;if(!(t-n.seconds<3600)&&!(e<=r)){var a=[],i=this.uq.tuids;for(var s in i)a.push(s);0!==a.length&&(this.modifyMax.seconds=t,this.innerPullModify(a.join("\t")))}}}},{key:"innerPullModify",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,c,u,o,l,h,p,d,f,v,b,m,j,O,y,x,g,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.uq,r=n.uqApi,s=n.tuids,c=this.modifyMax.max,e.next=4,r.queueModify(c,30,t);case 4:u=e.sent,o={},l=0,h=Object(i.a)(u.queue),e.prev=8,h.s();case 10:if((p=h.n()).done){e.next=24;break}if(d=p.value,f=d.id,v=d.entity,b=d.key){e.next=15;break}return e.abrupt("continue",22);case 15:if(void 0!==(m=s[v])){e.next=18;break}return e.abrupt("continue",22);case 18:void 0===(j=o[v])&&(j=o[v]={tuid:m,ids:[]}),j.ids.push(b),f>l&&(l=f);case 22:e.next=10;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(8),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.t1=a.a.keys(o);case 33:if((e.t2=e.t1()).done){e.next=40;break}return O=e.t2.value,y=o[O],x=y.tuid,g=y.ids,e.next=38,x.modifyIds(g);case 38:e.next=33;break;case 40:k=Math.floor(Date.now()/1e3),this.modifyMax={max:l,seconds:k},this.uq.localModifyMax.set(this.modifyMax);case 43:case"end":return e.stop()}}),e,this,[[8,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(1),a=n.n(r),i=n(25),s=n(14),c=n(2),u=n(3),o=n(4),l=n(23),h=n(18),p=n(68),d=n(15),f=function(){function e(t,n){Object(u.a)(this,e),this.collection=void 0,this.tvs=void 0,this.appOwner=void 0,this.appName=void 0,this.localMap=void 0,this.localData=void 0,this.id=void 0,this.tvs=n||{},this.buildTVs(),this.collection={};var r=t.split("/");if(2!==r.length)throw new Error("tonvaApp name must be / separated, owner/app");this.appOwner=r[0],this.appName=r[1],this.localMap=l.e.localDb.map(t),this.localData=this.localMap.child("uqData")}return Object(o.a)(e,null,[{key:"load",value:function(){var t=Object(c.a)(a.a.mark((function t(n,r,c){var u,o,l,p,d,f,v,b,m,j,O;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=e.value=new e(n,c),o=u.appOwner,l=u.appName,p=u.localData,(d=p.get())&&d.version===r){t.next=14;break}return t.next=7,Object(h.i)(o,l);case 7:if((d=t.sent).id){t.next=10;break}return t.abrupt("return",["".concat(o,"/").concat(l,"\u4e0d\u5b58\u5728\u3002\u8bf7\u4ed4\u7ec6\u68c0\u67e5app\u5168\u540d\u3002")]);case 10:d.version=r,p.set(d),f=Object(s.a)(d.uqs);try{for(f.s();!(v=f.n()).done;)v.value.newVersion=!0}catch(a){f.e(a)}finally{f.f()}case 14:return m=(b=d).id,j=b.uqs,u.id=m,t.next=18,u.init(j);case 18:return t.next=20,u.load();case 20:if(0!==(O=t.sent).length){t.next=26;break}if(O.push.apply(O,Object(i.a)(u.setTuidImportsLocal())),0!==O.length){t.next=26;break}return e._uqs=u.buildUQs(),t.abrupt("return");case 26:e.errors=O;case 27:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),Object(o.a)(e,[{key:"addUq",value:function(e){this.collection[e.name]=e}},{key:"buildTVs",value:function(){for(var e in this.tvs){var t=this.tvs[e];if(void 0!==t){var n=e.toLowerCase();if(n!==e)for(var r in this.tvs[n]=t,t){var a=t[r];if(void 0!==a){var i=r.toLowerCase();i!==r&&(t[i]=a)}}}}}},{key:"init",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){var t=e.uqOwner,n=e.uqName,a=t+"/"+n,i=new p.a(r,e,void 0,r.tvs[a]||r.tvs[n]);r.collection[a]=i;var s=a.toLowerCase();return s!==a&&(r.collection[s]=i),i.init()})),e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,i,c,u,o,l,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=[],n=[],this.collection)i=this.collection[r],n.push(i.loadEntities());return e.next=5,Promise.all(n);case 5:c=e.sent,u=Object(s.a)(c),e.prev=7,u.s();case 9:if((o=u.n()).done){e.next=17;break}if(l=o.value,void 0===(h=l)){e.next=15;break}return t.push(h),e.abrupt("continue",15);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),u.e(e.t0);case 22:return e.prev=22,u.f(),e.finish(22);case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e,this,[[7,19,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"buildUQs",value:function(){var e=this,t=this,n={},r=function(r){for(var a=e.collection[r],i=a.uqName,s=i.toLowerCase(),c=i.split(/[-._]/).join("").toLowerCase(),u=a.entities,o=0,l=Object.keys(u);o<l.length;o++){var h=u[l[o]];u[h.name.toLowerCase()]=h}var p=n[s]=new Proxy(u,{get:function(e,n,r){var a=e[n.toLowerCase()];if(void 0!==a)return a;var s="entity ".concat(i,".").concat(String(n)," not defined");console.error(s),t.showReload("UQ\u9519\u8bef\uff1a"+s)}});c!==s&&(n[c]=p)};for(var a in this.collection)r(a);return new Proxy(n,{get:function(e,n,r){var a=e[n.toLowerCase()];if(void 0!==a)return a;console.error("error in uqs"),t.showReload("\u4ee3\u7801\u9519\u8bef\uff1a\u65b0\u589e uq ".concat(String(n)))}})}},{key:"getUqCollection",value:function(){return this.collection}},{key:"showReload",value:function(e){this.localMap.removeAll(),d.nav.showReloadPage(e)}},{key:"setTuidImportsLocal",value:function(){var e=[];for(var t in this.collection){var n,r=this.collection[t],a=Object(s.a)(r.tuidArr);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(!0===i.isImport){var c=this.setInner(i);c&&e.push(c)}}}catch(u){a.e(u)}finally{a.f()}}return e}},{key:"setInner",value:function(e){var t=e.from,n=t.owner+"/"+t.uq,r=this.collection[n];if(void 0===r)return"setInner(tuidImport: TuidImport): uq ".concat(n," is not loaded");var a=e.name,i=r.tuid(a);return void 0===i?"setInner(tuidImport: TuidImport): uq ".concat(n," has no Tuid ").concat(a):!0===i.isImport?"setInner(tuidImport: TuidImport): uq ".concat(n," Tuid ").concat(a," is import"):void e.setFrom(i)}}]),e}();f._uqs=void 0,f.value=void 0,f.errors=void 0},function(e,t,n){"use strict";n(1),n(14),n(2),n(34),n(33),n(15);"a".charCodeAt(0),"z".charCodeAt(0);"A".charCodeAt(0),"Z".charCodeAt(0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={1:"\u5f00\u53d1\u53f7",2:"\u5c0f\u53f7",3:"\u7cfb\u7edf\u53f7"};function a(e){return r[e.type]}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,a=n(0),i=n(3),s=n(4),c=n(6),u=n(7),o=n(8),l=n(11),h=n(76),p=Object(l.a)(r=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).formView=void 0,r.formView=new h.a(r.props),r.formView.setInitValues(r.props.initValues),r}return Object(s.a)(n,[{key:"debug",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return Object(a.jsx)("div",{className:t,children:void 0===n?this.formView.render():Object(a.jsx)("form",{onSubmit:this.formView.onSubmit,children:n})})}}]),n}(o.Component))||r},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),a=n(22),i=n(3),s=n(4),c=n(6),u=n(7),o=n(8),l=n(17),h=n.n(l),p=n(16),d=n.n(p),f=n(75),v=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).values={},r.stepViews=[],r.topView=void 0,r.onPrev=function(e){h.a.assign(r.values,e),r.topView=r.stepViews.pop(),r.setState({topView:r.topView,stepViews:r.stepViews})},r.onNext=function(e){h.a.assign(r.values,e);var t,n=r.topView.step.next;if(void 0===n)return r.props.onSubmit(r.values);t="string"===typeof n?n:n(r.values),r.setStep(t)},r.state={topView:void 0,stepViews:[]},r.setStep(r.props.first),r}return Object(s.a)(n,[{key:"setStep",value:function(e){var t=this.props.steps[e];if(void 0!==t){var n,i;void 0!==this.topView&&this.stepViews.push(this.topView),this.stepViews.length>0&&(n=Object(r.jsx)(b,{prefix:"undo",text:"\u4e0a\u4e00\u6b65"}),i=this.onPrev);var s=void 0===t.next?{prefix:"cloud-upload",text:this.props.submitButton||"\u63d0\u4ea4"}:{suffix:"arrow-right",text:"\u4e0b\u4e00\u6b65"},c={formRows:t.formRows,submitButton:Object(r.jsx)(b,Object(a.a)({},s)),onSubmit:this.onNext,otherButton:n,onOther:i};this.topView={stepName:e,step:t,props:c},this.setState({topView:this.topView,stepViews:this.stepViews})}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.header,i=e.footer,s=this.state,c=s.topView,u=s.stepViews,o=c.stepName,l=c.step,h=u.length+1;return Object(r.jsx)("div",{className:t,children:Object(r.jsxs)("div",{children:[n&&n(l,h),Object(r.jsx)(f.TonvaForm,Object(a.a)({initValues:this.values},c.props),o),i&&i(l,h)]})})}}]),n}(o.Component),b=function(e){var t,n,a=e.prefix,i=e.suffix;return void 0!==a&&(t=Object(r.jsx)("i",{className:d()("fa","fa-"+a)})),void 0!==i&&(n=Object(r.jsx)("i",{className:d()("fa","fa-"+i)})),Object(r.jsxs)(o.Fragment,{children:[t," ",e.text," ",n]})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ne}));var r,a,i,s,c,u,o,l,h,p,d,f,v,b,m,j=n(1),O=n.n(j),y=n(2),x=n(0),g=n(14),k=n(3),w=n(4),C=n(6),A=n(7),N=n(8),S=n(9),P=n(16),I=n.n(P),U=n(12),E=n(13),_=n(10),R=(n(24),n(25)),T=n(21),V=n(20),q=n(17),F=n.n(q),L=function e(){Object(k.a)(this,e)},D=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(e){var r;return Object(k.a)(this,n),(r=t.call(this)).func=void 0,r.func=e,r}return Object(w.a)(n,[{key:"check",value:function(e,t){var n=this.func(t);if(void 0!==n)switch(typeof n){case"undefined":return;case"string":return void e.push(n);default:return void e.push.apply(e,Object(R.a)(n))}}}]),n}(L),B=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(e){var r;return Object(k.a)(this,n),(r=t.call(this)).res=void 0,r.res=e,r}return n}(L),M=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"check",value:function(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(!1===isNaN(t))return;break;case"undefined":}e.push(this.res.required)}}]),n}(B),z=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(e,r,a){var i;return Object(k.a)(this,n),(i=t.call(this,e)).minMsg=void 0,i.maxMsg=void 0,i.min=void 0,i.max=void 0,i.minMsg=F.a.template(e.min),i.maxMsg=F.a.template(e.max),i.min=r,i.max=a,i}return Object(w.a)(n,[{key:"check",value:function(e,t){if(void 0!==t&&null!==t){var n=Number(t);!0===isNaN(n)?e.push(this.res.number):this.checkMore(e,n)}}},{key:"checkMore",value:function(e,t){void 0!==this.min&&Number(t)<this.min&&e.push(this.minMsg({min:this.min})),void 0!==this.max&&Number(t)>this.max&&e.push(this.maxMsg({max:this.max}))}}]),n}(B),H=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"checkMore",value:function(e,t){Object(T.a)(Object(V.a)(n.prototype),"checkMore",this).call(this,e,t),!1===Number.isInteger(t)&&e.push(this.res.integer)}}]),n}(z),W=n(11),$=(r=function(){function e(t,n,r,c){var u=this;Object(k.a)(this,e),this.name=void 0,this.context=void 0,this.fieldProps=void 0,this.children=void 0,this._itemSchema=void 0,this._ui=void 0,this.defaultValue=void 0,this.value=void 0,this.rules=void 0,Object(U.a)(this,"errors",a,this),Object(U.a)(this,"contextErrors",i,this),this.readOnly=void 0,this.disabled=void 0,Object(U.a)(this,"visible",s,this),this.isChanging=void 0,this.onInputChange=function(e){u.changeValue(e.target.value,!0)},this.container=Object(W.a)((function(){if(!1===u.visible)return null;var e=u.context,t=e.form;if(!0===e.inNode)return u.render();var n=u.label;return!0===u.itemSchema.required&&!1!==t.props.requiredFlag&&null!==n&&(n=Object(x.jsxs)(x.Fragment,{children:[n,"\xa0",Object(x.jsx)("span",{className:"text-danger",children:"*"})]})),t.FieldContainer(n,u.renderBody())})),this.context=t;var o=n.name;if(this.name=o,this._itemSchema=n,this.fieldProps=r,this.children=c,this._ui=t.getUiItem(o),void 0===this.ui)this.readOnly=!1,this.disabled=!1,this.visible=!0;else{var l=this.ui,h=l.readOnly,p=l.disabled,d=l.visible;this.readOnly=!0===h,this.disabled=!0===p,this.visible=!(!1===d)}this.value=this.defaultValue=t.getValue(o)}return Object(w.a)(e,[{key:"hasError",get:function(){return this.errors.length+this.contextErrors.length>0}}]),Object(w.a)(e,[{key:"init",value:function(){if(this.rules=[],!0===this.itemSchema.required&&this.rules.push(new M(this.context.form.res)),this.buildRules(),void 0!==this.ui){var e=this.ui.rules;if(void 0!==e)if(!1!==Array.isArray(e)){var t,n=Object(g.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.rules.push(new D(r))}}catch(a){n.e(a)}finally{n.f()}}else this.rules.push(new D(e))}}},{key:"buildRules",value:function(){}},{key:"checkRules",value:function(){var e,t,n=[],r=Object(g.a)(this.rules);try{for(r.s();!(e=r.n()).done;){e.value.check(n,this.value)}}catch(a){r.e(a)}finally{r.f()}0===n.length?this.context.removeErrorWidget(this):(this.context.addErrorWidget(this),(t=this.errors).push.apply(t,n))}},{key:"setError",value:function(e){var t;void 0!==e&&("string"===typeof e?this.errors.push(e):(t=this.errors).push.apply(t,Object(R.a)(e)))}},{key:"setContextError",value:function(e){var t;void 0!==e&&("string"===typeof e?this.contextErrors.push(e):(t=this.contextErrors).push.apply(t,Object(R.a)(e)))}},{key:"clearError",value:function(){this.errors.splice(0)}},{key:"clearContextError",value:function(){this.contextErrors.splice(0)}},{key:"parse",value:function(e){return e}},{key:"setElementValue",value:function(e){}},{key:"setDataValue",value:function(e){!0!==this.isChanging&&(this.context.initData[this.name]=this.value=this.parse(e))}},{key:"setValue",value:function(e){!0!==this.isChanging&&this.changeValue(e,!1)}},{key:"getValue",value:function(){return this.context.getValue(this.name)}},{key:"getReadOnly",value:function(){return this.readOnly}},{key:"getDisabled",value:function(){return this.disabled}},{key:"getVisible",value:function(){return this.visible}},{key:"setReadOnly",value:function(e){this.readOnly=e}},{key:"setDisabled",value:function(e){this.disabled=e}},{key:"setVisible",value:function(e){this.visible=e}},{key:"changeValue",value:function(e,t){var n,r,a=this.value;void 0!==this.ui&&(n=this.ui.onChanging,r=this.ui.onChanged);var i=!0;void 0!==n&&(this.isChanging=!0,i=n(this.context,this.value,a),this.isChanging=!1),!0===i&&(this.setDataValue(e),!0!==t&&this.setElementValue(e),void 0!==r&&(this.isChanging=!0,r(this.context,this.value,a),this.isChanging=!1))}},{key:"renderBody",value:function(){var e;if(!1===this.hasError&&this.ui){var t=this.ui,n=t.discription,r=t.discriptionClassName;void 0===r&&(r="small text-muted"),e=Object(x.jsx)("span",{className:r,children:n})}return Object(x.jsxs)(x.Fragment,{children:[this.render(),e]})}},{key:"renderTemplet",value:function(){if(void 0!==this.children)return Object(x.jsx)(x.Fragment,{children:this.children});if(void 0!==this.ui){var e=this.ui.Templet;return"function"===typeof e?e(this.value):e}}},{key:"renderErrors",value:function(){var e=[].concat(Object(R.a)(this.errors),Object(R.a)(this.contextErrors));if(0===e.length)return null;var t=!0===this.context.inNode?"span":"div";return e.map((function(e){return N.createElement(t,{key:e,className:"text-danger d-inline-block my-2 ml-3"},Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("i",{className:"fa fa-exclamation-circle"})," \xa0",e]}))}))}},{key:"itemSchema",get:function(){return this._itemSchema}},{key:"ui",get:function(){return this._ui}},{key:"isOk",get:function(){return 0===this.errors.length}},{key:"className",get:function(){var e;return!1===this.context.inNode&&(e="form-control"),I()(e,this.context.form.FieldClass,this.ui&&this.ui.className)}},{key:"label",get:function(){var e;if(void 0===this.ui)e=this.name;else{var t=this.ui.label;e=null===t?null:t||this.name}return e}}]),e}(),a=Object(_.a)(r.prototype,"errors",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(_.a)(r.prototype,"contextErrors",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(_.a)(r.prototype,"hasError",[S.g],Object.getOwnPropertyDescriptor(r.prototype,"hasError"),r.prototype),s=Object(_.a)(r.prototype,"visible",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(_.a)(r.prototype,"isOk",[S.g],Object.getOwnPropertyDescriptor(r.prototype,"isOk"),r.prototype),r),G=(c=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="text",e.input=void 0,Object(U.a)(e,"hasFocus",u,Object(E.a)(e)),e.onKeyDown=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.internalOnKeyDown(n),13===n.keyCode){t.next=3;break}return t.abrupt("return");case 3:if(void 0!==(r=e.context.form.props.onEnter)){t.next=6;break}return t.abrupt("return");case 6:return e.changeValue(n.currentTarget.value,!0),e.input.blur(),t.next=10,r(e.name,e.context);case 10:void 0!==(a=t.sent)&&e.context.setError(e.name,a);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onBlur=function(t){e.onInputChange(t),e.checkRules(),e.context.checkContextRules(),e.hasFocus=!1},e.onFocus=function(t){e.clearError(),e.context.removeErrorWidget(Object(E.a)(e)),e.context.clearErrors(),e.hasFocus=!0},e}return Object(w.a)(n,[{key:"setElementValue",value:function(e){null!==this.input&&(this.input.value=e)}},{key:"internalOnKeyDown",value:function(e){}},{key:"onChange",value:function(e){}},{key:"setReadOnly",value:function(e){null!==this.input&&(this.input.readOnly=this.readOnly=e)}},{key:"setDisabled",value:function(e){null!==this.input&&(this.input.disabled=this.disabled=e)}},{key:"render",value:function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{ref:function(t){return e.input=t},className:I()(this.className,n),type:this.inputType,defaultValue:this.value,onChange:function(t){return e.onChange(t)},placeholder:this.placeholder,readOnly:this.readOnly,disabled:this.disabled,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,maxLength:this.itemSchema.maxLength}),this.renderErrors()]})}},{key:"ui",get:function(){return this._ui}},{key:"placeholder",get:function(){return this.ui&&this.ui.placeholder||this.name}}]),n}($),u=Object(_.a)(c.prototype,"hasFocus",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c),K=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).input=void 0,e.onInputChange=function(t){e.setValue(t.currentTarget.value)},e.onBlur=function(t){e.onInputChange(t),e.checkRules(),e.context.checkContextRules()},e.onFocus=function(t){e.clearError(),e.context.removeErrorWidget(Object(E.a)(e)),e.context.clearErrors()},e}return Object(w.a)(n,[{key:"setElementValue",value:function(e){this.input.value=e}},{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("textarea",{ref:function(t){return e.input=t},onBlur:this.onBlur,onFocus:this.onFocus,className:I()(this.className,n),rows:this.ui&&this.ui.rows,maxLength:this.itemSchema.maxLength,defaultValue:this.defaultValue,onChange:this.onInputChange}),this.renderErrors()]})}},{key:"itemSchema",get:function(){return this._itemSchema}},{key:"ui",get:function(){return this._ui}}]),n}($),Q=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="password",e}return n}(G),J=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="url",e}return n}(G),X=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="email",e}return n}(G),Y=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="number",e}return Object(w.a)(n,[{key:"buildRules",value:function(){Object(T.a)(Object(V.a)(n.prototype),"buildRules",this).call(this);var e=this.context.form.res,t=this.itemSchema,r=t.min,a=t.max;this.rules.push("integer"===this.itemSchema.type?new z(e,r,a):new H(e,r,a))}},{key:"parse",value:function(e){if(void 0!==e&&null!==e)return Number(e)}},{key:"itemSchema",get:function(){return this._itemSchema}}]),n}(G),Z=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="number",e}return Object(w.a)(n,[{key:"isValidKey",value:function(e){return 46===e||8===e||37===e||39===e||e>=48&&e<=57||e>=96&&e<=105||109===e||189===e}},{key:"internalOnKeyDown",value:function(e){var t=e.keyCode;window.event.returnValue=this.isValidKey(t)}}]),n}(Y),ee=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="date",e}return n}(G),te=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="datetime",e}return n}(G),ne=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="time",e}return n}(G),re=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="month",e}return n}(G),ae=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).input=void 0,e.trueValue=void 0,e.falseValue=void 0,e.onInputChange=function(t){var n=!0===t.target.checked?e.trueValue:e.falseValue;e.setDataValue(n)},e.onClick=function(){e.context.clearErrors()},e}return Object(w.a)(n,[{key:"init",value:function(){if(Object(T.a)(Object(V.a)(n.prototype),"init",this).call(this),void 0!==this.ui){var e=this.ui,t=e.trueValue,r=e.falseValue;this.trueValue=void 0===t||t,this.falseValue=void 0!==r&&r}else this.trueValue=!0,this.falseValue=!1}},{key:"setElementValue",value:function(e){this.input.checked=e===this.trueValue}},{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=I()(this.className,"form-check-inline p-0"),n=Object(x.jsx)("input",{ref:function(t){return e.input=t},className:"align-self-center",type:"checkbox",defaultChecked:this.defaultValue,onChange:this.onInputChange,onClick:this.onClick});return!0===this.context.inNode?Object(x.jsxs)("label",{className:t,children:[n," ",this.ui&&this.ui.label||this.name]}):Object(x.jsx)("div",{className:t,children:Object(x.jsx)("label",{className:"w-100 h-100 mb-0 d-flex justify-content-center",children:n})})}},{key:"ui",get:function(){return this._ui}}]),n}($),ie=(o=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).select=void 0,Object(U.a)(e,"readOnly",l,Object(E.a)(e)),e.onInputChange=function(t){e.setDataValue(t.target.value)},e}return Object(w.a)(n,[{key:"setElementValue",value:function(e){this.select.value=e}},{key:"setReadOnly",value:function(e){this.select.disabled=this.readOnly=!e}},{key:"setDisabled",value:function(e){this.select.disabled=this.disabled=e}},{key:"render",value:function(){var e=this;if(!0===this.readOnly){var t=this.ui.list.find((function(t){return t.value===e.value})),n=void 0===t?"(???)":t.title;return Object(x.jsx)("span",{className:"form-control w-min-6c",children:n})}return Object(x.jsx)("select",{ref:function(t){return e.select=t},className:I()(this.className,"form-control"),defaultValue:this.defaultValue,onChange:this.onInputChange,children:this.ui.list.map((function(e,t){var n=e.title,r=e.value;return Object(x.jsx)("option",{className:undefined,value:r,children:n||r},t)}))})}},{key:"ui",get:function(){return this._ui}}]),n}($),l=Object(_.a)(o.prototype,"readOnly",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o),se={height:"auto"},ce=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputs={},e}return Object(w.a)(n,[{key:"setElementValue",value:function(e){for(var t in this.inputs){var n=this.inputs[t];n.checked=e===n.value}}},{key:"setReadOnly",value:function(e){for(var t in this.readOnly=e,this.inputs)this.inputs[t].readOnly=e}},{key:"setDisabled",value:function(e){for(var t in this.disabled=e,this.inputs)this.inputs[t].disabled=e}},{key:"render",value:function(){var e,t=this,n=this.ui,r=n.defaultValue,a=n.list;!0===this.context.isRow&&(e=this.context.rowKey);var i=I()(this.className,"py-0");return Object(x.jsx)("span",{className:i,style:se,children:a.map((function(n,a){var i=n.value,s=n.title,c=t.name;return void 0!==e&&(c+="-"+e),Object(x.jsxs)("label",{className:"form-radio-inline",children:[Object(x.jsx)("input",{ref:function(e){return t.inputs[a]=e},type:"radio",name:c,value:i,defaultChecked:(t.defaultValue||r)===i,onChange:t.onInputChange}),s||i]},a)}))})}},{key:"ui",get:function(){return this._ui}}]),n}($),ue=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="range",e.input=void 0,e}return Object(w.a)(n,[{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=this.ui,n=t.min,r=t.max,a=t.step;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("input",{ref:function(t){return e.input=t},className:I()(this.className,"form-control","w-min-6c"),type:this.inputType,defaultValue:this.defaultValue,onChange:this.onInputChange,max:r,min:n,step:a})})}},{key:"ui",get:function(){return this._ui}}]),n}($),oe=Object(x.jsx)("small",{className:"text-muted",children:"[\u65e0]"}),le=(h=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(U.a)(e,"value",p,Object(E.a)(e)),e.onClick=Object(y.a)(O.a.mark((function t(){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(n=e.ui&&e.ui.pickId)){t.next=4;break}return alert("no pickId defined!"),t.abrupt("return");case 4:return t.next=6,n(e.context,e.name,e.value);case 6:r=t.sent,e.setDataValue(r),e.clearError(),e.clearContextError(),e.checkRules();case 11:case"end":return t.stop()}}),t)}))),e}return Object(w.a)(n,[{key:"setReadOnly",value:function(e){this.readOnly=e}},{key:"setDisabled",value:function(e){this.disabled=e}},{key:"render",value:function(){var e,t;void 0!==this.ui&&(e=this.ui.placeholder,t=this.ui.Templet);var n,r={"form-control":!0,"required-item":!0===this.itemSchema.required,"cursor-pointer":!0,"is-invalid":this.hasError};if(void 0===this.value||null===this.value)n=e||oe,r["text-muted"]=!0;else if(void 0===t){var a;if(null===this.value)a="null";else switch(typeof this.value){case"undefined":a=oe;break;case"object":a=this.value.id;break;default:a=this.value}n=Object(x.jsx)(x.Fragment,{children:a})}else n="function"===typeof t?t(this.value):t;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:I()(r),onClick:this.onClick,children:n}),this.renderErrors()]})}},{key:"ui",get:function(){return this._ui}}]),n}($),p=Object(_.a)(h.prototype,"value",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h),he=function(e,t,n){return Object(x.jsxs)("span",{className:"text-danger",children:["!!data type ",e," only support ",(n||[]).join(", "),", can't use ui ",t,"!!"]})},pe=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=Object(y.a)(O.a.mark((function t(){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.clearError(),e.clearContextError(),n=e.itemSchema,r=n.name,"submit"!==n.type){t.next=6;break}return t.next=6,e.context.submit(r);case 6:case"end":return t.stop()}}),t)}))),e.observerRender=Object(W.a)((function(){var t,n,r,a=e.itemSchema,i=a.name,s=a.type;if(void 0!==e.ui){var c=e.ui.widget;if("button"!==c)return he(s,c,["button"]);t=e.ui.Templet,n=e.ui.className,r=e.ui.label}var u,o=e.context,l=o.form,h=o.hasError,p=e.context,d="submit"===s&&h;u=void 0!==e.children?e.children:"function"===typeof t?t():void 0!==t?t:r;var f=Object(x.jsx)("button",{className:n,type:"button",disabled:d,onClick:e.onClick,children:u||i});return!0===p.inNode?Object(x.jsxs)(x.Fragment,{children:[f,e.renderErrors()]}):Object(x.jsxs)("div",{className:l.ButtonClass,children:[Object(x.jsx)("div",{children:e.renderErrors()}),f]})})),e}return Object(w.a)(n,[{key:"render",value:function(){return N.createElement(this.observerRender)}},{key:"ui",get:function(){return this._ui}},{key:"label",get:function(){return null}}]),n}($),de=(d=function(){function e(t,n,r,a,i){var s=this;if(Object(k.a)(this,e),this.subContexts=void 0,this.form=void 0,this.uiSchema=void 0,this.initData=void 0,this.inNode=void 0,this.widgets={},this.rules=void 0,this.isRow=void 0,Object(U.a)(this,"errors",f,this),Object(U.a)(this,"errorWidgets",v,this),this.renderErrors=Object(W.a)((function(){var e=s.errors;return 0===e.length?null:Object(x.jsx)(x.Fragment,{children:e.map((function(e){return Object(x.jsxs)("span",{className:"text-danger inline-block my-1 ml-3",children:[Object(x.jsx)("i",{className:"fa fa-exclamation-circle"})," \xa0",e]},e)}))})})),this.form=t,this.uiSchema=n,this.initData=r,this.inNode=a,this.isRow=i,void 0!==n){var c,u=n.rules;if(void 0!==u)this.rules=[],!1===Array.isArray(u)?this.rules.push(u):(c=this.rules).push.apply(c,Object(R.a)(u))}}return Object(w.a)(e,[{key:"getArrRowContexts",value:function(e){void 0===this.subContexts&&(this.subContexts={});var t=this.subContexts[e];return void 0===t&&(this.subContexts[e]=t={}),t}},{key:"getValue",value:function(e){return this.initData[e]}},{key:"setValue",value:function(e,t){this.initData[e]=t;var n=this.widgets[e];void 0!==n&&n.setValue(t)}},{key:"getDisabled",value:function(e){var t=this.widgets[e];if(void 0!==t)return t.getDisabled()}},{key:"setDisabled",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setDisabled(t)}},{key:"getReadOnly",value:function(e){var t=this.widgets[e];void 0!==t&&t.getReadOnly()}},{key:"setReadOnly",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setReadOnly(t)}},{key:"getVisible",value:function(e){var t=this.widgets[e];void 0!==t&&t.getVisible()}},{key:"setVisible",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setVisible(t)}},{key:"submit",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i,s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkRules(),!0!==this.hasError){e.next=7;break}n="",r=Object(g.a)(this.errorWidgets);try{for(r.s();!(a=r.n()).done;)i=a.value,n+=i.name+":\n"+i.errors.join("\n")}catch(n){r.e(n)}finally{r.f()}return console.error(n),e.abrupt("return");case 7:if(void 0!==(s=this.form.props.onButtonClick)){e.next=11;break}return alert("button ".concat(t," clicked. you should define form onButtonClick")),e.abrupt("return");case 11:return e.next=13,s(t,this);case 13:if(void 0!==(c=e.sent)){e.next=16;break}return e.abrupt("return");case 16:this.setError(t,c);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkFieldRules",value:function(){for(var e in this.widgets)this.widgets[e].checkRules();if(void 0!==this.subContexts)for(var t in this.subContexts){var n=this.subContexts[t];for(var r in n)n[r].checkFieldRules()}}},{key:"checkContextRules",value:function(){if(this.clearErrors(),void 0!==this.rules){var e,t=Object(g.a)(this.rules);try{for(t.s();!(e=t.n()).done;){var n,r=(0,e.value)(this);if(void 0!==r)if(!0===Array.isArray(r))(n=this.errors).push.apply(n,Object(R.a)(r));else if("string"===typeof r)this.errors.push(r);else for(var a in r)this.setError(a,r[a])}}catch(o){t.e(o)}finally{t.f()}if(void 0!==this.subContexts)for(var i in this.subContexts){var s=this.subContexts[i];for(var c in s){var u=s[c];u.clearErrors(),u.checkContextRules()}}}}},{key:"setError",value:function(e,t){var n=this.widgets[e];void 0!==n&&(n.setContextError(t),this.addErrorWidget(n))}},{key:"clearContextErrors",value:function(){for(var e in this.widgets){var t=this.widgets[e];void 0!==t&&t.clearContextError()}}},{key:"clearWidgetsErrors",value:function(){for(var e in this.widgets){var t=this.widgets[e];void 0!==t&&t.clearError()}}},{key:"checkRules",value:function(){this.clearErrors(),this.clearWidgetsErrors(),this.checkFieldRules(),!0!==this.hasError&&this.checkContextRules()}},{key:"addErrorWidget",value:function(e){this.errorWidgets.findIndex((function(t){return t===e}))<0&&this.errorWidgets.push(e)}},{key:"removeErrorWidget",value:function(e){var t=this.errorWidgets.findIndex((function(t){return t===e}));t>=0&&this.errorWidgets.splice(t,1)}},{key:"checkHasError",value:function(){if(!0===this.errorWidgets.length+this.errors.length>0)return!0;if(void 0===this.subContexts)return!1;for(var e in this.subContexts){var t=this.subContexts[e];for(var n in t)if(!0===t[n].hasError)return!0}return!1}},{key:"clearErrors",value:function(){this.errors.splice(0),this.errorWidgets.splice(0),this.clearContextErrors()}},{key:"arrName",get:function(){}},{key:"hasError",get:function(){return this.checkHasError()}}]),e}(),f=Object(_.a)(d.prototype,"errors",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=Object(_.a)(d.prototype,"errorWidgets",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(_.a)(d.prototype,"hasError",[S.g],Object.getOwnPropertyDescriptor(d.prototype,"hasError"),d.prototype),d),fe=1,ve=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(e,r,a,i){var s,c;Object(k.a)(this,n);var u=e.uiSchema;if(void 0!==u){var o=u.items;void 0!==o&&(c=o[r.name])}return(s=t.call(this,e.form,c,a,i,!0)).parentContext=void 0,s.arrSchema=void 0,s.rowKey=void 0,s.data=void 0,s.parentContext=e,s.arrSchema=r,s.rowKey=fe++,s.data=a,s}return Object(w.a)(n,[{key:"getItemSchema",value:function(e){return this.arrSchema.itemSchemas[e]}},{key:"getUiItem",value:function(e){if(void 0!==this.uiSchema){var t=this.uiSchema.items;if(void 0!==t)return t[e]}}},{key:"clearErrors",value:function(){Object(T.a)(Object(V.a)(n.prototype),"clearErrors",this).call(this),this.parentContext.clearErrors()}},{key:"arrName",get:function(){return this.arrSchema.name}},{key:"parentData",get:function(){return this.parentContext.data}}]),n}(de),be=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(e,r){return Object(k.a)(this,n),t.call(this,e,e.uiSchema,e.data,r,!1)}return Object(w.a)(n,[{key:"getItemSchema",value:function(e){return this.form.itemSchemas[e]}},{key:"getUiItem",value:function(e){var t=this.form.uiSchema;if(void 0!==t){var n=t.items;if(void 0!==n)return n[e]}}},{key:"data",get:function(){return this.form.data}}]),n}(de),me=N.createContext({}),je=Object(W.a)((function(e){var t,n,r,a,i=e.parentContext,s=e.arrSchema,c=e.children,u=s.name,o=s.arr,l=i.initData[u],h=i.form,p=i.getArrRowContexts(u),d=i.getUiItem(u),f=d.onDeleted,v=d.onRestored,b=u,m=h.ArrContainer,j=h.RowContainer,O=h.RowSeperator,y=h.uiSchema;if(void 0!==y){var g=y.selectable,k=y.deletable,w=y.restorable;!0!==n&&(n=g),!0!==r&&(r=k),!0!==a&&(a=w)}if(void 0!==d){var C=d.widget,A=d.label,S=d.selectable,P=d.deletable,U=d.restorable,E=d.ArrContainer,_=d.RowContainer,R=d.RowSeperator;if(void 0!==S&&(n=S),void 0!==P&&(r=P),void 0!==U&&(a=U),void 0!==E&&(m=E),void 0!==_&&(j=_),void 0!==R&&(O=R),t=d.Templet,"arr"!==C)return he(s.type,C,["arr"]);b=A||b}var T=!0;return m(b,Object(x.jsx)(x.Fragment,{children:l.map((function(e,u){var h,d,b=void 0;if(!1===T?b=O:T=!1,void 0!==c)h=new ve(i,s,e,!0),d=Object(x.jsx)(x.Fragment,{children:c});else{var m=typeof t;"function"===m?(h=new ve(i,s,e,!0),d=N.createElement(Object(W.a)(t),e)):"object"===m?(h=new ve(i,s,e,!0),d=t):(h=new ve(i,s,e,!1),d=Object(x.jsx)(x.Fragment,{children:o.map((function(e,t){return Object(x.jsx)(N.Fragment,{children:we(h,e,void 0)},e.name)}))}))}var y,g,k=h.rowKey;if(p[k]=h,!0===n){y=Object(x.jsx)("div",{className:"form-row-checkbox",children:Object(x.jsx)("input",{type:"checkbox",onClick:function(t){var n=t.target.checked;e.$isSelected=n;var r=e.$source;void 0!==r&&(r.$isSelected=n),h.clearErrors()},defaultChecked:e.$isSelected})})}var w=!(void 0===e.$isDeleted||!1===e.$isDeleted);if(!0===r){var C=w?"fa-undo":"fa-trash";g=Object(x.jsx)("div",{className:"form-row-edit text-info",onClick:function(){if(!0===a){e.$isDeleted=!w;var t=e.$source;void 0!==t&&(t.$isDeleted=!w),v&&v(e)}else{var n=l.indexOf(e);n>=0&&l.splice(n,1),f&&f(e)}h.clearErrors()},children:Object(x.jsx)("i",{className:I()("fa",C,"fa-fw")})})}var A=!0===n||!0===r?function(t){return Object(x.jsx)("fieldset",{disabled:w,children:Object(x.jsxs)("div",{className:I()("d-flex",{deleted:w,"row-selected":e.$isSelected}),children:[y,Object(x.jsx)("div",{className:!0===n&&!0===r?"form-row-content":"form-row-content-1",children:t}),g]})})}:function(e){return e};return Object(x.jsxs)(me.Provider,{value:h,children:[b,j(A(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.renderErrors,{}),d]})))]},k)}))}))})),Oe=n(40),ye=n(57),xe=(b=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).input=void 0,Object(U.a)(e,"imageSrc",m,Object(E.a)(e)),e.onClick=Object(y.a)(O.a.mark((function t(){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new ye.a(void 0,e.itemSchema,e.ui,e.ui.label,e.value),t.next=3,n.start();case 3:return null!==(r=t.sent)&&(e.setValue(r),e.imageSrc=r),t.next=7,n.end();case 7:case"end":return t.stop()}}),t)}))),e.observerRender=Object(W.a)((function(){var t,n=["bg-white p-1 d-flex justify-content-center"];return e.readOnly||e.disabled||(n.push("cursor-pointer"),t=e.onClick),Object(x.jsx)("div",{className:I()(n),onClick:t,children:Object(x.jsx)(Oe.a,{src:e.imageSrc,className:"w-4c h-4c"})})})),e}return Object(w.a)(n,[{key:"init",value:function(){Object(T.a)(Object(V.a)(n.prototype),"init",this).call(this),this.imageSrc=this.value}},{key:"render",value:function(){return N.createElement(this.observerRender)}},{key:"ui",get:function(){return this._ui}}]),n}($),m=Object(_.a)(b.prototype,"imageSrc",[S.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b),ge=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputs={},e}return Object(w.a)(n,[{key:"setElementValue",value:function(e){for(var t in this.inputs){var n=this.inputs[t];n.checked=e===n.value}}},{key:"setReadOnly",value:function(e){for(var t in this.readOnly=e,this.inputs)this.inputs[t].readOnly=e}},{key:"setDisabled",value:function(e){for(var t in this.disabled=e,this.inputs)this.inputs[t].disabled=e}},{key:"ui",get:function(){return this._ui}}]),n}($),ke={id:{dataTypes:["id"],widget:le},text:{dataTypes:["integer","number","string"],widget:G},textarea:{dataTypes:["string"],widget:K},password:{dataTypes:["string"],widget:Q},date:{dataTypes:["date"],widget:ee},datetime:{dataTypes:["date"],widget:te},time:{dataTypes:["date"],widget:ne},month:{dataTypes:["date"],widget:re},select:{dataTypes:["integer","number","string","date","boolean"],widget:ie},url:{dataTypes:["string"],widget:J},email:{dataTypes:["string"],widget:X},number:{dataTypes:["integer","number"],widget:Y},updown:{dataTypes:["integer","number"],widget:Z},color:{},checkbox:{dataTypes:["boolean","integer","number"],widget:ae},image:{dataTypes:["string"],widget:xe},checkboxes:{},radio:{dataTypes:["integer","number","string","date","boolean"],widget:ce},tagSingle:{dataTypes:["integer"],widget:function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e,t=this.ui,n=t.valuesView,r=t.wrapClassName;if(void 0===n)return Object(x.jsx)(x.Fragment,{children:"valuesView must be defined"});!0===this.context.isRow&&(e=this.context.rowKey);var a=I()(this.className,"py-0"),i=this.name;void 0!==e&&(i+="-"+e);var s={className:a,inputName:i,wrapClassName:r,onInputChange:this.onInputChange};return n.renderRadios(this.defaultValue,s)}}]),n}(ge)},tagMulti:{dataTypes:["string"],widget:function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).defaultArr=void 0,e.onInputChange=function(t){var n=[];for(var r in e.inputs){var a=e.inputs[r];!0===a.checked&&n.push(a.value)}e.changeValue(n.join("|"),!0)},e}return Object(w.a)(n,[{key:"init",value:function(){Object(T.a)(Object(V.a)(n.prototype),"init",this).call(this);var e=this.defaultValue;switch(typeof e){default:this.defaultArr=[];break;case"string":this.defaultArr=e.split("|").map((function(e){return Number(e)}))}}},{key:"render",value:function(){var e=this.ui,t=e.valuesView,n=e.wrapClassName;if(void 0===t)return Object(x.jsx)(x.Fragment,{children:"valuesView must be defined"});var r={className:I()(this.className,"py-0"),inputs:this.inputs,wrapClassName:n,onInputChange:this.onInputChange};return t.renderChecks(this.defaultValue,r)}}]),n}(ge)},range:{dataTypes:["integer"],widget:ue},button:{dataTypes:["button","submit"],widget:pe}};function we(e,t,n,r){if(void 0===e)return null;if(void 0!==t){var a,i=t.name,s=t.type;switch(s){case"arr":var c=e.getItemSchema(i);return Object(x.jsx)(je,{parentContext:e,arrSchema:c,children:n})}var u=e.getUiItem(i);if(void 0===u)a=p(s);else{var o=u.widget;switch(o){default:if(void 0!==o)a=ke[o].widget;void 0===a&&(a=p(s));break;case"custom":a=u.WidgetClass;break;case"group":return Object(x.jsx)("span",{children:"impletment group"})}}var l=e.widgets,h=l[i];return h||((h=new a(e,t,r,n)).init(),l[i]=h),Object(x.jsx)(h.container,{})}function p(e){switch(e){default:return G;case"id":return le;case"integer":return Z;case"number":return Y;case"string":return G;case"date":return ee;case"boolean":return ae;case"button":case"submit":return pe}}}n(85);var Ce=n(80),Ae=n(35),Ne=function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(e){var r;Object(k.a)(this,n),(r=t.call(this,e)).schema=void 0,r.itemSchemas=void 0,r.uiSchema=void 0,r.res=void 0,r.formContext=void 0,r.disposer=void 0,r.data=void 0,r.Container=void 0,r.FieldContainer=void 0,r.FieldClass=void 0,r.ButtonClass=void 0,r.watch=function(){void 0!==r.props.formData&&r.calcSelectOrDelete()},r.DefaultContainer=function(e){return Object(x.jsx)("form",{className:I()(r.props.className),onSubmit:function(e){return e.preventDefault()},children:e})},r.DefaultFieldContainer=function(e,t){var n=r.props.fieldLabelSize;if(n>0){var a;null===e?n=0:a=Object(x.jsx)("label",{className:I()("col-sm-"+n,"col-form-label"),children:e});var i="col-sm-"+(12-n);return Object(x.jsxs)("div",{className:"form-group row",children:[a,Object(x.jsx)("div",{className:i,children:t})]})}return Object(x.jsxs)("div",{className:"form-group",children:[null===e?null:Object(x.jsx)("label",{className:"col-form-label",children:e}),t]})},r.DefaultFieldClass=void 0,r.DefaultButtonClass="text-center py-2",r.DefaultRes=Object(Ae.a)(Ce.a),r.ArrContainer=function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:I()("small text-muted text-center bg-light py-1 px-3 mt-4 mb-1"),children:e}),t]})},r.RowContainer=function(e){var t=I()({"py-3":!0});return Object(x.jsx)("div",{className:t,children:e})},r.RowSeperator=Object(x.jsx)("div",{className:"border border-gray border-top"});var a=e.schema,i=e.uiSchema,s=e.Container,c=e.FieldContainer,u=e.FieldClass,o=e.ButtonClass,l=e.res;r.Container=s||r.DefaultContainer,r.FieldContainer=c||r.DefaultFieldContainer,r.FieldClass=void 0!==u&&""!==u&&null!==u?u:r.DefaultFieldClass,r.res=l||r.DefaultRes,r.ButtonClass=o||r.DefaultButtonClass,r.schema=a,r.itemSchemas={};var h,p=Object(g.a)(r.schema);try{for(p.s();!(h=p.n()).done;){var d=h.value;r.itemSchemas[d.name]=d}}catch(f){p.e(f)}finally{p.f()}return r.uiSchema=i,r.disposer=Object(S.f)(r.watch),r.data={},r}return Object(w.a)(n,[{key:"renderContent",value:function(){var e=this;this.initData(this.props.formData);var t,n=this.props.children;return void 0!==n?(this.formContext=new be(this,!0),Object(x.jsx)(x.Fragment,{children:n})):(void 0!==this.uiSchema&&(t=this.uiSchema.Templet),void 0!==t?(this.formContext=new be(this,!0),"function"===typeof t?t(this.data):t):(this.formContext||(this.formContext=new be(this,!1)),Object(x.jsx)(x.Fragment,{children:this.schema.map((function(t,r){return Object(x.jsx)(N.Fragment,{children:we(e.formContext,t,n)},r)}))})))}},{key:"initData",value:function(e){if(void 0===e&&(e={}),void 0!==this.uiSchema){var t=this.uiSchema.items;if(void 0!==t)for(var n in t){var r=t[n].defaultValue;void 0!==r&&void 0===e[n]&&(e[n]=r)}}var a,i=Object(g.a)(this.schema);try{for(i.s();!(a=i.n()).done;){var s=a.value;this.initDataItem(s,this.data,e)}}catch(c){i.e(c)}finally{i.f()}}},{key:"initDataItem",value:function(e,t,n){var r=e.name,a=e.type;if("button"!==a)if("arr"===a){var i=e,s=i.arr;if(void 0!==s){var c,u=i.itemSchemas={},o=Object(g.a)(s);try{for(o.s();!(c=o.n()).done;){var l=c.value;u[l.name]=l}}catch(y){o.e(y)}finally{o.f()}var h=n[r];void 0===h?h=[]:!1===Array.isArray(h)&&(h=[h]);var p,d=[],f=Object(g.a)(h);try{for(f.s();!(p=f.n()).done;){var v,b=p.value,m={$source:b,$isSelected:b.$isSelected,$isDeleted:b.$isDeleted},j=Object(g.a)(s);try{for(j.s();!(v=j.n()).done;){var O=v.value;this.initDataItem(O,m,b)}}catch(y){j.e(y)}finally{j.f()}d.push(m)}}catch(y){f.e(y)}finally{f.f()}t[r]=Object(S.n)(d)}}else t[r]=n[r]}},{key:"calcSelectOrDelete",value:function(){var e,t=Object(g.a)(this.schema);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.arrItemOperated(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"arrItemOperated",value:function(e){var t=e.name;if("arr"===e.type&&void 0!==this.data){var n=this.data[t];if(void 0!==n){var r,a=e.arr,i=Object(g.a)(n);try{for(i.s();!(r=i.n()).done;){var s=r.value,c=s.$source;if(void 0!==c){var u=c.$isSelected,o=c.$isDeleted;s.$isSelected=u,s.$isDeleted=o;var l,h=Object(g.a)(a);try{for(h.s();!(l=h.n()).done;){var p=l.value;this.arrItemOperated(p)}}catch(d){h.e(d)}finally{h.f()}}}}catch(d){i.e(d)}finally{i.f()}}}}},{key:"componentDidMount",value:function(){var e=this.props.beforeShow;void 0!==e&&e(this.formContext)}},{key:"componentWillUnmount",value:function(){void 0!==this.disposer&&this.disposer()}},{key:"render",value:function(){var e=this.renderContent();return Object(x.jsxs)(me.Provider,{value:this.formContext,children:[N.createElement(this.formContext.renderErrors),this.Container(e)]})}},{key:"buttonClick",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.formContext.checkRules(),!0!==this.formContext.hasError){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==(n=this.formContext.form.props.onButtonClick)){e.next=7;break}return alert("you should define form onButtonClick"),e.abrupt("return");case 7:return e.next=9,n(t,this.formContext);case 9:if(void 0!==(r=e.sent)){e.next=12;break}return e.abrupt("return");case 12:this.formContext.setError(t,r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(N.Component);(function(e){Object(C.a)(n,e);var t=Object(A.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.children,r=this.context;if(void 0===r)return Object(x.jsx)("span",{className:"text-danger",children:"!only in Form!"});var a=r.getItemSchema(t),i=we(r,a,n,this.props);return void 0===i?Object(x.jsxs)("span",{className:"text-danger",children:["!!",t," is not defined!!"]}):i}}]),n}(N.Component)).contextType=me},function(e,t,n){"use strict";n.r(t),n.d(t,"CLogin",(function(){return V}));var r=n(1),a=n.n(r),i=n(2),s=n(3),c=n(4),u=n(6),o=n(7),l=n(15),h=n(26),p=n(0),d=(n(8),function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onLogout=void 0,e}return Object(c.a)(n,[{key:"init",value:function(e){this.onLogout=e}},{key:"header",value:function(){return!0!==this.isWebNav&&"\u5b89\u5168\u9000\u51fa"}},{key:"footer",value:function(){return Object(p.jsx)("div",{className:"mt-5 text-center justify-content-center",children:Object(p.jsx)("button",{className:"btn btn-outline-warning",onClick:l.nav.resetAll,children:"\u5347\u7ea7\u8f6f\u4ef6"})})}},{key:"content",value:function(){return Object(p.jsxs)("div",{className:"m-5 border border-info bg-white rounded-3 p-5 text-center",children:[Object(p.jsx)("div",{children:"\u9000\u51fa\u5f53\u524d\u8d26\u53f7\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u5386\u53f2\u6570\u636e\uff0c\u4e0b\u6b21\u767b\u5f55\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\u672c\u8d26\u53f7"}),Object(p.jsx)("div",{className:"mt-5 text-center",children:Object(p.jsx)("button",{className:"btn btn-danger",onClick:this.onLogout,children:"\u5b89\u5168\u9000\u51fa"})})]})}},{key:"back",get:function(){return"close"}}]),n}(h.b)),f=n(23),v=n.p+"static/media/logo.2d27ead7.svg";function b(){return l.nav.loginTop(Object(p.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[Object(p.jsx)("img",{className:"App-logo h-3c position-absolute",src:v,alt:"img"}),Object(p.jsxs)("div",{className:"h3 flex-fill text-center",children:[Object(p.jsx)("span",{className:"text-primary mr-3",children:"\u540c"}),Object(p.jsx)("span",{className:"text-danger",children:"\u82b1"})]})]}))}var m=[{type:"mobile",caption:"\u624b\u673a\u53f7",regex:f.g},{type:"email",caption:"\u90ae\u7bb1",regex:f.d}];function j(e){return m.find((function(t){return!0===t.regex.test(e)}))}var O=[{name:"username",type:"string",required:!0,maxLength:100},{name:"password",type:"string",required:!0,maxLength:100},{name:"login",type:"submit"}],y=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).onLogin=void 0,e.withBack=void 0,e.uiSchema={items:{username:{placeholder:"\u624b\u673a/\u90ae\u7bb1/\u7528\u6237\u540d",label:"\u767b\u5f55\u8d26\u53f7"},password:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},login:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u767b\u5f55"}}},e.onSubmit=function(){var t=Object(i.a)(a.a.mark((function t(n,r){var i,s,c,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.form.data,s=i.username,void 0!==(c=i.password)){t.next=5;break}return t.abrupt("return","something wrong, pwd is undefined");case 5:return t.next=7,e.onLogin(s,c);case 7:if(!0!==t.sent){t.next=10;break}return t.abrupt("return");case 10:return u=j(s),o=void 0!==u?u.caption:"\u7528\u6237\u540d",t.abrupt("return",o+"\u6216\u5bc6\u7801\u9519\uff01");case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("password"!==n){t.next=4;break}return t.next=3,e.onSubmit("login",r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(c.a)(n,[{key:"init",value:function(e){var t=e.onLogin,n=e.withBack;this.onLogin=t,this.withBack=n}},{key:"header",value:function(){return!0===this.withBack&&"\u767b\u5f55"}},{key:"footer",value:function(){return Object(p.jsxs)("div",{className:"d-block",children:[Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)(l.Ax,{href:"/register",className:"btn btn-link",style:{margin:"0px auto"},children:"\u6ce8\u518c\u8d26\u53f7"})}),l.nav.privacyEntry()]})}},{key:"content",value:function(){return Object(p.jsxs)("div",{className:"d-flex p-5 flex-column justify-content-center align-items-center",children:[Object(p.jsx)("div",{className:"flex-fill"}),Object(p.jsxs)("div",{className:"w-20c",children:[b(),Object(p.jsx)("div",{className:"h-2c"}),Object(p.jsx)(l.Form,{schema:O,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1}),Object(p.jsx)(l.Ax,{className:"btn btn-link btn-block",href:"/forget",children:"\u5fd8\u8bb0\u5bc6\u7801"})]}),Object(p.jsx)("div",{className:"flex-fill"}),Object(p.jsx)("div",{className:"flex-fill"})]})}}]),n}(h.b),x=n(18),g=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).schema=[{name:"orgPassword",type:"string",maxLength:60,required:!0},{name:"newPassword",type:"string",maxLength:60,required:!0},{name:"newPassword1",type:"string",maxLength:60,required:!0},{name:"submit",type:"submit"}],e.uiSchema={items:{orgPassword:{widget:"password",label:"\u539f\u5bc6\u7801",placeholder:"\u8f93\u5165\u539f\u6765\u7684\u5bc6\u7801"},newPassword:{widget:"password",label:"\u65b0\u5bc6\u7801",placeholder:"\u8f93\u5165\u65b0\u8bbe\u7684\u5bc6\u7801"},newPassword1:{widget:"password",label:"\u786e\u8ba4\u5bc6\u7801",placeholder:"\u518d\u6b21\u8f93\u5165\u65b0\u8bbe\u5bc6\u7801"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},e.onChange=void 0,e.onSubmit=function(){var t=Object(i.a)(a.a.mark((function t(n,r){var i,s,c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.data,s=i.orgPassword,c=i.newPassword,u=i.newPassword1,c===u){t.next=4;break}return r.setError("newPassword1","\u65b0\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"),t.abrupt("return");case 4:return t.next=6,e.onChange(s,c);case 6:if(!1!==t.sent){t.next=10;break}return r.setError("orgPassword","\u539f\u5bc6\u7801\u9519\u8bef"),t.abrupt("return");case 10:return l.nav.replace(Object(p.jsx)(l.Page,{header:"\u4fee\u6539\u5bc6\u7801",back:"close",children:Object(p.jsx)("div",{className:"m-3  text-success",children:"\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01"})})),t.abrupt("return");case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(c.a)(n,[{key:"init",value:function(e){this.onChange=e}},{key:"header",value:function(){return"\u4fee\u6539\u5bc6\u7801"}},{key:"content",value:function(){return Object(p.jsx)(l.Form,{className:"m-3",schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,fieldLabelSize:2})}}]),n}(h.b),k=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).schema=[{name:"user",type:"string",required:!0,maxLength:100},{name:"verify",type:"submit"}],e.uiSchema=void 0,e.onSubmit=function(){var t=Object(i.a)(a.a.mark((function t(n,r){var i,s,c,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.clearContextErrors(),i="user",s=r.getValue(i),void 0!==(c=j(s))){t.next=7;break}return r.setError(i,"\u5fc5\u987b\u662f\u624b\u673a\u53f7\u6216\u90ae\u7bb1"),t.abrupt("return");case 7:if("mobile"!==(u=c.type)){t.next=12;break}if(11===s.length&&"1"===s[0]){t.next=12;break}return r.setError(i,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"),t.abrupt("return");case 12:return e.controller.account=s,e.controller.type=u,t.next=16,e.controller.checkAccount();case 16:void 0!==(o=t.sent)&&r.setError(i,o);case 18:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("user"!==n){t.next=4;break}return t.next=3,e.onSubmit("verify",r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(c.a)(n,[{key:"init",value:function(){this.uiSchema={items:{user:{widget:"text",label:this.accountLable,placeholder:"\u624b\u673a\u53f7\u6216\u90ae\u7bb1"},verify:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u53d1\u9001\u9a8c\u8bc1\u7801"}}}}},{key:"header",value:function(){return this.pageCaption}},{key:"footer",value:function(){return Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)(l.Ax,{href:"/login",className:"text-primary",children:"\u5df2\u6709\u8d26\u53f7\uff0c\u76f4\u63a5\u767b\u5f55"})})}},{key:"content",value:function(){return Object(p.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:[b(),Object(p.jsx)("div",{className:"h-3c"}),Object(p.jsx)(l.Form,{schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1}),l.nav.privacyEntry()]})}}]),n}(h.b),w=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"accountLable",get:function(){return"\u8d26\u53f7"}},{key:"pageCaption",get:function(){return"\u6ce8\u518c\u8d26\u53f7"}}]),n}(k),C=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"footer",value:function(){return null}},{key:"accountLable",get:function(){return"\u8d26\u53f7"}},{key:"pageCaption",get:function(){return"\u5bc6\u7801\u627e\u56de"}}]),n}(k),A=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).schema=[{name:"verify",type:"number",required:!0,maxLength:6},{name:"submit",type:"submit"}],e.onVerifyChanged=function(e,t,n){e.setDisabled("submit",!t||6!==t.length)},e.uiSchema={items:{verify:{widget:"text",label:"\u9a8c\u8bc1\u7801",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChanged:e.onVerifyChanged},submit:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u4e0b\u4e00\u6b65 >",disabled:!0}}},e.onVerify=void 0,e.onSubmit=function(){var t=Object(i.a)(a.a.mark((function t(n,r){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.getValue("verify"),t.next=3,e.onVerify(i);case 3:if(0!==t.sent){t.next=7;break}return r.setError("verify","\u9a8c\u8bc1\u7801\u9519\u8bef"),t.abrupt("return");case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("verify"!==n){t.next=4;break}return t.next=3,e.onSubmit("submit",r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(c.a)(n,[{key:"init",value:function(e){this.onVerify=e}},{key:"header",value:function(){return"\u9a8c\u8bc1\u7801"}},{key:"content",value:function(){var e,t;switch(this.controller.type){case"mobile":e="\u624b\u673a\u53f7";break;case"email":e="\u90ae\u7bb1",t=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"text-danger",children:"\u6ce8\u610f"}),": \u6709\u53ef\u80fd\u8bef\u4e3a\u5783\u573e\u90ae\u4ef6\uff0c\u8bf7\u68c0\u67e5",Object(p.jsx)("br",{})]})}return Object(p.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:["\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u5230",e,Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"py-2 px-3 my-2 text-primary bg-light",children:Object(p.jsx)("b",{children:this.controller.account})}),t,Object(p.jsx)("div",{className:"h-1c"}),Object(p.jsx)(l.Form,{schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1})]})}}]),n}(h.b),N=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).schema=[{name:"pwd",type:"string",required:!0,maxLength:100},{name:"rePwd",type:"string",required:!0,maxLength:100},{name:"submit",type:"submit"}],e.onButtonSubmit=function(){var t=Object(i.a)(a.a.mark((function t(n,r){var i,s,c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.form.data,s=i.pwd,c=i.rePwd,s&&s===c){t.next=9;break}r.setValue("pwd",""),r.setValue("rePwd",""),u="\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801\uff01",r.setError("pwd",u),t.next=13;break;case 9:return t.next=11,e.controller.onPasswordSubmit(s);case 11:void 0!==(u=t.sent)&&l.nav.push(Object(p.jsx)(l.Page,{header:"\u6ce8\u518c\u4e0d\u6210\u529f",children:Object(p.jsx)("div",{className:"p-5 text-danger",children:u})}));case 13:return t.abrupt("return",u);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("rePwd"!==n){t.next=4;break}return t.next=3,e.onButtonSubmit("submit",r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(c.a)(n,[{key:"header",value:function(){return this.pageCaption}},{key:"content",value:function(){var e={items:{pwd:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},rePwd:{widget:"password",placeholder:"\u91cd\u590d\u5bc6\u7801",label:"\u91cd\u590d\u5bc6\u7801"},submit:{widget:"button",className:"btn btn-primary btn-block mt-3",label:this.submitCaption}}};return Object(p.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:["\u6ce8\u518c\u8d26\u53f7",Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"py-2 px-3 my-2 text-primary bg-light",children:Object(p.jsx)("b",{children:this.account})}),Object(p.jsx)("div",{className:"h-1c"}),Object(p.jsx)(l.Form,{schema:this.schema,uiSchema:e,onButtonClick:this.onButtonSubmit,onEnter:this.onEnter,requiredFlag:!1})]})}},{key:"account",get:function(){return this.controller.account}}]),n}(h.b),S=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"pageCaption",get:function(){return"\u6ce8\u518c\u8d26\u53f7"}},{key:"submitCaption",get:function(){return"\u6ce8\u518c\u65b0\u8d26\u53f7"}}]),n}(N),P=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"pageCaption",get:function(){return"\u8d26\u53f7\u5bc6\u7801"}},{key:"submitCaption",get:function(){return"\u6539\u5bc6\u7801"}}]),n}(N),I=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"header",value:function(){return!1}}]),n}(h.b),U=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"content",value:function(){var e=this.controller,t=e.account,n=e.login;return Object(p.jsx)("div",{className:"container w-max-30c",children:Object(p.jsxs)("div",{className:"my-5",children:[Object(p.jsxs)("div",{className:"py-5 text-center",children:["\u8d26\u53f7 ",Object(p.jsxs)("strong",{className:"text-primary",children:[t," "]})," \u6ce8\u518c\u6210\u529f\uff01"]}),Object(p.jsx)("button",{className:"btn btn-success btn-block",type:"button",onClick:function(){return n(void 0)},children:"\u76f4\u63a5\u767b\u5f55"})]})})}}]),n}(I),E=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"content",value:function(){var e=this.controller.login;return Object(p.jsx)("div",{className:"container w-max-30c",children:Object(p.jsxs)("div",{className:"my-5",children:[Object(p.jsx)("div",{className:"py-5 text-center text-success",children:"\u6210\u529f\u4fee\u6539\u5bc6\u7801"}),Object(p.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e()},children:"\u767b\u5f55\u8d26\u53f7"})]})})}}]),n}(I),_=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).account=void 0,e.type=void 0,e.password=void 0,e.verify=void 0,e.login=function(){var t=Object(i.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.p.login({user:n||e.account,pwd:e.password,guest:l.nav.guest});case 2:if(void 0!==(r=t.sent)){t.next=6;break}return alert("something wrong!"),t.abrupt("return");case 6:return t.next=8,l.nav.userLogined(r);case 8:e.isWebNav&&l.nav.navigate("/");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(c.a)(n,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(this.VStart);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toVerify",value:function(){var e=this;this.openVPage(this.VVerify,function(){var t=Object(i.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.verify=n,t.next=3,x.p.checkVerify(e.account,n);case 3:if(0!==(r=t.sent)){t.next=6;break}return t.abrupt("return",r);case 6:e.toPassword();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"toPassword",value:function(){this.openVPage(this.VPassword)}},{key:"toSuccess",value:function(){this.openVPage(this.VSuccess)}},{key:"checkAccount",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.p.isExists(this.account);case 2:if(t=e.sent,void 0===(n=this.accountError(t))){e.next=6;break}return e.abrupt("return",n);case 6:return e.next=8,x.p.sendVerify(this.account,this.type,l.nav.oem);case 8:return t=e.sent,this.toVerify(),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"VVerify",get:function(){return A}}]),n}(h.a),R=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"accountError",value:function(e){if(e>0)return"\u5df2\u7ecf\u88ab\u6ce8\u518c\u4f7f\u7528\u4e86"}},{key:"onPasswordSubmit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.password=t,n={nick:void 0,user:this.account,pwd:t,country:void 0,mobile:void 0,mobileCountry:void 0,email:void 0,verify:this.verify},e.t0=this.type,e.next="mobile"===e.t0?5:"email"===e.t0?8:10;break;case 5:return n.mobile=Number(this.account),n.mobileCountry=86,e.abrupt("break",10);case 8:return n.email=this.account,e.abrupt("break",10);case 10:return e.next=12,x.p.register(n);case 12:if(0!==(r=e.sent)){e.next=17;break}return l.nav.clear(),this.toSuccess(),e.abrupt("return");case 17:return i=this.regReturn(r),e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"regReturn",value:function(e){var t;switch(e){default:return"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef";case 4:return"\u9a8c\u8bc1\u7801\u9519\u8bef";case 0:return;case 1:t="\u7528\u6237\u540d "+this.account;break;case 2:t="\u624b\u673a\u53f7 +"+this.account;break;case 3:t="\u90ae\u7bb1 "+this.account}return t+" \u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7\u4e86"}},{key:"VStart",get:function(){return w}},{key:"VPassword",get:function(){return S}},{key:"VSuccess",get:function(){return U}}]),n}(_),T=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"accountError",value:function(e){if(0===e)return"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8d26\u53f7"}},{key:"onPasswordSubmit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.password=t,e.next=3,x.p.resetPassword(this.account,this.password,this.verify,this.type);case 3:if(0!==e.sent.length){e.next=8;break}throw n="something wrong in reseting password",console.log(n),n;case 8:return l.nav.clear(),this.toSuccess(),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"VStart",get:function(){return C}},{key:"VPassword",get:function(){return P}},{key:"VSuccess",get:function(){return E}}]),n}(_),V=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"showLogin",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){var e=Object(i.a)(a.a.mark((function e(n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.p.login({user:n,pwd:r,guest:l.nav.guest});case 2:if(void 0!==(i=e.sent)){e.next=5;break}return e.abrupt("return",!1);case 5:return console.log("onLoginSubmit: user=%s pwd:%s",i.name,i.token),e.next=8,l.nav.userLogined(i,t);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.openVPage(y,{onLogin:r,withBack:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"showLogout",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(d,(function(){l.nav.logout(t)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showRegister",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new R(this.res),e.next=3,t.start();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showForget",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new T(this.res),e.next=3,t.start();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVChangePassword",value:function(){return g}},{key:"showChangePassword",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.getVChangePassword(),this.openVPage(t,function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new x.c("tv/",void 0),e.next=3,r.changePassword({orgPassword:t,newPassword:n});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(h.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r,a=n(0),i=n(1),s=n.n(i),c=n(2),u=n(3),o=n(4),l=n(6),h=n(7),p=n(8),d=n(11),f=n(19),v=n(27),b=n(30),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).onChange=function(t){e.newValue=t.target.value;var n=e.value;e.isChanged=e.newValue!==n},e.onBlur=function(t){e.verifyValue()},e.onFocus=function(){e.error=void 0},e.page=Object(d.a)((function(t){var n=t.resolve,r=function(){if(e.verifyValue(),void 0===e.error){var t=e.newValue;n(t)}},i=Object(a.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!e.isChanged,onClick:r,children:"\u4fdd\u5b58"}),s=e.inputOptions(),c=s.type,u=s.max,o=s.min,l=s.step;return Object(a.jsx)(v.a,{header:e.label,right:i,children:Object(a.jsxs)("div",{className:"m-3",children:[Object(a.jsx)("input",{type:c,onChange:e.onChange,onKeyDown:function(e){13===e.keyCode&&r()},onBlur:e.onBlur,onFocus:e.onFocus,className:"form-control",defaultValue:e.value,min:o,max:u,step:l}),e.uiItem&&Object(a.jsx)("div",{className:"small muted m-2",children:e.uiItem.placeholder}),e.error&&Object(a.jsx)("div",{className:"text-danger",children:e.error})]})})})),e}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=p.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"inputOptions",value:function(){return{type:"text"}}},{key:"uiItem",get:function(){return this._uiItem}}]),n}(b.a),j=n(57),O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).onChange=function(t){e.newValue=t;var n=e.value;e.isChanged=e.newValue!==n},e.page=Object(d.a)((function(t){var n=t.resolve,r=e.itemSchema.name,i=e.uiItem.list,s=Object(a.jsx)("button",{className:"btn btn-sm btn-success align-self-center",disabled:!e.isChanged,onClick:function(){e.verifyValue(),void 0===e.error&&n(e.newValue)},children:"\u4fdd\u5b58"}),c=i?i.map((function(t,n){var i=t.title,s=t.value;return Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("label",{className:"px-3 py-2 cursor-pointer",children:[Object(a.jsx)("input",{name:r,type:"radio",value:s,onClick:function(){return e.onChange(s)},defaultChecked:s===e.value})," ",i||s," \xa0"]})},n)})):Object(a.jsx)(a.Fragment,{children:"no list defined"});return Object(a.jsx)(v.a,{header:"\u66f4\u6539"+e.label,right:s,children:Object(a.jsx)("div",{className:"m-3",children:Object(a.jsx)("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4",children:c})})})})),e}return Object(o.a)(n,[{key:"init",value:function(){void 0===this.value&&(this.value=void 0===this._uiItem?void 0:this._uiItem.defaultValue)}},{key:"internalStart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=p.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uiItem",get:function(){return this._uiItem}}]),n}(b.a),y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).onChange=function(t){e.newValue=t;var n=e.value;e.isChanged=e.newValue!==n},e.page=Object(d.a)((function(t){var n=t.resolve,r=e.uiItem.list,i=r?r.map((function(t,r){var i=t.title,s=t.value;return Object(a.jsx)("div",{className:"px-3 py-2 cursor-pointer bg-white mb-1",onClick:function(){e.onChange(s),n(e.newValue)},children:i||s},r)})):Object(a.jsx)(a.Fragment,{children:"no list defined"});return Object(a.jsx)(v.a,{header:"\u66f4\u6539"+e.label,children:Object(a.jsx)("div",{className:"my-3",children:i})})})),e}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=p.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uiItem",get:function(){return this._uiItem}}]),n}(b.a),x=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).onChange=function(t){e.newValue=t;var n=e.value;e.isChanged=e.newValue!==n},e.page=Object(d.a)((function(t){return Object(a.jsx)(v.a,{header:"\u66f4\u6539"+e.label,children:"ddd"})})),e}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(s.a.mark((function e(n,r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=t.uiItem.pickId)){e.next=4;break}return alert("IdItemEdit.pickId = undefined"),e.abrupt("return");case 4:return e.next=6,a(void 0,void 0,t.value);case 6:i=e.sent,t.onChange(i.id),n(i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"internalEnd",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uiItem",get:function(){return this._uiItem}}]),n}(b.a),g=n(21),k=n(20),w=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).inputs={},e.inputType=void 0,e.page=Object(d.a)((function(t){var n=t.resolve,r=Object(a.jsx)("button",{className:"btn btn-sm btn-success align-self-center",disabled:!e.isChanged,onClick:function(){e.verifyValue(),void 0===e.error&&n(e.newValue)},children:"\u4fdd\u5b58"});return Object(a.jsx)(v.a,{header:"\u66f4\u6539"+e.label,right:r,children:Object(a.jsx)("div",{className:"p-3",children:e.renderInputs()})})})),e}return Object(o.a)(n,[{key:"init",value:function(){void 0===this.value&&(this.value=void 0===this._uiItem?void 0:this._uiItem.defaultValue)}},{key:"internalStart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=p.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){var e=this.uiItem.valuesView;return void 0===e?Object(g.a)(Object(k.a)(n.prototype),"renderContent",this).call(this):e.render(this.value)}},{key:"uiItem",get:function(){return this._uiItem}}]),n}(b.a),C=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="radio",e.onInputChange=function(t){var n=t.currentTarget;if(!1!==n.checked){e.newValue=Number(n.value);var r=e.value;e.isChanged=e.newValue!==r}},e}return Object(o.a)(n,[{key:"renderInputs",value:function(){var e=this.uiItem.valuesView,t={inputs:this.inputs,onInputChange:this.onInputChange};return e.renderRadios(this.value,t)}}]),n}(w),A=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).inputType="checkbox",e.onInputChange=function(t){var n=[];for(var r in e.inputs){var a=e.inputs[r];!0===a.checked&&n.push(a.value)}e.newValue=n.join("|");var i=e.value;e.isChanged=e.newValue!==i},e}return Object(o.a)(n,[{key:"renderInputs",value:function(){var e=this.uiItem.valuesView,t={inputs:this.inputs,onInputChange:this.onInputChange};return e.renderChecks(this.value,t)}}]),n}(w),N=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).onChange=function(t){e.newValue=t.target.value;var n=e.value;e.isChanged=e.newValue!==n},e.onBlur=function(t){e.verifyValue()},e.onFocus=function(){e.error=void 0},e.page=Object(d.a)((function(t){var n=t.resolve,r=Object(a.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!e.isChanged,onClick:function(){if(e.verifyValue(),void 0===e.error){var t=e.newValue;n(t)}},children:"\u4fdd\u5b58"});return Object(a.jsx)(v.a,{header:e.label,right:r,children:Object(a.jsxs)("div",{className:"m-3",children:[Object(a.jsx)("textarea",{onChange:e.onChange,onKeyDown:function(e){},onBlur:e.onBlur,onFocus:e.onFocus,className:"form-control",defaultValue:e.value,rows:6}),e.uiItem&&Object(a.jsx)("div",{className:"small muted m-2",children:e.uiItem.placeholder}),e.error&&Object(a.jsx)("div",{className:"text-danger",children:e.error})]})})})),e}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=p.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uiItem",get:function(){return this._uiItem}}]),n}(b.a),S=n(13),P=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).input=void 0,e.onChange=function(t){e.newValue=e.getValue(t.target.checked);var n=e.value;e.isChanged=e.newValue!==n,e.edit.onItemChanged(Object(S.a)(e),e.newValue)},e}return Object(o.a)(n,[{key:"internalStart",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.input){e.next=2;break}return e.abrupt("return");case 2:if(void 0!==this.uiItem){e.next=5;break}return e.abrupt("return",this.input.checked);case 5:return t=this.input.checked,e.abrupt("return",this.getValue(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"end",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){var e,t=this,n=this.uiItem.readOnly,r=!0===n;return!0!==n&&(e=this.onChange),Object(a.jsx)("input",{ref:function(e){return t.input=e},type:"checkbox",defaultChecked:this.value,disabled:r,onChange:e})}},{key:"getValue",value:function(e){var t=this.uiItem,n=t.trueValue,r=t.falseValue;return!0===e?null===n||void 0===n||n:null!==r&&void 0!==r&&r}},{key:"uiItem",get:function(){return this._uiItem}},{key:"editInRow",get:function(){return!0}}]),n}(b.a),I=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"inputOptions",value:function(){var e,t,n;return this._uiItem&&(e=this._uiItem.min,t=this._uiItem.max,n=this._uiItem.step),{type:"range",min:e,max:t,step:n}}}]),n}(m),U=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"inputOptions",value:function(){var e,t,n;return this._uiItem&&(e=this._uiItem.min,t=this._uiItem.max,n=this._uiItem.step),{type:"number",min:e,max:t,step:n}}}]),n}(m),E=Object(d.a)(r=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).defaultSepClassName="border-top edit-sep-light-gray",r.defaultRowContainerClassName="d-flex px-3 py-2 bg-white align-items-center",r.topBorder=void 0,r.bottomBorder=void 0,r.rowContainerClassName=void 0,r.sep=void 0,r.uiSchema=void 0,r.rowClick=function(){var e=Object(c.a)(s.a.mark((function e(t){var n,a,i,c,u,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=3;break}return alert("item has no edit"),e.abrupt("return");case 3:if(n=t.itemSchema,a=t.uiItem,i=t.value,!0!==t.editInRow){e.next=6;break}return e.abrupt("return");case 6:if(c=r.props,u=c.onItemChanged,o=c.onItemClick,!0!==c.stopEdit){e.next=9;break}return e.abrupt("return");case 9:if(!0!==(null===a||void 0===a?void 0:a.readOnly)){e.next=11;break}return e.abrupt("return");case 11:if(void 0===o){e.next=15;break}return e.next=14,o(n,a,i);case 14:return e.abrupt("return");case 15:if(void 0!==t){e.next=18;break}return alert("undefined: let itemEdit:ItemEdit = createItemEdit(itemSchema, uiItem, label, value);"),e.abrupt("return");case 18:return e.prev=18,e.next=21,t.start();case 21:if((l=e.sent)===i){e.next=30;break}if(r.props.data[n.name]=l,void 0!==u){e.next=28;break}alert("".concat(n.name," value changed, new: ").concat(l,", pre: ").concat(i)),e.next=30;break;case 28:return e.next=30,u(n,l,i);case 30:return e.next=32,t.end();case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(18),console.log("no value changed"),console.error(e.t0);case 38:case"end":return e.stop()}}),e,null,[[18,34]])})));return function(t){return e.apply(this,arguments)}}();var i=e.topBorderClassName,o=e.bottomBorderClassName,l=e.sepClassName,h=e.rowContainerClassName,p=e.uiSchema;return r.topBorder=Object(a.jsx)("div",{className:i||r.defaultSepClassName}),r.bottomBorder=Object(a.jsx)("div",{className:o||r.defaultSepClassName}),r.rowContainerClassName=h||r.defaultRowContainerClassName,r.sep=Object(a.jsx)("div",{className:l||r.defaultSepClassName}),r.uiSchema=p&&p.items||{},r}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props.schema;return Object(a.jsxs)("div",{children:[this.topBorder,n.map((function(n,r){var i,u,o=t.props.stopEdit,l=n.name,h=void 0===t.uiSchema?void 0:t.uiSchema[l];void 0!==h&&(i=h.label||l,u=h.labelHide);var d=t.props.data[l],f=function(e,t,n,r,a){var i,s;if(void 0!==n)switch(n.widget){default:break;case"id":s=x;break;case"text":s=m;break;case"textarea":s=N;break;case"image":s=j.a;break;case"select":s=y;break;case"range":s=I;break;case"number":case"updown":s=U;break;case"checkbox":s=P;break;case"radio":i=new O(e,t,n,r,a);break;case"tagSingle":i=new C(e,t,n,r,a);break;case"tagMulti":i=new A(e,t,n,r,a)}if(void 0===i){if(void 0===s)switch(t.type){case"string":s=m;break;case"image":s=j.a;break;case"boolean":s=P;break;case"number":case"integer":s=I}if(void 0===s)return;i=new s(e,t,n,r,a)}return i.init(),i}(t,n,h,i,d),v=t.rowContainerClassName,b=f.editInRow;!1===b&&!0!==o&&(b=!1),!1===b&&(v+=" cursor-pointer");var g,k=!0===n.required&&Object(a.jsx)("span",{className:"text-danger",children:"*"}),w="flex-fill d-flex ";!0===u?g=void 0:(g=Object(a.jsxs)("div",{children:[i," ",k]}),w+="justify-content-end");var S=Object(a.jsxs)(p.Fragment,{children:[e,Object(a.jsxs)("div",{className:"d-flex align-items-center"+v,onClick:Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.rowClick(f);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:[g,Object(a.jsx)("div",{className:w,children:void 0===f?void 0:f.renderContent()}),!1===b&&Object(a.jsx)("div",{className:"w-2c text-right",children:Object(a.jsx)("i",{className:"fa fa-angle-right"})})]})]},r);return e=t.sep,S})),this.bottomBorder]})}},{key:"onItemChanged",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,a,i,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.itemSchema,a=t.uiItem,i=t.value,this.props.data[r.name]=n,c=this.props,u=c.onItemChanged,!0!==c.stopEdit){e.next=5;break}return e.abrupt("return");case 5:if(!0!==(null===a||void 0===a?void 0:a.readOnly)){e.next=7;break}return e.abrupt("return");case 7:if(void 0!==u){e.next=11;break}alert("".concat(r.name," value changed, new: ").concat(n,", pre: ").concat(i)),e.next=13;break;case 11:return e.next=13,u(r,n,i);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(p.Component))||r},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return f}));var r=n(1),a=n.n(r),i=n(2),s=n(3),c=n(4),u=n(6),o=n(7),l=n(15),h=n(26),p=n(33),d=n(18),f=new(function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"userAppUnits",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-app-units",{app:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userFromId",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/user-name-nick-icon-from-id",{userId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userFromKey",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-from-key",{key:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.b))("tv/",void 0),v=n(0),b=(n(8),function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(e){var t=e.predefinedUnit,n=l.nav.user,r=n?n.name:"[\u672a\u767b\u5f55]",a=p.UQsMan.value,i=a.appOwner,s=a.appName;return Object(v.jsx)(l.Page,{header:"APP\u65e0\u6cd5\u8fd0\u884c",logout:!0,children:Object(v.jsxs)("div",{className:"m-3 text-danger container",children:[Object(v.jsxs)("div",{className:"form-group row",children:[Object(v.jsx)("div",{className:"col-sm-3 font-weight-bold",children:"\u767b\u5f55\u7528\u6237"}),Object(v.jsx)("div",{className:"col-sm text-body",children:r})]}),Object(v.jsxs)("div",{className:"form-group row",children:[Object(v.jsx)("div",{className:"col-sm-3 font-weight-bold",children:"App"}),Object(v.jsx)("div",{className:"col-sm text-body",children:"".concat(i,"/").concat(s)})]}),Object(v.jsxs)("div",{className:"form-group row",children:[Object(v.jsx)("div",{className:"col-sm-3 font-weight-bold",children:"\u9884\u8bbe\u5c0f\u53f7"}),Object(v.jsx)("div",{className:"col-sm text-body",children:t||Object(v.jsx)("small",{className:"",children:"[\u65e0\u9884\u8bbe\u5c0f\u53f7]"})})]}),Object(v.jsxs)("div",{className:"form-group row",children:[Object(v.jsxs)("div",{className:"col-sm-3 font-weight-bold",children:["\u53ef\u80fd\u539f\u56e0",Object(v.jsx)(l.FA,{name:"exclamation-triangle"})]}),Object(v.jsx)("div",{className:"col-sm text-body",children:Object(v.jsxs)("ul",{className:"p-0",children:[Object(v.jsxs)("li",{children:["\u6ca1\u6709\u5c0f\u53f7\u8fd0\u884c ",s]}),Object(v.jsxs)("li",{children:["\u7528\u6237 ",Object(v.jsx)("b",{children:r})," \u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u8fd0\u884c",s,"\u7684\u5c0f\u53f7"]}),t&&Object(v.jsxs)("li",{children:["\u9884\u8bbe\u5c0f\u53f7 ",Object(v.jsx)("b",{children:t})," \u6ca1\u6709\u8fd0\u884cApp ",s]})]})})]}),Object(v.jsxs)("div",{className:"form-group row",children:[Object(v.jsxs)("div",{className:"col-sm-3 font-weight-bold",children:["\u5c0f\u53f7",t]}),Object(v.jsxs)("div",{className:"col-sm text-body",children:["\u9884\u8bbe\u5c0f\u53f7\u5b9a\u4e49\u5728 public/unit.json \u6587\u4ef6\u4e2d\u3002 \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u7531url\u76f4\u63a5\u542f\u52a8\u3002 \u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95eeapp\u4e4b\u540e\uff0c\u4f1a\u7f13\u5b58\u5728localStorage\u91cc\u3002",Object(v.jsx)("br",{}),"\u5982\u679c\u8981\u5220\u53bb\u7f13\u5b58\u7684\u9884\u5b9a\u4e49Unit\uff0clogout\u7136\u540e\u518dlogin\u3002"]})]})]})})},e}return Object(c.a)(n,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{predefinedUnit:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(h.b)),m=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).renderRow=function(e,t){var n=e.id,r=e.nick,a=e.name;return Object(v.jsx)(l.LMR,{className:"px-3 py-2",right:"id: "+n,children:Object(v.jsx)("div",{children:r||a})})},e.onRowClick=function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.f.unit=n.id,e.controller.setAppUnit(n),t.next=4,e.controller.start();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=function(){return Object(v.jsx)(l.Page,{header:"\u9009\u62e9\u5c0f\u53f7",logout:!0,children:Object(v.jsx)(l.List,{items:e.controller.appUnits,item:{render:e.renderRow,onClick:e.onRowClick}})})},e}return Object(c.a)(n,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(h.b),j=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(e){return Object(v.jsx)(l.Page,{header:"ERROR",children:Object(v.jsxs)("div",{className:"m-3",children:[Object(v.jsx)("div",{className:"p-3 d-flex justify-content-center align-items-center",children:Object(v.jsx)("button",{className:"btn btn-danger",onClick:l.nav.resetAll,children:"\u91cd\u542f\u7f51\u9875"})}),Object(v.jsx)("div",{children:"Load Uqs \u53d1\u751f\u9519\u8bef\uff1a"}),e.errors.map((function(e,t){return Object(v.jsx)("div",{children:e},t)}))]})})},e}return Object(c.a)(n,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{errors:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(h.b),O=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(e){var t=e.error;return Object(v.jsx)(l.Page,{header:"App start error!",children:Object(v.jsx)("pre",{children:"string"===typeof t?t:t.message})})},e}return Object(c.a)(n,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{error:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(h.b),y=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var r;if(Object(s.a)(this,n),(r=t.call(this,void 0)).appConfig=void 0,r._uqs=void 0,r.name=void 0,r.noUnit=void 0,r.appUnits=void 0,r.appUnit=void 0,r.roleDefines=void 0,r.appConfig=e||l.nav.navSettings,r.appConfig){var a=r.appConfig,i=a.appName,c=a.noUnit;if(r.name=i,void 0===i)throw new Error('appName like "owner/app" must be defined in MainConfig');r.noUnit=c}return r}return Object(c.a)(n,[{key:"internalT",value:function(e){return Object(l.t)(e)}},{key:"setRes",value:function(e){Object(l.setGlobalRes)(e)}},{key:"hasRole",value:function(e){var t;if("string"===typeof e){if(0===e.length)return!1;var n=this.roleDefines.findIndex((function(t){return t===e}));if(n<0)return!1;t=1<<n}else t=e;return 0!==(this.appUnit.roles&t)}},{key:"setAppUnit",value:function(e){this.appUnit=e;var t=e.roleDefs;this.roleDefines=t?t.split("\t"):[]}},{key:"beforeStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,s,c,u,o,h,v,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.onNavRoutes(),this.appConfig){e.next=4;break}return e.abrupt("return",!0);case 4:return t=this.appConfig,n=t.appName,r=t.version,i=t.tvs,e.next=7,p.UQsMan.load(n,r,i);case 7:if(this._uqs=p.UQsMan._uqs,s=p.UQsMan.errors,c=d.f.predefinedUnit,!(void 0!==(u=l.nav.user)&&u.id>0)){e.next=37;break}return e.next=14,f.userAppUnits(p.UQsMan.value.id);case 14:if(o=e.sent,this.appUnits=o,!0!==this.noUnit){e.next=18;break}return e.abrupt("return",!0);case 18:e.t0=this.appUnits.length,e.next=0===e.t0?21:1===e.t0?23:32;break;case 21:return this.showUnsupport(c),e.abrupt("return",!1);case 23:if(h=this.appUnits[0],this.setAppUnit(h),v=h.id,!(void 0===(b=v)||b<0||void 0!==c&&b!==c)){e.next=30;break}return this.showUnsupport(c),e.abrupt("return",!1);case 30:return d.f.unit=b,e.abrupt("break",37);case 32:if(!(c>0&&void 0!==this.appUnits.find((function(e){return e.id===c})))){e.next=35;break}return d.f.unit=c,e.abrupt("break",37);case 35:return this.openVPage(m),e.abrupt("return",!1);case 37:if(void 0===s){e.next=40;break}return this.openVPage(j,s),e.abrupt("return",!1);case 40:return e.abrupt("return",!0);case 43:return e.prev=43,e.t1=e.catch(0),this.openVPage(O,e.t1),e.abrupt("return",!1);case 47:case"end":return e.stop()}}),e,this,[[0,43]])})));return function(){return e.apply(this,arguments)}}()},{key:"afterStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.nav.resolveRoute();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"userFromId",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.userFromId(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"on",value:function(){return l.nav.on(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"onNavRoutes",value:function(){}},{key:"showUnsupport",value:function(e){l.nav.clear(),this.openVPage(b,e)}},{key:"uqs",get:function(){return this._uqs}}]),n}(h.a);function x(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(a.a.mark((function e(t,n,r){var i,s,c,u,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&((i=n.htmlTitle)&&(document.title=i),s=document.getElementsByTagName("html"),(c=s[0])&&(u=null===c||void 0===c?void 0:c.getAttribute("data-version"))&&(n.version=u)),o=new t(n),e.next=4,o.start(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(21),w=n(20),C=n(17),A=n.n(C),N=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e.res))._uqs=void 0,r._cApp=void 0,r._cApp=e,r._uqs=e&&e.uqs,r}return Object(c.a)(n,[{key:"hasRole",value:function(e){var t;return null===(t=this._cApp)||void 0===t?void 0:t.hasRole(e)}},{key:"internalT",value:function(e){var t=Object(k.a)(Object(w.a)(n.prototype),"internalT",this).call(this,e);return void 0!==t?t:this._cApp.internalT(e)}},{key:"newC",value:function(e,t){var n=new e(this.cApp);return n.init(t),n}},{key:"newSub",value:function(e,t){var n=new e(this);return n.init(t),n}},{key:"getWebNav",value:function(){var e,t=null===(e=this._cApp)||void 0===e?void 0:e.getWebNav();if(void 0!==t){var n=A.a.clone(t);return A.a.merge(n,this.webNav),n}}},{key:"uqs",get:function(){return this._uqs}},{key:"cApp",get:function(){return this._cApp}}]),n}(h.a),S=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e.cApp))._owner=void 0,r._owner=e,r}return Object(c.a)(n,[{key:"internalT",value:function(e){var t=Object(k.a)(Object(w.a)(n.prototype),"internalT",this).call(this,e);return void 0!==t?t:this._owner.internalT(e)}},{key:"getWebNav",value:function(){var e,t=null===(e=this._cApp)||void 0===e?void 0:e.getWebNav();if(void 0!==t){for(var n=[],r=this.owner;void 0!==r;r=null===(a=r)||void 0===a?void 0:a.owner){var a;n.push(r.webNav)}for(var i=A.a.clone(t);;){var s=n.pop();if(void 0===s)break;A.a.merge(i,s)}return A.a.merge(i,this.webNav),i}}},{key:"owner",get:function(){return this._owner}}]),n}(N)},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r,a,i,s,c,u,o=n(0),l=n(3),h=n(4),p=n(6),d=n(7),f=n(8),v=n(16),b=n.n(v),m=n(11),j=n(17),O=n.n(j),y=n(10),x=n(9),g=(r=function(){function e(t){Object(l.a)(this,e),this.list=void 0,this.render=void 0,this.list=t}return Object(h.a)(e,[{key:"dispose",value:function(){}},{key:"renderContent",value:function(e,t){var n=this.list.props.item.render;return void 0===n?Object(o.jsx)("div",{className:"px-3 py-2",children:JSON.stringify(e)}):n(e,t)}},{key:"isPaged",get:function(){var e=this.list.props.items;return null!==e&&void 0!==e&&!1===Array.isArray(e)}},{key:"items",get:function(){var e=this.list.props.items;return null===e?null:void 0!==e?!0===Array.isArray(e)?e:e.items:void 0}},{key:"loading",get:function(){var e=this.list.props.items;if(null===e)return!1;if(void 0===e)return!0;var t=e;return void 0!==t.items&&t.loading}},{key:"selectedItems",get:function(){}}]),e}(),Object(y.a)(r.prototype,"loading",[x.g],Object.getOwnPropertyDescriptor(r.prototype,"loading"),r.prototype),r),k=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).render=function(t,n){var r=e.list.props.item,a=r.className,i=r.key,s=r.onClick;return Object(o.jsx)("li",{className:b()("va-row-clickable",a),onClick:function(){return s&&s(t)},children:e.renderContent(t,n)},void 0===i?n:i(t))},e}return n}(g),w=n(37),C=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).render=function(t,n){var r=e.list.props.item,a=r.className,i=r.key;if("string"===typeof t){var s=b()("va-list-gap","px-3","pt-1");return Object(o.jsx)("li",{className:s,children:t},Object(w.a)())}return Object(o.jsx)("li",{className:b()(a),children:e.renderContent(t,n)},void 0===i?n:i(t))},e}return n}(g),A=n(14),N=n(25),S=n(12),P=n(13),I=(n(24),a=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(l.a)(this,n),r=t.call(this,e),Object(S.a)(r,"_items",i,Object(P.a)(r)),r.inputItems={},r.buildItems=function(){var e,t=r.list.props,n=t.items,a=t.isItemSelected,i=t.selectedItems,s=t.compare;if(void 0!==n)if(null!==n)if(e=!0===Array.isArray(n)?n:n.items,a){var c=e.map((function(e){return{selected:a(e),item:e,labelId:Object(w.a)()}}));r._items=c}else{var u;u=void 0===s?function(e,t){return e===t}:s;var o=e.map((function(e){return{selected:void 0!==i&&void 0!==i.find((function(t){return u(e,t)})),item:e,labelId:Object(w.a)()}}));r._items=o}else r._items=null;else r._items=void 0},r.render=function(e,t){var n=r.list.props.item.key;return f.createElement(r.row,{item:e,index:t,key:void 0===n?t:n(e)})},r.row=Object(m.a)((function(e){var t=e.item,n=e.index,a=r.list.props.item.className,i=t.labelId,s=t.selected,c=t.item;return Object(o.jsx)("li",{className:b()(a),children:Object(o.jsxs)("div",{className:"d-flex align-items-center px-3",children:[Object(o.jsx)("input",{ref:function(e){e&&(r.inputItems[i]=e)},className:"",type:"checkbox",value:"",id:i,defaultChecked:s,onChange:function(e){r.onSelect(t,e.target.checked)}}),Object(o.jsx)("label",{className:"",style:{flex:1,marginBottom:0},htmlFor:i,children:r.renderContent(c,n)})]})})})),r.buildItems(),r.listenArraySplice(),r}return Object(h.a)(n,[{key:"listenArraySplice",value:function(){var e,t=this,n=this.list.props.items;void 0!==n&&(null!==n&&(e=!0===Array.isArray(n)?n:n.items,!0===Object(x.k)(n)&&Object(x.o)(e,(function(e){if("splice"===e.type){var n,r=e.index,a=e.removedCount,i=e.added,s=i&&i.map((function(e){return{selected:!1,item:e,labelId:Object(w.a)()}}));(n=t._items).splice.apply(n,[r,a].concat(Object(N.a)(s))),t.buildItems()}}),!0)))}},{key:"checkAll",value:function(e){for(var t in this.inputItems)this.inputItems[t].checked=e;var n,r=Object(A.a)(this._items);try{for(r.s();!(n=r.n()).done;){n.value.selected=e}}catch(a){r.e(a)}finally{r.f()}}},{key:"selectAll",value:function(){this.checkAll(!0),this.list.props.item.onSelect(void 0,!0,this.anySelected)}},{key:"unselectAll",value:function(){this.checkAll(!1),this.list.props.item.onSelect(void 0,!1,this.anySelected)}},{key:"onSelect",value:function(e,t){e.selected=t,this.list.props.item.onSelect(e.item,t,this.anySelected)}},{key:"items",get:function(){return this._items}},{key:"anySelected",get:function(){return this._items.some((function(e){return e.selected}))}},{key:"selectedItems",get:function(){return this._items.filter((function(e){return!0===e.selected})).map((function(e){return e.item}))}}]),n}(g),i=Object(y.a)(a.prototype,"_items",[x.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a),U=(n(136),n(35)),E=n(80),_=Object(m.a)((u=c=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).listBase=void 0,r.selectable=void 0,r._$scroll=function(e){console.log("############### items scroll to "+e)},r.buildBase(),r}return Object(h.a)(n,[{key:"buildBase",value:function(){var e=this.props.item,t=e.onClick;void 0!==e.onSelect?this.selectable=this.listBase=new I(this):this.listBase=void 0!==t?new k(this):new C(this)}},{key:"componentDidUpdate",value:function(e,t){!1===O.a.isEqual(this.props.item,e.item)&&(this.buildBase(),this.forceUpdate())}},{key:"componentWillUnmount",value:function(){this.listBase.dispose()}},{key:"selectAll",value:function(){this.selectable&&this.selectable.selectAll()}},{key:"unselectAll",value:function(){this.selectable&&this.selectable.unselectAll()}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,a=t.header,i=t.footer,s=t.before,c=t.loading,u=t.none,l=t.onFocus;void 0===s&&(s="-"),void 0===c&&(c=function(){return Object(o.jsx)("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"})}),void 0===u&&(u=n.res.none);var h,p,d,f=this.listBase,v=f.items,m=f.loading;function j(e,t){if(e)switch(typeof e){default:case"string":return Object(o.jsx)("li",{className:"va-list-"+t,children:e});case"function":return Object(o.jsx)("li",{className:"va-list-"+t,children:e()});case"object":return Object(o.jsx)("li",{children:e})}}return h=null===v?j(s,"before"):void 0===v?j(c,"loading"):0===v.length?j(u,"none"):v.map((function(t,n){return e.listBase.render(t,n)})),!0===m&&v&&(p=j(c,"loading")),void 0!==l&&(d=-1),Object(o.jsxs)("ul",{className:b()("va-list",r),onFocus:l,tabIndex:d,children:[j(a,"header"),h,p,j(i,"footer")]})}},{key:"selectedItems",get:function(){return this.listBase.selectedItems}}]),n}(f.Component),c.res=Object(U.a)(E.b),s=u))||s},function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r,a=n(14),i=n(3),s=n(4),c=n(0),u=n(6),o=n(7),l=n(8),h=n(16),p=n.n(h),d=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"setValues",value:function(e){}}]),e}(),f=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(e){return Object(c.jsx)("div",{className:"",children:Object(c.jsx)("div",{className:"w-100",children:Object(c.jsx)("div",{style:{borderTop:"1px solid #f0f0f0"}})})},"_b_"+e)}}]),n}(d),v=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this)).param=void 0,r.param=e,r}return Object(s.a)(n,[{key:"render",value:function(e){var t;switch(this.param){default:t="py-2";break;case"=":t="py-1";break;case"-":t="pb-1"}var n=p()(t);return Object(c.jsx)("div",{className:n},"_g_"+e)}}]),n}(d),b="justify-content-start",m="justify-content-center",j="justify-content-end",O=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e,r){var a;return Object(i.a)(this,n),(a=t.call(this)).gridProps=void 0,a._prop=void 0,a.content=void 0,a.col=void 0,a.gridProps=e,a._prop=r,a.col=!0===e.labelFixLeft?"col":"col-sm",a}return Object(s.a)(n,[{key:"prop",get:function(){return this._prop}}]),Object(s.a)(n,[{key:"render",value:function(e){var t=this.prop,n=t.onClick,r=t.bk,a=p()({"cursor-pointer":void 0!==n,"bg-white":void 0===r,row:!0});return Object(c.jsxs)("div",{className:a,onClick:n,children:[this.renderLabel(),this.renderProp()]},e)}},{key:"renderLabel",value:function(){var e=this.prop.label;return void 0===e?null:Object(c.jsx)("label",{className:this.col+"-3 col-form-label",children:e})}},{key:"renderProp",value:function(){var e,t,n=this.prop.label;switch(this.gridProps.alignValue){case"left":e=b;break;case"center":e=m;break;case"right":e=j}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}var r=this.col+(void 0===n?"-12":"-9"),a=p()(e,t,r,"d-flex");return Object(c.jsx)("div",{className:a,children:this.renderPropBody()})}},{key:"renderPropBody",value:function(){return Object(c.jsx)("div",{className:"form-control-plaintext",children:this.renderPropContent()})}},{key:"renderPropContent",value:function(){return this.content}}]),n}(d),y=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"setValues",value:function(e){this.content=void 0===e?void 0:e[this.prop.name]}},{key:"prop",get:function(){return this._prop}}]),n}(O),x=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"setValues",value:function(e){this.content=void 0===e?void 0:e[this.prop.name]}},{key:"prop",get:function(){return this._prop}}]),n}(O),g=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"setValues",value:function(e){if(void 0===e)this.content=void 0;else{var t=this.prop.list;this.content="string"===typeof t?e[t]:void 0}}},{key:"renderPropBody",value:function(){var e=this.prop,t=e.list,n=e.row,r="string"===typeof t?this.content:t;return void 0===r?Object(c.jsx)("div",{}):Object(c.jsx)("div",{className:"w-100",children:r.map((function(e,t){return Object(c.jsxs)(l.Fragment,{children:[0===t?null:Object(c.jsx)("div",{style:{width:"100%",borderBottom:"1px solid #f0f0f0"}}),l.createElement(n,e)]},t)}))})}},{key:"prop",get:function(){return this._prop}}]),n}(O),k=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"renderPropBody",value:function(){return this.prop.component}},{key:"renderProp",value:function(){var e,t,n,r=this.prop,a=r.label,i=r.full;switch(this.gridProps.alignValue){case"left":e=b;break;case"center":e=m;break;case"right":e=j}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}n=!0!==i?this.col+(void 0===a?"-12":"-9"):"w-100";var s=p()(e,t,n,"d-flex");return Object(c.jsx)("div",{className:s,children:this.renderPropBody()})}},{key:"prop",get:function(){return this._prop}}]),n}(O),w=function(){function e(t,n){Object(i.a)(this,e),this.gridProps=void 0,this.props=void 0,this.rows=void 0,this.gridProps=t,this.props=n,this.buildRows()}return Object(s.a)(e,[{key:"buildRows",value:function(){this.rows=[];var e,t=!0,n=Object(a.a)(this.props);try{for(n.s();!(e=n.n()).done;){var r=e.value;if("string"===typeof r)this.rows.push(new v(r)),t=!0;else{t||this.rows.push(new f);var i=void 0;switch(r.type){default:continue;case"string":i=new y(this.gridProps,r);break;case"number":i=new x(this.gridProps,r);break;case"list":i=new g(this.gridProps,r);break;case"component":i=new k(this.gridProps,r)}this.rows.push(i),t=!1}}}catch(s){n.e(s)}finally{n.f()}}},{key:"setValues",value:function(e){var t,n=Object(a.a)(this.rows);try{for(n.s();!(t=n.n()).done;){t.value.setValues(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"render",value:function(){return this.rows.map((function(e,t){return e.render(String(t))}))}}]),e}(),C=n(11),A=Object(C.a)(r=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.rows,r=e.values,a=new w(this.props,n);a.setValues(r);var i=p()("container-fluid",t);return Object(c.jsx)("div",{className:i,children:a.render()})}}]),n}(l.Component))||r},function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return T}));var r=n(14),a=n(13),i=n(1),s=n.n(i),c=n(2),u=n(3),o=n(4),l=n(21),h=n(20),p=n(6),d=n(7),f=n(17),v=n.n(f),b=n(29),m=n(31),j=n(9),O=n(119),y=function(){function e(t){Object(u.a)(this,e),this.queue=[],this.cache=j.n.map({},{deep:!1}),this.loading=!1,this.localArr=void 0,this.waitingIds=[],this.tuidInner=void 0,this.divName=void 0,this.tuidInner=t,this.initLocalArr()}return Object(o.a)(e,[{key:"initLocalArr",value:function(){this.localArr=this.tuidInner.cache.arr(this.tuidInner.name+".ids")}},{key:"useId",value:function(e,t){if(e&&!1!==Object(O.isNumber)(e))if(!0!==this.cache.has(e))if(this.tuidInner.cacheTuids(!0===t?70:20),this.cache.set(e,e),this.waitingIds.findIndex((function(t){return t===e}))>=0)this.moveToHead(e);else{if(this.queue.length>=1e3){var n=this.queue.shift();if(n===e)return void this.queue.push(n);if(!0===this.cache.has(n))this.cache.delete(n);else{var r=this.waitingIds.findIndex((function(e){return e===n}));this.waitingIds.splice(r,1)}}this.waitingIds.push(e),this.queue.push(e)}else this.moveToHead(e)}},{key:"moveToHead",value:function(e){var t=this.queue.findIndex((function(t){return t===e}));this.queue.splice(t,1),this.queue.push(e)}},{key:"getValue",value:function(e){return this.cache.get(e)}},{key:"remove",value:function(e){this.cache.delete(e);var t=this.queue.findIndex((function(t){return t===e}));this.queue.splice(t,1),this.localArr.removeItem(e)}},{key:"valueFromId",value:function(e){var t;switch(typeof e){case"object":t=e.id;break;case"number":t=e;break;default:return}return this.getValue(t)}},{key:"resetCache",value:function(e){this.remove(e),this.useId(e)}},{key:"cacheValue",value:function(e){if(void 0===e)return!1;var t=this.getIdFromObj(e);if(void 0===t)return!1;var n=this.waitingIds.findIndex((function(e){return e===t}));return n>=0&&this.waitingIds.splice(n,1),this.cache.set(t,e),!0}},{key:"getIdFromObj",value:function(e){return this.tuidInner.getIdFromObj(e)}},{key:"cacheIds",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.waitingIds.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.loadIds();case 4:if(void 0!==(t=e.sent)&&0!==t.length){e.next=8;break}return this.waitingIds.splice(0,this.waitingIds.length),e.abrupt("return");case 8:this.cacheIdValues(t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cacheIdValues",value:function(e){if(void 0!==e){var t,n=this.unpackTuidIds(e),a=Object(r.a)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;!1!==this.cacheValue(i)&&this.cacheTuidFieldValues(i)}}catch(s){a.e(s)}finally{a.f()}}}},{key:"modifyIds",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTuidIdsOrLocal(t);case 2:if(n=e.sent,0!==(r=n.filter((function(e){var t=e.indexOf("\t");t<0&&(t=e.length);var n=Number(e.substr(0,t));return void 0!==a.localArr.getItem(n)}))).length){e.next=6;break}return e.abrupt("return");case 6:this.cacheIdValues(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadIds",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.loading){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.next=5,this.loadTuidIdsOrLocal(this.waitingIds);case 5:return t=e.sent,this.loading=!1,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unpackTuidIds",value:function(e){return this.tuidInner.unpackTuidIds(e)}},{key:"cacheTuidFieldValues",value:function(e){this.tuidInner.cacheTuidFieldValues(e)}},{key:"assureObj",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.cache.get(t),e.t0=typeof n,e.next="object"===e.t0?4:"number"===e.t0?5:7;break;case 4:return e.abrupt("return",n);case 5:return this.cache.set(t,t),e.abrupt("break",7);case 7:return e.next=9,this.loadTuidIdsOrLocal([t]);case 9:r=e.sent,this.cacheIdValues(r);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTuidIdsOrLocal",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,a,i,c,u,o,l,h,p,d,f,b=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=[],i=Object(r.a)(t);try{for(i.s();!(c=i.n()).done;)u=c.value,(o=this.localArr.getItem(u))?n.push(o):a.push(u)}catch(s){i.e(s)}finally{i.f()}if(!((l=a.length)>0)){e.next=20;break}return e.next=8,this.tuidInner.loadTuidIds(this.divName,a);case 8:h=e.sent,p=function(e){var t=h[e];if(!t)return"continue";var r=t.indexOf("\t");r<0&&(r=t.length);var i=Number(t.substr(0,r));v.a.remove(a,(function(e){return e===i})),n.push(t),b.localArr.setItem(i,t)},d=0;case 11:if(!(d<l)){e.next=18;break}if("continue"!==p(d)){e.next=15;break}return e.abrupt("continue",15);case 15:d++,e.next=11;break;case 18:for(l=a.length,f=0;f<l;f++)this.localArr.setItem(a[f],"");case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),x=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e)).div=void 0,a.divName=void 0,a.div=r,a.divName=r.name,a.localArr=e.cache.arr(e.name+".ids."+a.divName),a}return Object(o.a)(n,[{key:"initLocalArr",value:function(){}},{key:"getIdFromObj",value:function(e){return this.div.getIdFromObj(e)}},{key:"unpackTuidIds",value:function(e){return this.div.unpackTuidIds(e)}},{key:"cacheTuidFieldValues",value:function(e){this.div.cacheTuidFieldValues(e)}}]),n}(y),g=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).noCache=void 0,e.typeName="tuid",e.idName=void 0,e.cached=void 0,e.unique=void 0,e.isImport=!1,e}return Object(o.a)(n,[{key:"setSchema",value:function(e){Object(l.a)(Object(h.a)(n.prototype),"setSchema",this).call(this,e);var t=e.id;this.idName=t}},{key:"buildTuidBox",value:function(){return new V(this)}},{key:"getIdFromObj",value:function(e){return e[this.idName]}},{key:"stopCache",value:function(){this.noCache=!0}},{key:"cacheIds",value:function(){}},{key:"modifyIds",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"idValue",value:function(e){switch(typeof e){default:throw new Error("unknown id");case"object":return e.id;case"number":return e}}},{key:"equ",value:function(e,t){return void 0!==e&&null!==e&&(void 0!==t&&null!==t&&g.idValue(e)===g.idValue(t))}}]),n}(b.a)),k=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e,r,i){var s;return Object(u.a)(this,n),(s=t.call(this,e,r,i)).divs=void 0,s.cacheFields=void 0,s.idCache=void 0,s.localArr=void 0,s.idCache=new y(Object(a.a)(s)),s.localArr=s.cache.arr(s.name+".whole"),!0===e.newVersion&&s.localArr.removeAll(),s}return Object(o.a)(n,[{key:"setSchema",value:function(e){Object(l.a)(Object(h.a)(n.prototype),"setSchema",this).call(this,e);var t=e.arrs;if(void 0!==t){this.divs={};var a,i=Object(r.a)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value,c=s.name,u=new q(this.uq,this,c);this.divs[c]=u,u.setSchema(s),u.buildFieldsTuid()}}catch(o){i.e(o)}finally{i.f()}}}},{key:"useId",value:function(e,t){!0!==this.noCache&&e&&this.idCache.useId(e,t)}},{key:"boxId",value:function(e){if(e){if("object"===typeof e)return e;this.useId(e);var t=this.uq.createBoxId;return t?t(this,e):{id:e}}}},{key:"valueFromId",value:function(e){return this.idCache.getValue(e)}},{key:"resetCache",value:function(e){"object"===typeof e&&(e=e.id),this.idCache.resetCache(e)}},{key:"assureBox",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return"object"===typeof t&&(t=t.id),e.next=5,this.idCache.assureObj(t);case 5:return e.abrupt("return",this.idCache.getValue(t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheIds",value:function(){if(this.idCache.cacheIds(),void 0!==this.divs)for(var e in this.divs)this.divs[e].cacheIds()}},{key:"modifyIds",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.modifyIds(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheTuids",value:function(e){this.uq.cacheTuids(e)}},{key:"div",value:function(e){return this.divs&&this.divs[e]}},{key:"loadTuidIds",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new A(this,{divName:t,ids:n},!1).request();case 2:return(r=e.sent).length>0&&(this.cached=!0),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadMain",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"===typeof t&&(t=t.id),e.next=3,this.idCache.assureObj(t);case 3:return e.abrupt("return",this.idCache.valueFromId(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,a,i,c,u,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t){e.next=2;break}return e.abrupt("return");case 2:"object"===typeof t&&(t=t.id),void 0,e.next=8;break;case 8:return e.next=10,new C(this,t).request();case 10:n=e.sent;case 12:if(void 0!==n){e.next=14;break}return e.abrupt("return");case 14:a=Object(r.a)(this.schema.fields),e.prev=15,a.s();case 17:if((i=a.n()).done){e.next=29;break}if(c=i.value,void 0!==(u=c.tuid)){e.next=22;break}return e.abrupt("continue",27);case 22:if(void 0!==(o=this.uq.getTuid(u))){e.next=25;break}return e.abrupt("continue",27);case 25:l=c.name,n[l]=o.boxId(n[l]);case 27:e.next=17;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(15),a.e(e.t0);case 34:return e.prev=34,a.f(),e.finish(34);case 37:return this.idCache.cacheValue(n),this.cacheTuidFieldValues(n),e.abrupt("return",n);case 40:case"end":return e.stop()}}),e,this,[[15,31,34,37]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheTuidFieldValues",value:function(e){var t=this.schema,n=t.fields,a=t.arrs;if(this.cacheFieldsInValue(e,n),void 0!==a){var i,s=Object(r.a)(a);try{for(s.s();!(i=s.n()).done;){var c=i.value,u=c.name,o=c.fields,l=e[u];if(void 0!==l){var h,p=this.div(u),d=Object(r.a)(l);try{for(d.s();!(h=d.n()).done;){var f=h.value;p.cacheValue(f),this.cacheFieldsInValue(f,o)}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){s.e(v)}finally{s.f()}}}},{key:"buildFieldsTuid",value:function(){Object(l.a)(Object(h.a)(n.prototype),"buildFieldsTuid",this).call(this);var e=this.schema,t=e.mainFields,r=e.$create,a=e.$update,i=e.stampOnMain;this.cacheFields=t||this.fields,!0===i&&(!0===r&&this.cacheFields.push({name:"$create",type:"timestamp",_tuid:void 0}),!0===a&&this.cacheFields.push({name:"$update",type:"timestamp",_tuid:void 0})),this.uq.buildFieldTuid(this.cacheFields)}},{key:"unpackTuidIds",value:function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)}},{key:"save",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new N(this,{id:t,props:n}).request();case 2:return r=e.sent,void 0!==t&&(this.idCache.remove(t),this.localArr.removeItem(t)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveProp",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new U(this,{id:t,prop:n,value:r}).request();case 2:return this.idCache.remove(t),e.next=5,this.idCache.assureObj(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new P(this,{}).request();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchArr(void 0,t,n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchArr",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,a,i){var c,u,o,l,h,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={arr:void 0,owner:t,key:n,pageStart:a,pageSize:i},e.next=3,new S(this,c).request();case 3:u=e.sent,o=this.schema.fields,l=Object(r.a)(u);try{for(l.s();!(h=l.n()).done;)p=h.value,this.cacheFieldsInValue(p,o)}catch(s){l.e(s)}finally{l.f()}return e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"loadArr",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r&&0!==r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new I(this,{arr:t,owner:n,id:r}).request();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"saveArr",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new E(this,{arr:t,owner:n,id:r,props:a}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"posArr",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new _(this,{arr:t,owner:n,id:r,order:a}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"no",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new R(this,void 0).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hasDiv",get:function(){return void 0!==this.divs}}]),n}(g),w=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"entity",get:function(){return this._entity}}]),n}(m.b),C=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(o.a)(n,[{key:"path",get:function(){return"tuid/".concat(this.entity.name,"/").concat(this.params)}}]),n}(w),A=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"buildParams",value:function(){return this.params.ids}},{key:"xresult",value:function(e){return e.split("\n")}},{key:"path",get:function(){var e=this.params.divName;return"tuidids/".concat(this.entity.name,"/").concat(void 0!==e?e:"$")}}]),n}(w),N=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"buildParams",value:function(){var e=this.entity.schema,t=e.fields,n=e.arrs,a=this.params,i=a.id,s=a.props,c={$id:i};if(this.transParams(c,s,t),void 0!==n){var u,o=Object(r.a)(n);try{for(o.s();!(u=o.n()).done;){var l=u.value,h=l.name,p=[],d=l.fields,f=s[h];if(void 0!==f){var v,b=Object(r.a)(f);try{for(b.s();!(v=b.n()).done;){var m=v.value,j={};this.transParams(j,m,d),p.push(j)}}catch(O){b.e(O)}finally{b.f()}}c[h]=p}}catch(O){o.e(O)}finally{o.f()}}return c}},{key:"transParams",value:function(e,t,n){if(void 0!==t){var a,i=Object(r.a)(n);try{for(i.s();!(a=i.n()).done;){var s=a.value,c=s.name,u=s.tuid,o=s.type,l=t[c];if(void 0!==u)"object"===typeof l&&null!==l&&(l=l.id);else switch(o){case"date":l=this.entity.buildDateParam(l);break;case"datetime":l=this.entity.buildDateTimeParam(l)}e[c]=l}}catch(h){i.e(h)}finally{i.f()}}}},{key:"path",get:function(){return"tuid/".concat(this.entity.name)}}]),n}(w),S=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"path",get:function(){return"tuids/".concat(this.entity.name)}}]),n}(w),P=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(o.a)(n,[{key:"path",get:function(){return"tuid-all/".concat(this.entity.name)}}]),n}(w),I=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).method="GET",e}return Object(o.a)(n,[{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner,r=e.id;return"tuid-arr/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/").concat(r)}}]),n}(w),U=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"path",get:function(){return"tuid-prop/".concat(this.entity.name,"/")}}]),n}(w),E=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"buildParams",value:function(){var e=this.params,t=e.id,n=e.props,r=v.a.clone(n);return r.$id=t,r}},{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/")}}]),n}(w),_=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"buildParams",value:function(){var e=this.params;return{bid:e.id,$order:e.order}}},{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr-pos/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/")}}]),n}(w),R=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"buildParams",value:function(){var e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}},{key:"path",get:function(){return"tuid-no/".concat(this.entity.name,"/")}}]),n}(w),T=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e,r,a,i){var s;return Object(u.a)(this,n),(s=t.call(this,e,r,a)).tuidLocal=void 0,s.from=void 0,s.isImport=!0,s.from=i,s}return Object(o.a)(n,[{key:"setFrom",value:function(e){this.tuidLocal=e}},{key:"useId",value:function(e){this.tuidLocal.useId(e)}},{key:"boxId",value:function(e){return this.tuidLocal.boxId(e)}},{key:"valueFromId",value:function(e){return this.tuidLocal.valueFromId(e)}},{key:"resetCache",value:function(e){this.tuidLocal.resetCache(e)}},{key:"assureBox",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.assureBox(t);case 2:return e.abrupt("return",this.tuidLocal.valueFromId(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"div",value:function(e){return this.tuidLocal.div(e)}},{key:"loadMain",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.loadMain(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.load(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.save(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveProp",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.saveProp(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.all();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.search(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchArr",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.searchArr(t,n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"loadArr",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.loadArr(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"saveArr",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.saveArr(t,n,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"posArr",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,r,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.posArr(t,n,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"no",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.no();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hasDiv",get:function(){return this.tuidLocal.hasDiv}}]),n}(g),V=function(){function e(t){Object(u.a)(this,e),this.tuid=void 0,this.ownerField=void 0,this.tuid=t}return Object(o.a)(e,[{key:"boxId",value:function(e){return this.tuid.boxId(e)}},{key:"getIdFromObj",value:function(e){return this.tuid.getIdFromObj(e)}},{key:"useId",value:function(e){return this.tuid.useId(e)}},{key:"showInfo",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("showInfo not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),q=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e,r,i){var s;return Object(u.a)(this,n),(s=t.call(this,e,i,0)).typeName="div",s.cacheFields=void 0,s.tuid=void 0,s.idName=void 0,s.idCache=void 0,s.tuid=r,s.idName="id",s.idCache=new x(r,Object(a.a)(s)),s}return Object(o.a)(n,[{key:"buildFieldsTuid",value:function(){Object(l.a)(Object(h.a)(n.prototype),"buildFieldsTuid",this).call(this);var e=this.schema.mainFields;this.uq.buildFieldTuid(this.cacheFields=e)}},{key:"buildTuidDivBox",value:function(e){return new F(this.tuid,this,e)}},{key:"getIdFromObj",value:function(e){return e[this.idName]}},{key:"cacheValue",value:function(e){this.idCache.cacheValue(e)}},{key:"useId",value:function(e,t){!0!==this.noCache&&this.idCache.useId(e,t)}},{key:"valueFromId",value:function(e){return this.idCache.getValue(e)}},{key:"assureBox",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.assureObj(t);case 2:return e.abrupt("return",this.idCache.getValue(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheIds",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.cacheIds();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cacheTuidFieldValues",value:function(e){var t=this.schema.fields;this.cacheFieldsInValue(e,t)}},{key:"unpackTuidIds",value:function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)}},{key:"owner",get:function(){return this.tuid}}]),n}(k),F=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e,r,a){var i;return Object(u.a)(this,n),(i=t.call(this,e)).ownerField=void 0,i.div=void 0,i.div=r,i.ownerField=a,i}return Object(o.a)(n,[{key:"boxId",value:function(e){return this.div.boxId(e)}},{key:"getIdFromObj",value:function(e){return this.div.getIdFromObj(e)}},{key:"useId",value:function(e){return this.div.useId(e)}}]),n}(V)},,,,,,,function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r,a,i,s,c,u,o,l,h,p,d=n(0),f=n(8),v=n.n(f),b=n(61),m=n.n(b),j=(n(83),n(125),n(1)),O=n.n(j),y=n(2),x=n(5),g=(n(139),n(3)),k=n(4),w=n(6),C=n(7),A=new(function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"userAppUnits",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-app-units",{app:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stickies",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("sticky/list",{start:0,pageSize:30});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ties",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/list",{start:0,pageSize:30});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"apps",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/apps",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"appApi",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/app-api",{unit:t,app:n,apiName:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"userId",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-id",{name:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"user",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userUnitAdmins",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-admin-units",{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.appInFrame.unit,0,e.next=4,this.post("tie/send-message",{type:n,fromUnit:a,fromApp:0,toUser:t,content:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"unit",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitMemberCount",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/member-count",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitAdmins",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/admins",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitAppAdmins",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/app-admins",{unit:t,app:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unitSetAdmin",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a,i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/set-admin",{fellow:t,unit:n,isOwner:r,isAdmin:a,isDev:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"unitAddAdmin",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a,i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/add-admin",{user:t,unit:n,isOwner:r,isAdmin:a,isDev:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"unitDelAdmin",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/del-admin",{user:n,unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"adminDevs",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/admin-devs",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addDev",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/add-dev",{unit:t,dev:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delDev",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/del-dev",{unit:t,dev:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unitApps",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/apps",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitAddApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/add-app",{unit:t,app:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unitDeleteApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/delete-app",{unit:t,app:n,deleted:r});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"unitChangeProp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/change-prop",{unit:t,prop:n,value:r});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/search-app",{unit:t,key:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unitRoles",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/roles",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitAddRole",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/add-role",{unit:t,name:n,discription:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"unitRoleChangeProp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/change-role-prop",{unit:t,role:n,prop:r,value:a});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unitRoleApps",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/role-apps",{unit:t,role:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unitRoleSetApps",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/role-set-apps",{unit:t,role:n,apps:r});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"unitMembers",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a,i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/members",{unit:t,role:n,key:r,pageStart:a,pageSize:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"unitAssignMember",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/assign-member",{unit:t,member:n,assigned:r});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"unitMemberRoles",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/member-roles",{unit:t,member:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unitSetMemberRoles",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/member-set-roles",{unit:t,member:n,roles:r});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"unitUsers",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/users",{unit:t,key:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unitAppUsers",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/app-users",{unit:t,key:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unitOneAppUsers",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/one-app-users",{unit:t,app:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unitOneUserApps",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/one-user-apps",{unit:t,user:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unitAppEditUsers",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a,i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/app-edit-users",{unit:t,app:n,key:r,pageStart:a,pageSize:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"unitUserEditApps",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a,i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("unit/user-edit-apps",{unit:t,user:n,key:r,pageStart:a,pageSize:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"bindAppUser",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/bind-app-user",{unit:t,app:n,user:r,bind:a});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"userFromKey",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-from-key",{key:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitAddUser",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/add-user",{unit:t,user:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setAppAdmin",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a,i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/set-app-admin",{unit:t,app:n,user:r,name:a,isAdmin:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"setAppRoles",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a,i){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("unit/set-app-roles",{unit:t,app:n,user:r,name:a,roles:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()}]),n}(x.CenterApiBase))("tv/",!0),N=new(function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"userAppUnits",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-app-units",{app:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uqBuilderUrl",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("uq-builder-url",void 0);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"counts",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("counts",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"app",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("app",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"bus",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("bus",{id:t});case 2:return n=e.sent,r=n.schema,n.source||(n.source=r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uq",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("uq",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"server",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("server",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"apps",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:30,e.next=3,this.get("apps",{unit:t,pageSize:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uqs",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:30,e.next=3,this.get("uqs",{unit:t,pageSize:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitUQs",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:30,e.next=3,this.get("unit-uqs",{unit:t,pageSize:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buses",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:30,e.next=3,this.get("buses",{unit:t,pageSize:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"servers",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:30,e.next=3,this.get("servers",{unit:t,pageSize:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"services",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:30,e.next=3,this.get("services",{unit:t,pageSize:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("app-save",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveUq",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("uq-save",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveBus",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("bus-save",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveServer",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("server-save",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveService",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("service-save",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("app-del",{unit:t,id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delUq",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("uq-del",{unit:t,id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delBus",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("bus-del",{unit:t,id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delServer",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("server-del",{unit:t,id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delUqdb",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("uqdb-del",{unit:t,id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delService",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("service-del",{unit:t,id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadAppUqs",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("app-uqs",{app:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"appBindUq",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.join(";"),e.next=3,this.post("app-bind-uq",{unit:t,app:n,uqs:a});case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"appSetUqMain",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("app-set-uq-main",{unit:t,app:n,uq:r});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchUq",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("uq-search",{unit:t,key:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getMyUqs",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("my-uqs",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("app-search",{unit:t,key:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"searchServer",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("server-search",{unit:t,key:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"searchUqdb",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("uqdb-search",{unit:t,key:n,pageStart:r,pageSize:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"loadUqServices",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("uq-services",{unit:t,uq:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"changeServiceProp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("service-change-prop",{unit:t,service:n,prop:r,value:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"uqGetEntities",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("uq-get-entities",{unit:t,uq:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"adminDevAdd",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("admin-dev-add",t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"adminDevDel",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("admin-dev-del",t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.CenterApiBase))("tv/dev/",!0),S=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_loadIds",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadId",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unit(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.CacheIds),P=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_loadIds",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadId",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.uq(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.CacheIds),I=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_loadIds",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadId",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.app(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.CacheIds),U=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_loadIds",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadId",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.bus(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.CacheIds),E=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_loadIds",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadId",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.user(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.CacheIds),_=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_loadIds",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadId",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.server(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.CacheIds),R=new(function(){function e(){Object(g.a)(this,e),this.units=void 0,this.uqs=void 0,this.apps=void 0,this.buses=void 0,this.servers=void 0,this.users=void 0,this.reset()}return Object(k.a)(e,[{key:"reset",value:function(){this.units=new S,this.uqs=new P,this.apps=new I,this.buses=new U,this.servers=new _,this.users=new E}}]),e}()),T=n(14),V=n(12),q=n(10),F=(n(24),n(9)),L=n(17),D=n.n(L),B=n(25),M=n(13),z=(r=function(){function e(t,n){Object(g.a)(this,e),this.store=void 0,this.dev=void 0,Object(V.a)(this,"items",a,this),Object(V.a)(this,"cur",i,this),this.store=t,this.dev=n}return Object(k.a)(e,[{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load();case 2:t=e.sent,this.items=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveCur",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},void 0!==this.cur?D.a.assign(n,this.cur,t):D.a.assign(n,t),n.unit=t.unit=this.store.unit.id,e.next=5,this._save(n);case 5:if(r=e.sent,void 0!==this.cur){e.next=15;break}if(0!==r){e.next=9;break}return e.abrupt("return",!1);case 9:n.id=r,void 0!==this.items&&this.items.unshift(n),this._inc(),this.cur=Object(F.n)(n),e.next=16;break;case 15:D.a.assign(this.cur,n);case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"check",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},D.a.assign(n,t),n.unit=t.unit=this.store.unit.id,e.next=5,this._save(n);case 5:if(0!==(r=e.sent)){e.next=8;break}return e.abrupt("return");case 8:return n.id=r,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"del",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.cur)){e.next=3;break}return e.abrupt("return");case 3:return n=t.id,e.next=6,this._del(t);case 6:if(void 0!==this.items){e.next=8;break}return e.abrupt("return");case 8:(r=this.items.findIndex((function(e){return e.id===n})))>=0&&(this.items.splice(r,1),this._dec());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),a=Object(q.a)(r.prototype,"items",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),i=Object(q.a)(r.prototype,"cur",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),r),H=(s=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(V.a)(e,"uqs",c,Object(M.a)(e)),Object(V.a)(e,"searchedUqs",u,Object(M.a)(e)),e}return Object(k.a)(n,[{key:"_load",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.apps(this.store.unit.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_save",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.saveApp(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_del",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delApp(this.store.unit.id,t.id);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_inc",value:function(){this.dev.counts.app++}},{key:"_dec",value:function(){this.dev.counts.app--}},{key:"loadCurUqs",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.loadAppUqs(this.cur.id);case 2:t=e.sent,this.uqs=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchUq",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.searchUq(this.store.unit.id,t,0,ve);case 2:this.searchedUqs=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(z),c=Object(q.a)(s.prototype,"uqs",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),u=Object(q.a)(s.prototype,"searchedUqs",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),s),W=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.uqs(this.store.unit.id);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_save",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.saveUq(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_del",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delUq(this.store.unit.id,t.id);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_inc",value:function(){this.dev.counts.uq++}},{key:"_dec",value:function(){this.dev.counts.uq--}}]),n}(z),$=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.buses(this.store.unit.id);case 2:t=e.sent,n=Object(T.a)(t);try{for(n.s();!(r=n.n()).done;)a=r.value,i=a.schema,a.source||(a.source=i)}catch(s){n.e(s)}finally{n.f()}return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_save",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.saveBus(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_del",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delBus(this.store.unit.id,t.id);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_inc",value:function(){this.dev.counts.bus++}},{key:"_dec",value:function(){this.dev.counts.bus--}},{key:"checkBusName",value:function(e,t){var n=t.split("/");switch(n.length){default:return alert("'".concat(t,"'\u4e0d\u7b26\u5408bus\u540d\u79f0\u7684\u683c\u5f0f: \u6240\u6709\u8005/\u540d\u79f0")),!1;case 1:if(n[0].toLowerCase()!==e.name)return alert("$prop '".concat(t,"' in schema \u5e94\u8be5\u8ddf\u540d\u79f0\u4e00\u81f4")),!1;break;case 2:if(n[0].toLowerCase()!==this.store.unit.name.toLowerCase()||n[1].toLowerCase()!==e.name.toLowerCase())return alert("$prop '".concat(t,"' in schema \u5e94\u8be5\u8ddf \u6240\u6709\u8005/\u540d\u79f0 \u4e00\u81f4")),!1}return!0}},{key:"check",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i,s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.source,e.prev=1,r=JSON.parse(n),e.t0=O.a.keys(r);case 4:if((e.t1=e.t0()).done){e.next=30;break}if(a=e.t1.value,null!==(i=r[a])&&void 0!==i){e.next=10;break}return alert("face ".concat(a," is null\uff0c\u8bf7\u8bbe\u7f6e\u5185\u5bb9")),e.abrupt("return",!1);case 10:e.t2=typeof i,e.next="object"===e.t2?13:"string"===e.t2?14:19;break;case 13:return e.abrupt("break",21);case 14:if("$"!==a){e.next=17;break}if(!1!==this.checkBusName(t,i)){e.next=17;break}return e.abrupt("return",!1);case 17:case 19:return delete r[a],e.abrupt("continue",4);case 21:if(!0!==Array.isArray(i)){e.next=26;break}if(!1!==Y(i,r)){e.next=24;break}return e.abrupt("return",!1);case 24:e.next=28;break;case 26:if(!1!==Z(i,r)){e.next=28;break}return e.abrupt("return",!1);case 28:e.next=4;break;case 30:e.t3=O.a.keys(r);case 31:if((e.t4=e.t3()).done){e.next=42;break}if(s=e.t4.value,c=r[s]){e.next=36;break}return e.abrupt("continue",31);case 36:if(!1!==Q(c,r,[])){e.next=39;break}return alert("face ".concat(s," \u5305\u542b\u4e86\u5faa\u73af\u5f15\u7528")),e.abrupt("return",!1);case 39:e.next=31;break;case 42:return t.schema=JSON.stringify(r),t.owner||(t.owner=this.store.unit.name),e.abrupt("return",!0);case 47:return e.prev=47,e.t5=e.catch(1),alert(e.t5.message),e.abrupt("return",!1);case 51:case"end":return e.stop()}}),e,this,[[1,47]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(z),G=[].concat(["id","number","string"],["array"]);function K(e,t){var n=t[e];return void 0===n?(alert("face ".concat(e," not defined")),!1):!1!==Array.isArray(n)||(alert("face ".concat(e," is referenced, bus is not array")),!1)}function Q(e,t,n){for(var r=e.length,a=!1,i=[],s=function(r){var s=e[r];if("string"!==typeof s)return J(i,s),"continue";a=!0;var c=t[s];if(!c)return"continue";if(n.findIndex((function(e){return e===c}))>=0)return{v:!1};if(!1===Q(c,t,[e]))return{v:!1};var u,o=Object(T.a)(c);try{for(o.s();!(u=o.n()).done;){var l=u.value;J(i,l)}}catch(h){o.e(h)}finally{o.f()}},c=0;c<r;c++){var u=s(c);if("continue"!==u&&"object"===typeof u)return u.v}return!0===a&&e.splice.apply(e,[0,e.length].concat(i)),!0}function J(e,t){var n,r=Object(T.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=a.name,s=t.name,c=t.type;if(i.toLowerCase()===s.toLowerCase())return void(a.type=c)}}catch(u){r.e(u)}finally{r.f()}e.push(t)}function X(e){if(void 0!==e){var t=e.indexOf("--");if(t>=0&&(e=e.substr(0,t)),0!==(e=e.trim()).length){var n=e.split(":"),r=n.length;if(0!==r){if(1===r)return e;var a=n[0].trim(),i=n[1].trim();if(0!==a.length){var s=void 0;switch(i){default:s=i,i="array";break;case"id":case"number":case"string":}return{name:a,type:i,fields:s}}}}}}function Y(e,t){if(!1===Array.isArray(e))return alert("face must be array"),!1;for(var n=e.length,r=[],a=0;a<n;a++){var i=e[a];switch(typeof i){default:return alert("face\u4e2d\u7684\u9879\uff0c\u53ea\u80fd\u662fobject\u6216\u8005\u5b57\u7b26\u4e32"),!1;case"object":i["-"]&&delete i["-"],i["--"]&&delete i["--"];break;case"string":var s=X(i);if(void 0===s){r.push(a);continue}if("string"===typeof s){if(!t[s])return alert("'".concat(i,"' \u6ca1\u6709\u5b9a\u4e49")),!1;e.splice(a,1,s);continue}i=s,e.splice(a,1,s)}var c=i.type;if(void 0===c)return alert("type not defined"),!1;if("array"===c)if(!1===K(i.fields,t))return!1;if(G.indexOf(c)<0)return"date"===c?alert("\u4e0d\u518d\u652f\u6301\u6570\u636e\u7c7b\u578bdate\uff0c\u8bf7\u7528number unixtime\u4f5c\u4e3a\u5a92\u4ecb"):alert("\u4e0d\u652f\u6301\u6570\u636e\u7c7b\u578b ".concat(c)),!1}for(var u=(n=r.length)-1;u>=0;u--)e.splice(r[u],1);return!0}function Z(e,t){for(var n in e){var r=e[n];switch(n){default:return alert(n+": not allowed in bus query."),!1;case"param":if(!1===ee(r,t))return!1;break;case"returns":var a=r;if("string"===typeof r){if(void 0===(a=t[r]))return alert(r+" is not defined"),!1;t.returns=a}if(!1===Y(a,t))return!1}}return!0}function ee(e,t){if(null===e||void 0===e)return!0;switch(typeof e){case"string":return K(e,t);default:if(Array.isArray(e)){if(!1===function(e,t){var n,r=Object(T.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=void 0;if("string"===typeof a){var s=a.indexOf(":");if(s<=0)return alert("type is not defined"),!1;i=a.substr(s+1).trim()}else i=a.type;if(["id","string","number","array"].indexOf(i)<0)return alert("type ".concat(i," out of ['id', 'string', 'number', 'array']")),!1}}catch(c){r.e(c)}finally{r.f()}return!0}(e))return!1;for(var n=0;n<e.length;n++){var r=e[n];"string"===typeof r&&(e[n]=X(r))}return!0}}return alert("param of a query can only be string or array"),!1}var te,ne,re,ae,ie,se,ce,ue,oe,le,he,pe,de=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_load",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.servers(this.store.unit.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_save",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.saveServer(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_del",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delServer(this.store.unit.id,t.id);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_inc",value:function(){this.dev.counts.server++}},{key:"_dec",value:function(){this.dev.counts.server--}}]),n}(z),fe=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"_load",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.services(this.store.unit.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_save",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.saveService(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_del",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delService(this.store.unit.id,t.id);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_inc",value:function(){this.dev.counts.service++}},{key:"_dec",value:function(){this.dev.counts.service--}},{key:"changeProp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.changeServiceProp(this.store.unit.id,this.cur.id,t,n);case 2:r=e.sent,e.t0=t,e.next="url"===e.t0?6:"urlTest"===e.t0?8:"server"===e.t0?10:"db"===e.t0?12:14;break;case 6:return this.cur.url=n,e.abrupt("break",14);case 8:return this.cur.urlTest=n,e.abrupt("break",14);case 10:return this.cur.server=n,e.abrupt("break",14);case 12:return this.cur.db=n,e.abrupt("break",14);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadUqServices",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.loadUqServices(this.store.unit.id,t);case 2:n=e.sent,this.items=n[0];case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(z),ve=50,be=(o=function(){function e(t,n,r){Object(g.a)(this,e),this.store=void 0,this.dev=void 0,this.search=void 0,Object(V.a)(this,"items",l,this),this.allLoaded=!1,this.key=void 0,this.pageStart=0,this.store=t,this.dev=n,this.search=r}return Object(k.a)(e,[{key:"first",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.key=t,this.items=void 0,this.allLoaded=!1,this.pageStart=0,e.next=6,this.more();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"more",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.allLoaded){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.search(this.store.unit.id,this.key,this.pageStart,ve);case 4:t=e.sent,(n=t.length)>ve?(this.allLoaded=!1,--n,t.splice(n,1)):this.allLoaded=!0,n>0?(this.pageStart=t[n-1].id,void 0===this.items?this.items=t:(r=this.items).push.apply(r,Object(B.a)(t))):this.items=[];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),l=Object(q.a)(o.prototype,"items",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),o),me=(h=function(){function e(t){Object(g.a)(this,e),this.store=void 0,Object(V.a)(this,"counts",p,this),this.apps=void 0,this.uqs=void 0,this.buses=void 0,this.servers=void 0,this.services=void 0,this.searchApp=void 0,this.searchUq=void 0,this.searchServer=void 0,this.store=t,this.apps=new H(t,this),this.uqs=new W(t,this),this.buses=new $(t,this),this.servers=new de(t,this),this.services=new fe(t,this),this.searchApp=new be(t,this,N.searchApp.bind(N)),this.searchUq=new be(t,this,N.searchUq.bind(N)),this.searchServer=new be(t,this,N.searchServer.bind(N))}return Object(k.a)(e,[{key:"loadCounts",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.unit,e.next=3,N.counts(t.id);case 3:this.counts=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),p=Object(q.a)(h.prototype,"counts",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),h),je=new(te=function(){function e(){Object(g.a)(this,e),this.dev=void 0,this.uqServer=void 0,Object(V.a)(this,"unit",ne,this),Object(V.a)(this,"memberCount",re,this),Object(V.a)(this,"apps",ae,this),Object(V.a)(this,"role",ie,this),Object(V.a)(this,"roles",se,this),Object(V.a)(this,"roleApps",ce,this),Object(V.a)(this,"roleMember",ue,this),Object(V.a)(this,"roleMembers",oe,this),Object(V.a)(this,"memberRoles",le,this),this.unitAdmins=void 0,this.accUnits=void 0,this.devUnits=void 0,this.bothUnits=void 0}return Object(k.a)(e,[{key:"init",value:function(){this.unit=void 0,this.apps=void 0,this.dev=new me(this)}},{key:"logout",value:function(){x.appInFrame.hash=void 0,x.appInFrame.unit=void 0,this.init(),this.memberCount=void 0,this.apps=void 0,this.role=void 0,this.roles=void 0,this.roleApps=void 0,this.roleMember=void 0,this.roleMembers=void 0,this.memberRoles=void 0}},{key:"loadAdminUnits",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.userUnitAdmins();case 2:if(t=e.sent,1!==(n=this.unitAdmins=t[0]).length){e.next=10;break}return x.appInFrame.unit=n[0].id,e.next=8,je.loadUnit();case 8:e.next=15;break;case 10:this.accUnits=[],this.devUnits=[],this.bothUnits=[],r=Object(T.a)(n);try{for(r.s();!(a=r.n()).done;)i=a.value,3===(3&(s=i.type))?this.bothUnits.push(i):1===(1&s)?this.devUnits.push(i):2===(2&s)&&this.accUnits.push(i)}catch(c){r.e(c)}finally{r.f()}case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setRole",value:function(e){this.role!==e&&(this.role=e,this.roleApps=void 0,this.roleMember=void 0,this.roleMembers=void 0,this.memberRoles=void 0)}},{key:"setRoleUser",value:function(e){this.roleMember!==e&&(this.roleMember=e,this.memberRoles=void 0)}},{key:"unitChangeProp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitChangeProp(this.unit.id,t,n);case 2:this.unit[t]=n;case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadApps",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.apps){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A.unitApps(this.unitId);case 4:this.apps=e.sent;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUnit",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.unitId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A.unit(this.unitId);case 4:return t=e.sent,this.unit=t,e.next=8,A.unitMemberCount(this.unitId);case 8:return this.memberCount=e.sent,e.next=11,N.uqBuilderUrl();case 11:n=e.sent,r=n.url,this.uqServer=x.host.getUrlOrDebug(r,"uq-build");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopUnitApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitDeleteApp(this.unit.id,t,1);case 2:this.apps.find((function(e){return e.id===t})).inUnit=0;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restoreUnitApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitAddApp(this.unit.id,t);case 2:if(!((n=e.sent)<=0)){e.next=5;break}return e.abrupt("return",n);case 5:return this.apps.find((function(e){return e.id===t})).inUnit=1,e.abrupt("return",1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addUnitApp",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitAddApp(this.unit.id,t.id);case 2:if(!((n=e.sent)<=0)){e.next=5;break}return e.abrupt("return",n);case 5:return this.apps.push(t),e.abrupt("return",1);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadRoles",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.roles){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A.unitRoles(this.unit.id);case 4:(t=e.sent).forEach((function(e){switch(e.id){case 1:e.name="\u8bbf\u5ba2",e.discription="\u53ef\u4ee5\u83b7\u53d6\u5f00\u653e\u4fe1\u606f";break;case 2:e.name="\u666e\u901a",e.discription="\u80fd\u8bbf\u95ee\u6700\u57fa\u672c\u7684\u529f\u80fd"}})),this.roles=t;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unitAddRole",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitAddRole(this.unit.id,t,n);case 2:return(r=e.sent)>0&&this.roles.push({id:r,name:t,discription:n,count:void 0}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"roleChangeProp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitRoleChangeProp(this.unit.id,this.role.id,t,n);case 2:this.role[t]=n;case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadRoleApps",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitRoleApps(this.unit.id,this.role.id);case 2:t=e.sent,this.roleApps=t.map((function(e){return n.apps.find((function(t){return t.id===e.id}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setRoleApps",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitRoleSetApps(this.unit.id,this.role.id,t.map((function(e){return e.id})));case 2:this.roleApps=t;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMembers",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitMembers(this.unit.id,void 0===this.role?0:this.role.id,void 0,0,100);case 2:t=e.sent,this.roleMembers=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unitAssignMember",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitAssignMember(this.unit.id,this.roleMember.id,t);case 2:this.roleMember.assigned=t;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMemberRoles",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitMemberRoles(this.unit.id,this.roleMember.id);case 2:t=e.sent,n=t.map((function(e){var t=e.id,n=r.roles.find((function(e){return e.id===t}));return D.a.clone(n)})),this.memberRoles=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMemberRoles",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitSetMemberRoles(this.unit.id,this.roleMember.id,t.map((function(e){return e.id})));case 2:this.roles.forEach((function(e){var r=e.id,a=n.memberRoles.find((function(e){return e.id===r})),i=t.find((function(e){return e.id===r}));if(void 0===a)void 0!==i&&e.count++;else{if(void 0!==i)return;e.count--}})),this.memberRoles=t;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unitId",get:function(){return x.appInFrame.unit}}]),e}(),ne=Object(q.a)(te.prototype,"unit",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=Object(q.a)(te.prototype,"memberCount",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=Object(q.a)(te.prototype,"apps",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=Object(q.a)(te.prototype,"role",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=Object(q.a)(te.prototype,"roles",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=Object(q.a)(te.prototype,"roleApps",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=Object(q.a)(te.prototype,"roleMember",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=Object(q.a)(te.prototype,"roleMembers",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=Object(q.a)(te.prototype,"memberRoles",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te),Oe=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"cApp",get:function(){return this._cApp}}]),n}(x.CBase),ye=(x.CSub,n(22)),xe=n(16),ge=n.n(xe),ke=n(11),we=n(54),Ce=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props,t=e.date_init,n=e.date_update;return Object(d.jsxs)("small",{className:"text-muted",children:["\u66f4\u65b0: ",Object(d.jsx)(x.EasyTime,{date:n}),Object(d.jsx)("i",{className:"fa fa-fw"}),"\u521b\u5efa: ",Object(d.jsx)(x.EasyDate,{date:t})]})}}]),n}(f.Component);function Ae(e,t,n,r){var a,i;return!0===e?(a="a",i={className:ge()(t,"cursor-pointer"),onClick:n,href:"#"}):(a="span",i={className:t}),f.createElement(a,i,r)}var Ne,Se,Pe,Ie,Ue,Ee,_e,Re,Te,Ve,qe,Fe,Le=Object(ke.a)(he=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=function(t){return t.preventDefault(),x.nav.push(Object(d.jsx)(Be,{id:e.props.id})),!1},e}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.isLink,r=e.className;if(void 0===t)return null;if(null===t)return null;var a,i=R.units.get(t);if(!i)return null;var s=i.name,c=i.nick,u=i.discription,o=u&&"- "+u;return a=c?Object(d.jsxs)(d.Fragment,{children:[c," \xa0 ",Object(d.jsxs)("small",{className:"text-muted",children:[s," ",o]})]}):s?Object(d.jsxs)(d.Fragment,{children:[s," \xa0 ",Object(d.jsx)("small",{className:"text-muted",children:o})]}):t,Ae(n,r,this.onClick,a)}}]),n}(f.Component))||he,De=Object(ke.a)(pe=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props.id;if(void 0===e)return null;var t=R.units.get(e).name;return Object(d.jsx)(d.Fragment,{children:t})}}]),n}(f.Component))||pe,Be=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).rows=void 0,e}return Object(k.a)(n,[{key:"render",value:function(){var e=R.units.get(this.props.id),t=e.name,n=e.icon,r=e.discription;return this.rows=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:n,main:t,discription:r})},""],Object(d.jsx)(x.Page,{header:"\u5c0f\u53f7 - \u8be6\u7ec6\u8d44\u6599",children:Object(d.jsx)(x.PropGrid,{rows:this.rows,values:this.props})})}}]),n}(f.Component),Me=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_ICON,ze=(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_ITEM_ICON,Object(ke.a)(Ne=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=function(t){return t.preventDefault(),x.nav.push(Object(d.jsx)(He,{id:e.props.id})),!1},e}return Object(k.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.id,r=t.className,a=t.isLink,i=R.uqs.get(n);if(null===i)e=n;else{var s=i.name,c=i.discription,u=c&&"- "+c;e=void 0!==s?Object(d.jsxs)(d.Fragment,{children:[s,"\xa0",Object(d.jsx)("small",{className:"text-muted",children:u})]}):n}return Ae(a,r,this.onClick,e)}}]),n}(f.Component))||Ne),He=Object(ke.a)(Se=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).rows=void 0,e}return Object(k.a)(n,[{key:"render",value:function(){var e=R.uqs.get(this.props.id),t=e.name,n=e.discription,r=e.unit,a=e.date_init,i=e.date_update,s=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:n}),Object(d.jsx)(Ce,{date_update:i,date_init:a})]});return this.rows=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:Me,main:t,discription:s})},"",{type:"component",label:"\u6240\u6709\u8005",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:r,isLink:!0})})}],Object(d.jsx)(x.Page,{header:"UQ - \u8be6\u7ec6\u8d44\u6599",children:Object(d.jsx)(x.PropGrid,{rows:this.rows,values:this.props})})}}]),n}(f.Component))||Se,We=(Object(ke.a)(Pe=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=function(t){return t.preventDefault(),x.nav.push(Object(d.jsx)(We,{id:e.props.id})),!1},e}return Object(k.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.id,r=t.isLink,a=t.className,i=R.apps.get(n);if(null===i)e=n;else{var s=i.name,c=i.discription,u=c&&"- "+c;e=void 0!==s?Object(d.jsxs)(f.Fragment,{children:[s," \xa0 ",Object(d.jsx)("small",{className:"text-muted",children:u})]}):n}return Ae(r,a,this.onClick,e)}}]),n}(f.Component)),Object(ke.a)((Ue=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).rows=void 0,Object(V.a)(e,"apis",Ee,Object(M.a)(e)),e}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.loadAppUqs(this.props.id);case 2:this.apis.list=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=R.apps.get(this.props.id),t=e.unit,n=e.name,r=e.discription,a=e.icon,i=e.date_init,s=e.date_update,c=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:r}),Object(d.jsx)(Ce,{date_update:s,date_init:i})]});return this.rows=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:a,main:n,discription:c})},"",{type:"component",label:"\u6240\u6709\u8005",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:t,isLink:!0})})},this.apis],Object(d.jsx)(x.Page,{header:"APP - \u8be6\u7ec6\u8d44\u6599",children:Object(d.jsx)(x.PropGrid,{rows:this.rows,values:this.props})})}}]),n}(f.Component),Ee=Object(q.a)(Ue.prototype,"apis",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{label:"\u5173\u8054API",type:"list",list:void 0,row:$e}}}),Ie=Ue))||Ie),$e=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.name,r=t.discription;return r&&(e=Object(d.jsx)("div",{className:"small text-muted",children:r})),Object(d.jsxs)("div",{className:"form-control-plaintext",children:[Object(d.jsx)("div",{children:n}),e]})}}]),n}(f.Component),Ge=Object(ke.a)(_e=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=function(t){return t.preventDefault(),x.nav.push(Object(d.jsx)(Ke,{id:e.props.id})),!1},e}return Object(k.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.id,r=t.className,a=t.isLink,i=R.buses.get(n);if(null===i)e=n;else{var s=i.name,c=i.owner;e=void 0!==s?Object(d.jsxs)(d.Fragment,{children:[s," / ",c]}):n}return Ae(a,r,this.onClick,e)}}]),n}(f.Component))||_e,Ke=Object(ke.a)(Re=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).rows=void 0,e}return Object(k.a)(n,[{key:"render",value:function(){var e=R.buses.get(this.props.id),t=e.name,n=e.discription,r=e.unit,a=e.date_init,i=e.date_update,s=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:n}),Object(d.jsx)(Ce,{date_update:i,date_init:a})]});return this.rows=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:Me,main:t,discription:s})},"",{type:"component",label:"\u6240\u6709\u8005",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:r,isLink:!0})})}],Object(d.jsx)(x.Page,{header:"UQ - \u8be6\u7ec6\u8d44\u6599",children:Object(d.jsx)(x.PropGrid,{rows:this.rows,values:this.props})})}}]),n}(f.Component))||Re,Qe=Object(ke.a)(Te=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=function(t){return t.preventDefault(),x.nav.push(Object(d.jsx)(Je,{id:e.props.id})),!1},e}return Object(k.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.id,r=t.isLink,a=t.className,i=R.servers.get(n);if(null===i)e=n;else{var s=i.ip,c=i.name,u=i.url;e=void 0!==c?Object(d.jsxs)(d.Fragment,{children:[c,"\xa0 ",Object(d.jsx)("small",{className:"text-muted",children:u||s})]}):n}return e||(e=Object(d.jsx)("small",{className:"text-muted",children:"[\u65e0]"})),Ae(r,a,this.onClick,e)}}]),n}(f.Component))||Te,Je=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).rows=void 0,e}return Object(k.a)(n,[{key:"render",value:function(){var e=R.servers.get(this.props.id),t=e.discription,n=e.ip,r=e.unit;return this.rows=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:Me,main:t,discription:n})},"",{type:"component",label:"\u6240\u6709\u8005",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:r,isLink:!0})})},{type:"string",label:"\u4e91\u670d\u52a1",name:"cloud"}],Object(d.jsx)(x.Page,{header:"\u670d\u52a1\u5668 - \u8be6\u7ec6\u8d44\u6599",children:Object(d.jsx)(x.PropGrid,{rows:this.rows,values:this.props})})}}]),n}(f.Component),Xe=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).value=void 0,r.onChange=function(e){var t=r.props.value,n=t&&t.trim();r.value=e.currentTarget.value.trim(),r.setState({disabled:n===r.value})},r.onSubmit=Object(y.a)(O.a.mark((function e(){var t,n,a,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.value,n=t&&t.trim(),a=r.value,void 0===(i=r.props.onChanged)){e.next=12;break}return e.next=7,i(a,n);case 7:if("string"!==typeof(s=e.sent)){e.next=11;break}return r.setState({error:s}),e.abrupt("return");case 11:x.nav.pop();case 12:case"end":return e.stop()}}),e)}))),r.state={disabled:!0},r}return Object(k.a)(n,[{key:"renderControl",value:function(){return Object(d.jsx)("input",{className:"form-control w-100",type:"text",defaultValue:this.props.value,onChange:this.onChange})}},{key:"render",value:function(){var e,t=this.props,n=t.title,r=t.buttonText,a=t.info,i=this.state,s=i.disabled,c=i.error,u=Object(d.jsx)("button",{className:"btn btn-success btn-sm",disabled:s,onClick:this.onSubmit,children:r||"\u4fdd\u5b58"});return void 0!==c&&(e=Object(d.jsx)("div",{className:"text-danger",children:c})),Object(d.jsx)(x.Page,{header:n,right:u,children:Object(d.jsxs)("div",{className:"my-4 mx-3",children:[this.renderControl(),e,Object(d.jsx)("small",{className:"d-block mt-2 text-muted",children:a})]})})}}]),n}(f.Component),Ye=Object(ke.a)((qe=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(V.a)(e,"items",Fe,Object(M.a)(e)),e.itemClick=function(t){var n=e.props;(0,n.resolve)((0,n.idFromItem)(t)),x.nav.pop()},e.onSearch=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a,i,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.candidateItems,i=r.params,"function"!==typeof a){t.next=6;break}return t.next=4,a(i,n);case 4:s=t.sent,e.items=s;case 6:return t.abrupt("return");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.candidateItems,r=t.params,!Array.isArray(n)){e.next=5;break}e.t0=n,e.next=8;break;case 5:return e.next=7,n(r,"");case 7:e.t0=e.sent;case 8:this.items=e.t0;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.caption,n=e.row,r=e.searchPlaceHolder;return Object(d.jsxs)(x.Page,{header:t,back:"close",children:[Object(d.jsx)("div",{className:"container",children:Object(d.jsx)(x.SearchBox,{className:"my-2",onSearch:this.onSearch,placeholder:r,maxLength:100})}),Object(d.jsx)(x.List,{items:this.items,item:{onClick:this.itemClick,render:n}})]})}}]),n}(f.Component),Fe=Object(q.a)(qe.prototype,"items",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=qe))||Ve;function Ze(e){return function(t,n){return new Promise((function(r,a){x.nav.push(Object(d.jsx)(cn,Object(ye.a)({resolve:r,face:t,params:n},e)))}))}}var et,tt,nt,rt,at,it,st,ct,ut,ot,lt,ht,pt,dt,ft,vt,bt,mt,jt,Ot,yt,xt,gt,kt,wt,Ct,At,Nt,St,Pt,It,Ut,Et,_t,Rt,Tt,Vt,qt,Ft,Lt,Dt,Bt,Mt,zt,Ht,Wt,$t,Gt,Kt,Qt,Jt,Xt,Yt,Zt,en,tn,nn,rn,an,sn,cn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).items=void 0,r.state={items:null},r.itemClick=r.itemClick.bind(Object(M.a)(r)),r.onSearch=r.onSearch.bind(Object(M.a)(r)),r}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.candidateItems,r=t.params,e.t0=this,!Array.isArray(n)){e.next=6;break}e.t1=n,e.next=9;break;case 6:return e.next=8,n(r,"");case 8:e.t1=e.sent;case 9:e.t2=e.t1,e.t3={items:e.t2},e.t0.setState.call(e.t0,e.t3);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"itemClick",value:function(e){(0,this.props.resolve)(e),x.nav.pop()}},{key:"onSearch",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.candidateItems,a=n.params,"function"!==typeof r){e.next=6;break}return e.next=4,r(a,t);case 4:i=e.sent,this.setState({items:i});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.caption,n=e.row,r=e.searchPlaceHolder;return Object(d.jsxs)(x.Page,{header:t,back:"close",children:[Object(d.jsx)("div",{className:"container",children:Object(d.jsx)(x.SearchBox,{className:"my-2",onSearch:this.onSearch,placeholder:r,maxLength:100})}),Object(d.jsx)(x.List,{items:this.state.items,item:{onClick:this.itemClick,render:n}})]})}}]),n}(f.Component),un=Object(ke.a)((tt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(V.a)(e,"uqAccesses",nt,Object(M.a)(e)),e.renderUqRow=function(e,t){var n=e.name,r=e.owner,a=e.discription;return Object(d.jsxs)(x.LMR,{className:"py-2",right:Object(d.jsx)("small",{className:"text-muted",children:a}),children:[r," / ",n]})},e.act=Object(y.a)(O.a.mark((function t(){var n,r,a,i,s,c,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.app,a=n.appActed,i=r.id,s=r.inUnit,c=1,0!==s){t.next=10;break}return t.next=6,je.restoreUnitApp(i);case 6:t.sent<=0&&alert("app \u6216\u8005 uq \u6ca1\u6709\u5b9a\u4e49 service"),t.next=23;break;case 10:if(1!==s){t.next=16;break}return t.next=13,je.stopUnitApp(i);case 13:c=0,t.next=23;break;case 16:return(u=D.a.clone(r)).id=i,u.inUnit=1,t.next=21,je.addUnitApp(u);case 21:t.sent<=0&&alert("app \u6216\u8005 uq \u6ca1\u6709\u5b9a\u4e49 service");case 23:void 0!==a&&a(i,c),x.nav.pop();case 25:case"end":return t.stop()}}),t)}))),e}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.loadAppUqs(this.props.app.id);case 2:this.uqAccesses=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,r=this.props.app,a=r.unit,i=r.name,s=r.discription,c=r.icon,u=r.inUnit,o=r.date_init,l=r.date_update,h=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:s}),Object(d.jsx)(Ce,{date_update:l,date_init:o})]});1===u?(e="ban",t="\u505c\u7528APP",n="btn-danger"):0===u?(e="refresh",t="\u6062\u590dAPP",n="btn-success"):(e="plus",t="\u542f\u7528APP",n="btn-primary");var p=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:c,main:i,discription:h})},"",{type:"component",label:"\u5f00\u53d1\u53f7",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:a,isLink:!0})})},{type:"component",label:"\u5173\u8054UQ",component:Object(d.jsx)(x.List,{className:"w-100",items:this.uqAccesses,item:{render:this.renderUqRow}})},"","",{type:"component",bk:"",component:Object(d.jsxs)("button",{className:ge()("btn","w-100",n),onClick:this.act,children:[Object(d.jsx)(x.FA,{name:e,size:"lg"})," ",t]})}];return Object(d.jsx)("div",{children:Object(d.jsx)(x.PropGrid,{rows:p,values:this.props})})}}]),n}(f.Component),nt=Object(q.a)(tt.prototype,"uqAccesses",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=tt))||et,on=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this)).unitId=void 0,r.unitId=e,r}return Object(k.a)(n,[{key:"loadResults",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.searchApp(this.unitId,this.param,this.pageStart,this.pageSize);case 2:return a=e.sent,e.abrupt("return",{$page:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),n}(x.PageItems),ln=Object(ke.a)(rt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).apps=void 0,r.onSearch=function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.apps.first(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.appClick=function(e){x.nav.push(Object(d.jsx)(x.Page,{header:"App\u8be6\u7ec6\u4fe1\u606f",children:Object(d.jsx)(un,{app:e,appActed:r.appActed})}))},r.appActed=function(e,t){var n=r.apps.items,a=n.find((function(t){return t.id===e}));a.inUnit=t,n.replace([a])},r.apps=new on(je.unit.id),r}return Object(k.a)(n,[{key:"renderApp",value:function(e){var t,n=e.name,r=e.discription,a=e.icon,i=e.inUnit;return 1===i?t=Object(d.jsx)("small",{children:"\u5df2\u542f\u7528"}):0===i&&(t=Object(d.jsx)("small",{children:"\u5df2\u505c\u7528"})),Object(d.jsx)(x.LMR,{className:"px-3 py-2",left:Object(d.jsx)(x.Badge,{children:Object(d.jsx)(x.Image,{src:a})}),right:t,children:Object(d.jsxs)("div",{className:"px-3",children:[Object(d.jsx)("div",{children:n}),Object(d.jsx)("small",{className:"text-muted",children:r})]})})}},{key:"render",value:function(){var e=this.apps.items,t=Object(d.jsx)(x.SearchBox,{onSearch:this.onSearch,className:"w-100 mx-1",placeholder:"\u641c\u7d22App",maxLength:100});return Object(d.jsx)(x.Page,{header:t,children:Object(d.jsx)(x.List,{items:e,item:{onClick:this.appClick,render:this.renderApp},before:"\u641c\u7d22App\u540d\u5b57"})})}}]),n}(f.Component))||rt,hn=Object(ke.a)(at=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.loadApps();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"itemRender",value:function(e,t){var n,r=e.name,a=e.discription,i=e.icon;return 0===e.inUnit&&(n=Object(d.jsx)(x.FA,{className:"text-danger",name:"ban"})),Object(d.jsx)(x.LMR,{className:"px-3 py-1",left:Object(d.jsx)(x.Badge,{children:Object(d.jsx)(x.Image,{src:i})}),right:n,children:Object(d.jsxs)("div",{className:"px-3",children:[Object(d.jsx)("div",{children:r}),Object(d.jsx)("small",{className:"text-muted",children:a})]})})}},{key:"appClick",value:function(e){x.nav.push(Object(d.jsx)(x.Page,{header:"App\u8be6\u7ec6\u4fe1\u606f",children:Object(d.jsx)(un,{app:e})}))}},{key:"newItem",value:function(){x.nav.push(Object(d.jsx)(ln,Object(ye.a)({},this.props)))}},{key:"render",value:function(){var e=this,t=Object(d.jsx)("button",{className:"btn btn-success btn-sm mr-1 align-self-center",onClick:function(){return e.newItem()},children:Object(d.jsx)(x.FA,{name:"plus"})});return Object(d.jsx)(x.Page,{header:"\u542f\u505cApp",right:t,children:Object(d.jsx)(x.List,{items:je.apps,item:{render:this.itemRender,onClick:this.appClick}})})}}]),n}(f.Component))||at,pn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(){var t=e.controller,n=t.appList,r=t.listRowClick,a=t.showNewApp,i=Object(d.jsx)("button",{className:"btn btn-success btn-sm mr-2",onClick:a,children:Object(d.jsx)(x.FA,{name:"plus"})});return Object(d.jsx)(x.Page,{header:"App",right:i,children:Object(d.jsx)(x.List,{items:n,item:{render:e.appRow,onClick:r}})})},e.appRow=function(e){var t=e.name,n=e.caption,r=e.icon,a=e.date_init,i=Object(d.jsx)(x.Badge,{size:"sm",children:Object(d.jsx)(x.Image,{src:r})}),s=n?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"small text-muted",children:t}),Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:n})})]}):Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:t})}),c=Object(d.jsx)("small",{className:"text-muted",children:Object(d.jsx)(x.EasyDate,{date:a})});return Object(d.jsx)(x.LMR,{className:"py-2 px-3 align-items-stretch",left:i,right:c,children:Object(d.jsx)("div",{className:"px-3",children:s})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.VPage),dn=function(e){var t=e.discription,n=e.cloud,r=e.ip;return Object(d.jsxs)(d.Fragment,{children:[t," ",n," ",r]})},fn=[{name:"name",type:"string",maxLength:100,required:!0},{name:"caption",type:"string",maxLength:100},{name:"discription",type:"string",maxLength:250},{name:"url",type:"string",maxLength:200},{name:"public",type:"boolean"},{name:"server",type:"id"},{name:"icon",type:"image"},{name:"submit",type:"submit"}],vn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).candidateItems=function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.dev.searchServer.first(n);case 2:return e.abrupt("return",je.dev.searchServer.items);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.moreCandidates=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.dev.searchServer.more();case 2:case"end":return e.stop()}}),e)}))),e.renderRow=function(e,t){return Object(d.jsx)("div",{className:"px-3 py-2",children:Object(d.jsx)(dn,Object(ye.a)({},e))})},e.pickServerId=function(t,n,r){return new Promise((function(t,n){x.nav.push(Object(d.jsx)(Ye,{caption:"\u9009\u62e9\u670d\u52a1\u5668",searchPlaceHolder:"\u641c\u7d22\u670d\u52a1\u5668",candidateItems:e.candidateItems,moreCandidates:e.moreCandidates,row:e.renderRow,idFromItem:function(e){return e.id},resolve:t,params:void 0}),(function(){n()}))}))},e.renderServerInput=function(e){return Object(d.jsx)(Qe,{id:e})},e.uiSchema={items:{name:{widget:"text",label:"\u540d\u79f0"},caption:{widget:"text",label:"\u6807\u9898"},discription:{widget:"textarea",label:"\u63cf\u8ff0",rows:5},url:{widget:"text",label:"URL",placeholder:"http(s)://APP\u5730\u5740"},public:{widget:"checkbox",label:"\u516c\u5f00"},server:{widget:"id",label:"\u670d\u52a1\u5668",pickId:e.pickServerId,Templet:e.renderServerInput},icon:{widget:"image",label:"\u6807\u5fd7\u56fe"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},e.onButtonClick=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.data,i=D.a.clone(e.controller.app)||{},D.a.merge(i,a),t.next=5,e.controller.saveApp(i);case 5:x.nav.pop();case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=void 0,e.form=Object(ke.a)((function(){return Object(d.jsx)(x.Form,{fieldLabelSize:2,className:"m-3",schema:fn,uiSchema:e.uiSchema,formData:e.initValues,onButtonClick:e.onButtonClick})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),bn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(){var t=e.controller.app.name;return Object(d.jsx)(x.Page,{header:"\u4fee\u6539APP - "+t,back:"close",children:f.createElement(e.form)})},e}return Object(k.a)(n,[{key:"initValues",get:function(){return this.controller.app}}]),n}(vn),mn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(){return Object(d.jsx)(x.Page,{header:"\u65b0\u5efaAPP",back:"close",children:f.createElement(e.form)})},e}return Object(k.a)(n,[{key:"initValues",get:function(){return{}}}]),n}(vn),jn=(it=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(V.a)(e,"uqs",st,Object(M.a)(e)),e.onSearch=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 0,100,t.next=4,e.controller.searchUq(n,0,100);case 4:e.uqs=t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=Object(ke.a)((function(){var t=e.controller.onUq,n=Object(d.jsx)(x.SearchBox,{className:"w-100 mx-1",label:"\u9009\u62e9\u5173\u8054UQ ",onSearch:e.onSearch,placeholder:"\u641c\u7d22UQ\u540d\u5b57",maxLength:100});return Object(d.jsx)(x.Page,{back:"close",header:n,children:Object(d.jsx)(x.List,{items:e.uqs,item:{render:e.row,onClick:t}})})})),e.row=function(e){var t=e.owner,n=e.name,r=e.discription;return Object(d.jsx)(x.LMR,{className:"py-2 px-3",right:r,children:Object(d.jsxs)("div",{children:[t," / ",n]})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0,200,e.next=3,this.controller.searchUq("",0,200);case 3:this.uqs=e.sent,this.openPage(this.page);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),st=Object(q.a)(it.prototype,"uqs",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it),On=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).editItem=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.openVPage(bn);case 2:case"end":return t.stop()}}),t)}))),e.deleteItem=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==window.confirm("\u771f\u7684\u8981\u5220\u9664\u5417\uff1f\u7cfb\u7edf\u5220\u9664\u65f6\u5e76\u4e0d\u4f1a\u68c0\u67e5\u76f8\u5173\u5f15\u7528\uff0c\u8bf7\u8c28\u614e")){t.next=4;break}return t.next=3,e.controller.deleteApp();case 3:x.nav.pop();case 4:case"end":return t.stop()}}),t)}))),e.page=Object(ke.a)((function(){var t=e.controller,n=t.app,r=t.uqs,a=n.unit,i=n.name,s=n.caption,c=n.discription,u=n.icon,o=n.server,l=n.date_init,h=n.date_update,p=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:c}),Object(d.jsx)(Ce,{date_update:h,date_init:l})]}),f=[{caption:"\u4fee\u6539App",action:e.editItem,icon:"edit"},{caption:"\u5220\u9664",action:e.deleteItem,icon:"trash-o"}],v=Object(d.jsx)(x.DropdownActions,{actions:f,className:"btn-primary mr-2"}),b=s?Object(d.jsxs)(d.Fragment,{children:[i,": ",Object(d.jsx)("b",{children:s})]}):Object(d.jsx)("b",{children:i}),m=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:u,main:b,discription:p})},"",{type:"component",label:"\u5f00\u53d1\u53f7",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:a,isLink:!0})})},{label:"URL",name:"url",type:"string"},{type:"component",label:"\u670d\u52a1\u5668",component:Object(d.jsx)(Qe,{id:o})},""],j=Object(d.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return e.openVPage(jn)},children:"\u589e\u52a0UQ"});return Object(d.jsxs)(x.Page,{header:"App - "+i,right:v,children:[Object(d.jsx)(x.PropGrid,{rows:m,values:n}),Object(d.jsx)(x.LMR,{className:"mx-3 mt-3 mb-1",right:j,children:"\u5173\u8054UQ"}),Object(d.jsx)(x.List,{items:r,item:{render:e.renderUqRow,onClick:e.uqClick}})]})})),e.uqClick=function(t){e.controller.onUq(t)},e.renderUqRow=function(t,n){if(void 0===t)return null;var r=t.name,a=t.discription,i=t.unit,s=a&&Object(d.jsxs)("div",{className:"small text-muted",children:[" \xa0 ",a]}),c=e.controller.isMain(t),u=ge()("px-3 py-2 align-items-center bg-white",!0===c&&"font-weight-bold my-2");return Object(d.jsxs)(x.LMR,{className:u,right:s,children:[!0===c&&Object(d.jsx)(x.FA,{className:"text-warning mr-3",name:"star-o"}),Object(d.jsx)(De,{id:i})," / ",r]})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),yn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).uq=void 0,e.saveUqBind=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.saveUqBind(e.uq);case 2:e.closePage(2);case 3:case"end":return t.stop()}}),t)}))),e.removeUqBind=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.removeUqBind(e.uq);case 2:x.nav.pop();case 3:case"end":return t.stop()}}),t)}))),e.setMainUQ=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.controller.saveSetUqMain(e.uq),e.closePage();case 2:case"end":return t.stop()}}),t)}))),e.page=function(){var t,n,r=e.uq,a=r.owner,i=r.name,s=r.discription;return!0===e.controller.isBinded(e.uq)?(t=!1===e.controller.isMain(e.uq)?Object(d.jsx)("button",{className:"btn btn-primary btn-sm",onClick:e.setMainUQ,children:"\u8bbe\u4e3a\u4e3bUQ"}):Object(d.jsxs)("div",{children:[Object(d.jsx)(x.FA,{className:"text-warning",name:"star-o"})," \u4e3bUQ"]}),n=Object(d.jsx)("button",{className:"btn btn-outline-danger btn-sm",onClick:e.removeUqBind,children:"\u53d6\u6d88\u5173\u8054"})):t=Object(d.jsx)("button",{className:"btn btn-primary btn-sm",onClick:e.saveUqBind,children:"\u4fdd\u5b58\u5173\u8054"}),Object(d.jsx)(x.Page,{header:"\u5173\u8054UQ",children:Object(d.jsxs)("div",{className:"m-3 py-3 px-3 bg-white border",children:[Object(d.jsxs)("div",{children:[a," / ",i]}),Object(d.jsx)("div",{className:"text-muted",children:s}),Object(d.jsx)(x.LMR,{className:"pt-3",right:n,children:t})]})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uq=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.VPage),xn=(ct=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).unitId=void 0,e.app=void 0,Object(V.a)(e,"appList",ut,Object(M.a)(e)),Object(V.a)(e,"uqs",ot,Object(M.a)(e)),Object(V.a)(e,"uqMain",lt,Object(M.a)(e)),e.listRowClick=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.app=n,r=n.uqMain,t.next=4,N.loadAppUqs(n.id);case 4:a=t.sent,e.uqs=a.map((function(t,n){var a=t.owner,s=t.id,c={id:s,name:t.name,discription:t.discription,unit:t.unit,owner:a,date_init:t.date_init,date_update:t.date_update,service_count:void 0};return s===r&&(e.uqMain=c,i=n),c})),void 0!==i&&(e.uqs.splice(i,1),e.uqs.unshift(e.uqMain)),e.openVPage(On);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveSetUqMain=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.appSetUqMain(e.unitId,e.app.id,n.id);case 2:e.setUqMain(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showNewApp=function(){e.app=void 0,e.openVPage(mn)},e.saveApp=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a,i,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Date,void 0===e.app?(r=D.a.clone(n)).date_init=a:(r=D.a.clone(e.app),D.a.merge(r,n)),r.unit=e.unitId,r.date_update=a,t.next=6,N.saveApp(r);case 6:i=t.sent,r.id=i,void 0!==(s=e.appList.find((function(e){return e.id===i})))?D.a.merge(s,r):e.appList.push(r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isBinded=function(t){return e.uqs.findIndex((function(e){return e.id===t.id}))>=0},e.isMain=function(t){return void 0!==e.uqMain&&e.uqMain.id===t.id},e.deleteApp=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.delApp(e.unitId,e.app.id);case 2:(n=e.appList.findIndex((function(t){return t.id===e.app.id})))>=0&&e.appList.splice(n,1);case 4:case"end":return t.stop()}}),t)}))),e.searchUq=function(){var t=Object(y.a)(O.a.mark((function t(n,r,a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.searchUq(e.unitId,n,r,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.getMyUqs=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.getMyUqs(e.unitId);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),e.onUq=function(t){e.openVPage(yn,t)},e.saveUqBind=function(){var t=Object(y.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.uqs.map((function(e){return e.id})),r.findIndex((function(e){return e===n.id}))<0&&r.push(n.id),t.next=5,N.appBindUq(e.unitId,e.app.id,r);case 5:e.uqs.push(n),1===e.uqs.length&&e.setUqMain(n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUqBind=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a,i,s,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],a=Object(T.a)(e.uqs);try{for(a.s();!(i=a.n()).done;)(s=i.value).id!==n.id&&r.push(s.id)}catch(u){a.e(u)}finally{a.f()}return t.next=5,N.appBindUq(e.unitId,e.app.id,r);case 5:(c=e.uqs.findIndex((function(e){return e.id===n.id})))>=0&&e.uqs.splice(c,1),e.uqMain&&e.uqMain.id===n.id&&(e.uqMain=void 0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unitId=t,e.next=3,N.apps(this.unitId);case 3:this.appList=e.sent,this.openVPage(pn);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setUqMain",value:function(e){this.uqMain=e;var t=this.uqs.findIndex((function(t){return t.id===e.id}));t>=0&&this.uqs.splice(t,1),this.uqs.unshift(e)}}]),n}(x.Controller),ut=Object(q.a)(ct.prototype,"appList",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=Object(q.a)(ct.prototype,"uqs",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=Object(q.a)(ct.prototype,"uqMain",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct),gn=n(82),kn=n.n(gn),wn="///++++++",Cn="------///",An=function(){function e(){Object(g.a)(this,e),this.rowId=void 0,this.render=void 0}return Object(k.a)(e,[{key:"renderHtml",value:function(){return kn.a.renderToStaticMarkup(this.render())}},{key:"afterMount",value:function(){}},{key:"isMe",value:function(e){return!1}}]),e}(),Nn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this)).text=void 0,r.render=function(){if(0===r.text.trim().length)return null;var e=r.text.split("\n");return Object(d.jsx)(d.Fragment,{children:e.map((function(e,t){return 0===e.length?Object(d.jsx)("div",{children:"\xa0"},t):Object(d.jsx)("div",{children:e},t)}))})},r.text=e,r}return n}(An),Sn=(ht=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e,r){var a;return Object(g.a)(this,n),(a=t.call(this)).name=void 0,a.group=void 0,Object(V.a)(a,"collaps",pt,Object(M.a)(a)),a.onClick=function(){var e=a.collaps;1!==e&&(e=2===e?3:2,a.setCollaps(e))},a.render=function(){var e,t,n,r=a.group[0],i=r.indexOf("\n");if(i<0)i=void 0;else{var s=r.indexOf("(");s<i&&(i=s)}return e=r.substring(0,i),1===a.collaps?t=Object(d.jsx)(x.FA,{name:"spinner",className:"text-primary fa-spin"}):3===a.collaps?(t=Object(d.jsx)(x.FA,{name:"arrow-circle-up",className:"text-success"}),n=Object(d.jsx)("div",{id:a.cId,children:a.group.map((function(e,t){return 0===e.trim().length?null:Object(d.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:e},t)}))})):t=Object(d.jsx)(x.FA,{name:"arrow-circle-down",className:"text-success"}),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{id:a.elId,className:"cursor-pointer text-primary",onClick:a.onClick,children:[t," ",Object(d.jsx)("u",{children:e})]}),n]})},a.name=e,a.group=r,a.collaps=1,a}return Object(k.a)(n,[{key:"setCollaps",value:function(e){this.collaps=e;var t=document.getElementById(this.elId),n=t.firstElementChild;if(n){var r;switch(e){case 1:r="fa fa-spin text-primary";break;case 2:r="fa fa-arrow-circle-down text-success";break;case 3:r="fa fa-arrow-circle-up text-success"}n.className=r}if(3===e){var a=kn.a.renderToStaticMarkup(Object(d.jsx)("div",{id:this.cId,children:this.group.map((function(e,t){return 0===e.trim().length?null:Object(d.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:e},t)}))})),i=document.createRange();i.selectNode(t);var s=i.createContextualFragment(a);t.parentNode.insertBefore(s,t.nextSibling)}else{var c=document.getElementById(this.cId);c&&c.parentNode.removeChild(c)}}},{key:"isMe",value:function(e){return this.name===e}},{key:"afterMount",value:function(){var e=document.getElementById(this.elId);e&&e.addEventListener("click",this.onClick)}},{key:"elId",get:function(){return"g"+this.rowId}},{key:"cId",get:function(){return"c"+this.rowId}}]),n}(An),pt=Object(q.a)(ht.prototype,"collaps",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht),Pn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this)).name=void 0,r.name=e,r}return n}(An),In=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this)).error=void 0,r.render=function(){return Object(d.jsxs)("div",{className:"text-danger",children:[Object(d.jsx)(x.FA,{name:"exclamation-circle"}),"\xa0",r.error.join().split("\n").map((function(e,t){return Object(d.jsxs)(v.a.Fragment,{children:[e,Object(d.jsx)("br",{})]},t)}))]})},r.error=e,r}return n}(An),Un=(dt=function(){function e(t){Object(g.a)(this,e),this.text=void 0,this.p=void 0,this.group=void 0,this.stop=void 0,Object(V.a)(this,"hasError",ft,this),Object(V.a)(this,"seconds",vt,this),this.sectionId=1,Object(V.a)(this,"sections",bt,this),this.containerElement=void 0,this.containerElement=t}return Object(k.a)(e,[{key:"add",value:function(e){if(this.stop=!1,void 0===this.text?(this.p=0,this.text=e):this.text=this.text+e,!(this.text.length<10))for(;!1===this.stop;)this.addToGroup(),this.addText()}},{key:"addHtml",value:function(e){var t=document.createRange();t.selectNode(this.containerElement);var n=t.createContextualFragment(e);this.containerElement.appendChild(n)}},{key:"addSection",value:function(e){e.rowId=this.sectionId,this.sectionId++,this.sections.push(e);var t=e.renderHtml();this.addHtml(t),e.afterMount()}},{key:"mayStart",value:function(e){var t=this.text.length-e.length;if(this.p<t)return!1;for(var n=0;n<t;n++)if(this.text.charCodeAt(this.p+n)!==e.charCodeAt(n))return!1;return!0}},{key:"parse",value:function(){for(var e="",t=this.group.length,n=0;n<t;n++){var r=this.group[n],a=r.indexOf("\n");if(a<0)e+=r;else{e+=r.substr(0,a);for(var i=0;i<n+1;i++)this.group.shift();switch(this.group.unshift(r.substr(a+1)),e){default:case"":return new Sn(e,this.group);case"error":return this.hasError=!0,new In(this.group)}}}return new Pn(e)}},{key:"addToGroup",value:function(){if(void 0!==this.group&&void 0!==this.text){var e=this.text.indexOf(Cn,this.p);if(e<0){if(!0===this.mayStart(Cn))return;return this.group.push(0===this.p?this.text:this.text.substr(this.p)),this.p=0,this.text=void 0,void(this.stop=!0)}this.group.push(this.text.substring(this.p,e));var t=this.parse();if(void 0!==t.render)this.addSection(t);else for(var n=t.name,r=this.sections.length-1;r>=0;r--){var a=this.sections[r];if(a&&!0===a.isMe(n)){a.setCollaps(2);break}}this.group=void 0,this.p=e+9}}},{key:"addText",value:function(){if(void 0!==this.text){var e=this.text.indexOf(wn,this.p);if(e<0){if(!0===this.mayStart(wn))return;return this.addSection(new Nn(0===this.p?this.text:this.text.substr(this.p))),this.p=0,this.text=void 0,void(this.stop=!0)}var t=this.text.substring(this.p,e);this.addSection(new Nn(t)),this.p=e+9,this.group=[]}}}]),e}(),ft=Object(q.a)(dt.prototype,"hasError",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vt=Object(q.a)(dt.prototype,"seconds",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=Object(q.a)(dt.prototype,"sections",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dt),En=Object(ke.a)(mt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).resultSections=void 0,r.timeHandler=void 0,r.autoScrollEnd=!1,r.autoScroll=!0,r.doubleClick=function(){if(!0!==r.autoScrollEnd){var e=document.getElementById("scrollDiv"),t=r.getParent(e);t&&(t.scrollTop>=t.scrollHeight/2?r.topIntoView():r.bottomIntoView())}},r.lastScrollTop=0,r.onScroll=function(e){var t=e.target,n=t.scrollTop,a=t.scrollHeight,i=t.offsetHeight;n<=r.lastScrollTop?r.pauseAutoScrollToBottom():n+i>a-30&&r.startAutoScrollToBottom(),r.lastScrollTop=n},r.startTime=void 0,r.total=void 0,r.renderText=function(e,t){return Object(d.jsx)(e.render,{},e.rowId)},r.resultSections=new Un(void 0),r}return Object(k.a)(n,[{key:"startAutoScrollToBottom",value:function(){var e=this;!0!==this.autoScrollEnd&&(this.autoScroll=!0,void 0===this.timeHandler&&(this.timeHandler=setInterval((function(){if(!1!==e.autoScroll){var t=document.getElementById("bottomDiv");t&&t.scrollIntoView()}}),100)))}},{key:"endAutoScrollToBottom",value:function(){var e=this;setTimeout((function(){e.autoScroll=!1,e.autoScrollEnd=!0,void 0!==e.timeHandler&&(clearInterval(e.timeHandler),e.timeHandler=void 0)}),300)}},{key:"pauseAutoScrollToBottom",value:function(){this.autoScroll=!1}},{key:"getParent",value:function(e){if(e)return"MAIN"===e.tagName?e:this.getParent(e.parentElement)}},{key:"topIntoView",value:function(){var e=document.getElementById("topDiv");e&&e.scrollIntoView()}},{key:"bottomIntoView",value:function(){var e=document.getElementById("bottomDiv");e&&e.scrollIntoView()}},{key:"uintToString",value:function(e){var t=String.fromCharCode.apply(String,Object(B.a)(e));try{return decodeURIComponent(escape(t))}catch(n){return t}}},{key:"pump",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){var r,a,i,s,c,u,o,l,h,p,d,f,v,b;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.read();case 2:if(r=e.sent,a=r.done,i=r.value,!a){e.next=32;break}if(this.resultSections.seconds=(new Date).getTime()-this.startTime.getTime(),s=this.props,c=s.action,void 0===(u=s.services)){e.next=31;break}o=Date.now()/1e3,l=Object(T.a)(u),e.prev=10,l.s();case 12:if((h=l.n()).done){e.next=23;break}p=h.value,e.t0=c,e.next="test"===e.t0?17:"deploy"===e.t0?19:21;break;case 17:return p.compile_time=o,e.abrupt("break",21);case 19:return p.deploy_time=o,e.abrupt("break",21);case 21:e.next=12;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(10),l.e(e.t1);case 28:return e.prev=28,l.f(),e.finish(28);case 31:return e.abrupt("return",!0);case 32:for(d=i,f=0;f<d.length;f+=16384)v=d.slice(f,f+16384),b=this.uintToString(v),n.add(b),this.total+=i.byteLength;return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,this,[[10,25,28,31]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.nav.regConfirmClose(Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.resultSections.seconds>=0)){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",new Promise((function(e,t){try{if(!0===window.confirm("\u6b63\u5728".concat(a.props.actionName,"\u4e2d\uff0c\u771f\u7684\u8981\u4e2d\u6b62\u5417\uff1f"))){try{a.props.abortController.abort()}catch(n){console.error(n)}e(!0)}else e(!1)}catch(n){t(n)}})));case 3:case"end":return e.stop()}}),e)})))),this.startAutoScrollToBottom(),e.prev=2,t=this.props.res.body.getReader(),this.startTime=new Date,this.total=0,n=document.getElementById("scrollDiv"),r=new Un(n);case 8:return e.next=11,this.pump(t,r);case 11:if(!0!==e.sent){e.next=14;break}return e.abrupt("break",16);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0);case 21:return e.prev=21,this.endAutoScrollToBottom(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[2,18,21,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.props,n=t.uq,r=t.actionName,a=t.caption,i=this.resultSections,s=i.seconds,c=!0===i.hasError?"\u53d1\u751f\u9519\u8bef":"\u5b8c\u6210";return e=a?"["+a+"] ":"",void 0!==n&&(e+=n.name+" - "),e+=r+(s>=0?c:"\u4e2d..."),Object(d.jsxs)(x.Page,{header:e,back:"close",onScroll:this.onScroll,children:[Object(d.jsx)("div",{id:"topDiv"}),Object(d.jsx)("div",{id:"scrollDiv",onDoubleClick:this.doubleClick,className:"py-2 px-3",style:{wordWrap:"break-word",whiteSpace:"normal"}}),s>=0?Object(d.jsxs)("div",{className:"px-3 pb-3",style:{color:"red",fontWeight:"bold"},children:[r,"\u5b8c\u6210\u3002\u5171\u8ba1\u7528\u65f6",Math.floor(s/1e3),"\u79d2"]}):void 0,Object(d.jsx)("div",{id:"bottomDiv"})]})}}]),n}(v.a.Component))||mt,_n=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).fileInput=void 0,r.onFilesChange=function(e){for(var t=[],n=e.target.files,a=n.length,i=0;i<a;i++)t.push(n[i]);r.setState({files:t})},r.fileClick=function(e){var t=new FileReader;t.onload=function(t){x.nav.push(Object(d.jsx)(qn,{name:e.name,content:this.result}))},t.readAsText(e,"utf8")},r.onSubmit=function(e){e.preventDefault()},r.onUpload=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.nav.ceaseTop(),e.next=3,r.upload();case 3:case"end":return e.stop()}}),e)}))),r.state={files:void 0},r}return Object(k.a)(n,[{key:"fileRender",value:function(e,t){var n=e.name,r=e.size,a=e.lastModifiedDate;return Object(d.jsxs)(x.LMR,{className:"px-2 py-1",right:Object(d.jsx)(x.Muted,{children:function(){var e,t;return r<1024?(e=r,t="b"):r<1048576?(e=Math.trunc(r/1024*100)/100,t="k"):(e=Math.trunc(r/1024/1024*100)/100,t="m"),e+" "+t}()}),children:[Object(d.jsx)("div",{children:n}),Object(d.jsx)("div",{children:Object(d.jsxs)(x.Muted,{children:["\u4fee\u6539\u65e5\u671f: ",Object(d.jsx)(x.EasyDate,{date:a})]})})]})}},{key:"upload",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a,i,s,c,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.fileInput.files,n=new FormData,r=t.length,a=0;a<r;a++)i=t[a],n.append("files[]",i,i.name);return s=je.uqServer+"uq-compile/"+this.props.uq.id+"/upload",e.prev=5,c=new AbortController,e.next=9,fetch(s,{method:"POST",body:n,signal:c.signal});case 9:u=e.sent,x.nav.push(Object(d.jsx)(En,Object(ye.a)(Object(ye.a)({},this.props),{},{actionName:"\u4e0a\u4f20",action:"upload",res:u,abortController:c}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("%s %s",s,e.t0);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=this,r=this.state.files;return void 0!==r&&(e=Object(d.jsx)(x.List,{className:"my-3",items:r,item:{render:this.fileRender,onClick:this.fileClick}})),void 0!==r&&r.length>0&&(t=Object(d.jsx)("div",{className:"my-2 d-flex",children:Object(d.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:this.onUpload,children:"\u63d0\u4ea4UQ"})})),Object(d.jsx)(x.Page,{header:"\u63d0\u4ea4UQ - "+this.props.uq.name,children:Object(d.jsxs)("div",{className:"py-2 px-3",children:[Object(d.jsxs)("form",{className:"my-1",encType:"multipart/form-data",onSubmit:this.onSubmit,children:[Object(d.jsxs)("div",{className:"my-1",children:[Object(d.jsx)("button",{className:"btn btn-outline-success",onClick:function(){return n.fileInput.click()},children:"\u9009\u62e9UQ\u6e90\u4ee3\u7801\u6587\u4ef6"}),Object(d.jsx)("input",{ref:function(e){return n.fileInput=e},type:"file",className:"w-100 form-control-file d-none",name:"files",multiple:!0,onChange:this.onFilesChange})]}),e,t]}),Object(d.jsx)("pre",{children:this.state.compiled}),Object(d.jsx)("div",{children:this.state.text})]})})}}]),n}(f.Component),Rn={action:"test",caption:"\u6d4b\u8bd5\u7248",fast:"\u5feb\u901f\u7f16\u8bd1",thoroughly:"\u5b8c\u5168\u7f16\u8bd1",description:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{children:"\u7528\u4e0a\u4f20\u7684UQ\u4ee3\u7801\uff0c\u751f\u6210\u6d4b\u8bd5\u6570\u636e\u5e93"}),Object(d.jsx)("li",{children:"\u5feb\u901f\u7f16\u8bd1\u6bd4\u8f83\u6e90\u4ee3\u7801\uff0c\u4ec5\u7f16\u8bd1\u4fee\u6539\u90e8\u5206\u4ee3\u7801\uff0c\u90e8\u5206\u4fee\u6539\u6570\u636e\u5e93"}),Object(d.jsx)("li",{children:"\u5b8c\u5168\u7f16\u8bd1\u4ec5\u7528\u4e8e\u5e95\u5c42\u4ee3\u7801\u6709\u7a81\u7834\u6027\u53d8\u5316\u65f6"})]})},Tn={action:"deploy",caption:"\u53d1\u5e03\u7248",fast:"\u5feb\u901f\u7f16\u8bd1",thoroughly:"\u5b8c\u5168\u7f16\u8bd1",description:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{children:"\u5c06\u5df2\u7ecf\u7f16\u8bd1\u6d4b\u8bd5\u8fc7\u7684\u4ee3\u7801\uff0c\u53d1\u5e03\u5230\u751f\u4ea7\u670d\u52a1\u5668"}),Object(d.jsx)("li",{children:"\u5feb\u901f\u7f16\u8bd1\u6bd4\u8f83\u6e90\u4ee3\u7801\uff0c\u4ec5\u5bf9\u4fee\u6539\u7684\u6e90\u4ee3\u7801\uff0c\u751f\u6210\u6570\u636e\u5e93"}),Object(d.jsx)("li",{children:"\u5b8c\u5168\u7f16\u8bd1\u4ec5\u7528\u4e8e\u5e95\u5c42\u4ee3\u7801\u6709\u7a81\u7834\u6027\u53d8\u5316\u65f6"})]})},Vn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;switch(Object(g.a)(this,n),(r=t.call(this,e)).options=void 0,r.onCompile=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.nav.ceaseTop(),!1,e.next=4,r.compile(false);case 4:case"end":return e.stop()}}),e)}))),r.onCompileThoroughly=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.nav.ceaseTop(),!0,e.next=4,r.compile(true);case 4:case"end":return e.stop()}}),e)}))),e.action){case"test":r.options=Rn;break;case"deploy":r.options=Tn}return r}return Object(k.a)(n,[{key:"compile",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i,s,c,u,o,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.options,r=n.caption,a=n.action,i=n.thoroughly,s=n.fast,c=je.uqServer+"uq-compile/"+this.props.uq.id+"/"+a,!0===t?(u=i,c+="-thoroughly"):u=s,e.prev=3,o=new AbortController,e.next=7,fetch(c,{method:"POST",signal:o.signal});case 7:l=e.sent,x.nav.push(Object(d.jsx)(En,Object(ye.a)(Object(ye.a)({},this.props),{},{caption:r,action:a,actionName:u,res:l,abortController:o}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("%s %s",c,e.t0);case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.options,t=e.caption,n=e.fast,r=e.thoroughly,a=e.description;return Object(d.jsx)(x.Page,{header:t+" - "+this.props.uq.name,children:Object(d.jsxs)("div",{className:"m-3 bg-white p-3",children:[Object(d.jsx)("ul",{className:"my-3",children:a}),Object(d.jsxs)("div",{className:"d-flex p-3",children:[Object(d.jsx)("button",{className:"btn btn-success",type:"submit",onClick:this.onCompile,children:n}),Object(d.jsx)("div",{className:"py-2 flex-grow-1"}),Object(d.jsx)("button",{className:"btn btn-outline-warning",type:"submit",onClick:this.onCompileThoroughly,children:r})]})]})})}}]),n}(f.Component),qn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){return Object(d.jsx)(x.Page,{header:this.props.name,children:Object(d.jsx)("pre",{className:"px-3 py-2",children:this.props.content})})}}]),n}(f.Component),Fn=n(43),Ln=function(e){var t=e.discription,n=e.cloud,r=e.ip;return Object(d.jsxs)(d.Fragment,{children:[t," ",n," ",r]})},Dn={caption:"\u9009\u62e9\u670d\u52a1\u5668",searchPlaceHolder:"\u641c\u7d22\u670d\u52a1\u5668",candidateItems:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.dev.searchServer.first(n);case 2:return e.abrupt("return",je.dev.searchServer.items);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),moreCandidates:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.dev.searchServer.more();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),row:function(e,t){return Object(d.jsx)("div",{className:"px-3 py-2",children:Object(d.jsx)(Ln,Object(ye.a)({},e))})}},Bn=function(e){return{id:e.id,caption:Object(d.jsx)(Ln,Object(ye.a)({},e))}},Mn=function(e){return R.servers.get(e)},zn={label:"\u8fd0\u884c\u670d\u52a1\u5668",field:{name:"server",type:"id",required:!0},face:{type:"pick-id",initCaption:"\u8bf7\u9009\u62e9\u8fd0\u884c\u670d\u52a1\u5668",pick:Ze(Dn),fromPicked:Bn,itemFromId:Mn}},Hn={label:"\u6d4b\u8bd5\u670d\u52a1\u5668",field:{name:"serverTest",type:"id",required:!0},face:{type:"pick-id",initCaption:"\u8bf7\u9009\u62e9\u6d4b\u8bd5\u670d\u52a1\u5668",pick:Ze(Dn),fromPicked:Bn,itemFromId:Mn}},Wn=function(e){var t=e.name,n=e.discription;return Object(d.jsx)(d.Fragment,{children:null!==t&&void 0!==t?t:n})},$n={label:"\u5c0f\u53f7($unit)",field:{name:"uqUniqueUnit",type:"id",required:!0},face:{type:"pick-id",initCaption:"\u8bf7\u9009\u62e9\u5c0f\u53f7($unit)",pick:Ze({caption:"\u9009\u62e9\u5c0f\u53f7($unit)",searchPlaceHolder:"\u641c\u7d22\u5c0f\u53f7($unit)",candidateItems:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je.accUnits);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),moreCandidates:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),row:function(e,t){return Object(d.jsx)("div",{className:"px-3 py-2",children:Object(d.jsx)(Wn,Object(ye.a)({},e))})}}),fromPicked:function(e){return{id:e.id,caption:Object(d.jsx)(Wn,Object(ye.a)({},e))}},itemFromId:function(e){return R.units.get(e)}}},Gn={label:"\u6570\u636e\u5e93\u540d\u5b57",field:{name:"db",type:"string",maxLength:50,required:!0}},Kn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).formRows=[Gn,$n,zn,Hn],e.onSubmit=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.type=2,n.uqId=e.controller.uq.id,t.next=4,e.controller.saveService(n);case 4:if(0!==t.sent){t.next=7;break}return t.abrupt("return");case 7:return x.nav.pop(),t.abrupt("return");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=function(){return Object(d.jsx)(x.Page,{header:"\u65b0\u5efaService",children:Object(d.jsx)(Fn.TonvaForm,{className:"m-3",formRows:e.formRows,onSubmit:e.onSubmit})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Qn=(jt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(V.a)(e,"service",Ot,Object(M.a)(e)),e.onDbChanged=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.changeProp("db",n);case 2:if(0!==t.sent){t.next=5;break}return t.abrupt("return","Db\u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86");case 5:e.service.db=n;case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onUnitPick=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.pickUnit();case 2:n=t.sent,e.changeProp("uq_unique_unit",n),e.service.uqUniqueUnit=n;case 5:case"end":return t.stop()}}),t)}))),e.onServerPick=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.pickServer();case 2:n=t.sent,e.changeProp("server",n),e.service.server=n;case 5:case"end":return t.stop()}}),t)}))),e.onServerTestPick=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.pickServer();case 2:n=t.sent,e.changeProp("server_test",n),e.service.serverTest=n;case 5:case"end":return t.stop()}}),t)}))),e.onDeleteClick=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===window.confirm("\u771f\u7684\u8981\u5220\u9664Service\u5417\uff1f\u5220\u9664\u4e86\u4e0d\u53ef\u6062\u590d\uff0c\u9700\u8981\u91cd\u65b0\u5f55\u5165\u3002")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.controller.delService(e.service);case 4:x.nav.pop();case 5:case"end":return t.stop()}}),t)}))),e.page=Object(ke.a)((function(){var t=e.controller.uq,n=["",{type:"string",name:"db",label:"\u6570\u636e\u5e93\u540d",onClick:function(){return x.nav.push(Object(d.jsx)(Xe,{title:"\u6570\u636e\u5e93\u540d\u5b57",value:e.service.db,onChanged:e.onDbChanged}))}},{type:"component",label:"\u5c0f\u53f7($unit)",component:Object(d.jsx)(Le,{id:e.service.uqUniqueUnit}),onClick:e.onUnitPick},"",{type:"component",label:"\u751f\u4ea7\u670d\u52a1\u5668",component:Object(d.jsx)(Qe,{id:e.service.server}),onClick:e.onServerPick},{type:"component",label:"\u6d4b\u8bd5\u670d\u52a1\u5668",component:Object(d.jsx)(Qe,{id:e.service.serverTest}),onClick:e.onServerTestPick}],r=Object(d.jsx)("button",{onClick:e.onDeleteClick,className:"btn btn-sm btn-success align-self-center",children:"\u5220\u9664"});return Object(d.jsx)(x.Page,{header:"UQ - "+t.name,right:r,children:Object(d.jsx)(x.PropGrid,{rows:n,values:e.service})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.service=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeProp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.changeServiceProp(this.service,t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(x.VPage),Ot=Object(q.a)(jt.prototype,"service",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt),Jn=[{label:"\u540d\u79f0",field:{name:"name",type:"string",maxLength:100,required:!0}},{label:"\u63cf\u8ff0",field:{name:"discription",type:"string",maxLength:250},face:{type:"textarea"}}],Xn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.saveUq(n);case 2:return x.nav.pop(),t.abrupt("return");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=void 0,e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"form",value:function(e){return Object(d.jsx)(Fn.TonvaForm,{className:"m-3",formRows:Jn,onSubmit:this.onSubmit,initValues:e})}}]),n}(x.VPage),Yn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(){var t=e.controller.uq,n=t.name;return Object(d.jsx)(x.Page,{header:"\u4fee\u6539UQ - "+n,back:"close",children:e.form(t)})},e}return n}(Xn),Zn=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=function(){return Object(d.jsx)(x.Page,{header:"\u65b0\u5efaUQ",back:"close",children:e.form({})})},e}return n}(Xn),er=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).editItem=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.openVPage(Yn);case 2:case"end":return t.stop()}}),t)}))),e.deleteItem=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==window.confirm("\u771f\u7684\u8981\u5220\u9664UQ\u5417\uff1f")){t.next=4;break}return t.next=3,e.controller.deleteUq();case 3:x.nav.pop();case 4:case"end":return t.stop()}}),t)}))),e.page=Object(ke.a)((function(){var t,n,r,a=e.controller,i=a.onUqUpload,s=a.onUqTest,c=a.onUqDeploy,u=a.onUqDevsAdmin,o=a.serviceClick,l=a.uq,h=a.services,p=je.unit.isOwner,v=l.name,b=l.discription,m=l.unit,j=l.date_init,O=l.date_update,y=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:b}),Object(d.jsx)(Ce,{date_update:O,date_init:j})]}),g=[{caption:"\u4fee\u6539UQ",action:e.editItem,icon:"edit"},{caption:"\u5220\u9664",action:e.deleteItem,icon:"trash-o"}],k=p>0&&Object(d.jsx)(x.DropdownActions,{className:"btn-primary mr-2",actions:g}),w=Object(d.jsx)(x.FA,{className:"align-self-center",name:"angle-right"}),C=function(e,t,n,r){return{type:"component",label:void 0,component:Object(d.jsx)(x.LMR,{onClick:r,className:"w-100 py-2 cursor-pointer",left:Object(d.jsxs)("span",{className:"align-self-center",children:[Object(d.jsx)(x.FA,{className:t,name:e,fixWidth:!0})," \xa0 ",n]}),right:w})}},A=["",{type:"component",component:Object(d.jsxs)(x.LMR,{className:"py-2",left:Object(d.jsx)(x.FA,{name:"database",className:"text-primary fa-2x mr-3"}),children:[Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:v})}),y]})},{type:"component",label:"\u5f00\u53d1\u53f7",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:m,isLink:!0})})},"",C("code","text-info","\u4e0a\u4f20\u63d0\u4ea4UQ\u4ee3\u7801",i),C("database","text-warning","\u6d4b\u8bd5\u7248 - \u7f16\u8bd1UQ\u6570\u636e\u5e93",s),C("database","text-success","\u53d1\u5e03\u7248 - \u7f16\u8bd1UQ\u6570\u636e\u5e93",c)];if(p>0){n=Object(d.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return e.controller.showNewServicePage()},children:"\u589e\u52a0"});var N=e.controller.uqDevs.filter((function(e){return 0===e.isOwner}));t=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"d-flex mx-3 mt-3 mb-1 align-items-end",children:[Object(d.jsx)(x.Muted,{style:{display:"block",flex:1},children:"\u5f00\u53d1\u8005"}),Object(d.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:u,children:"\u7ba1\u7406"})]}),Object(d.jsx)("div",{className:"px-3 py-2 d-flex flex-wrap bg-white",children:0===N.length?Object(d.jsx)("div",{className:"small text-muted",children:"[\u65e0]"}):N.map((function(e){return Object(d.jsx)("div",{className:"my-2 mr-3",children:e.nick||e.name},e.userId)}))})]})}return p>0&&(r=o),Object(d.jsxs)(x.Page,{header:"UQ - "+v,right:k,children:[Object(d.jsx)(x.PropGrid,{rows:A,values:l}),t,Object(d.jsxs)("div",{className:"d-flex mx-3 mt-3 mb-1 align-items-end",children:[Object(d.jsx)(x.Muted,{style:{display:"block",flex:1},children:"Service"}),n]}),Object(d.jsx)(x.List,{items:h,item:{render:function(t,n){return f.createElement(e.renderService,{service:t,index:n})},onClick:r}})]})})),e.renderService=Object(ke.a)((function(e){var t=e.service,n=t.db,r=t.server,a=t.serverTest,i=t.uqUniqueUnit,s=t.compile_time,c=t.deploy_time,u=s?Object(d.jsx)(x.EasyTime,{date:s}):Object(d.jsx)(x.Muted,{children:"\u672a\u6d4b\u8bd5"}),o=c?Object(d.jsx)(x.EasyTime,{date:c}):Object(d.jsx)(x.Muted,{children:"\u672a\u53d1\u5e03"});return Object(d.jsxs)("div",{className:"d-block w-100 cursor-pointer mb-2 py-2 px-3",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("small",{children:"\u6570\u636e\u5e93\u540d\uff1a"}),n,"\xa0 \xa0 \xa0",Object(d.jsx)("small",{children:"\u5c0f\u53f7($unit)\uff1a"}),Object(d.jsx)(Le,{id:i})]}),Object(d.jsx)(x.LMR,{className:"align-items-center",right:Object(d.jsx)("small",{children:o}),children:Object(d.jsxs)("div",{children:[Object(d.jsx)("small",{children:"\u751f\u4ea7\uff1a"}),Object(d.jsx)(Qe,{id:r})]})}),Object(d.jsx)(x.LMR,{className:"align-items-center",right:Object(d.jsx)("small",{children:u}),children:Object(d.jsxs)("div",{children:[Object(d.jsx)("small",{children:"\u6d4b\u8bd5\uff1a"}),Object(d.jsx)(Qe,{id:a})]})})]})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPageElement(f.createElement(this.page));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),tr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).newItem=function(){e.controller.uq=void 0,e.openVPage(Zn)},e.batchCompile=function(){e.openPage(e.batchCompilePage)},e.page=function(){var t=e.controller,n=t.uqList,r=t.listRowClick,a=je.unit.isOwner,i=[{icon:"plus",caption:"\u65b0\u589eUQ",action:e.newItem},{icon:"plus",caption:"\u6279\u91cf\u7f16\u8bd1",action:e.batchCompile}],s=a>0&&Object(d.jsx)(x.DropdownActions,{className:"btn-primary mr-2 align-self-center",icon:"bars",actions:i,children:Object(d.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return e.newItem()},children:Object(d.jsx)(x.FA,{name:"plus"})})});return Object(d.jsx)(x.Page,{header:"UQ",right:s,children:Object(d.jsx)(x.List,{items:n,item:{render:e.listRow,onClick:r}})})},e.listRow=function(e){var t=e.name,n=e.discription,r=e.service_count,a=e.date_update;return Object(d.jsx)(x.LMR,{className:"py-1 px-3 align-items-center",left:Object(d.jsx)(x.FA,{name:"database",className:"text-primary fa-lg"}),right:Object(d.jsxs)("div",{className:"text-right",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("small",{className:"text-muted",children:"\u670d\u52a1\u6570:"})," ",r]}),Object(d.jsx)("div",{className:"small text-muted",children:Object(d.jsx)(x.EasyTime,{date:a})})]}),children:Object(d.jsxs)("div",{className:"py-2 px-3",children:[Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:t})}),Object(d.jsx)("div",{children:Object(d.jsx)(x.Muted,{children:n})})]})})},e.onSelect=function(e,t,n){},e.listCompileRow=function(e){var t=e.name,n=e.discription,r=e.date_update;return Object(d.jsx)(x.LMR,{className:"py-1 px-3 align-items-center",left:Object(d.jsx)(x.FA,{name:"database",className:"text-info fa-lg"}),right:Object(d.jsx)("div",{className:"text-right",children:Object(d.jsx)("div",{className:"small text-muted",children:Object(d.jsx)(x.EasyTime,{date:r})})}),children:Object(d.jsxs)("div",{className:"py-2 px-3",children:[Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:t})}),Object(d.jsx)("div",{children:Object(d.jsx)(x.Muted,{children:n})})]})})},e.list=void 0,e.selectAll=function(){e.list.selectAll()},e.unselectAll=function(){e.list.unselectAll()},e.test=function(){e.compile("test",!1)},e.testThoroughly=function(){e.compile("test",!0)},e.deploy=function(){e.compile("deploy",!1)},e.deployThoroughly=function(){e.compile("deploy",!0)},e.batchCompilePage=function(){var t=e.controller.uqList,n=Object(d.jsxs)("span",{children:[Object(d.jsx)("button",{className:"btn btn-sm btn-link",onClick:e.selectAll,children:"\u5168\u9009"}),Object(d.jsx)("button",{className:"btn btn-sm btn-link",onClick:e.unselectAll,children:"\u5168\u6e05"})]}),r="btn btn-sm btn-outline-primary mr-3",a=Object(d.jsxs)("span",{className:"px-3 py-1 d-flex w-100",children:[Object(d.jsxs)("span",{className:"flex-grow-1",children:[Object(d.jsx)("button",{className:r,onClick:e.test,children:"\u6d4b\u8bd5"}),Object(d.jsx)("button",{className:r,onClick:e.deploy,children:"\u53d1\u5e03"}),Object(d.jsx)("button",{className:r,onClick:e.testThoroughly,children:"\u5f7b\u5e95\u6d4b\u8bd5"}),Object(d.jsx)("button",{className:r,onClick:e.deployThoroughly,children:"\u5f7b\u5e95\u53d1\u5e03"})]}),n]});return Object(d.jsx)(x.Page,{header:"\u6279\u91cf\u7f16\u8bd1",footer:a,children:Object(d.jsx)(x.List,{ref:function(t){return e.list=t},items:t,item:{render:e.listCompileRow,onSelect:e.onSelect}})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"compile",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){var r,a,i,s,c,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.list.selectedItems,a=je.uqServer+"uq-compile/batch",e.t0=t,e.next="test"===e.t0?5:"deploy"===e.t0?7:9;break;case 5:return i="\u6d4b\u8bd5",e.abrupt("break",9);case 7:return i="\u53d1\u5e03",e.abrupt("break",9);case 9:return e.prev=9,s=new AbortController,c={test:"test"===t,thoroughly:n,uqs:r.map((function(e){return e.id}))},e.next=14,fetch(a,{method:"POST",signal:s.signal,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 14:u=e.sent,x.nav.push(Object(d.jsx)(En,{uq:void 0,services:void 0,action:t,actionName:i,res:u,abortController:s})),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(9),console.error("%s %s",a,e.t1);case 21:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(x.VPage),nr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSelect=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.devChanged(n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=function(){var t=e.controller,n=t.uqDevs,r=t.admins,a=r.devs.filter((function(e){return void 0!==n.find((function(t){return t.userId===e.id}))})),i=Object(d.jsx)("div",{className:"px-3 py-1 small text-muted",children:"\u5f00\u53d1\u8005"});return Object(d.jsx)(x.Page,{header:"\u589e\u51cf\u5f00\u53d1\u8005",children:Object(d.jsxs)("div",{className:"my-3",children:[i,Object(d.jsx)(x.List,{items:r.devs,none:"[\u65e0]",selectedItems:a,item:{onSelect:e.onSelect,render:e.row}})]})})},e.row=function(e){var t=e.icon,n=e.name,r=e.nick,a=r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("b",{children:r})," \xa0 ",Object(d.jsx)("small",{className:"text-muted",children:n})]}):Object(d.jsx)("b",{children:n}),i=Object(d.jsx)(x.Image,{className:"w-2-5c h-2-5c",src:t});return Object(d.jsx)(x.LMR,{className:"py-2 px-3 align-items-stretch",left:i,children:Object(d.jsx)("div",{className:"px-3",children:a})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.loadAdmins();case 2:this.openPage(this.page);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),rr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).pageItems=void 0,e.onSearch=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pageItems.first(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.pageItems=new ar;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pick",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pageItems=new ar,e.next=3,this.pageItems.first("");case 3:return e.next=5,this.vCall(ir);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Oe),ar=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"loadResults",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=je.unit.id,e.next=3,N.searchServer(a,t,n,r);case 3:return i=e.sent,e.abrupt("return",{$page:i});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),n}(x.PageItems),ir=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderServer=function(e,t){return Object(d.jsx)("div",{className:"px-3 py-2",children:Object(d.jsx)(Qe,{id:e.id})})},e.clickServer=function(t){e.closePage(),e.returnCall(t.id)},e.onClickNullServer=function(){e.closePage(),e.returnCall(null)},e.page=Object(ke.a)((function(){var t=Object(d.jsx)(x.SearchBox,{label:"\u9009\u62e9\u670d\u52a1\u5668",onSearch:e.controller.onSearch});return Object(d.jsxs)(x.Page,{header:t,children:[Object(d.jsxs)("div",{className:"px-3 py-2 cursor-pointer bg-white border-bottom",onClick:e.onClickNullServer,children:[Object(d.jsx)("span",{className:"text-danger mr-3",children:"NULL"}),Object(d.jsx)("small",{className:"text-muted",children:"[\u4e0d\u9009\u670d\u52a1\u5668]"})]}),Object(d.jsx)(x.List,{items:e.controller.pageItems.items,item:{render:e.renderServer,onClick:e.clickServer}})]})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),sr=(yt=function(){function e(t){Object(g.a)(this,e),this.unit=void 0,Object(V.a)(this,"cur",xt,this),Object(V.a)(this,"owners",gt,this),Object(V.a)(this,"admins",kt,this),Object(V.a)(this,"devs",wt,this),this.unit=t}return Object(k.a)(e,[{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.unit)){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==t.id){e.next=5;break}return e.abrupt("return");case 5:if(void 0===this.admins){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,A.unitAdmins(t.id);case 9:n=e.sent,r=[],a=[],i=[],n.forEach((function(e){var t=e.isOwner,n=e.isAdmin;e.isDev?i.push(e):(1===t&&r.push(e),1===n&&a.push(e))})),this.owners=r,this.admins=a,this.devs=i;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeOneUnitAdmin",value:function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));n>=0&&e.splice(n,1)}},{key:"removeUnitAdmin",value:function(e){void 0===e&&(e=this.cur),this.removeOneUnitAdmin(this.owners,e),this.removeOneUnitAdmin(this.admins,e),this.removeOneUnitAdmin(this.devs,e)}},{key:"unitSetAdmin",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.cur,i=a.id,s=this.unit.id,e.next=4,A.unitSetAdmin(i,s,t,n,r);case 4:a.isOwner=t,a.isAdmin=n,this.removeUnitAdmin(),0===t&&0===n?this.devs.unshift(a):(1===t&&this.owners.unshift(a),1===n&&this.admins.unshift(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"unitAddAdmin",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){var i,s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitAddAdmin(t,this.unit.id,n,r,a);case 2:if(void 0!==(i=e.sent)){e.next=5;break}return e.abrupt("return","unauthorized");case 5:if(void 0===(s=i.r)){e.next=8;break}return e.abrupt("return",s);case 8:return c=this.cur=i,this.removeUnitAdmin(),0===n&&0===r?this.devs.unshift(c):(1===n&&this.owners.unshift(c),1===r&&this.admins.unshift(c)),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unitDelAdmin",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitDelAdmin(this.unit.id,t.id);case 2:this.cur===t&&(this.cur=void 0),this.removeUnitAdmin(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xt=Object(q.a)(yt.prototype,"cur",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),gt=Object(q.a)(yt.prototype,"owners",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),kt=Object(q.a)(yt.prototype,"admins",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),wt=Object(q.a)(yt.prototype,"devs",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),yt),cr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).unitItems=void 0,e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"pick",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unitItems=je.accUnits,e.next=3,this.vCall(ur);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Oe),ur=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderUnit=function(e,t){return Object(d.jsx)("div",{className:"px-3 py-2",children:Object(d.jsx)(Le,{id:e.id})})},e.clickUnit=function(t){e.closePage(),e.returnCall(t.id)},e.onClickNullServer=function(){e.closePage(),e.returnCall(null)},e.page=Object(ke.a)((function(){return Object(d.jsx)(x.Page,{header:"\u9009\u62e9\u5c0f\u53f7($unit)",children:Object(d.jsx)(x.List,{items:e.controller.unitItems,item:{render:e.renderUnit,onClick:e.clickUnit}})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),or=(Ct=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).unit=void 0,e.uq=void 0,e.access=void 0,e.entities=void 0,e.admins=void 0,Object(V.a)(e,"uqDevs",At,Object(M.a)(e)),Object(V.a)(e,"uqList",Nt,Object(M.a)(e)),Object(V.a)(e,"services",St,Object(M.a)(e)),e.listRowClick=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.uq=n,t.next=3,e.loadUqEntities(n.id);case 3:e.openVPage(er);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUqDevsAdmin=function(){e.openVPage(nr)},e.serviceClick=function(t){e.openVPage(Qn,t)},e.onUqUpload=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){},x.nav.push(Object(d.jsx)(_n,{uq:e.uq,services:e.services}),n);case 2:case"end":return t.stop()}}),t)}))),e.onUqTest=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){},x.nav.push(Object(d.jsx)(Vn,{uq:e.uq,action:"test",services:e.services}),n);case 2:case"end":return t.stop()}}),t)}))),e.onUqDeploy=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(){},x.nav.push(Object(d.jsx)(Vn,{uq:e.uq,action:"deploy",services:e.services}),n);case 2:case"end":return t.stop()}}),t)}))),e.saveUq=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e.uq?r=D.a.clone(n):(r=D.a.clone(e.uq),D.a.merge(r,n)),r.unit=e.unit.id,t.next=4,N.saveUq(r);case 4:a=t.sent,r.id=a,e.uqList.push(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteUq=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.delUq(e.unit.id,e.uq.id);case 2:(n=e.uqList.findIndex((function(t){return t.id===e.uq.id})))>=0&&e.uqList.splice(n);case 4:case"end":return t.stop()}}),t)}))),e.showNewServicePage=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.openVPage(Kn);case 2:case"end":return t.stop()}}),t)}))),e.pickServer=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.newC(rr),t.next=3,n.pick();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),e.pickUnit=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.newC(cr),t.next=3,n.pick();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unit=t,e.next=3,N.uqs(this.unit.id,200);case 3:this.uqList=e.sent,this.openVPage(tr);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadUqEntities",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.uqGetEntities(this.unit.id,t);case 2:n=e.sent,r=n[0][0],this.access=r.access,this.entities=r.entities,this.services=n[1],this.uqDevs=n[4];case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAdmins",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.admins=new sr(this.unit),e.next=3,this.admins.load();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"devChanged",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={unit:this.unit.id,type:"uq",dev:this.uq.id,devUser:t.id},!0!==n){e.next=7;break}return e.next=4,N.adminDevAdd(r);case 4:this.uqDevs.push({userId:t.id,icon:t.icon,name:t.name,nick:t.nick,isOwner:0}),e.next=11;break;case 7:return e.next=9,N.adminDevDel(r);case 9:a=this.uqDevs.findIndex((function(e){return e.userId===t.id})),this.uqDevs.splice(a,1);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"changeServiceProp",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.changeServiceProp(this.unit.id,t.id,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"saveService",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=D.a.clone(t)).unit=this.unit.id,n.urlTest||(n.urlTest="-"),e.next=5,N.saveService(n);case 5:return r=e.sent,n.id=r,this.services.push(n),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delService",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delService(this.unit.id,t.id);case 2:(n=this.services.findIndex((function(e){return e.id===t.id})))>=0&&this.services.splice(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Oe),At=Object(q.a)(Ct.prototype,"uqDevs",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=Object(q.a)(Ct.prototype,"uqList",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=Object(q.a)(Ct.prototype,"services",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct),lr=Object(ke.a)(Pt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.unit,n=e.owner,r=e.name,a=e.discription,i=e.mine,s=e.version,c=e.date_init,u=e.date_update,o=Object(d.jsxs)("small",{children:[Object(d.jsx)("div",{children:a}),Object(d.jsx)(Ce,{date_update:u,date_init:c})]}),l=n+" / "+r;1===i&&(l=Object(d.jsx)("b",{children:l}));var h=["",{type:"component",component:Object(d.jsx)(x.LMR,{className:"py-2",left:Object(d.jsx)(x.FA,{className:"pt-2 pr-1 text-primary",name:"cogs",size:"3x"}),children:Object(d.jsxs)("div",{className:"pl-3",children:[Object(d.jsx)("div",{className:"mb-2",children:l}),o]})})},"",{type:"component",label:"\u6240\u6709\u8005",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:t,isLink:!0})})},{type:"component",label:"\u7248\u672c\u53f7",component:Object(d.jsx)(x.LMR,{className:"py-2 w-100",right:Object(d.jsx)("small",{className:"text-muted",children:Object(d.jsx)(x.EasyDate,{date:u})}),children:s})},"",{type:"component",label:"\u4ee3\u7801",vAlign:"stretch",component:Object(d.jsx)(hr,{})}];return Object(d.jsx)("div",{children:Object(d.jsx)(x.PropGrid,{rows:h,values:this.props})})}}]),n}(f.Component))||Pt,hr=Object(ke.a)(It=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){var e=je.dev.buses.cur;if(null===e)return"...";var t=e.source;return Object(d.jsx)("div",{className:"d-flex py-2 w-100 align-items-center",style:{flex:1},children:Object(d.jsx)("pre",{children:t})})}}]),n}(f.Component))||It,pr={title:"BUS",formRows:[{label:"\u540d\u79f0",field:{name:"name",type:"string",maxLength:100,required:!0}},{label:"\u63cf\u8ff0",field:{name:"discription",type:"string",maxLength:250},face:{type:"textarea"}},{label:"\u4ee3\u7801",field:{name:"source",type:"string",maxLength:25e3},face:{type:"textarea",rows:8}}],row:function(e){var t=e.owner,n=e.name,r=e.discription,a=e.mine,i=t+" / "+n;return Object(d.jsx)(x.LMR,{className:"py-2 px-3 align-items-stretch",left:Object(d.jsx)(x.FA,{className:"pt-2 pr-1 text-primary",name:"cogs",size:"lg"}),children:Object(d.jsxs)("div",{className:"px-3",children:[Object(d.jsx)("div",{children:1===a?Object(d.jsx)("b",{children:i}):i}),Object(d.jsx)("div",{children:Object(d.jsx)(x.Muted,{children:r})})]})})},items:function(){return je.dev.buses},repeated:{name:"name",err:"\u8ddf\u5df2\u6709\u7684\u540d\u79f0\u91cd\u590d"},info:lr,canEdit:function(e){return 1===e.mine}},dr={title:"Server",info:function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.discription,r=e.unit,a=e.date_init,i=e.date_update,s=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:t})}),Object(d.jsx)("div",{children:n})]}),c=Object(d.jsxs)("div",{className:"text-right small text-muted align-self-end",children:["\u66f4\u65b0:",Object(d.jsx)(x.EasyTime,{date:i}),Object(d.jsx)("br",{}),"\u521b\u5efa:",Object(d.jsx)(x.EasyDate,{date:a})]}),u=["",{type:"component",component:Object(d.jsx)(x.LMR,{className:"w-100 py-2",left:Object(d.jsx)(x.FA,{name:"server",className:"text-primary fa-2x mr-3"}),right:c,children:s})},"",{type:"component",label:"\u5f00\u53d1\u53f7",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:r,isLink:!0})})},{type:"string",label:"URL",name:"url"},{type:"string",label:"\u4e91\u670d\u52a1",name:"cloud"},{type:"string",label:"IP",name:"ip"}];return Object(d.jsx)("div",{children:Object(d.jsx)(x.PropGrid,{rows:u,values:this.props})})}}]),n}(f.Component),formRows:[{label:"\u540d\u79f0",field:{name:"name",type:"string",maxLength:50,required:!0}},{label:"URL",field:{name:"url",type:"string",maxLength:200,required:!0}},{label:"IP\u5730\u5740",field:{name:"ip",type:"string",maxLength:20}},{label:"\u63cf\u8ff0",field:{name:"discription",type:"string",maxLength:50,required:!1}},{label:"\u4e91\u670d\u52a1\u5546",field:{name:"cloud",type:"string",maxLength:20,required:!1}}],row:function(e){var t=e.name,n=e.discription,r=e.cloud;return Object(d.jsx)(x.LMR,{className:"py-2 px-3 align-items-center",left:Object(d.jsx)(x.FA,{name:"server",className:"text-primary fa-lg"}),children:Object(d.jsxs)("div",{className:"px-3",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("b",{className:"mr-3",children:t}),Object(d.jsx)(x.Muted,{children:r})]}),Object(d.jsx)("div",{className:"small text-muted",children:n})]})})},items:function(){return je.dev.servers},repeated:{name:"name",err:"\u8ddf\u5df2\u6709\u670d\u52a1\u5668\u540d\u79f0\u91cd\u590d"},canEdit:function(e){var t=je.unit,n=t.isOwner,r=t.isAdmin;return n>0||r>0}},fr=Object(ke.a)(Ut=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).itemClick=function(t){e.props.items().cur=Object(F.n)(t),x.nav.push(Object(d.jsx)(br,Object(ye.a)({},e.props)))},e}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.items().load();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"newItem",value:function(){this.props.items().cur=void 0,x.nav.push(Object(d.jsx)(vr,Object(ye.a)({},this.props)))}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.items;je.unit;var a=je.unit.isOwner>0&&Object(d.jsx)("button",{className:"btn btn-success btn-sm mr-2",onClick:function(){return e.newItem()},children:Object(d.jsx)(x.FA,{name:"plus"})});return Object(d.jsx)(x.Page,{header:n,right:a,children:Object(d.jsx)(x.List,{items:r().items,item:{render:this.props.row,onClick:this.itemClick}})})}}]),n}(f.Component))||Ut,vr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).tonvaForm=void 0,r.onSubmit=r.onSubmit.bind(Object(M.a)(r)),r}return Object(k.a)(n,[{key:"onSubmit",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.owner=this.props,e.next=3,this.props.items().check(t);case 3:if(e.t0=e.sent,!1!==e.t0){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.props.items().saveCur(t);case 8:return!0===e.sent?x.nav.pop():(n=this.props.repeated,this.tonvaForm.formView.setError(n.name,n.err)),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props,r=n.title,a=n.steps,i=n.stepHeader,s=this.props,c=s.formRows,u=s.items;return e=void 0!==a?Object(d.jsx)(Fn.MultiStep,{className:"mt-4",header:i,steps:a,first:"step1",onSubmit:this.onSubmit}):void 0!==c?Object(d.jsx)(Fn.TonvaForm,{ref:function(e){return t.tonvaForm=e},className:"m-3",formRows:c,onSubmit:this.onSubmit,initValues:u().cur}):"ObjViewProps: no steps and no formRows",Object(d.jsx)(x.Page,{header:"\u65b0\u589e"+r,children:e})}}]),n}(f.Component),br=Object(ke.a)(Et=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).menuItems=[{caption:"\u4fee\u6539"+e.props.title,action:e.editItem.bind(Object(M.a)(e)),icon:"edit"},{caption:"\u5220\u9664",action:e.deleteItem.bind(Object(M.a)(e)),icon:"trash-o"}],e}return Object(k.a)(n,[{key:"deleteItem",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("\u771f\u7684\u8981\u5220\u9664\u5417\uff1f\u7cfb\u7edf\u5220\u9664\u65f6\u5e76\u4e0d\u4f1a\u68c0\u67e5\u76f8\u5173\u5f15\u7528\uff0c\u8bf7\u8c28\u614e")){e.next=4;break}return e.next=3,this.props.items().del();case 3:x.nav.pop();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editItem",value:function(){x.nav.push(Object(d.jsx)(mr,Object(ye.a)({},this.props)))}},{key:"render",value:function(){var e=this.props.items().cur,t=[],n=this.props.extraMenuActions;void 0!==n&&t.push.apply(t,Object(B.a)(n)),t.push.apply(t,Object(B.a)(this.menuItems));var r,a=this.props.canEdit;return a&&!0===a(e)&&(r=Object(d.jsx)(x.DropdownActions,{actions:t,className:"btn-primary mr-2"})),Object(d.jsx)(x.Page,{header:this.props.title+" - \u8be6\u7ec6\u8d44\u6599",right:r,children:f.createElement(this.props.info,e)})}}]),n}(f.Component))||Et,mr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(e){var r;return Object(g.a)(this,n),(r=t.call(this,e)).actions=[{caption:"\u5220\u9664",action:r.deleteItem.bind(Object(M.a)(r)),icon:"trash-o"}],r.onSubmit=r.onSubmit.bind(Object(M.a)(r)),r}return Object(k.a)(n,[{key:"onSubmit",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.items().check(t);case 2:if(e.t0=e.sent,!1!==e.t0){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.props.items().saveCur(t);case 7:return x.nav.pop(),e.abrupt("return");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.confirm("\u771f\u7684\u8981\u5220\u9664\u5417\uff1f\u7cfb\u7edf\u5220\u9664\u65f6\u5e76\u4e0d\u4f1a\u68c0\u67e5\u76f8\u5173\u5f15\u7528\uff0c\u8bf7\u8c28\u614e")){e.next=4;break}return e.next=3,this.props.items().del();case 3:x.nav.pop();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(d.jsx)(x.DropdownActions,{actions:this.actions,className:"btn-primary mr-2"});return Object(d.jsx)(x.Page,{header:"\u4fee\u6539 "+this.props.title,right:e,back:"close",children:Object(d.jsx)(Fn.TonvaForm,{className:"m-3",formRows:this.props.formRows,onSubmit:this.onSubmit,initValues:this.props.items().cur})})}}]),n}(f.Component),jr="text-info",Or=Object(d.jsx)(x.FA,{name:"angle-right"}),yr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).appsAction={title:"\u542f\u505cApp",right:Or,icon:"play-circle-o",page:hn},e.newUsersAction={title:"App\u7ba1\u7406\u5458",right:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("small",{className:"text-muted",children:"\u5404App\u7684\u7ba1\u7406\u5458\u6c47\u603b"})," \xa0 ",Or]}),icon:"user-o",controller:e.controller.cUsers},e.adminsAction={title:Object(we.unitCaption)(e.controller.unit)+"\u603b\u7ba1",right:Or,icon:"universal-access",controller:e.controller.cAdmins},e.uqRolesAction={title:"UQ\u89d2\u8272\u8bbe\u7f6e",right:Or,icon:"universal-access",controller:e.controller.cUqRoles},e.noneAction={title:"\u8bf7\u8010\u5fc3\u7b49\u5f85\u5206\u914d\u4efb\u52a1",icon:"hourglass-start"},e.row=function(e,t){if("string"===typeof e)return Object(d.jsx)("div",{className:"px-3 pt-3 pb-1 small text-muted cursor-default",style:{backgroundColor:"#f0f0f0"},children:e});var n,r,a,i=e.iconClassName,s=e.className;if(void 0===i&&(i=jr),!0===e.dev){var c=e,u=c.icon,o=c.title,l=c.count;n="string"===typeof u?Object(d.jsx)(x.FA,{className:i,name:u,fixWidth:!0,size:"lg"}):u,r=o,a=l>0&&Object(d.jsx)("span",{children:l})}else{var h=e,p=h.right,f=h.title,v=h.icon;n="string"===typeof v?Object(d.jsx)(x.FA,{className:i,name:v,fixWidth:!0,size:"lg"}):e.icon,r=f,a=Object(d.jsx)("span",{children:p})}return Object(d.jsx)(x.LMR,{className:ge()("px-3 py-2 align-items-center",s),left:n,right:a,children:Object(d.jsx)("div",{className:"px-3",children:r})})},e.rowClick=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).page,a=n.onClick,void 0===r){e.next=4;break}return x.nav.push(Object(d.jsx)(r,{})),e.abrupt("return");case 4:if(!a){e.next=7;break}return a(),e.abrupt("return");case 7:if(void 0===(i=t.objProps)){e.next=10;break}return e.abrupt("return",x.nav.push(Object(d.jsx)(fr,Object(ye.a)({},i))));case 10:if(!(s=t.controller)){e.next=15;break}return e.next=14,s.start(je.unit);case 14:return e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.appClick=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.showAppXAccount(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClickUnitProps=function(){e.openPageElement(Object(d.jsx)(xr,{}))},e.page=Object(ke.a)((function(){var t=je.unit;if(void 0===t)return null;var n,r,a=e.buildItems();if(void 0===a)return Object(d.jsx)(x.Page,{header:""});if(void 0!==t){var i,s,c=t.name,u=t.nick,o=t.icon,l=t.discription;u?(i=u,s=Object(d.jsx)("h6",{children:Object(d.jsx)("small",{className:"text-secondary",children:c})})):i=c;var h=Object(we.unitCaption)(e.controller.unit);void 0!==h&&(n=h+" - "+i),r=Object(d.jsx)(x.LMR,{className:"px-3 my-4 bg-white py-2 cursor-pointer",onClick:e.onClickUnitProps,left:Object(d.jsx)("div",{children:Object(d.jsx)(x.Image,{className:"w-3c h-3c",src:o})}),children:Object(d.jsxs)("div",{className:"px-3",children:[Object(d.jsx)(x.LMR,{right:s,children:Object(d.jsx)("h6",{className:"text-dark font-weight-bold",children:i})}),Object(d.jsx)("div",{className:"text-info overflow-hidden h-max-3c",children:l})]})})}else n="\u7cfb\u7edf\u7ba1\u7406";return Object(d.jsxs)(x.Page,{header:n,logout:e.controller.logout,children:[r,a.length>0&&Object(d.jsx)(x.List,{items:a,item:{render:e.row,onClick:e.rowClick}}),e.appRender()]})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildItems",value:function(){var e=this,t=je.unit,n=je.dev,r=t.isAdmin,a=t.isOwner,i=t.isDev,s=t.type,c=[];if(1!==a&&1!==r||(c.push(this.uqRolesAction),c.push(this.adminsAction)),0!==(2&s)&&1===r&&c.push(this.newUsersAction),0!==(1&s)){var u=n.counts;if(1!==r&&1!==i||c.push("\u5f00\u53d1\u53f7\u7ba1\u7406"),1===r){var o={title:"\u5f00\u53d1\u8005",right:Or,icon:"user-o",onClick:function(){var t=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.onShowDevelopers();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),className:"border-bottom",iconClassName:"text-success"};c.push(o)}if(1===i){if(a>0){var l={dev:!0,title:"APP",count:u&&u.app,icon:"tablet",onClick:function(){return e.controller.startApp(t)}};c.push(l)}var h={dev:!0,title:"UQ",count:u&&u.uq,icon:"database",onClick:function(){return e.controller.startUq(t)}},p={dev:!0,title:"BUS",count:u&&u.bus,icon:"cogs",objProps:pr};if(c.push(h,p),a>0){var d={dev:!0,title:"Server",count:u&&u.server,icon:"server",objProps:dr};c.push(d)}}}return c}},{key:"appItemRender",value:function(e,t){var n=e.name,r=e.discription,a=e.icon,i=0===e.inUnit&&Object(d.jsx)(x.FA,{className:"text-danger",name:"ban"});return Object(d.jsx)(x.LMR,{className:"px-3 py-2",left:Object(d.jsx)(x.Badge,{children:Object(d.jsx)(x.Image,{src:a})}),right:i,children:Object(d.jsxs)("div",{className:"px-3",children:[Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:n})}),Object(d.jsx)("small",{className:"text-muted",children:r})]})})}},{key:"newItem",value:function(){x.nav.push(Object(d.jsx)(ln,{}))}},{key:"appRender",value:function(){var e=this,t=je.apps;if(void 0!==t&&0!==t.length){var n=je.unit,r=n.isAdmin,a=n.isOwner,i=(1===r||1===a)&&Object(d.jsx)("button",{className:"btn btn-success btn-sm",onClick:function(){return e.newItem()},children:Object(d.jsx)(x.FA,{name:"plus"})});return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.LMR,{className:"mt-4 mb-2 px-3 small text-muted align-items-end",right:i,children:Object(d.jsx)("div",{className:"align-self-end",children:"App"})}),Object(d.jsx)(x.List,{items:je.apps,item:{render:this.appItemRender,onClick:this.appClick}})]})}}}]),n}(x.VPage),xr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).schema=[{name:"icon",type:"image"},{name:"nick",type:"string"},{name:"discription",type:"string"}],e.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u6807\u5fd7\u56fe"},discription:{widget:"text",label:"\u63cf\u8ff0",placeholder:"\u7b80\u77ed\u6e05\u6670\u7684\u63cf\u8ff0"}}},e.onItemChanged=function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,e.next=3,je.unitChangeProp(a,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"render",value:function(){var e=je.unit,t=e.isRoot,n=e.isOwner,r=e.readMe,a=Object(we.unitCaption)(e),i=r&&Object(d.jsx)("div",{className:"p-3",dangerouslySetInnerHTML:{__html:r}});return Object(d.jsxs)(x.Page,{header:a+"\u8be6\u60c5",children:[Object(d.jsx)(x.Edit,{schema:this.schema,uiSchema:this.uiSchema,data:je.unit,onItemChanged:this.onItemChanged,stopEdit:!(t>0&&n>0)}),i]})}}]),n}(f.Component),gr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClickUnit=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.closePage(),t.next=3,e.controller.onShowUnit(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectUnitPage=function(){var t=e.controller.logout,n=je.accUnits,r=je.devUnits,a=je.bothUnits,i={render:e.renderUnitAdmin,onClick:e.onClickUnit},s=function(e,t){return e.length>0&&Object(d.jsxs)("div",{className:"my-3",children:[Object(d.jsx)("div",{className:"px-3 py-1 small text-muted",children:t}),Object(d.jsx)(x.List,{items:e,item:i})]})};return Object(d.jsxs)(x.Page,{header:"\u540c\u82b1\u7ba1\u7406\u5458",logout:t,children:[s(n,"\u5c0f\u53f7"),s(r,"\u5f00\u53d1\u53f7"),s(a,"\u53cc\u53f7")]})},e.noUnitPage=function(){var t=e.controller,n=t.user,r=t.logout,a=n.nick,i=n.name;return Object(d.jsx)(x.Page,{header:"\u6ca1\u6709\u5c0f\u53f7",logout:r,children:Object(d.jsxs)("div",{className:"p-3 small text-info",children:[a||i,": \u6ca1\u6709\u9700\u8981\u7ba1\u7406\u7684\u5c0f\u53f7"]})})},e.renderUnitAdmin=function(e,t){var n,r,a=e.name,i=e.nick,s=e.type;return 1&s?(n="code",r="text-success"):2&s?(n="flag",r="text-primary"):(n="start",r="text-danger"),Object(d.jsx)(x.LMR,{className:"px-3 py-2",right:Object(d.jsxs)("span",{className:"small text-muted",children:["id: ",e.id]}),children:Object(d.jsxs)("div",{children:[Object(d.jsx)(x.FA,{name:n,fixWidth:!0,className:ge()("mr-3",r)}),i||a]})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.controller.isProduction,n=je.unitAdmins,!1!==t){e.next=13;break}e.t0=n.length,e.next=0===e.t0?8:1===e.t0?10:6;break;case 6:return this.openPage(this.selectUnitPage),e.abrupt("return");case 8:return this.openPage(this.noUnitPage),e.abrupt("return");case 10:return e.next=12,this.controller.onShowUnit(n[0]);case 12:return e.abrupt("return");case 13:if(void 0!==je.unit){e.next=16;break}return this.openPage(this.noUnitPage),e.abrupt("return");case 16:return e.next=18,this.controller.onShowUnit(n[0]);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"view",get:function(){}}]),n}(x.VPage),kr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller,n=t.appXAccount,r=t.showDetail,a=t.users,i=t.showUserList,s=(0,t.calcUserColl)(),c=n.name,u=n.discription,o=n.icon,l=n.date_init,h=n.date_update,p=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:u}),Object(d.jsx)(Ce,{date_update:h,date_init:l})]}),f=Object(d.jsx)("button",{className:"btn btn-success btn-sm mr-2 align-self-center",onClick:r,children:Object(d.jsx)(x.FA,{name:"ellipsis-h",fixWidth:!0})}),v=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:o,main:c,discription:p})},""];return Object(d.jsxs)(x.Page,{header:"App - "+c,right:f,children:[Object(d.jsx)(x.PropGrid,{rows:v,values:{}}),e.renderAdmins(s),e.renderRoles(s),e.renderUsers(s),Object(d.jsx)("div",{className:"h-1c"}),e.row("\u5168\u90e8\u7528\u6237",a.length,i,"text-info","list")]})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"row",value:function(e,t,n,r,a){var i=Object(d.jsx)(x.FA,{className:"mr-3 "+r,fixWidth:!0,name:a||"user",size:"lg"}),s=Object(d.jsxs)(d.Fragment,{children:[t," \xa0 \xa0 ",Object(d.jsx)(x.FA,{className:"align-self-center",name:"angle-right"})]});return Object(d.jsx)(x.LMR,{className:"my-2 px-3 py-2 bg-white align-items-center",onClick:n,left:i,right:s,children:e})}},{key:"renderAdmins",value:function(e){var t=this.controller,n=t.showAdmins;if(1===t.unit.isAdmin)return this.row("\u7ba1\u7406\u5458",e.admins.length,n,"text-danger")}},{key:"renderRoles",value:function(e){var t=this.controller,n=t.showRoles,r=t.roleUserCount;if(e.roleUsers)return this.row("\u89d2\u8272\u7528\u6237",r,n,"text-success")}},{key:"renderUsers",value:function(e){var t=this.controller.showUsers;return this.row("\u666e\u901a\u7528\u6237",e.users.length,t,"text-info")}}]),n}(x.VPage),wr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderUqRow=function(e,t){var n=e.name,r=e.owner,a=e.discription;return Object(d.jsxs)(x.LMR,{className:"py-2",right:Object(d.jsx)("small",{className:"text-muted",children:a}),children:[r," / ",n]})},e.onTurnOnOff=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.appTurnOnOff();case 2:if(t.t0=t.sent,!0!==t.t0){t.next=5;break}e.closePage();case 5:case"end":return t.stop()}}),t)}))),e.status=function(){var t,n,r=e.controller.appXAccount.inUnit;return 1===r?(n=Object(d.jsxs)("button",{className:"btn btn-danger",onClick:e.onTurnOnOff,children:[Object(d.jsx)(x.FA,{name:"ban"})," \u505c\u7528APP"]}),t="\u8fd0\u884c\u4e2d"):0===r?(n=Object(d.jsxs)("button",{className:"btn btn-success",onClick:e.onTurnOnOff,children:[Object(d.jsx)(x.FA,{name:"refresh",size:"lg"})," \u6062\u590dAPP"]}),t="\u505c\u8fd0\u4e2d"):(n=Object(d.jsxs)("button",{className:"btn btn-primary",onClick:e.onTurnOnOff,children:[Object(d.jsx)(x.FA,{name:"plus",size:"lg"})," \u65b0\u5efa"]}),t="\u542f\u7528APP"),Object(d.jsx)(x.LMR,{className:"w-100 align-items-center my-1",right:n,children:t})},e.page=Object(ke.a)((function(){var t=e.controller,n=t.appXAccount,r=t.uqAccesses,a=n.unit,i=n.name,s=n.discription,c=n.icon,u=n.date_init,o=n.date_update,l=Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:s}),Object(d.jsx)(Ce,{date_update:o,date_init:u})]}),h=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:c,main:i,discription:l})},"",{type:"component",label:"\u5f00\u53d1\u53f7",component:Object(d.jsx)("div",{className:"py-2",children:Object(d.jsx)(Le,{id:a,isLink:!0})})},{type:"component",label:"\u5173\u8054UQ",component:Object(d.jsx)(x.List,{className:"w-100",items:r,item:{render:e.renderUqRow}})},"",{type:"component",label:"\u72b6\u6001",component:e.status()}];return Object(d.jsx)(x.Page,{header:"App\u8be6\u60c5 - "+i,children:Object(d.jsx)(x.PropGrid,{rows:h,values:{},labelFixLeft:!0})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Cr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).row=Object(ke.a)((function(t){var n=t.user,r=R.users.get(n.id);if(null!==r){var a=r.name,i=r.nick,s=r.icon,c=n.assigned,u=n.isAdmin,o=n.roleBins;if(void 0!==c&&(i=c),void 0!==a){var l=e.controller,h=l.uqRoles,p=l.showEditUserPage,f=l.user,v=Object(d.jsx)(x.Image,{className:"w-3c h-3c mr-3",src:s}),b=!0===(n.id===f.id)?Object(d.jsxs)("div",{children:[i?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("b",{children:i})," ",a]}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("b",{children:a})}),"\xa0 ",Object(d.jsx)("small",{className:"text-muted",children:"[\u81ea\u5df1]"})]}):Object(d.jsx)("div",{children:i?Object(d.jsxs)(d.Fragment,{children:[i," ",Object(d.jsx)("small",{children:a})]}):Object(d.jsx)(d.Fragment,{children:a})}),m=[];if(void 0!==h)for(var j=h.length,O=0;O<j;O++)0!==(o&1<<O)&&m.push(e.box(h[O],"px-2 text-primary border-primary bg-white"));return Object(d.jsxs)(x.LMR,{className:"px-3 py-3 cursor-pointer",left:v,onClick:function(){return p(n)},children:[b,Object(d.jsxs)("div",{className:"d-flex flex-wrap mt-1",children:[!0===u&&e.box("\u7ba1\u7406\u5458","px-2 text-success border-success bg-light"),m]})]})}}})),e.box=function(e,t){return Object(d.jsx)("div",{className:"mr-3 py-0 small border rounded "+t,children:e},e)},e}return Object(k.a)(n,[{key:"render",value:function(e){return f.createElement(this.row,{user:e})}}]),n}(x.View),Ar=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(e){var t=this;return Object(d.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",onClick:function(){return t.controller.showAddUserPage(e)},children:Object(d.jsx)(x.FA,{name:"plus"})})}}]),n}(x.View),Nr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller,n=t.appXAccount,r=t.renderUser,a=n.name,i=e.controller.calcUserColl();return Object(d.jsx)(x.Page,{header:"\u7ba1\u7406\u5458 - "+a,right:e.renderVm(Ar,-1),children:Object(d.jsx)(x.List,{items:i.admins,item:{render:r}})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Sr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller.appXAccount.name,n=e.controller.calcUserColl().roleUsers;return Object(d.jsx)(x.Page,{header:"\u89d2\u8272\u7528\u6237 - "+t,children:Object(d.jsx)("div",{className:"py-0",children:n&&n.map((function(t,n){return e.renderRole(t,n)}))})})})),e.renderRole=function(t,n){var r=e.controller,a=r.uqRoles,i=r.renderUser;if(a[n])return Object(d.jsxs)("div",{className:"my-3",children:[Object(d.jsx)(x.LMR,{className:"pl-3 pb-1 align-items-end",right:e.renderVm(Ar,n+1),children:a[n]}),Object(d.jsx)(x.List,{items:t,item:{render:i},none:function(){return Object(d.jsx)("small",{className:"text-muted",children:"[\u65e0]"})}})]},n)},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Pr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller,n=t.appXAccount,r=t.renderUser,a=n.name,i=e.controller.calcUserColl();return Object(d.jsx)(x.Page,{header:"\u666e\u901a\u7528\u6237 - "+a,right:e.renderVm(Ar,-2),children:Object(d.jsx)(x.List,{items:i.users,item:{render:r}})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Ir=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).roleNum=void 0,e.schema=[{name:"user",type:"string",required:!0},{name:"submit",type:"submit"}],e.uiSchema={items:{user:{widget:"text",label:"\u7528\u6237",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u8d26\u53f7"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},e.onSubmit=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.addUser(e.roleNum,r.data.user);case 2:if(void 0!==(a=t.sent)){t.next=6;break}return e.closePage(),t.abrupt("return");case 6:r.setError("user",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("user"!==n){t.next=4;break}return t.next=3,e.onSubmit("login",r);case 3:return t.abrupt("return");case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=function(){var t=e.controller.getRoleCaption(e.roleNum);return Object(d.jsx)(x.Page,{header:"\u65b0\u589e - "+t,back:"close",children:Object(d.jsx)("div",{className:"m-5 px-5 py-3 bg-white border rounded",children:Object(d.jsx)(x.Form,{schema:e.schema,uiSchema:e.uiSchema,onEnter:e.onEnter,onButtonClick:e.onSubmit})})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.roleNum=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.VPage),Ur=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller,n=t.appXAccount,r=t.users,a=t.renderUser,i=n.name;return Object(d.jsx)(x.Page,{header:"\u7528\u6237\u5217\u8868 - "+i,children:Object(d.jsx)(x.List,{items:r,item:{render:a}})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Er=Object(ke.a)(_t=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=function(t){return t.preventDefault(),x.nav.push(Object(d.jsx)(_r,{id:e.props.id})),!1},e}return Object(k.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.id,r=t.className,a=t.assigned,i=t.isLink,s=R.users.get(n);if(null===s)e=n;else{var c=s.name,u=s.nick;void 0!==a&&(u=a),e=void 0!==c?u?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("b",{children:u})," ",c]}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("b",{children:c})}):n}return Ae(i,r,this.onClick,e)}}]),n}(f.Component))||_t,_r=Object(ke.a)(Rt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).rows=void 0,e}return Object(k.a)(n,[{key:"render",value:function(){var e=R.users.get(this.props.id),t=e.name,n=e.nick,r=e.icon;return this.rows=["",{type:"component",component:Object(d.jsx)(x.Media,{icon:r,main:n,discription:t})},""],Object(d.jsx)(x.Page,{header:"\u7528\u6237 - \u8be6\u7ec6\u8d44\u6599",children:Object(d.jsx)(x.PropGrid,{rows:this.rows,values:this.props})})}}]),n}(f.Component))||Rt,Rr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).user=void 0,e.row=function(e,t,n,r,a){if(e)return Object(d.jsxs)("label",{className:ge()("px-3 py-2 m-0 d-flex bg-white mb-1 w-100 align-items-center",{"cursor-pointer":!r}),children:[Object(d.jsx)("input",{type:"checkbox",className:"mr-4",defaultChecked:n,disabled:r,onChange:a}),Object(d.jsx)("span",{className:t,children:e})]})},e.onAdminChanged=function(){var t=Object(y.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.setAppAdmin(e.user,n);case 2:void 0===(r=t.sent)?e.closePage():alert(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRoleChanged=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.setAppRole(e.user,r,n);case 2:void 0!==(a=t.sent)&&alert(a);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onDelUer=Object(y.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.delUser(e.user);case 2:void 0===(n=t.sent)?e.closePage():alert(n);case 4:case"end":return t.stop()}}),t)}))),e.page=function(){var t=e.user,n=t.isAdmin,r=t.roleBins,a=Object(d.jsxs)(d.Fragment,{children:["\u7528\u6237 -\xa0",Object(d.jsx)(Er,{id:e.user.id})]}),i=e.user.id!==e.controller.user.id&&Object(d.jsx)("div",{className:"text-right m-3",children:Object(d.jsxs)("button",{onClick:e.onDelUer,className:"btn btn-sm btn-outline-primary",children:[Object(d.jsx)(x.FA,{name:"trash"})," \u4eceApp\u4e2d\u79fb\u9664"]})}),s=e.user.id===e.controller.user.id,c=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onAdminChanged(n.target.checked);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)(x.Page,{header:a,children:Object(d.jsxs)("div",{className:"my-3",children:[e.row("App\u7ba1\u7406\u5458","text-success font-weight-bold",n,s,c),Object(d.jsx)("div",{className:"h-1c"}),e.controller.uqRoles.map((function(t,n){var a=function(){var t=Object(y.a)(O.a.mark((function t(r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onRoleChanged(r.target.checked,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=0!==(r&1<<n);return e.row(t,"text-primary",i,!1,a)})),i]})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.user=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.VPage),Tr=(Tt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).unit=void 0,e.appXAccount=void 0,e.uqAccesses=void 0,e.uqMain=void 0,e.uqRoles=void 0,Object(V.a)(e,"users",Vt,Object(M.a)(e)),Object(V.a)(e,"unitOnly",qt,Object(M.a)(e)),Object(V.a)(e,"roleUserCount",Ft,Object(M.a)(e)),e.calcUserColl=function(){var t,n=[],r=[],a=0,i=0;if(e.uqRoles){i=e.uqRoles.length,t=[];for(var s=0;s<i;s++)t.push([])}var c,u=Object(T.a)(e.users);try{for(u.s();!(c=u.n()).done;){var o=c.value,l=o.isAdmin,h=o.roleBins,p=!0,d=!1;!0===l&&(n.push(o),p=!1);for(var f=1,v=0;v<i;v++,f<<=1)if(0!==(h&f)){var b=t[v];e.user.id===o.id?b.unshift(o):b.push(o),p=!1,d=!0}!0===d&&++a,!0===p&&r.push(o)}}catch(m){u.e(m)}finally{u.f()}return e.roleUserCount=a,{admins:n,users:r,roleUsers:t}},e.showDetail=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.loadAppUqs(e.appXAccount.id);case 2:e.uqAccesses=t.sent,e.openVPage(wr);case 4:case"end":return t.stop()}}),t)}))),e.appTurnOnOff=Object(y.a)(O.a.mark((function t(){var n,r,a,i,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.appXAccount,r=n.id,a=n.inUnit,i=n.name,0!==a){t.next=9;break}return t.next=4,je.restoreUnitApp(r);case 4:if(!(t.sent<=0)){t.next=8;break}return alert("app \u6216\u8005 uq \u6ca1\u6709\u5b9a\u4e49 service"),t.abrupt("return",!1);case 8:return t.abrupt("return",!0);case 9:if(1!==a){t.next=18;break}return t.next=12,e.confirm({caption:"\u505c\u8fd0 - "+i,message:"App\u505c\u8fd0\u4e4b\u540e\uff0c\u4efb\u4f55\u4eba\u90fd\u65e0\u6cd5\u8bbf\u95ee\u3002\u8bf7\u786e\u8ba4",ok:"\u786e\u8ba4"});case 12:if("ok"===t.sent){t.next=15;break}return t.abrupt("return",!1);case 15:return t.next=17,je.stopUnitApp(r);case 17:return t.abrupt("return",!0);case 18:return(s=D.a.clone(e.appXAccount)).id=r,s.inUnit=1,t.next=23,je.addUnitApp(s);case 23:if(!(t.sent<=0)){t.next=27;break}return alert("app \u6216\u8005 uq \u6ca1\u6709\u5b9a\u4e49 service"),t.abrupt("return",!1);case 27:return t.abrupt("return",!0);case 28:case"end":return t.stop()}}),t)}))),e.showAdmins=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(Nr);case 1:case"end":return t.stop()}}),t)}))),e.showRoles=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(Sr);case 1:case"end":return t.stop()}}),t)}))),e.showUsers=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(Pr);case 1:case"end":return t.stop()}}),t)}))),e.showUserList=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(Ur);case 1:case"end":return t.stop()}}),t)}))),e.showAddUserPage=function(t){e.openVPage(Ir,t)},e.showEditUserPage=function(t){e.openVPage(Rr,t)},e.renderUser=function(t,n){return e.renderView(Cr,t)},e.delUser=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a,i,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.setAppRoles(e.unit.id,e.appXAccount.id,n.id,void 0,0);case 2:if(void 0!==(r=t.sent)){t.next=5;break}return t.abrupt("return","unauthorized");case 5:if(a=r.id,void 0===(i=r.r)){t.next=8;break}return t.abrupt("return",i);case 8:s=e.users.findIndex((function(e){return e.id===a})),e.users.splice(s,1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unit=t,this.appXAccount=n,this.unitOnly=1===n.unitOnly,e.next=5,this.loadAppAdmins();case 5:this.openVPage(kr);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadAppAdmins",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a,i,s,c,u,o,l,h,p,d,f,v,b,m,j,y,x,g,k;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.unitAppAdmins(this.unit.id,this.appXAccount.id);case 2:t=e.sent,n=t[0][0],r=n.uq_main,a=n.roles,this.uqMain=r,a&&(this.uqRoles=a.split("\t")),this.users=[],i=Object(T.a)(t[1]);try{for(i.s();!(s=i.n()).done;)c=s.value,u=c.user,(o=this.insertUser(u))>=0&&(this.users[o].isAdmin=!0)}catch(O){i.e(O)}finally{i.f()}l=0,h=Object(T.a)(t[2]);try{for(h.s();!(p=h.n()).done;)d=p.value,f=d.user,v=d.roles,(b=this.insertUser(f))>=0&&(this.users[b].roleBins=v,v||l++)}catch(O){h.e(O)}finally{h.f()}m=Object(T.a)(t[3]);try{for(m.s();!(j=m.n()).done;)y=j.value,x=y.user,g=y.assigned,(k=this.insertUser(x))>=0&&(this.users[k].assigned=g)}catch(O){m.e(O)}finally{m.f()}this.roleUserCount=l;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"insertUser",value:function(e){var t,n=this.users.length;for(t=0;t<n;t++){var r=this.users[t].id;if(e===r)return t;if(e<r)break}return this.users.splice(t,0,{id:e}),t}},{key:"toRolesArr",value:function(e){if(void 0!==this.uqRoles){for(var t=[],n=this.uqRoles.length,r=1,a=0;a<n;a++,r<<=1)(e&r)===r&&t.push(a);return t}}},{key:"getRoleCaption",value:function(e){switch(e){case-1:return"[App\u7ba1\u7406\u5458]";case-2:return"[\u666e\u901a\u7528\u6237]";default:return this.uqRoles[e]}}},{key:"addUser",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){var r,a,i,s,c,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t<=0?t:1<<t-1,e.next=3,A.setAppRoles(this.unit.id,this.appXAccount.id,void 0,n,r);case 3:if(void 0!==(a=e.sent)){e.next=6;break}return e.abrupt("return","unauthorized");case 6:if(i=a.r,s=a.id,void 0===i){e.next=9;break}return e.abrupt("return",i);case 9:c=this.insertUser(s),u=this.users[c],t>0?u.roleBins|=1<<t-1:-1===t&&(u.isAdmin=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setAppAdmin",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n){var r,a,i,s,c,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.isAdmin,i=t.roleBins,s=t.assigned,a=n,e.next=4,A.setAppAdmin(this.unit.id,this.appXAccount.id,r,void 0,!0===a?1:0);case 4:if(void 0!==(c=e.sent)){e.next=7;break}return e.abrupt("return","unauthorized");case 7:if(void 0===(u=c.r)){e.next=10;break}return e.abrupt("return",u);case 10:this.renewUser(t,a,i,s);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setAppRole",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a,i,s,c,u,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,i=t.isAdmin,s=t.assigned,!0===r?t.roleBins|=1<<n:t.roleBins&=~(1<<n),c=t.roleBins,e.next=5,A.setAppRoles(this.unit.id,this.appXAccount.id,a,void 0,c);case 5:if(void 0!==(u=e.sent)){e.next=8;break}return e.abrupt("return","unauthorized");case 8:if(void 0===(o=u.r)){e.next=11;break}return e.abrupt("return",o);case 11:this.renewUser(t,i,c,s);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"renewUser",value:function(e,t,n,r){var a=e.id,i=this.users.findIndex((function(e){return e.id===a}));this.users[i]={id:a,isAdmin:t,roleBins:n,assigned:r}}}]),n}(Oe),Vt=Object(q.a)(Tt.prototype,"users",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qt=Object(q.a)(Tt.prototype,"unitOnly",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=Object(q.a)(Tt.prototype,"roleUserCount",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt),Vr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderUserUqsBuses=function(t,n){var r,a=e.controller.adminDevs.getUserUqsBuses(t),i=a.uqs,s=a.buses,c=R.users.get(t);if(null!==c){var u=c.name,o=c.nick,l=c.icon;r=Object(d.jsx)(x.LMR,{className:"w-100",left:Object(d.jsx)(x.Image,{className:"w-3c h-3c mr-4",src:l}),right:Object(d.jsxs)("div",{className:"text-right",children:["uq: ",i.length,Object(d.jsx)("br",{}),"bus: ",s.length]}),children:Object(d.jsx)("div",{children:o?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("b",{children:o}),Object(d.jsx)("br",{}),Object(d.jsx)("small",{className:"text-muted",children:u})]}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("b",{children:u})})})})}return Object(d.jsx)("div",{className:"px-3 py-2",children:r})},e.onClickUserUqsBuses=function(t){e.controller.showUserUqsBuses(t)},e.onAddUser=function(){e.controller.showAddDeveloper()},e.page=Object(ke.a)((function(){var t=e.controller.adminDevs,n=t.unit,r=t.users,a=Object(d.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-3",onClick:e.onAddUser,children:Object(d.jsx)(x.FA,{name:"plus"})});return Object(d.jsx)(x.Page,{header:"\u5f00\u53d1\u8005 - "+n.name,right:a,children:Object(d.jsx)(x.List,{className:"my-3",items:r,item:{render:e.renderUserUqsBuses,onClick:e.onClickUserUqsBuses}})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),qr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).user=void 0,e.renderUq=function(e,t){return Object(d.jsxs)("div",{className:"px-3 py-2 align-items-center",children:[Object(d.jsx)(x.FA,{className:"text-primary",size:"lg",name:"database",fixWidth:!0}),Object(d.jsx)("div",{className:"mx-3",children:Object(d.jsx)(ze,{id:e})})]})},e.onChangeUq=function(){e.controller.showUserUqs(e.user)},e.renderBus=function(e,t){return Object(d.jsxs)("div",{className:"px-3 py-2 align-items-center",children:[Object(d.jsx)(x.FA,{className:"text-primary",size:"lg",name:"cogs",fixWidth:!0}),Object(d.jsx)("div",{className:"mx-3",children:Object(d.jsx)(Ge,{id:e})})]})},e.onChangeBus=function(){e.controller.showUserBuses(e.user)},e.onDelDev=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.confirm({message:"\u771f\u7684\u8981\u53d6\u6d88\u5f00\u53d1\u8005\u8d44\u683c\u5417\uff1f",ok:"\u786e\u8ba4"});case 2:if(t.t0=t.sent,"ok"!==t.t0){t.next=7;break}return t.next=6,e.controller.delDev(e.user);case 6:e.closePage();case 7:case"end":return t.stop()}}),t)}))),e.page=Object(ke.a)((function(){var t=e.controller.adminDevs.getUserUqsBuses(e.user),n=t.user,r=t.uqs,a=t.buses,i=Object(d.jsx)("button",{className:"btn btn-success btn-sm",onClick:e.onChangeUq,children:Object(d.jsx)(x.FA,{name:"pencil"})}),s=Object(d.jsx)(x.LMR,{className:"px-3 pb-1 align-items-end",right:i,children:"UQ"}),c=Object(d.jsx)("button",{className:"btn btn-success btn-sm",onClick:e.onChangeBus,children:Object(d.jsx)(x.FA,{name:"pencil"})}),u=Object(d.jsx)(x.LMR,{className:"px-3 pb-1 align-items-end",right:c,children:"BUS"}),o=Object(d.jsx)("button",{className:"btn btn-outline-info btn-sm align-self-center mr-3",onClick:e.onDelDev,children:Object(d.jsx)(x.FA,{name:"minus"})});return Object(d.jsxs)(x.Page,{header:"\u5f00\u53d1\u8005 - UQ BUS",right:o,children:[Object(d.jsx)("div",{className:"px-3 py-2",children:Object(d.jsx)(Er,{id:n})}),Object(d.jsx)("div",{className:"h-1c"}),s,Object(d.jsx)(x.List,{className:"mb-3",items:r,item:{render:e.renderUq,onClick:void 0}}),Object(d.jsx)("div",{className:"h-1c"}),u,Object(d.jsx)(x.List,{className:"mb-3",items:a,item:{render:e.renderBus,onClick:void 0}})]})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.user=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.VPage),Fr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).user=void 0,e.onCheckChanged=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.changeUserDev(n.target.checked,"uq",e.user,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderUqItem=function(t,n){var r=t.dev,a=t.selected;return Object(d.jsxs)("label",{className:"ml-0 px-3 py-2 align-items-center",children:[Object(d.jsx)("input",{className:"mr-4",type:"checkbox",defaultChecked:a,onChange:function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onCheckChanged(n,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),Object(d.jsx)(x.FA,{className:"text-primary",size:"lg",name:"database",fixWidth:!0}),Object(d.jsx)("div",{className:"mx-3",children:Object(d.jsx)(ze,{id:r})})]})},e.onClickUq=function(e){},e.page=Object(ke.a)((function(){var t=e.controller.adminDevs,n=t.uqDevs,r=t.getUserUqsBuses(e.user),a=r.user,i=r.uqs,s=n.map((function(e){return{dev:e,selected:i.findIndex((function(t){return t===e}))>=0}}));return Object(d.jsxs)(x.Page,{header:"\u589e\u51cf - UQ",children:[Object(d.jsx)("div",{className:"px-3 py-2",children:Object(d.jsx)(Er,{id:a})}),Object(d.jsx)("div",{className:"h-1c"}),Object(d.jsx)(x.List,{className:"mb-3",items:s,item:{render:e.renderUqItem,onClick:e.onClickUq}}),Object(d.jsx)("div",{className:"h-1c"})]})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.user=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.VPage),Lr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).user=void 0,e.onCheckChanged=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.changeUserDev(n.target.checked,"bus",e.user,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderBusItem=function(t,n){var r=t.dev,a=t.selected;return Object(d.jsxs)("label",{className:"ml-0 px-3 py-2 align-items-center",children:[Object(d.jsx)("input",{className:"mr-4",type:"checkbox",defaultChecked:a,onChange:function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onCheckChanged(n,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),Object(d.jsx)(x.FA,{className:"text-primary",size:"lg",name:"database",fixWidth:!0}),Object(d.jsx)("div",{className:"mx-3",children:Object(d.jsx)(Ge,{id:r})})]})},e.onClickBusItem=function(e){},e.page=Object(ke.a)((function(){var t=e.controller.adminDevs,n=t.buses,r=t.getUserUqsBuses(e.user),a=r.user,i=r.buses,s=n.map((function(e){return{dev:e,selected:i.findIndex((function(t){return t===e}))>=0}}));return Object(d.jsxs)(x.Page,{header:"\u589e\u51cf - UQ",children:[Object(d.jsx)("div",{className:"px-3 py-2",children:Object(d.jsx)(Er,{id:a})}),Object(d.jsx)("div",{className:"h-1c"}),Object(d.jsx)(x.List,{className:"mb-3",items:s,item:{render:e.renderBusItem,onClick:e.onClickBusItem}}),Object(d.jsx)("div",{className:"h-1c"})]})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.user=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.VPage),Dr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSubmitClick=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a,i,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.addDev(r.data.user);case 2:if(a=t.sent,"success"!==(i=a.r)){t.next=7;break}return e.closePage(),t.abrupt("return");case 7:t.t0=i,t.next="is-root"===t.t0?10:"is-owner"===t.t0?12:"is-admin"===t.t0?14:"is-dev"===t.t0?16:18;break;case 10:return s="\u662f\u521b\u5efa\u4eba\uff0c\u4e0d\u9700\u8981\u8bbe\u4e3a\u5f00\u53d1\u8005",t.abrupt("break",18);case 12:return s="\u662f\u6240\u6709\u8005\uff0c\u4e0d\u9700\u8981\u8bbe\u4e3a\u5f00\u53d1\u8005",t.abrupt("break",18);case 14:return s="\u662f\u7ba1\u7406\u5458\uff0c\u4e0d\u9700\u8981\u8bbe\u4e3a\u5f00\u53d1\u8005",t.abrupt("break",18);case 16:return s="\u5df2\u7ecf\u662f\u5f00\u53d1\u8005\u4e86",t.abrupt("break",18);case 18:r.setError("user",s);case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=function(){return Object(d.jsx)(x.Page,{header:"\u65b0\u589e\u5f00\u53d1\u8005",children:Object(d.jsx)(x.Form,{className:"m-5",schema:[{name:"user",type:"string",maxLength:50,required:!0},{name:"submit",type:"submit"}],uiSchema:{items:{user:{widget:"text",label:"\u7528\u6237\u540d",placeholder:"\u8bf7\u8f93\u5165\u5f00\u53d1\u8005\u7684\u8d26\u53f7"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-success"}}},onEnter:e.onSubmitClick,onButtonClick:e.onSubmitClick})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Br=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).adminDevs=void 0,e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.adminDevs=t,this.openVPage(Vr);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUserUqsBuses",value:function(e){this.openVPage(qr,e)}},{key:"showUserUqs",value:function(e){this.openVPage(Fr,e)}},{key:"showUserBuses",value:function(e){this.openVPage(Lr,e)}},{key:"changeUserDev",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r,a){var i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t){e.next=6;break}return e.next=3,N.adminDevAdd({unit:this.adminDevs.unit.id,type:n,dev:a,devUser:r});case 3:this.adminDevs.devs.push({type:n,user:r,dev:a}),e.next=10;break;case 6:return e.next=8,N.adminDevDel({unit:this.adminDevs.unit.id,type:n,dev:a,devUser:r});case 8:(i=this.adminDevs.devs.findIndex((function(e){return e.dev===a&&e.type===n&&e.user===r})))>=0&&this.adminDevs.devs.splice(i,1);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"showAddDeveloper",value:function(){this.openVPage(Dr)}},{key:"addDev",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i,s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.adminDevs,r=n.users,a=n.unit,e.next=3,A.addDev(a.id,t);case 3:if(void 0!==(i=e.sent)){e.next=6;break}throw new Error("unauthorized!");case 6:return s=i.r,c=i.id,"success"===s&&r.push(c),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delDev",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.adminDevs,r=n.users,a=n.unit,e.next=3,A.delDev(a.id,t);case 3:(i=r.findIndex((function(e){return e===t})))>=0&&r.splice(i,1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Oe),Mr=(Lt=function(){function e(t){Object(g.a)(this,e),this.loaded=!1,this.unit=void 0,Object(V.a)(this,"users",Dt,this),Object(V.a)(this,"uqDevs",Bt,this),Object(V.a)(this,"buses",Mt,this),Object(V.a)(this,"devs",zt,this),this.unit=t}return Object(k.a)(e,[{key:"load",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.loaded){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A.adminDevs(this.unit.id);case 4:t=e.sent,this.loaded=!0,this.users=t[0].map((function(e){return e.user})),this.devs=t[1],this.uqDevs=t[2].map((function(e){return e.id})),this.buses=t[3].map((function(e){return e.id}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserUqsBuses",value:function(e){var t,n=[],r=[],a={user:e,uqs:n,buses:r},i=Object(T.a)(this.devs);try{for(i.s();!(t=i.n()).done;){var s=t.value;if(s.user===e)switch(s.type){case"uq":n.push(s.dev);break;case"bus":r.push(s.dev)}}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"getUqUsers",value:function(){var e,t=[],n=Object(T.a)(this.uqDevs);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=[];t.push({uq:r,users:a});var i,s=Object(T.a)(this.devs);try{for(s.s();!(i=s.n()).done;){var c=i.value;"uq"===c.type&&c.dev===r&&a.push(c.user)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"getBusUsers",value:function(){var e,t=[],n=Object(T.a)(this.buses);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=[];t.push({bus:r,users:a});var i,s=Object(T.a)(this.devs);try{for(s.s();!(i=s.n()).done;){var c=i.value;"bus"===c.type&&c.dev===r&&a.push(c.user)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){n.e(u)}finally{n.f()}return t}}]),e}(),Dt=Object(q.a)(Lt.prototype,"users",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=Object(q.a)(Lt.prototype,"uqDevs",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=Object(q.a)(Lt.prototype,"buses",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt=Object(q.a)(Lt.prototype,"devs",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt),zr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderDevUQ=function(e,t){var n=e.name,r=e.discription,a=e.roles;return Object(d.jsxs)("div",{className:"px-3 py-2",children:[Object(d.jsx)(x.FA,{name:"database",className:"text-info my-2 mx-1",size:"lg"}),Object(d.jsxs)("div",{className:"ml-3",children:[Object(d.jsx)("div",{children:n}),Object(d.jsx)("div",{className:"small text-muted",children:r}),Object(d.jsxs)("div",{className:"mt-3",children:[Object(d.jsx)("small",{className:"text-muted mr-1",children:"\u89d2\u8272:"}),null===a||void 0===a?void 0:a.map((function(e,t){return Object(d.jsx)("span",{className:"mx-2",children:e},t)}))]})]})]})},e}return Object(k.a)(n,[{key:"header",value:function(){return"UQ\u89d2\u8272\u8bbe\u7f6e"}},{key:"content",value:function(){var e=this.controller,t=e.devUQs,n=e.onDevUQ;return Object(d.jsx)("div",{children:Object(d.jsx)(x.List,{items:t,item:{render:this.renderDevUQ,onClick:n}})})}}]),n}(x.VPage),Hr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.newUser(r.data.userName);case 2:if(!(a=t.sent)){t.next=6;break}return r.setError("userName",a),t.abrupt("return");case 6:e.closePage();case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onClick(n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"header",value:function(){return"\u65b0\u589e\u89d2\u8272\u7528\u6237"}},{key:"content",value:function(){return Object(d.jsx)("div",{className:"p-3",children:Object(d.jsx)(x.Form,{schema:[{name:"userName",required:!0,type:"string",maxLength:60},{name:"ok",type:"submit"}],uiSchema:{items:{userName:{widget:"text",label:"\u7528\u6237\u8d26\u53f7",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u7684\u8d26\u53f7"},ok:{widget:"button",className:"btn btn-primary",label:"\u63d0\u4ea4"}}},onButtonClick:this.onClick,onEnter:this.onEnter})})}}]),n}(x.VPage),Wr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderItem=function(t,n){if(!t)return null;var r,a,i=t.user,s=t.roles,c=t.isDeleted,u=e.controller.allRoles,o=e.renderUser(i),l="bg-white border-top ";!0===n&&(l+="mb-1",o=Object(d.jsxs)(d.Fragment,{children:[o,Object(d.jsx)("small",{className:"ml-1 text-success",children:"[\u81ea\u5df1]"})]})),!0===c?(r=function(){return e.controller.restoreUser(t)},a="undo",o=Object(d.jsx)("del",{children:o})):(r=function(){return e.controller.deleteUser(t)},a="times");var h=Object(d.jsx)("div",{className:"p-3 cursor-pointer text-info",onClick:r,children:Object(d.jsx)(x.FA,{name:a})});return Object(d.jsx)(x.LMR,{className:l,left:Object(d.jsx)("div",{className:"p-3 w-12c",children:o}),right:h,children:Object(d.jsx)("div",{className:"d-flex flex-wrap",children:s.map((function(n,r){var a=u[r];return!0===c&&(a=Object(d.jsx)("del",{children:a})),Object(d.jsxs)("label",{className:"m-3",children:[Object(d.jsx)("input",{className:"mr-2",type:"checkbox",disabled:c,defaultChecked:n,onChange:function(n){return e.onRoleChange(n,r,t)}}),a]},r)}))})},i)},e}return Object(k.a)(n,[{key:"header",value:function(){return"\u8bbe\u7f6e\u7528\u6237\u89d2\u8272"}},{key:"content",value:function(){var e=this,t=this.controller.userRoles,n=Object(ke.a)((function(t){return e.renderItem(t.userRole,t.isMe)})),r=Object(ke.a)((function(){return Object(d.jsx)(d.Fragment,{children:t.map((function(e){return Object(d.jsx)(n,{userRole:e,isMe:!1},e.user)}))})})),a=Object(ke.a)((function(){return Object(d.jsx)(n,{userRole:e.controller.meRoles,isMe:!0})}));return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"mx-3 mt-3 mb-1 d-flex align-items-end",children:[Object(d.jsx)("div",{className:"mr-auto",children:"\u7528\u6237\u89d2\u8272"}),Object(d.jsxs)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(){return e.openVPage(Hr)},children:[Object(d.jsx)(x.FA,{name:"plus"})," \u589e\u52a0"]})]}),t.length>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(a,{}),Object(d.jsx)(r,{})]}):Object(d.jsx)("div",{className:"small text-muted p-3",children:"[\u65e0\u89d2\u8272\u7528\u6237]"})]})}},{key:"onRoleChange",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.target).disabled=!0,e.next=4,this.controller.setUserRole(a.checked,n,r);case 4:a.disabled=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(x.VPage),$r=(Ht=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).unit=void 0,e.uqApi=void 0,e.myRolesChanged=void 0,e.devUQs=void 0,e.allRoles=void 0,Object(V.a)(e,"meRoles",Wt,Object(M.a)(e)),Object(V.a)(e,"userRoles",$t,Object(M.a)(e)),e.onDevUQ=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"tv/",void 0,void 0,r=n.owner,a=n.name,void 0,!1,e.uqApi=new x.UqApi("tv/",undefined,undefined,r,a,undefined,false),t.next=10,e.uqApi.init();case 10:return e.allRoles=n.roles,t.next=13,e.uqApi.getAllRoleUsers();case 13:i=t.sent,Object(F.p)((function(){i.shift().roles;var t=e.allRoles.map((function(e){return"|".concat(e,"|")}));function n(e){return e?t.map((function(t){return e.indexOf(t)>=0})):t.map((function(e){return!1}))}e.userRoles=[];var r,a=e.user.id,s=Object(T.a)(i);try{for(s.s();!(r=s.n()).done;){var c=r.value,u=c.user,o=c.roles,l=c;l.roles=n(o),u===a?e.meRoles=l:e.userRoles.push(l)}}catch(h){s.e(h)}finally{s.f()}})),e.openVPage(Wr);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unit=t,e.next=3,this.loadUQs();case 3:this.openVPage(zr);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadUQs",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.unitUQs(this.unit.id,1e3);case 2:t=e.sent,this.devUQs=t.map((function(e){var t;try{t=JSON.parse(e.roles)}catch(n){try{t=e.roles.split("\t")}catch(r){t=[]}}return t?(t=t.filter((function(e){return e})),Object(ye.a)(Object(ye.a)({},e),{},{roles:t})):e}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserRole",value:function(){var e=Object(y.a)(O.a.mark((function e(t,n,r){var a,i,s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=r.roles,i=a.length,s="",c=0;c<i;c++)!0===(c===n?t:a[c])&&(s+="|"+this.allRoles[c]);return s+="|",e.next=7,this.uqApi.setUserRoles(r.user,s);case 7:a[n]=t,this.fireMyRolesChanged(r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fireMyRolesChanged",value:function(e,t){if(this.myRolesChanged&&e===this.meRoles){var n=e.roles;t&&(n=t);for(var r=["$"],a=0;a<n.length;a++)!0===n[a]&&r.push(this.allRoles[a]);this.myRolesChanged(r)}}},{key:"buildRolesText",value:function(e){var t=this,n=e.roles.map((function(e,n){return!0===e?t.allRoles[n]:""})).join("|");return"|".concat(n,"|")}},{key:"newUser",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.centerApi.userFromKey(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return","\u8fd9\u4e2a\u7528\u6237\u540d\u6ca1\u6709\u6ce8\u518c");case 5:if(r=n.id,!0!==this.isMe(r)){e.next=10;break}this.meRoles?this.meRoles.isDeleted=!1:this.meRoles={user:r,roles:this.allRoles.map((function(e){return!1}))},e.next=23;break;case 10:if(!(i=this.userRoles.find((function(e){return e.user===r})))){e.next=20;break}if(!0!==i.isDeleted){e.next=17;break}i.isDeleted=!1,a=this.buildRolesText(i),e.next=18;break;case 17:return e.abrupt("return","\u8fd9\u4e2a\u7528\u6237\u5df2\u7ecf\u662f\u89d2\u8272\u7528\u6237\u4e86");case 18:e.next=23;break;case 20:i={user:r,roles:this.allRoles.map((function(e){return!1}))},this.userRoles.push(i),a="";case 23:return e.next=25,this.uqApi.setUserRoles(r,a);case 25:!0===this.isMe(r)&&this.fireMyRolesChanged(this.meRoles);case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,t.isDeleted=!0,e.next=4,this.uqApi.deleteUserRoles(n);case 4:this.fireMyRolesChanged(t,this.allRoles.map((function(e){return!1})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restoreUser",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,t.isDeleted=!1,r=this.buildRolesText(t),e.next=5,this.uqApi.setUserRoles(n,r);case 5:this.fireMyRolesChanged(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Oe),Wt=Object(q.a)(Ht.prototype,"meRoles",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=Object(q.a)(Ht.prototype,"userRoles",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ht),Gr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a,i,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.form.data,i=a.isOwner,s=a.isAdmin,t.next=3,e.controller.setAdmin(i,s);case 3:e.closePage();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=Object(ke.a)((function(){var t,n=e.controller,r=n.unit,a=n.admins,i=r.isRoot,s=r.isOwner,c=a.cur,u={name:"isAdmin",type:"boolean"},o={name:"submit",type:"submit"};1===i?t=[{name:"isOwner",type:"boolean"},u,o]:1===s&&(t=[u,o]);var l={isOwner:c.isOwner,isAdmin:c.isAdmin};return Object(d.jsx)(x.Page,{header:"\u6743\u9650",children:Object(d.jsxs)("div",{className:"px-3",children:[Object(d.jsx)(Kr,Object(ye.a)({},a.cur)),Object(d.jsx)(x.Form,{schema:t,uiSchema:{items:{isOwner:{widget:"checkbox",label:"\u9ad8\u7ba1",trueValue:1,falseValue:0},isAdmin:{widget:"checkbox",label:"\u7ba1\u7406\u5458",trueValue:1,falseValue:0},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},formData:l,onButtonClick:e.onSubmit})]})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Kr=function(e){var t=e.name,n=e.nick,r=e.icon;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"d-flex my-4",children:[Object(d.jsx)(x.Image,{className:"w-3c h-3c mr-3",src:r}),Object(d.jsxs)("div",{className:"",children:[Object(d.jsx)("h4",{className:"text-dark",children:t}),n&&Object(d.jsx)("h6",{children:Object(d.jsx)("small",{className:"text-secondary",children:n})})]})]}),Object(d.jsx)("hr",{className:"mb-4"})]})},Qr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).roleNum=void 0,e.schema=[{name:"user",type:"string",required:!0},{name:"submit",type:"submit"}],e.uiSchema={items:{user:{widget:"text",label:"\u7528\u6237",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u8d26\u53f7"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},e.onSubmit=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.addAdmin(r.data.user);case 2:if(void 0!==(a=t.sent)){t.next=6;break}return e.closePage(),t.abrupt("return");case 6:t.t0=a,t.next="no-exist"===t.t0?11:"me"===t.t0?13:"admin"===t.t0?15:9;break;case 9:return i="\u672a\u77e5\u9519\u8bef",t.abrupt("break",17);case 11:return i="\u7528\u6237\u4e0d\u5b58\u5728",t.abrupt("break",17);case 13:return i="\u4f60\u81ea\u5df1\u5df2\u7ecf\u662f\u7ba1\u7406\u5458",t.abrupt("break",17);case 15:return i="\u5df2\u7ecf\u662f\u7ba1\u7406\u5458",t.abrupt("break",17);case 17:r.setError("user",i);case 18:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("user"!==n){t.next=4;break}return t.next=3,e.onSubmit("login",r);case 3:return t.abrupt("return");case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.page=function(){return Object(d.jsx)(x.Page,{header:"\u65b0\u589e - "+Object(we.unitCaption)(e.controller.unit)+"\u7ba1\u7406\u5458",back:"close",children:Object(d.jsx)("div",{className:"m-5 px-5 py-3 bg-white border rounded",children:Object(d.jsx)(x.Form,{schema:e.schema,uiSchema:e.uiSchema,onEnter:e.onEnter,onButtonClick:e.onSubmit})})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.roleNum=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.VPage),Jr=(Gt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).list=void 0,Object(V.a)(e,"allSelectVisible",Kt,Object(M.a)(e)),Object(V.a)(e,"allUnSelectVisible",Qt,Object(M.a)(e)),Object(V.a)(e,"disableDel",Jt,Object(M.a)(e)),e.onNewFellow=function(){},e.onItemClick=function(t){e.controller.admins.cur=t,e.openVPage(Gr)},e.onItemSelect=function(t,n,r){e.disableDel=!r},e.onSelectAll=function(){e.list.selectAll()},e.onClearAll=function(){e.list.unselectAll()},e.onDel=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.delAdmins(e.list.selectedItems);case 2:case"end":return t.stop()}}),t)}))),e.row=function(e){var t=e.icon,n=e.name,r=e.nick,a=r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("b",{children:r})," \xa0 ",Object(d.jsx)("small",{className:"text-muted",children:n})]}):Object(d.jsx)("b",{children:n}),i=Object(d.jsx)(x.Image,{className:"w-2-5c h-2-5c",src:t});return Object(d.jsx)(x.LMR,{className:"py-2 px-3 align-items-stretch",left:i,children:Object(d.jsx)("div",{className:"px-3",children:a})})},e.onAddAdmin=function(){e.openVPage(Qr)},e.page=Object(ke.a)((function(){var t=e.controller.admins,n=Object(d.jsx)("button",{className:"btn btn-sm btn-success mr-2 align-self-center",onClick:e.onAddAdmin,children:Object(d.jsx)(x.FA,{name:"plus"})}),r=Object(d.jsx)(x.List,{ref:function(t){return e.list=t},className:"my-1",items:t.admins,none:"[\u65e0]",item:{render:e.row,onSelect:e.onItemSelect}}),a="btn btn-sm btn-outline-info mr-1",i=t.admins.length>0&&Object(d.jsxs)("div",{className:"pl-3",children:[Object(d.jsx)("button",{className:a,onClick:e.onSelectAll,children:"\u5168\u9009"}),Object(d.jsx)("button",{className:a,onClick:e.onClearAll,children:"\u5168\u6e05"}),Object(d.jsx)("button",{className:a,disabled:e.disableDel,onClick:e.onDel,children:"\u79fb\u9664"})]});return Object(d.jsx)(x.Page,{header:"\u7ba1\u7406\u5458",right:n,children:Object(d.jsxs)("div",{className:"my-3",children:[i,r,i]})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Kt=Object(q.a)(Gt.prototype,"allSelectVisible",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Qt=Object(q.a)(Gt.prototype,"allUnSelectVisible",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jt=Object(q.a)(Gt.prototype,"disableDel",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gt),Xr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).unit=void 0,e.admins=void 0,e.setAdmin=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.admins.unitSetAdmin(n,r,0);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.addAdmin=function(){var t=Object(y.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.admins.unitAddAdmin(n,0,1,0);case 2:if("object"!==typeof(r=t.sent)){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delAdmins=function(){var t=Object(y.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.confirm({caption:"\u786e\u8ba4\u79fb\u9664",message:"\u771f\u7684\u8981\u79fb\u9664\u8fd9\u4e9b\u7ba1\u7406\u5458\u5417\uff1f"+n.map((function(e){return e.name})).join(","),ok:"\u786e\u8ba4"});case 2:if(t.t0=t.sent,"ok"!==t.t0){t.next=7;break}return r=n.map((function(t){return e.admins.unitDelAdmin(t)})),t.next=7,Promise.all(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unit=t,this.admins=new sr(t),e.next=4,this.admins.load();case 4:this.openVPage(Jr);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Oe),Yr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderRow=function(e,t){var n=e.app,r=e.more,a=e.users,i=n.name,s=n.discription,c=Object(d.jsx)("small",{className:"text-muted",children:s});return Object(d.jsxs)("div",{className:"d-block px-3 py-2",children:[Object(d.jsxs)(x.LMR,{className:"mb-2",right:c,children:[Object(d.jsx)(x.FA,{name:"address-card-o",className:"text-primary mr-3"}),Object(d.jsx)("b",{children:i})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("small",{className:"text-muted",children:"\u7528\u6237: "}),0===a.length?"[\u65e0]":a.map((function(e){return e.assigned||e.nick||e.name})).join(", ")+(!0===r?" ...":"")]})]})},e.page=Object(ke.a)((function(){var t=e.controller,n=t.appUsersList,r=t.searchApp,a=t.onAppsClick,i=Object(d.jsx)(x.SearchBox,{className:"w-100 pr-1",onSearch:r,placeholder:"\u641c\u7d22App",allowEmptySearch:!0});return Object(d.jsx)(x.Page,{header:i,children:Object(d.jsx)(x.List,{items:n,item:{render:e.renderRow,onClick:a,key:function(e){return e.app.id}}})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Zr=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderRow=function(t,n){var r=t.user,a=t.apps,i=r.name,s=r.nick,c=r.assigned,u=Object(d.jsx)(x.FA,{name:"user-o",size:"lg",className:"text-info mx-3 mt-2",fixWidth:!0});return Object(d.jsxs)(x.LMR,{className:"py-2",left:u,children:[Object(d.jsx)("div",{className:"mb-2",children:Object(d.jsx)("b",{children:c||s||i})}),Object(d.jsx)("div",{className:"d-flex flex-wrap mt-1",children:0===a.length?Object(d.jsx)("small",{className:"text-muted",children:"[\u65e0]"}):a.map((function(t){return e.box(t.name,"px-2 text-info border-muted bg-white")}))})]})},e.box=function(e,t){return Object(d.jsx)("div",{className:"mr-3 mb-1 py-1 small border rounded "+t,children:e},e)},e.page=Object(ke.a)((function(){var t=e.controller,n=t.userAppsList,r=t.searchUser,a=t.onUsersClick,i=Object(d.jsx)(x.SearchBox,{className:"w-100 pr-1",label:"App\u7ba1\u7406\u5458 \xa0 ",onSearch:r,placeholder:"\u641c\u7d22\u7ba1\u7406\u5458",allowEmptySearch:!0});return Object(d.jsx)(x.Page,{header:i,children:Object(d.jsx)(x.List,{items:n,item:{render:e.renderRow,onClick:a,key:function(e){return e.user.id}}})})})),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),ea=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller,n=t.curApp,r=t.curAppUsers,a=t.onAppEditUsers,i=Object(d.jsx)("button",{className:"btn btn-sm btn-success",onClick:function(){return a()},children:"\u589e\u51cf\u7528\u6237"});return Object(d.jsx)(x.Page,{header:"App - "+n.name,right:i,children:Object(d.jsx)(x.List,{items:r,item:{render:e.renderApp}})})})),e.renderApp=function(e,t){var n,r=e.name,a=e.nick,i=e.assigned;return n=i?Object(d.jsxs)("span",{children:[i," \xa0 ",Object(d.jsx)("small",{className:"text-muted",children:r})]}):a?Object(d.jsxs)("span",{children:[a," \xa0 ",Object(d.jsx)("small",{className:"text-muted",children:r})]}):Object(d.jsx)(d.Fragment,{children:r}),Object(d.jsx)("div",{className:"px-3 py-2",children:n})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),ta=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller,n=t.curUser,r=t.curUserApps,a=t.onUserEditApps,i=Object(d.jsx)("button",{className:"btn btn-sm btn-success align-self-center mr-2",onClick:function(){return a()},children:"\u589e\u51cfApp"});return Object(d.jsx)(x.Page,{header:"\u7528\u6237 - "+(n.assigned||n.nick||n.name),right:i,children:Object(d.jsx)(x.List,{items:r,item:{render:e.renderApp}})})})),e.renderApp=function(e,t){var n=e.name,r=e.discription,a=Object(d.jsx)(x.FA,{name:"caret-square-o-right",size:"lg",className:"mr-3 mt-1 text-info"}),i=Object(d.jsx)("small",{className:"text-muted",children:r});return Object(d.jsx)(x.LMR,{className:"px-3 py-2",left:a,right:i,children:Object(d.jsx)("b",{children:n})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),na=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller,n=t.curApp,r=t.appEditUsers;return Object(d.jsx)(x.Page,{header:n.name+" - \u589e\u51cf\u7528\u6237",children:Object(d.jsx)(x.List,{items:r,item:{render:e.renderUserItem}})})})),e.renderUserItem=function(t,n){var r,a=t.name,i=t.nick,s=t.assigned,c=t.bind;r=s?Object(d.jsxs)(d.Fragment,{children:[s," ",Object(d.jsx)(x.Muted,{children:a})]}):i?Object(d.jsxs)(d.Fragment,{children:[i," ",Object(d.jsx)(x.Muted,{children:a})]}):Object(d.jsx)(d.Fragment,{children:a});var u=Object(d.jsx)("input",{type:"checkbox",defaultChecked:1===c,onChange:function(n){return e.onUserChanged(t,n.target.checked)}});return Object(d.jsx)(x.LMR,{className:"px-3 py-2 align-items-center",right:u,children:r})},e.onUserChanged=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.bindAppUser(n,r);case 2:n.bind=!0===r?1:0;case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),ra=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).page=Object(ke.a)((function(){var t=e.controller,n=t.curUser,r=t.userEditApps;return Object(d.jsx)(x.Page,{header:"\u589e\u51cfApp - "+(n.assigned||n.nick||n.name),children:Object(d.jsx)(x.List,{items:r,item:{render:e.renderApp}})})})),e.renderApp=function(t,n){var r=t.name,a=t.discription,i=t.bind,s=Object(d.jsx)("input",{type:"checkbox",defaultChecked:1===i,onChange:function(n){return e.onAppChanged(t,n.target.checked)}});return Object(d.jsxs)(x.LMR,{className:"px-3 py-2",right:s,children:[r," ",a]})},e.onAppChanged=function(){var t=Object(y.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.bindUserApp(n,r);case 2:n.bind=!0===r?1:0;case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),aa=(Xt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(V.a)(e,"user",Yt,Object(M.a)(e)),e.searchBox=void 0,e.page=Object(ke.a)((function(){var t,n=Object(d.jsx)(x.SearchBox,{ref:function(t){return e.searchBox=t},className:"w-100",onSearch:e.onSearch,onFocus:e.onSearchFocus,placeholder:"\u7528\u6237\u5168\u540d/\u624b\u673a\u53f7/\u90ae\u7bb1"});if(null===e.user);else if(void 0===e.user)t=Object(d.jsx)("div",{className:"text-info p-3",children:"\u6ca1\u6709\u627e\u5230\u7528\u6237"});else{var r,a=e.user,i=a.name,s=a.nick,c=a.icon;r=s?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:s})}),Object(d.jsx)("div",{children:i})]}):Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:i})}),t=Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"m-3 p-3 d-flex bg-white",children:[Object(d.jsx)(x.Image,{src:c}),Object(d.jsx)("div",{className:"ml-3",children:r})]}),Object(d.jsx)("div",{className:"d-flex justify-content-center",children:Object(d.jsx)("button",{className:"btn btn-success text-center",onClick:e.onAddUser,children:"\u589e\u52a0\u7528\u6237"})})]})}return Object(d.jsx)(x.Page,{header:n,children:t})})),e.onSearch=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.userFromKey(n);case 2:e.user=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddUser=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.addUser(e.user.id);case 2:e.controller.curUser=e.user,e.user=null,e.searchBox.clear(),e.replacePage(e.addedPage);case 6:case"end":return t.stop()}}),t)}))),e.onSearchFocus=function(){e.user=null,e.searchBox&&e.searchBox.clear()},e.onAddApps=function(){e.closePage(),e.controller.onUserEditApps()},e.onContinueAddUser=function(){e.closePage(),e.controller.onAddUser()},e.addedPage=function(){return Object(d.jsx)(x.Page,{header:"\u6dfb\u52a0\u6210\u529f",children:Object(d.jsxs)("div",{className:"p-3 text-center",children:[Object(d.jsxs)("div",{children:["\u65b0\u589e\u7528\u6237: ",e.controller.curUser.name]}),Object(d.jsxs)("div",{className:"mt-3",children:[Object(d.jsx)("button",{className:"btn btn-success mr-3",onClick:e.onAddApps,children:"\u4e3a\u7528\u6237\u6dfb\u52a0App"}),Object(d.jsx)("button",{className:"btn btn-outline-primary",onClick:e.onContinueAddUser,children:"\u7ee7\u7eed\u6dfb\u52a0\u65b0\u7528\u6237"})]})]})})},e}return Object(k.a)(n,[{key:"open",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.VPage),Yt=Object(q.a)(Xt.prototype,"user",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt),ia=(Zt=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).unit=void 0,Object(V.a)(e,"userAppsList",en,Object(M.a)(e)),Object(V.a)(e,"appUsersList",tn,Object(M.a)(e)),e.curUser=void 0,Object(V.a)(e,"curUserApps",nn,Object(M.a)(e)),Object(V.a)(e,"userEditApps",rn,Object(M.a)(e)),e.curApp=void 0,Object(V.a)(e,"curAppUsers",an,Object(M.a)(e)),Object(V.a)(e,"appEditUsers",sn,Object(M.a)(e)),e.onAppUsers=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadAppUsers(void 0);case 2:e.openVPage(Yr);case 3:case"end":return t.stop()}}),t)}))),e.onUserApps=Object(y.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadUserApps(void 0);case 2:e.openVPage(Zr);case 3:case"end":return t.stop()}}),t)}))),e.searchUser=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadUserApps(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchApp=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadAppUsers(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAppsClick=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.curApp=n.app,0,100,t.next=5,A.unitOneAppUsers(e.unit.id,e.curApp.id,0,100);case 5:e.curAppUsers=t.sent,e.openVPage(ea);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUsersClick=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.curUser=n.user,0,100,t.next=5,A.unitOneUserApps(e.unit.id,e.curUser.id,0,100);case 5:e.curUserApps=t.sent,e.openVPage(ta);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAppEditUsers=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 0,100,t.next=4,A.unitAppEditUsers(e.unit.id,e.curApp.id,n,0,100);case 4:e.appEditUsers=t.sent,e.openVPage(na);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddUser=function(){e.openVPage(aa)},e.onUserEditApps=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 0,100,t.next=4,A.unitUserEditApps(e.unit.id,e.curUser.id,n,0,100);case 4:e.userEditApps=t.sent,e.openVPage(ra);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.bindAppUser=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.bindAppUser(e.unit.id,e.curApp.id,n.id,!0===r?1:0);case 2:a=e.appUsersList.find((function(t){return t.app.id===e.curApp.id})),!0===r?(e.curAppUsers.push(n),a&&a.users.push(n)):((i=e.curAppUsers.findIndex((function(e){return e.id===n.id})))>=0&&e.curAppUsers.splice(i,1),a&&(i=a.users.findIndex((function(e){return e.id===n.id})))>=0&&a.users.splice(i,1));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.bindUserApp=function(){var t=Object(y.a)(O.a.mark((function t(n,r){var a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.bindAppUser(e.unit.id,n.id,e.curUser.id,!0===r?1:0);case 2:if(void 0!==e.userAppsList){t.next=4;break}return t.abrupt("return");case 4:a=e.userAppsList.find((function(t){return t.user.id===e.curUser.id})),!0===r?(e.curUserApps.push(n),a&&a.apps.push(n)):((i=e.curUserApps.findIndex((function(e){return e.id===n.id})))>=0&&e.curUserApps.splice(i,1),a&&(i=a.apps.findIndex((function(e){return e.id===n.id})))>=0&&a.apps.splice(i,1));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.addUser=function(){var t=Object(y.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.unitAddUser(e.unit.id,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unit=t,e.next=3,this.loadUserApps(void 0);case 3:this.openVPage(Zr);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAppUsers",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i,s,c,u,o,l,h,p,d,f,v,b;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],0,100,e.next=5,A.unitAppUsers(this.unit.id,t,0,100);case 5:r=e.sent,a=r[0],i=r[1],s={},c=Object(T.a)(a);try{for(c.s();!(u=c.n()).done;)o=u.value,l={id:o.id,name:o.name,discription:o.discription},n.push(s[o.id]={app:l,more:!1,users:[]})}catch(m){c.e(m)}finally{c.f()}h=Object(T.a)(i);try{for(h.s();!(p=h.n()).done;)d=p.value,f={id:d.user,name:d.name,nick:d.nick,icon:d.icon,assigned:d.assigned},v=s[d.app],(b=v.users).length>=5?v.more=!0:b.push(f)}catch(m){h.e(m)}finally{h.f()}this.appUsersList=n;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadUserApps",value:function(){var e=Object(y.a)(O.a.mark((function e(t){var n,r,a,i,s,c,u,o,l,h,p,d,f;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],0,100,e.next=5,A.unitUsers(this.unit.id,t,0,100);case 5:r=e.sent,a=r[0],i=r[1],s={},c=Object(T.a)(a);try{for(c.s();!(u=c.n()).done;)o=u.value,l={id:o.id,name:o.name,nick:o.nick,icon:o.icon,assigned:o.assigned},n.push(s[o.id]={user:l,apps:[]})}catch(v){c.e(v)}finally{c.f()}h=Object(T.a)(i);try{for(h.s();!(p=h.n()).done;)d=p.value,f={id:d.app,name:d.name,discription:d.discription},s[d.user].apps.push(f)}catch(v){h.e(v)}finally{h.f()}this.userAppsList=n;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(x.Controller),en=Object(q.a)(Zt.prototype,"userAppsList",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn=Object(q.a)(Zt.prototype,"appUsersList",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nn=Object(q.a)(Zt.prototype,"curUserApps",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn=Object(q.a)(Zt.prototype,"userEditApps",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an=Object(q.a)(Zt.prototype,"curAppUsers",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn=Object(q.a)(Zt.prototype,"appEditUsers",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt),sa=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).unit=void 0,e.isProduction=void 0,e.adminDevs=void 0,e.cAdmins=void 0,e.cUsers=void 0,e.cUqRoles=void 0,e.startUq=function(t){e.newC(or).start(t)},e.startApp=function(t){new xn(e.res).start(t.id)},e.onShowUnit=function(){var t=Object(y.a)(O.a.mark((function t(n){var r,a,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x.appInFrame.unit=n.id,je.init(),t.next=4,je.loadUnit();case 4:if(r=je.unit,e.adminDevs=new Mr(r),a=r.isDev,i=r.type,1!==a){t.next=14;break}if(0===(1&i)){t.next=11;break}return t.next=11,je.dev.loadCounts();case 11:if(0===(2&i)){t.next=14;break}return t.next=14,je.loadApps();case 14:e.unit=r,e.cUqRoles=e.newC($r,e.unit.id),e.openVPage(yr);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.logout=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:je.logout();case 1:case"end":return e.stop()}}),e)}))),e.showAppXAccount=function(){var t=Object(y.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.newC(Tr),t.next=3,r.start(e.unit,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(k.a)(n,[{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cAdmins=this.newC(Xr),this.cUsers=new ia(this.res),je.init(),this.isProduction=document.location.hash.startsWith("#tv"),console.log("admins isProduction %s",this.isProduction),!1!==this.isProduction){e.next=10;break}return e.next=8,je.loadAdminUnits();case 8:e.next=12;break;case 10:return e.next=12,je.loadUnit();case 12:this.openVPage(gr);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onShowDevelopers",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.adminDevs.load();case 2:this.newC(Br).start(this.adminDevs);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Oe),ca=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).cHome=void 0,e}return Object(k.a)(n,[{key:"newC",value:function(e){return new e(this)}},{key:"internalStart",value:function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cHome=this.newC(sa),this.cHome.start();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(x.CAppBase);var ua=function(){var e=function(){var e=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.nav.clear(),e.next=3,Object(x.start)(ca,void 0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(x.NavView,{onLogined:e})},oa=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,142)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))};m.a.render(Object(d.jsx)(v.a.StrictMode,{children:Object(d.jsx)(ua,{})}),document.getElementById("root")),oa()}],[[141,1,2]]]);
//# sourceMappingURL=main.2137df2c.chunk.js.map