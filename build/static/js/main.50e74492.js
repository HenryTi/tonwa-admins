/*! For license information please see main.50e74492.js.LICENSE.txt */
(()=>{var e={736:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CLogin:()=>A});var i=n(106),r=n(285),s=(n(791),n(184));class a extends r.ps{constructor(){super(...arguments),this.onLogout=void 0}init(e){this.onLogout=e}header(){return!0!==this.isWebNav&&"\u5b89\u5168\u9000\u51fa"}footer(){return(0,s.jsx)("div",{className:"mt-5 text-center justify-content-center",children:(0,s.jsx)("button",{className:"btn btn-outline-warning",onClick:i.nav.resetAll,children:"\u5347\u7ea7\u8f6f\u4ef6"})})}get back(){return"close"}content(){return(0,s.jsxs)("div",{className:"m-5 border border-info bg-white rounded-3 p-5 text-center",children:[(0,s.jsx)("div",{children:"\u9000\u51fa\u5f53\u524d\u8d26\u53f7\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u5386\u53f2\u6570\u636e\uff0c\u4e0b\u6b21\u767b\u5f55\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\u672c\u8d26\u53f7"}),(0,s.jsx)("div",{className:"mt-5 text-center",children:(0,s.jsx)("button",{className:"btn btn-danger",onClick:this.onLogout,children:"\u5b89\u5168\u9000\u51fa"})})]})}}var o=n(541);const l=n.p+"static/media/logo.2d27ead7c10f774c5306bcf3c257a728.svg";function u(){return i.nav.loginTop((0,s.jsxs)("div",{className:"d-flex align-items-center position-relative",children:[(0,s.jsx)("img",{className:"App-logo h-3c position-absolute",src:l,alt:"img"}),(0,s.jsxs)("div",{className:"h3 flex-fill text-center",children:[(0,s.jsx)("span",{className:"text-primary me-3",children:"\u540c"}),(0,s.jsx)("span",{className:"text-danger",children:"\u82b1"})]})]}))}const c=[{type:"mobile",caption:"\u624b\u673a\u53f7",regex:o.Yd},{type:"email",caption:"\u90ae\u7bb1",regex:o.HN}];function h(e){return c.find((t=>!0===t.regex.test(e)))}const d=[{name:"username",type:"string",required:!0,maxLength:100},{name:"password",type:"string",required:!0,maxLength:100},{name:"login",type:"submit"}];class p extends r.ps{constructor(){super(...arguments),this.onLogin=void 0,this.withBack=void 0,this.uiSchema={items:{username:{placeholder:"\u624b\u673a/\u90ae\u7bb1/\u7528\u6237\u540d",label:"\u767b\u5f55\u8d26\u53f7"},password:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},login:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u767b\u5f55"}}},this.onSubmit=async(e,t)=>{let n=t.form.data,i=n.username,r=n.password;if(void 0===r)return"something wrong, pwd is undefined";if(!0===await this.onLogin(i,r))return;let s=h(i);return(void 0!==s?s.caption:"\u7528\u6237\u540d")+"\u6216\u5bc6\u7801\u9519\uff01"},this.onEnter=async(e,t)=>{if("password"===e)return await this.onSubmit("login",t)}}init(e){let{onLogin:t,withBack:n}=e;this.onLogin=t,this.withBack=n}header(){return!0===this.withBack&&"\u767b\u5f55"}footer(){return(0,s.jsxs)("div",{className:"d-block",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(i.Ax,{href:"/register",className:"btn btn-link",style:{margin:"0px auto"},children:"\u6ce8\u518c\u8d26\u53f7"})}),i.nav.privacyEntry()]})}content(){return(0,s.jsxs)("div",{className:"d-flex p-5 flex-column justify-content-center align-items-center",children:[(0,s.jsx)("div",{className:"flex-fill"}),(0,s.jsxs)("div",{className:"w-20c",children:[u(),(0,s.jsx)("div",{className:"h-2c"}),(0,s.jsx)(i.l0,{schema:d,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1}),(0,s.jsx)(i.Ax,{className:"btn btn-link btn-block",href:"/forget",children:"\u5fd8\u8bb0\u5bc6\u7801"})]}),(0,s.jsx)("div",{className:"flex-fill"}),(0,s.jsx)("div",{className:"flex-fill"})]})}}var f=n(537);class m extends r.ps{constructor(){super(...arguments),this.schema=[{name:"orgPassword",type:"string",maxLength:60,required:!0},{name:"newPassword",type:"string",maxLength:60,required:!0},{name:"newPassword1",type:"string",maxLength:60,required:!0},{name:"submit",type:"submit"}],this.uiSchema={items:{orgPassword:{widget:"password",label:"\u539f\u5bc6\u7801",placeholder:"\u8f93\u5165\u539f\u6765\u7684\u5bc6\u7801"},newPassword:{widget:"password",label:"\u65b0\u5bc6\u7801",placeholder:"\u8f93\u5165\u65b0\u8bbe\u7684\u5bc6\u7801"},newPassword1:{widget:"password",label:"\u786e\u8ba4\u5bc6\u7801",placeholder:"\u518d\u6b21\u8f93\u5165\u65b0\u8bbe\u5bc6\u7801"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},this.onChange=void 0,this.onSubmit=async(e,t)=>{let{orgPassword:n,newPassword:r,newPassword1:a}=t.data;r===a?!1!==await this.onChange(n,r)?i.nav.replace((0,s.jsx)(i.T3,{header:"\u4fee\u6539\u5bc6\u7801",back:"close",children:(0,s.jsx)("div",{className:"m-3  text-success",children:"\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01"})})):t.setError("orgPassword","\u539f\u5bc6\u7801\u9519\u8bef"):t.setError("newPassword1","\u65b0\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165")}}init(e){this.onChange=e}header(){return"\u4fee\u6539\u5bc6\u7801"}content(){return(0,s.jsx)(i.l0,{className:"m-3",schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,fieldLabelSize:2})}}class v extends r.ps{constructor(){super(...arguments),this.schema=[{name:"user",type:"string",required:!0,maxLength:100},{name:"verify",type:"submit"}],this.uiSchema=void 0,this.onSubmit=async(e,t)=>{t.clearContextErrors();let n="user",i=t.getValue(n),r=h(i);if(void 0===r)return void t.setError(n,"\u5fc5\u987b\u662f\u624b\u673a\u53f7\u6216\u90ae\u7bb1");let s=r.type;if("mobile"===s&&(11!==i.length||"1"!==i[0]))return void t.setError(n,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7");this.controller.account=i,this.controller.type=s;let a=await this.controller.checkAccount();void 0!==a&&t.setError(n,a)},this.onEnter=async(e,t)=>{if("user"===e)return await this.onSubmit("verify",t)}}init(){this.uiSchema={items:{user:{widget:"text",label:this.accountLable,placeholder:"\u624b\u673a\u53f7\u6216\u90ae\u7bb1"},verify:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u53d1\u9001\u9a8c\u8bc1\u7801"}}}}header(){return this.pageCaption}footer(){return(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(i.Ax,{href:"/login",className:"text-primary",children:"\u5df2\u6709\u8d26\u53f7\uff0c\u76f4\u63a5\u767b\u5f55"})})}content(){return(0,s.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:[u(),(0,s.jsx)("div",{className:"h-3c"}),(0,s.jsx)(i.l0,{schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1}),i.nav.privacyEntry()]})}}class g extends v{get accountLable(){return"\u8d26\u53f7"}get pageCaption(){return"\u6ce8\u518c\u8d26\u53f7"}}class y extends v{footer(){return null}get accountLable(){return"\u8d26\u53f7"}get pageCaption(){return"\u5bc6\u7801\u627e\u56de"}}class b extends r.ps{constructor(){super(...arguments),this.schema=[{name:"verify",type:"number",required:!0,maxLength:6},{name:"submit",type:"submit"}],this.onVerifyChanged=(e,t,n)=>{e.setDisabled("submit",!t||6!==t.length)},this.uiSchema={items:{verify:{widget:"text",label:"\u9a8c\u8bc1\u7801",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChanged:this.onVerifyChanged},submit:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u4e0b\u4e00\u6b65 >",disabled:!0}}},this.onVerify=void 0,this.onSubmit=async(e,t)=>{let n=t.getValue("verify");0!==await this.onVerify(n)||t.setError("verify","\u9a8c\u8bc1\u7801\u9519\u8bef")},this.onEnter=async(e,t)=>{if("verify"===e)return await this.onSubmit("submit",t)}}init(e){this.onVerify=e}header(){return"\u9a8c\u8bc1\u7801"}content(){let e,t;switch(this.controller.type){case"mobile":e="\u624b\u673a\u53f7";break;case"email":e="\u90ae\u7bb1",t=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-danger",children:"\u6ce8\u610f"}),": \u6709\u53ef\u80fd\u8bef\u4e3a\u5783\u573e\u90ae\u4ef6\uff0c\u8bf7\u68c0\u67e5",(0,s.jsx)("br",{})]})}return(0,s.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:["\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u5230",e,(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"py-2 px-3 my-2 text-primary bg-light",children:(0,s.jsx)("b",{children:this.controller.account})}),t,(0,s.jsx)("div",{className:"h-1c"}),(0,s.jsx)(i.l0,{schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1})]})}}class w extends r.ps{constructor(){super(...arguments),this.schema=[{name:"pwd",type:"string",required:!0,maxLength:100},{name:"rePwd",type:"string",required:!0,maxLength:100},{name:"submit",type:"submit"}],this.onButtonSubmit=async(e,t)=>{let n,r=t.form.data,{pwd:a,rePwd:o}=r;return a&&a===o?(n=await this.controller.onPasswordSubmit(a),void 0!==n&&i.nav.push((0,s.jsx)(i.T3,{header:"\u6ce8\u518c\u4e0d\u6210\u529f",children:(0,s.jsx)("div",{className:"p-5 text-danger",children:n})}))):(t.setValue("pwd",""),t.setValue("rePwd",""),n="\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801\uff01",t.setError("pwd",n)),n},this.onEnter=async(e,t)=>{if("rePwd"===e)return await this.onButtonSubmit("submit",t)}}get account(){return this.controller.account}header(){return this.pageCaption}content(){let e={items:{pwd:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},rePwd:{widget:"password",placeholder:"\u91cd\u590d\u5bc6\u7801",label:"\u91cd\u590d\u5bc6\u7801"},submit:{widget:"button",className:"btn btn-primary btn-block mt-3",label:this.submitCaption}}};return(0,s.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:["\u6ce8\u518c\u8d26\u53f7",(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"py-2 px-3 my-2 text-primary bg-light",children:(0,s.jsx)("b",{children:this.account})}),(0,s.jsx)("div",{className:"h-1c"}),(0,s.jsx)(i.l0,{schema:this.schema,uiSchema:e,onButtonClick:this.onButtonSubmit,onEnter:this.onEnter,requiredFlag:!1})]})}}class x extends w{get pageCaption(){return"\u6ce8\u518c\u8d26\u53f7"}get submitCaption(){return"\u6ce8\u518c\u65b0\u8d26\u53f7"}}class j extends w{get pageCaption(){return"\u8d26\u53f7\u5bc6\u7801"}get submitCaption(){return"\u6539\u5bc6\u7801"}}class k extends r.ps{header(){return!1}}class _ extends k{content(){const{account:e,login:t}=this.controller;return(0,s.jsx)("div",{className:"container w-max-30c",children:(0,s.jsxs)("div",{className:"my-5",children:[(0,s.jsxs)("div",{className:"py-5 text-center",children:["\u8d26\u53f7 ",(0,s.jsxs)("strong",{className:"text-primary",children:[e," "]})," \u6ce8\u518c\u6210\u529f\uff01"]}),(0,s.jsx)("button",{className:"btn btn-success btn-block",type:"button",onClick:()=>t(void 0),children:"\u76f4\u63a5\u767b\u5f55"})]})})}}class C extends k{content(){const{login:e}=this.controller;return(0,s.jsx)("div",{className:"container w-max-30c",children:(0,s.jsxs)("div",{className:"my-5",children:[(0,s.jsx)("div",{className:"py-5 text-center text-success",children:"\u6210\u529f\u4fee\u6539\u5bc6\u7801"}),(0,s.jsx)("button",{className:"btn btn-primary btn-block",onClick:()=>e(),children:"\u767b\u5f55\u8d26\u53f7"})]})})}}class S extends r.Qr{constructor(){super(...arguments),this.account=void 0,this.type=void 0,this.password=void 0,this.verify=void 0,this.login=async e=>{let t=await f.BG.login({user:e||this.account,pwd:this.password,guest:i.nav.guest});void 0!==t?(await i.nav.userLogined(t),this.isWebNav&&i.nav.navigate("/")):alert("something wrong!")}}async internalStart(){this.openVPage(this.VStart)}get VVerify(){return b}toVerify(){this.openVPage(this.VVerify,(async e=>{this.verify=e;let t=await f.BG.checkVerify(this.account,e);if(0===t)return t;this.toPassword()}))}toPassword(){this.openVPage(this.VPassword)}toSuccess(){this.openVPage(this.VSuccess)}async checkAccount(){let e=await f.BG.isExists(this.account),t=this.accountError(e);if(void 0!==t)return t;e=await f.BG.sendVerify(this.account,this.type,i.nav.oem),this.toVerify()}}class N extends S{get VStart(){return g}get VPassword(){return x}get VSuccess(){return _}accountError(e){if(e>0)return"\u5df2\u7ecf\u88ab\u6ce8\u518c\u4f7f\u7528\u4e86"}async onPasswordSubmit(e){this.password=e;let t={nick:void 0,user:this.account,pwd:e,country:void 0,mobile:void 0,mobileCountry:void 0,email:void 0,verify:this.verify};switch(this.type){case"mobile":t.mobile=Number(this.account),t.mobileCountry=86;break;case"email":t.email=this.account}let n=await f.BG.register(t);return 0===n?(i.nav.clear(),void this.toSuccess()):this.regReturn(n)}regReturn(e){let t;switch(e){default:return"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef";case 4:return"\u9a8c\u8bc1\u7801\u9519\u8bef";case 0:return;case 1:t="\u7528\u6237\u540d "+this.account;break;case 2:t="\u624b\u673a\u53f7 +"+this.account;break;case 3:t="\u90ae\u7bb1 "+this.account}return t+" \u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7\u4e86"}}class E extends S{get VStart(){return y}get VPassword(){return j}get VSuccess(){return C}accountError(e){if(0===e)return"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8d26\u53f7"}async onPasswordSubmit(e){if(this.password=e,0===(await f.BG.resetPassword(this.account,this.password,this.verify,this.type)).length){let e="something wrong in reseting password";throw console.log(e),e}i.nav.clear(),this.toSuccess()}}class A extends r.Qr{async internalStart(){}async showLogin(e,t){this.openVPage(p,{onLogin:async(t,n)=>{let r=await f.BG.login({user:t,pwd:n,guest:i.nav.guest});return void 0!==r&&(console.log("onLoginSubmit: user=%s pwd:%s",r.name,r.token),await i.nav.userLogined(r,e),!0)},withBack:t})}async showLogout(e){this.openVPage(a,(()=>{i.nav.logout(e)}))}async showRegister(){let e=new N(this.res);await e.start()}async showForget(){let e=new E(this.res);await e.start()}getVChangePassword(){return m}async showChangePassword(){let e=this.getVChangePassword();this.openVPage(e,(async(e,t)=>{let n=new f.tQ("tv/",void 0);return await n.changePassword({orgPassword:e,newPassword:t})}))}}},958:(e,t,n)=>{"use strict";n.d(t,{QK:()=>d});var i,r,s=n(269),a=n(229),o=n(791),l=n(894),u=n(106),c=n(537),h=n(184);i=class extends o.Component{constructor(e){super(e),this.schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],this.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},(0,s.Z)(this,"data",r,this),this.onItemChanged=async(e,t,n)=>{let{name:i}=e;await c.BG.userSetProp(i,t),this.data[i]=t,u.nav.user[i]=t,u.nav.saveLocalUser()};let{nick:t,icon:n}=u.nav.user;this.data={nick:t,icon:n}}render(){return(0,h.jsx)(u.T3,{header:"\u4e2a\u4eba\u4fe1\u606f",children:(0,h.jsx)(u.I8,{schema:this.schema,uiSchema:this.uiSchema,data:this.data,onItemChanged:this.onItemChanged})})}},r=(0,a.Z)(i.prototype,"data",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null});n(736);async function d(){return new((await Promise.resolve().then(n.bind(n,736))).CLogin)(void 0)}},106:(e,t,n)=>{"use strict";n.d(t,{Ax:()=>Jt,Ct:()=>Oe.Ct,Qo:()=>_t,KX:()=>Et,S9:()=>At,I8:()=>dt,FA:()=>Oe.FA,l0:()=>Je,Ee:()=>J,pA:()=>Oe.pA,aV:()=>kt,pU:()=>Wt,rO:()=>Oe.rO,gc:()=>i.gc,T3:()=>r.T,QX:()=>Mt,Rj:()=>$t,ys:()=>Gt,nav:()=>i.nav,resOptions:()=>Ge.resOptions,B1:()=>Ge.B1,XB:()=>Ge.XB,t:()=>Ge.t});n(754);var i=n(590),r=n(764),s=(n(446),n(664),n(353),n(791)),a=n(894),o=n(694),l=n.n(o),u=n(269),c=n(229),h=n(763),d=n.n(h);class p{}class f extends p{constructor(e){super(),this.func=void 0,this.func=e}check(e,t){let n=this.func(t);if(void 0!==n)switch(typeof n){case"undefined":return;case"string":return void e.push(n);default:return void e.push(...n)}}}class m extends p{constructor(e){super(),this.res=void 0,this.res=e}}class v extends m{check(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(!1===isNaN(t))return;case"undefined":}e.push(this.res.required)}}class g extends m{constructor(e,t,n){super(e),this.minMsg=void 0,this.maxMsg=void 0,this.min=void 0,this.max=void 0,this.minMsg=d().template(e.min),this.maxMsg=d().template(e.max),this.min=t,this.max=n}check(e,t){if(void 0===t||null===t)return;let n=Number(t);!0===isNaN(n)?e.push(this.res.number):this.checkMore(e,n)}checkMore(e,t){void 0!==this.min&&Number(t)<this.min&&e.push(this.minMsg({min:this.min})),void 0!==this.max&&Number(t)>this.max&&e.push(this.maxMsg({max:this.max}))}}class y extends g{checkMore(e,t){super.checkMore(e,t),!1===Number.isInteger(t)&&e.push(this.res.integer)}}var b,w,x,j,k=n(986),_=n(184);let C=(b=class{get hasError(){return this.errors.length+this.contextErrors.length>0}constructor(e,t,n,i){this.name=void 0,this.context=void 0,this.fieldProps=void 0,this.children=void 0,this._itemSchema=void 0,this._ui=void 0,this.defaultValue=void 0,this.value=void 0,this.rules=void 0,(0,u.Z)(this,"errors",w,this),(0,u.Z)(this,"contextErrors",x,this),this.readOnly=void 0,this.disabled=void 0,(0,u.Z)(this,"visible",j,this),this.isChanging=void 0,this.onInputChange=e=>{this.changeValue(e.target.value,!0)},this.container=(0,k.Pi)((()=>{if(!1===this.visible)return null;let{form:e,inNode:t}=this.context;if(!0===t)return this.render();let n=this.label;return!0===this.itemSchema.required&&!1!==e.props.requiredFlag&&null!==n&&(n=(0,_.jsxs)(_.Fragment,{children:[n,"\xa0",(0,_.jsx)("span",{className:"text-danger",children:"*"})]})),e.FieldContainer(n,this.renderBody())})),this.context=e;let{name:r}=t;if(this.name=r,this._itemSchema=t,this.fieldProps=n,this.children=i,this._ui=e.getUiItem(r),void 0===this.ui)this.readOnly=!1,this.disabled=!1,this.visible=!0;else{let{readOnly:e,disabled:t,visible:n}=this.ui;this.readOnly=!0===e,this.disabled=!0===t,this.visible=!(!1===n)}this.value=this.defaultValue=e.getValue(r)}get itemSchema(){return this._itemSchema}get ui(){return this._ui}init(){if(this.rules=[],!0===this.itemSchema.required&&this.rules.push(new v(this.context.form.res)),this.buildRules(),void 0===this.ui)return;let{rules:e}=this.ui;if(void 0!==e)if(!1!==Array.isArray(e))for(let t of e)this.rules.push(new f(t));else this.rules.push(new f(e))}buildRules(){}checkRules(){let e=[];for(let t of this.rules)t.check(e,this.value);0===e.length?this.context.removeErrorWidget(this):(this.context.addErrorWidget(this),this.errors.push(...e))}get isOk(){return 0===this.errors.length}setError(e){void 0!==e&&("string"===typeof e?this.errors.push(e):this.errors.push(...e))}setContextError(e){void 0!==e&&("string"===typeof e?this.contextErrors.push(e):this.contextErrors.push(...e))}clearError(){this.errors.splice(0)}clearContextError(){this.contextErrors.splice(0)}parse(e){return e}setElementValue(e){}setDataValue(e){!0!==this.isChanging&&(this.context.initData[this.name]=this.value=this.parse(e))}setValue(e){!0!==this.isChanging&&this.changeValue(e,!1)}getValue(){return this.context.getValue(this.name)}getReadOnly(){return this.readOnly}getDisabled(){return this.disabled}getVisible(){return this.visible}setReadOnly(e){this.readOnly=e}setDisabled(e){this.disabled=e}setVisible(e){this.visible=e}changeValue(e,t){let n,i,r=this.value;void 0!==this.ui&&(n=this.ui.onChanging,i=this.ui.onChanged);let s=!0;void 0!==n&&(this.isChanging=!0,s=n(this.context,this.value,r),this.isChanging=!1),!0===s&&(this.setDataValue(e),!0!==t&&this.setElementValue(e),void 0!==i&&(this.isChanging=!0,i(this.context,this.value,r),this.isChanging=!1))}get className(){let e;return!1===this.context.inNode&&(e="form-control"),l()(e,this.context.form.FieldClass,this.ui&&this.ui.className)}renderBody(){let e;if(!1===this.hasError&&this.ui){let{discription:t,discriptionClassName:n}=this.ui;void 0===n&&(n="small text-muted"),e=(0,_.jsx)("span",{className:n,children:t})}return(0,_.jsxs)(_.Fragment,{children:[this.render(),e]})}get label(){let e;if(void 0===this.ui)e=this.name;else{let t=this.ui.label;e=null===t?null:t||this.name}return e}renderTemplet(){if(void 0!==this.children)return(0,_.jsx)(_.Fragment,{children:this.children});if(void 0===this.ui)return;let{Templet:e}=this.ui;return"function"===typeof e?e(this.value):e}renderErrors(){let e=[...this.errors,...this.contextErrors];if(0===e.length)return null;let{inNode:t}=this.context,n=!0===t?"span":"div";return e.map((e=>s.createElement(n,{key:e,className:"text-danger d-inline-block my-2 ms-3"},(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("i",{className:"fa fa-exclamation-circle"})," \xa0",e]}))))}},w=(0,c.Z)(b.prototype,"errors",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=(0,c.Z)(b.prototype,"contextErrors",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,c.Z)(b.prototype,"hasError",[a.Fl],Object.getOwnPropertyDescriptor(b.prototype,"hasError"),b.prototype),j=(0,c.Z)(b.prototype,"visible",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,c.Z)(b.prototype,"isOk",[a.Fl],Object.getOwnPropertyDescriptor(b.prototype,"isOk"),b.prototype),b);var S,N;let E=(S=class extends C{constructor(){super(...arguments),this.inputType="text",this.input=void 0,(0,u.Z)(this,"hasFocus",N,this),this.onKeyDown=async e=>{if(this.internalOnKeyDown(e),13!==e.keyCode)return;let{onEnter:t}=this.context.form.props;if(void 0===t)return;this.changeValue(e.currentTarget.value,!0),this.input.blur();let n=await t(this.name,this.context);void 0!==n&&this.context.setError(this.name,n)},this.onBlur=e=>{this.onInputChange(e),this.checkRules(),this.context.checkContextRules(),this.hasFocus=!1},this.onFocus=e=>{this.clearError(),this.context.removeErrorWidget(this),this.context.clearErrors(),this.hasFocus=!0}}get ui(){return this._ui}setElementValue(e){null!==this.input&&(this.input.value=e)}get placeholder(){return this.ui&&this.ui.placeholder||this.name}internalOnKeyDown(e){}onChange(e){}setReadOnly(e){null!==this.input&&(this.input.readOnly=this.readOnly=e)}setDisabled(e){null!==this.input&&(this.input.disabled=this.disabled=e)}render(){let e=this.renderTemplet();if(void 0!==e)return e;let t={};return!0===this.hasError?t["is-invalid"]=!0:t["required-item"]=!0===this.itemSchema.required,(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("input",{ref:e=>this.input=e,className:l()(this.className,t),type:this.inputType,defaultValue:this.value,onChange:e=>this.onChange(e),placeholder:this.placeholder,readOnly:this.readOnly,disabled:this.disabled,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,maxLength:this.itemSchema.maxLength}),this.renderErrors()]})}},N=(0,c.Z)(S.prototype,"hasFocus",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S);class A extends E{constructor(){super(...arguments),this.inputType="number"}get itemSchema(){return this._itemSchema}buildRules(){super.buildRules();let e=this.context.form.res,{min:t,max:n}=this.itemSchema;this.rules.push("integer"===this.itemSchema.type?new g(e,t,n):new y(e,t,n))}parse(e){if(void 0!==e&&null!==e)return Number(e)}}class P extends A{constructor(){super(...arguments),this.inputType="number"}isValidKey(e){return 46===e||8===e||37===e||39===e||e>=48&&e<=57||e>=96&&e<=105||109===e||189===e}internalOnKeyDown(e){let t=e.keyCode;window.event.returnValue=this.isValidKey(t)}}class O extends E{constructor(){super(...arguments),this.inputType="date"}}class I extends C{constructor(){super(...arguments),this.input=void 0,this.trueValue=void 0,this.falseValue=void 0,this.onInputChange=e=>{let t=!0===e.target.checked?this.trueValue:this.falseValue;this.setDataValue(t)},this.onClick=()=>{this.context.clearErrors()}}get ui(){return this._ui}init(){if(super.init(),void 0!==this.ui){let{trueValue:e,falseValue:t}=this.ui;this.trueValue=void 0===e||e,this.falseValue=void 0!==t&&t}else this.trueValue=!0,this.falseValue=!1}setElementValue(e){this.input.checked=e===this.trueValue}setReadOnly(e){this.input.readOnly=this.readOnly=e}setDisabled(e){this.input.disabled=this.disabled=e}render(){let e=l()(this.className,"form-check-inline p-0"),t=(0,_.jsx)("input",{ref:e=>this.input=e,className:"align-self-center",type:"checkbox",defaultChecked:this.defaultValue,onChange:this.onInputChange,onClick:this.onClick});return!0===this.context.inNode?(0,_.jsxs)("label",{className:e,children:[t," ",this.ui&&this.ui.label||this.name]}):(0,_.jsx)("div",{className:e,children:(0,_.jsx)("label",{className:"w-100 h-100 mb-0 d-flex justify-content-center",children:t})})}}var T,U;let R=(T=class extends C{constructor(){super(...arguments),this.select=void 0,(0,u.Z)(this,"readOnly",U,this),this.onInputChange=e=>{this.setDataValue(e.target.value)}}get ui(){return this._ui}setElementValue(e){this.select.value=e}setReadOnly(e){this.select.disabled=this.readOnly=!e}setDisabled(e){this.select.disabled=this.disabled=e}render(){if(!0===this.readOnly){let e=this.ui.list.find((e=>e.value===this.value)),t=void 0===e?"(???)":e.title;return(0,_.jsx)("span",{className:"form-control w-min-6c",children:t})}return(0,_.jsx)("select",{ref:e=>this.select=e,className:l()(this.className,"form-control"),defaultValue:this.defaultValue,onChange:this.onInputChange,children:this.ui.list.map(((e,t)=>{let{title:n,value:i}=e;return(0,_.jsx)("option",{className:undefined,value:i,children:n||i},t)}))})}},U=(0,c.Z)(T.prototype,"readOnly",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T);const L={height:"auto"};var V,F;const q=(0,_.jsx)("small",{className:"text-muted",children:"[\u65e0]"});let D=(V=class extends C{constructor(){super(...arguments),(0,u.Z)(this,"value",F,this),this.onClick=async()=>{let e=this.ui&&this.ui.pickId;if(void 0===e)return void alert("no pickId defined!");let t=await e(this.context,this.name,this.value);this.setDataValue(t),this.clearError(),this.clearContextError(),this.checkRules()}}get ui(){return this._ui}setReadOnly(e){this.readOnly=e}setDisabled(e){this.disabled=e}render(){let e,t;void 0!==this.ui&&(e=this.ui.placeholder,t=this.ui.Templet);let n,i={"form-control":!0,"required-item":!0===this.itemSchema.required,"cursor-pointer":!0,"is-invalid":this.hasError};if(void 0===this.value||null===this.value)n=e||q,i["text-muted"]=!0;else if(void 0===t){let e;if(null===this.value)e="null";else switch(typeof this.value){case"undefined":e=q;break;case"object":e=this.value.id;break;default:e=this.value}n=(0,_.jsx)(_.Fragment,{children:e})}else n="function"===typeof t?t(this.value):t;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:l()(i),onClick:this.onClick,children:n}),this.renderErrors()]})}},F=(0,c.Z)(V.prototype,"value",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V);const z=(e,t,n)=>(0,_.jsxs)("span",{className:"text-danger",children:["!!data type ",e," only support ",(n||[]).join(", "),", can't use ui ",t,"!!"]});class B extends C{constructor(){super(...arguments),this.onClick=async()=>{this.clearError(),this.clearContextError();let{name:e,type:t}=this.itemSchema;"submit"===t&&await this.context.submit(e)},this.observerRender=(0,k.Pi)((()=>{let e,t,n,{name:i,type:r}=this.itemSchema;if(void 0!==this.ui){let{widget:i}=this.ui;if("button"!==i)return z(r,i,["button"]);e=this.ui.Templet,t=this.ui.className,n=this.ui.label}let s,{form:a,hasError:o}=this.context,l=this.context,u="submit"===r&&o;s=void 0!==this.children?this.children:"function"===typeof e?e():void 0!==e?e:n;let c=(0,_.jsx)("button",{className:t,type:"button",disabled:u,onClick:this.onClick,children:s||i});return!0===l.inNode?(0,_.jsxs)(_.Fragment,{children:[c,this.renderErrors()]}):(0,_.jsxs)("div",{className:a.ButtonClass,children:[(0,_.jsx)("div",{children:this.renderErrors()}),c]})}))}get ui(){return this._ui}get label(){return null}render(){return s.createElement(this.observerRender)}}var M,W,H;let Z=(M=class{constructor(e,t,n,i,r){if(this.subContexts=void 0,this.form=void 0,this.uiSchema=void 0,this.initData=void 0,this.inNode=void 0,this.widgets={},this.rules=void 0,this.isRow=void 0,(0,u.Z)(this,"errors",W,this),(0,u.Z)(this,"errorWidgets",H,this),this.renderErrors=(0,k.Pi)((()=>{let{errors:e}=this;return 0===e.length?null:(0,_.jsx)(_.Fragment,{children:e.map((e=>(0,_.jsxs)("span",{className:"text-danger inline-block my-1 ms-3",children:[(0,_.jsx)("i",{className:"fa fa-exclamation-circle"})," \xa0",e]},e)))})})),this.form=e,this.uiSchema=t,this.initData=n,this.inNode=i,this.isRow=r,void 0!==t){let{rules:e}=t;void 0!==e&&(this.rules=[],!1===Array.isArray(e)?this.rules.push(e):this.rules.push(...e))}}getArrRowContexts(e){void 0===this.subContexts&&(this.subContexts={});let t=this.subContexts[e];return void 0===t&&(this.subContexts[e]=t={}),t}get arrName(){}getValue(e){return this.initData[e]}setValue(e,t){this.initData[e]=t;let n=this.widgets[e];void 0!==n&&n.setValue(t)}getDisabled(e){let t=this.widgets[e];if(void 0!==t)return t.getDisabled()}setDisabled(e,t){let n=this.widgets[e];void 0!==n&&n.setDisabled(t)}getReadOnly(e){let t=this.widgets[e];void 0!==t&&t.getReadOnly()}setReadOnly(e,t){let n=this.widgets[e];void 0!==n&&n.setReadOnly(t)}getVisible(e){let t=this.widgets[e];void 0!==t&&t.getVisible()}setVisible(e,t){let n=this.widgets[e];void 0!==n&&n.setVisible(t)}async submit(e){if(this.checkRules(),!0===this.hasError){let e="";for(let t of this.errorWidgets)e+=t.name+":\n"+t.errors.join("\n");return void console.error(e)}let{onButtonClick:t}=this.form.props;if(void 0===t)return void alert("button ".concat(e," clicked. you should define form onButtonClick"));let n=await t(e,this);void 0!==n&&this.setError(e,n)}checkFieldRules(){for(let e in this.widgets)this.widgets[e].checkRules();if(void 0!==this.subContexts)for(let e in this.subContexts){let t=this.subContexts[e];for(let e in t)t[e].checkFieldRules()}}checkContextRules(){if(this.clearErrors(),void 0!==this.rules){for(let e of this.rules){let t=e(this);if(void 0!==t)if(!0===Array.isArray(t))this.errors.push(...t);else if("string"===typeof t)this.errors.push(t);else for(let e in t)this.setError(e,t[e])}if(void 0!==this.subContexts)for(let e in this.subContexts){let t=this.subContexts[e];for(let e in t){let n=t[e];n.clearErrors(),n.checkContextRules()}}}}setError(e,t){let n=this.widgets[e];void 0!==n&&(n.setContextError(t),this.addErrorWidget(n))}clearContextErrors(){for(let e in this.widgets){let t=this.widgets[e];void 0!==t&&t.clearContextError()}}clearWidgetsErrors(){for(let e in this.widgets){let t=this.widgets[e];void 0!==t&&t.clearError()}}checkRules(){this.clearErrors(),this.clearWidgetsErrors(),this.checkFieldRules(),!0!==this.hasError&&this.checkContextRules()}addErrorWidget(e){this.errorWidgets.findIndex((t=>t===e))<0&&this.errorWidgets.push(e)}removeErrorWidget(e){let t=this.errorWidgets.findIndex((t=>t===e));t>=0&&this.errorWidgets.splice(t,1)}checkHasError(){if(!0===this.errorWidgets.length+this.errors.length>0)return!0;if(void 0===this.subContexts)return!1;for(let e in this.subContexts){let t=this.subContexts[e];for(let e in t)if(!0===t[e].hasError)return!0}return!1}get hasError(){return this.checkHasError()}clearErrors(){this.errors.splice(0),this.errorWidgets.splice(0),this.clearContextErrors()}},W=(0,c.Z)(M.prototype,"errors",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=(0,c.Z)(M.prototype,"errorWidgets",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,c.Z)(M.prototype,"hasError",[a.Fl],Object.getOwnPropertyDescriptor(M.prototype,"hasError"),M.prototype),M),$=1;class Q extends Z{constructor(e,t,n,i){let r,{uiSchema:s}=e;if(void 0!==s){let{items:e}=s;void 0!==e&&(r=e[t.name])}super(e.form,r,n,i,!0),this.parentContext=void 0,this.arrSchema=void 0,this.rowKey=void 0,this.data=void 0,this.parentContext=e,this.arrSchema=t,this.rowKey=$++,this.data=n}getItemSchema(e){return this.arrSchema.itemSchemas[e]}getUiItem(e){if(void 0===this.uiSchema)return;let{items:t}=this.uiSchema;return void 0!==t?t[e]:void 0}get arrName(){return this.arrSchema.name}clearErrors(){super.clearErrors(),this.parentContext.clearErrors()}get parentData(){return this.parentContext.data}}class K extends Z{constructor(e,t){super(e,e.uiSchema,e.data,t,!1)}get data(){return this.form.data}getItemSchema(e){return this.form.itemSchemas[e]}getUiItem(e){let{uiSchema:t}=this.form;if(void 0===t)return;let{items:n}=t;return void 0!==n?n[e]:void 0}}const G=s.createContext({}),X=(0,k.Pi)((e=>{let t,n,i,r,{parentContext:a,arrSchema:o,children:u}=e,{name:c,arr:h}=o,d=a.initData[c],{form:p}=a,f=a.getArrRowContexts(c),m=a.getUiItem(c),{onDeleted:v,onRestored:g}=m,y=c,{ArrContainer:b,RowContainer:w,RowSeperator:x,uiSchema:j}=p;if(void 0!==j){let{selectable:e,deletable:t,restorable:s}=j;!0!==n&&(n=e),!0!==i&&(i=t),!0!==r&&(r=s)}if(void 0!==m){let{widget:e,label:s,selectable:a,deletable:l,restorable:u,ArrContainer:c,RowContainer:h,RowSeperator:d}=m;if(void 0!==a&&(n=a),void 0!==l&&(i=l),void 0!==u&&(r=u),void 0!==c&&(b=c),void 0!==h&&(w=h),void 0!==d&&(x=d),t=m.Templet,"arr"!==e)return z(o.type,e,["arr"]);y=s||y}let C=!0;return b(y,(0,_.jsx)(_.Fragment,{children:d.map(((e,c)=>{let p,m,y;if(!1===C?y=x:C=!1,void 0!==u)p=new Q(a,o,e,!0),m=(0,_.jsx)(_.Fragment,{children:u});else{let n=typeof t;"function"===n?(p=new Q(a,o,e,!0),m=s.createElement((0,k.Pi)(t),e)):"object"===n?(p=new Q(a,o,e,!0),m=t):(p=new Q(a,o,e,!1),m=(0,_.jsx)(_.Fragment,{children:h.map(((e,t)=>(0,_.jsx)(s.Fragment,{children:Ke(p,e,void 0)},e.name)))}))}let b,j,{rowKey:S}=p;if(f[S]=p,!0===n){let t=t=>{let{checked:n}=t.target;e.$isSelected=n;let{$source:i}=e;void 0!==i&&(i.$isSelected=n),p.clearErrors()};b=(0,_.jsx)("div",{className:"form-row-checkbox",children:(0,_.jsx)("input",{type:"checkbox",onClick:t,defaultChecked:e.$isSelected})})}let N=!(void 0===e.$isDeleted||!1===e.$isDeleted);if(!0===i){let t=N?"fa-undo":"fa-trash",n=()=>{if(!0===r){e.$isDeleted=!N;let{$source:t}=e;void 0!==t&&(t.$isDeleted=!N),g&&g(e)}else{let t=d.indexOf(e);t>=0&&d.splice(t,1),v&&v(e)}p.clearErrors()};j=(0,_.jsx)("div",{className:"form-row-edit text-info",onClick:n,children:(0,_.jsx)("i",{className:l()("fa",t,"fa-fw")})})}let E=!0===n||!0===i?t=>(0,_.jsx)("fieldset",{disabled:N,children:(0,_.jsxs)("div",{className:l()("d-flex",{deleted:N,"row-selected":e.$isSelected}),children:[b,(0,_.jsx)("div",{className:!0===n&&!0===i?"form-row-content":"form-row-content-1",children:t}),j]})}):e=>e;return(0,_.jsxs)(G.Provider,{value:p,children:[y,w(E((0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.renderErrors,{}),m]})))]},S)}))}))}));function J(e){let t,{className:n,style:r,src:s,altImage:a}=e;if(s){if(0!==s.indexOf("."))return!0===s.startsWith(":")&&(s=i.nav.resUrl+s.substr(1)),(0,_.jsx)("img",{src:s,className:n,alt:"img",style:r,onError:e=>{e.currentTarget.src=a||"https://tv.jkchemical.com/imgs/0001.png"}});t=s.substr(1)}else t="file-o";return(0,_.jsx)("span",{className:l()(n,"image-none"),style:r,children:(0,_.jsx)("i",{className:"fa fa-"+t})})}var Y,ee,te,ne,ie,re,se,ae,oe,le,ue,ce,he,de,pe,fe,me,ve,ge,ye,be,we,xe,je,ke,_e,Ce,Se,Ne,Ee,Ae,Pe=n(529),Oe=n(103);let Ie=(0,k.Pi)((ee=class extends s.Component{constructor(){super(...arguments),this.fileInput=void 0,(0,u.Z)(this,"fileName",te,this),this.upload=async e=>{let t=i.nav.resUrl+"upload";e||(e=this.buildFormData());try{i.nav.startWait();let n=new Headers;n.append("Access-Control-Allow-Origin","*");let r=await fetch(t,{method:"POST",body:e,headers:n});return":"+(await r.json()).res.id}catch(n){return console.error("%s %s",t,n),{error:n}}finally{i.nav.endWait()}},this.onFilesChange=e=>{let{onFilesChange:t}=this.props;t&&t(e);let n=e.target.files,i=n.length,r=[];for(let s=0;s<i;s++)r.push(n.item(s).name);this.fileName=r.join(", ")}}buildFormData(){let{maxSize:e}=this.props;void 0===e||e<=0?e=1e11:e*=1024;var t=this.fileInput.files,n=new FormData;let i=t.length;for(let r=0;r<i;r++){let i=t[r];if(i.size>e)return null;n.append("files[]",i,i.name)}}getFile0(){return this.fileInput.files[0]}render(){let{className:e,multiple:t,label:n}=this.props;return(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{className:"btn btn-outline-success",children:[n||"\u9009\u62e9\u6587\u4ef6",(0,_.jsx)("input",{className:e,ref:e=>this.fileInput=e,onChange:this.onFilesChange,type:"file",name:"file",multiple:t,style:{display:"none"}})]}),"\xa0",this.fileName]})}},te=(0,c.Z)(ee.prototype,"fileName",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=ee))||Y;function Te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2?arguments[2]:void 0;var i;for(n=n||["B","K","M","G","TB"];(i=n.shift())&&e>1024;)e/=1024;return("B"===i?e:e.toFixed(void 0===t?2:t))+i}const Ue=1600,Re=400;let Le=(0,k.Pi)((ge=class e extends s.Component{constructor(t){super(t),this.imgBaseSize=void 0,this.imageTypes=void 0,this.suffix=void 0,this.resUploader=void 0,(0,u.Z)(this,"file",re,this),(0,u.Z)(this,"desImgWidth",se,this),(0,u.Z)(this,"desImgHeight",ae,this),(0,u.Z)(this,"desImgSize",oe,this),(0,u.Z)(this,"srcImgWidth",le,this),(0,u.Z)(this,"srcImgHeight",ue,this),(0,u.Z)(this,"isChanged",ce,this),(0,u.Z)(this,"resId",he,this),(0,u.Z)(this,"enableUploadButton",de,this),(0,u.Z)(this,"srcImage",pe,this),(0,u.Z)(this,"desImage",fe,this),(0,u.Z)(this,"fileError",me,this),(0,u.Z)(this,"uploaded",ve,this),this.onFileChange=e=>{if(this.fileError=void 0,this.uploaded=!1,this.enableUploadButton=e.target.files.length>0,this.enableUploadButton){this.file=e.target.files[0];let t=this.file.name.lastIndexOf(".");if(t>=0&&(this.suffix=this.file.name.substr(t+1).toLowerCase()),this.imageTypes.indexOf(this.suffix)<0)return void(this.fileError="\u56fe\u7247\u7c7b\u578b\u5fc5\u987b\u662f ".concat(this.imageTypes.join(", ")," \u4e2d\u7684\u4e00\u79cd"));let n=new FileReader;n.readAsDataURL(this.file),n.onload=async()=>{if(this.srcImage=n.result,"svg"===this.suffix)this.imgBaseSize=Re,this.desImgSize=this.srcImage.length,this.desImage=this.srcImage;else await this.setSize(this.props.size)}}},this.compress=()=>new Promise(((e,t)=>{var n=new Image;n.src=this.srcImage,n.onload=()=>{let{width:t,height:i}=n;this.srcImgWidth=t,this.srcImgHeight=i;let r,s,a=t/i;this.imgBaseSize<0||t<=this.imgBaseSize&&i<=this.imgBaseSize?(r=t,s=i):a<0?(r=this.imgBaseSize,s=r/a):(s=this.imgBaseSize,r=s*a),this.desImgWidth=Math.round(r),this.desImgHeight=Math.round(s);var o=document.createElement("canvas"),l=o.getContext("2d"),u=document.createAttribute("width");u.nodeValue=String(r);var c=document.createAttribute("height");c.nodeValue=String(s),o.setAttributeNode(u),o.setAttributeNode(c),l.drawImage(n,0,0,r,s);let h=o.toDataURL("image/"+this.suffix,.7),d=this.convertBase64UrlToBlob(h);this.desImgSize=d.size,this.desImgSize>3145728&&(this.fileError="\u56fe\u7247\u5927\u4e8e3M\uff0c\u65e0\u6cd5\u4e0a\u4f20",this.enableUploadButton=!1),e(h)}})),this.upload=async()=>{if(!this.resUploader)return;let e=new FormData,t=this.convertBase64UrlToBlob(this.desImage);e.append("image",t,this.file.name);let n=await this.resUploader.upload(e);if("object"!==typeof n)this.resId=n,this.isChanged=this.resId!==this.props.id,this.uploaded=!0;else{let e,{error:t}=n,i=typeof t;switch(i){case"undefined":e="error: undefined";break;case"string":e=t;break;case"object":e=t.message;break;default:e=String(e)}this.fileError="error: "+i+" - "+e}},this.onSaved=()=>{let{onSaved:e}=this.props;e&&e(this.resId)},this.showOrgImage=()=>{i.nav.push((0,_.jsx)(r.T,{header:"\u539f\u56fe",children:(0,_.jsx)("div",{className:"p-3 text-center",children:(0,_.jsx)(J,{className:"h-min-4c",style:{maxWidth:"100%"},src:this.srcImage})})}))},this.resId=t.id,this.imageTypes=t.imageTypes||e.imageTypes}async setSize(e){switch(e){default:case"sm":this.imgBaseSize=180;break;case"md":this.imgBaseSize=Re;break;case"lg":this.imgBaseSize=800;break;case"xl":this.imgBaseSize=Ue;break;case"raw":this.imgBaseSize=-1}this.desImage=await this.compress()}convertBase64UrlToBlob(e){let t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=i.length,s=new Uint8Array(r);for(;r--;)s[r]=i.charCodeAt(r);return new Blob([s],{type:n})}levelDiv(){if(this.props.size)return;let e=[{caption:"\u5c0f\u56fe",size:"sm"}];return(this.srcImgHeight>Re||this.srcImgWidth>Re)&&e.push({caption:"\u4e2d\u56fe",size:"md"}),(this.srcImgHeight>800||this.srcImgWidth>800)&&e.push({caption:"\u5927\u56fe",size:"lg"}),(this.srcImgHeight>Ue||this.srcImgWidth>Ue)&&(e.push({caption:"\u8d85\u5927\u56fe",size:"xl"}),e.push({caption:"\u539f\u56fe",size:"raw"})),e.length<2?void 0:(0,_.jsx)("div",{children:e.map(((e,t)=>{let{caption:n,size:i}=e;return(0,_.jsxs)("label",{className:"me-3",children:[(0,_.jsx)("input",{type:"radio",name:"size",onChange:()=>this.setSize(i),defaultChecked:0===t})," ",n]},t)}))})}render(){let{label:e}=this.props,t=(0,_.jsx)("button",{className:"btn btn-sm btn-success align-self-center me-2",disabled:!this.isChanged,onClick:this.onSaved,children:"\u4fdd\u5b58"});return(0,_.jsx)(r.T,{header:e||"\u66f4\u6539\u56fe\u7247",right:t,children:(0,_.jsxs)("div",{className:"my-3 px-3 py-3 bg-white",children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"mb-3",children:[(0,_.jsx)(Ie,{ref:e=>this.resUploader=e,multiple:!1,maxSize:2048,label:"\u9009\u62e9\u56fe\u7247\u6587\u4ef6",onFilesChange:this.onFileChange}),(0,_.jsxs)("div",{className:"small text-muted",children:["\u652f\u6301 ",this.imageTypes.join(", ")," \u683c\u5f0f\u56fe\u7247\u3002"]}),this.fileError&&(0,_.jsx)("div",{className:"text-danger",children:this.fileError})]}),(0,_.jsx)(Oe.pA,{left:!0===this.uploaded?(0,_.jsx)("div",{className:"text-success p-2",children:"\u4e0a\u4f20\u6210\u529f\uff01"}):this.file&&this.desImgSize>0&&(0,_.jsxs)("div",{className:"mb-3 d-flex align-items-end",children:[(0,_.jsxs)("div",{className:"me-5",children:[this.levelDiv(),(0,_.jsxs)("div",{children:["\u5206\u8fa8\u7387\uff1a",this.desImgWidth," x ",this.desImgHeight,"\xa0 \xa0 \u6587\u4ef6\u5927\u5c0f\uff1a",Te(this.desImgSize)]})]}),(0,_.jsx)("button",{className:"btn btn-primary",disabled:!this.enableUploadButton,onClick:this.upload,children:"\u4e0a\u4f20"})]}),right:this.desImage&&(0,_.jsxs)("button",{className:"btn btn-link btn-sm text-end mb-3",onClick:this.showOrgImage,children:["\u539f\u56fe\u5927\u5c0f: ",Te(this.file.size),(0,_.jsx)("br",{}),"\u5206\u8fa8\u7387\uff1a",this.srcImgWidth," x ",this.srcImgHeight]})})]}),(0,_.jsx)("div",{className:"text-center",style:{border:!0===this.uploaded?"2px solid green":"1px dotted gray",padding:"8px"},children:(0,_.jsx)(J,{className:"h-min-4c",style:{maxWidth:"100%"},src:this.desImage})})]})})}},ge.imageTypes=["gif","jpg","jpeg","png","svg","apng","bmp","ico","cur","tiff","tif","webp"],ie=ge,re=(0,c.Z)(ie.prototype,"file",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,c.Z)(ie.prototype,"desImgWidth",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=(0,c.Z)(ie.prototype,"desImgHeight",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=(0,c.Z)(ie.prototype,"desImgSize",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,c.Z)(ie.prototype,"srcImgWidth",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=(0,c.Z)(ie.prototype,"srcImgHeight",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=(0,c.Z)(ie.prototype,"isChanged",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=(0,c.Z)(ie.prototype,"resId",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=(0,c.Z)(ie.prototype,"enableUploadButton",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=(0,c.Z)(ie.prototype,"srcImage",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=(0,c.Z)(ie.prototype,"desImage",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=(0,c.Z)(ie.prototype,"fileError",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=(0,c.Z)(ie.prototype,"uploaded",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ne=ie))||ne;(0,k.Pi)((Ae=class e extends s.Component{constructor(t){super(t),this.suffix=void 0,this.resUploader=void 0,(0,u.Z)(this,"content",we,this),(0,u.Z)(this,"file",xe,this),(0,u.Z)(this,"fileSize",je,this),(0,u.Z)(this,"isChanged",ke,this),(0,u.Z)(this,"resId",_e,this),(0,u.Z)(this,"enableUploadButton",Ce,this),(0,u.Z)(this,"fileError",Se,this),(0,u.Z)(this,"uploaded",Ne,this),(0,u.Z)(this,"uploading",Ee,this),this.onFileChange=t=>{if(this.fileError=void 0,this.uploaded=!1,this.enableUploadButton=t.target.files.length>0,this.enableUploadButton){this.file=t.target.files[0];let n=this.file.name.lastIndexOf(".");if(n>=0&&(this.suffix=this.file.name.substr(n+1).toLowerCase()),e.audioTypes.indexOf(this.suffix)<0)return void(this.fileError="\u97f3\u9891\u7c7b\u578b\u5fc5\u987b\u662f ".concat(e.audioTypes.join(", ")," \u4e2d\u7684\u4e00\u79cd"));let i=new FileReader;i.readAsDataURL(this.file),i.onload=async()=>{this.content=i.result,this.fileSize=this.content.length}}},this.upload=async()=>{if(!this.resUploader)return;this.uploading=!0;let e=new FormData,t=this.convertBase64UrlToBlob(this.content);e.append("image",t,this.file.name);let n=await this.resUploader.upload(e);if("object"!==typeof n)this.resId=n,this.isChanged=this.resId!==this.props.id,this.uploaded=!0;else{let e,{error:t}=n,i=typeof t;switch(i){case"undefined":e="error: undefined";break;case"string":e=t;break;case"object":e=t.message;break;default:e=String(e)}this.fileError="error: "+i+" - "+e}},this.onSaved=()=>{let{onSaved:e}=this.props;e&&e(this.resId)},this.resId=t.id}convertBase64UrlToBlob(e){let t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=i.length,s=new Uint8Array(r);for(;r--;)s[r]=i.charCodeAt(r);return new Blob([s],{type:n})}render(){let{label:t}=this.props,n=(0,_.jsx)("button",{className:"btn btn-sm btn-success align-self-center me-2",disabled:!this.isChanged,onClick:this.onSaved,children:"\u4fdd\u5b58"});return(0,_.jsxs)(r.T,{header:t||"\u66f4\u6539\u6587\u4ef6",right:n,children:[(0,_.jsx)("div",{className:"my-3 px-3 py-3 bg-white",children:(0,_.jsx)("div",{children:(0,_.jsxs)("div",{className:"mb-3",children:[(0,_.jsx)(Ie,{ref:e=>this.resUploader=e,multiple:!1,maxSize:2048,label:"\u9009\u62e9\u97f3\u9891\u6587\u4ef6",onFilesChange:this.onFileChange}),(0,_.jsxs)("div",{className:"small text-muted",children:["\u652f\u6301 ",e.audioTypes.join(", ")," \u683c\u5f0f\u3002"]}),this.fileError&&(0,_.jsx)("div",{className:"text-danger",children:this.fileError})]})})}),(0,_.jsx)(Oe.pA,{left:!0===this.uploaded?(0,_.jsx)("div",{className:"text-success p-2",children:"\u4e0a\u4f20\u6210\u529f\uff01"}):!0===this.uploading?(0,_.jsx)("div",{className:"m-3",children:(0,_.jsx)(Pe.g,{})}):this.file&&this.content&&(0,_.jsxs)("div",{className:"m-3",children:[(0,_.jsxs)("div",{className:"mb-3",children:["\u6587\u4ef6\u5927\u5c0f\uff1a",Te(this.fileSize)]}),(0,_.jsx)("button",{className:"btn btn-primary",disabled:!this.enableUploadButton,onClick:this.upload,children:"\u4e0a\u4f20"})]})})]})}},Ae.audioTypes=["mp3","wav"],be=Ae,we=(0,c.Z)(be.prototype,"content",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=(0,c.Z)(be.prototype,"file",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=(0,c.Z)(be.prototype,"fileSize",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=(0,c.Z)(be.prototype,"isChanged",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e=(0,c.Z)(be.prototype,"resId",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=(0,c.Z)(be.prototype,"enableUploadButton",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Se=(0,c.Z)(be.prototype,"fileError",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=(0,c.Z)(be.prototype,"uploaded",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ee=(0,c.Z)(be.prototype,"uploading",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ye=be));var Ve,Fe,qe;let De=(Ve=class{get itemSchema(){return this._itemSchema}get uiItem(){return this._uiItem}get editInRow(){return!1}constructor(e,t,n,i,r){this.edit=void 0,this.name=void 0,this._itemSchema=void 0,this._uiItem=void 0,this.value=void 0,this.label=void 0,(0,u.Z)(this,"error",Fe,this),(0,u.Z)(this,"isChanged",qe,this),this.newValue=void 0,this.edit=e,this._itemSchema=t,this._uiItem=n,this.value=r;let{name:s}=t;this.name=s,this.label=i}init(){}async start(){return await this.internalStart()}async end(){await this.internalEnd()}renderContent(){let e,t,n,{name:i,type:r}=this._itemSchema,s=this._uiItem;if(void 0===s)t=i;else{t=s.label,n=s.labelHide;let r=s.Templet;if(void 0!==r)"function"===typeof r?void 0!==this.value&&(e=r(this.value)):e={templet:r};else if(void 0!==this.value)switch(s.widget){case"radio":case"select":let{list:t}=s;e=(0,_.jsx)("b",{children:t.find((e=>e.value===this.value)).title});break;case"id":e=(0,_.jsxs)("b",{children:["no templet for ",i,"=",this.value]})}}if(void 0===e)if("image"===r)e=(0,_.jsx)(J,{className:"w-4c h-4c",src:this.value});else e=this.value?(0,_.jsx)("b",{children:this.value}):(0,_.jsxs)("small",{className:"text-muted",children:["[",!0===n?t:"\u65e0","]"]});return e}async internalEnd(){i.nav.pop()}verifyValue(){if(void 0===this.uiItem)return;let{rules:e}=this.uiItem;if(void 0===e)return;let t=this.newValue;function n(e,n){let i=e(t);if(void 0!==i)return"object"!==typeof i?i:JSON.stringify(i)}if(Array.isArray(e))for(let i of e){let e=n(i);if(void 0!==e){this.error=e;break}}else this.error=n(e)}},Fe=(0,c.Z)(Ve.prototype,"error",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qe=(0,c.Z)(Ve.prototype,"isChanged",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ve);var ze,Be;let Me=(ze=class extends De{constructor(){super(...arguments),(0,u.Z)(this,"resId",Be,this),this.page=(0,k.Pi)((e=>{let{resolve:t}=e,n=this.uiItem&&this.uiItem.size;return(0,_.jsx)(Le,{label:"\u66f4\u6539"+this.label,id:this.resId,size:n,onSaved:e=>{t(e)}})}))}get uiItem(){return this._uiItem}async internalStart(){return this.resId=this.value,new Promise(((e,t)=>{i.nav.push(s.createElement(this.page,{resolve:e,reject:t}),(()=>t()))}))}},Be=(0,c.Z)(ze.prototype,"resId",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze);var We,He;let Ze=(We=class extends C{constructor(){super(...arguments),this.input=void 0,(0,u.Z)(this,"imageSrc",He,this),this.onClick=async()=>{let e=new Me(void 0,this.itemSchema,this.ui,this.ui.label,this.value),t=await e.start();null!==t&&(this.setValue(t),this.imageSrc=t),await e.end()},this.observerRender=(0,k.Pi)((()=>{let e,t=["bg-white p-1 d-flex justify-content-center"];return this.readOnly||this.disabled||(t.push("cursor-pointer"),e=this.onClick),(0,_.jsx)("div",{className:l()(t),onClick:e,children:(0,_.jsx)(J,{src:this.imageSrc,className:"w-4c h-4c"})})}))}get ui(){return this._ui}init(){super.init(),this.imageSrc=this.value}render(){return s.createElement(this.observerRender)}},He=(0,c.Z)(We.prototype,"imageSrc",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We);class $e extends C{constructor(){super(...arguments),this.inputs={}}get ui(){return this._ui}setElementValue(e){for(let t in this.inputs){let n=this.inputs[t];n.checked=e===n.value}}setReadOnly(e){this.readOnly=e;for(let t in this.inputs)this.inputs[t].readOnly=e}setDisabled(e){this.disabled=e;for(let t in this.inputs)this.inputs[t].disabled=e}}const Qe={id:{dataTypes:["id"],widget:D},text:{dataTypes:["integer","number","string"],widget:E},textarea:{dataTypes:["string"],widget:class extends C{constructor(){super(...arguments),this.input=void 0,this.onInputChange=e=>{this.setValue(e.currentTarget.value)},this.onBlur=e=>{this.onInputChange(e),this.checkRules(),this.context.checkContextRules()},this.onFocus=e=>{this.clearError(),this.context.removeErrorWidget(this),this.context.clearErrors()}}get itemSchema(){return this._itemSchema}get ui(){return this._ui}setElementValue(e){this.input.value=e}setReadOnly(e){this.input.readOnly=this.readOnly=e}setDisabled(e){this.input.disabled=this.disabled=e}render(){let e=this.renderTemplet();if(void 0!==e)return e;let t={};return!0===this.hasError?t["is-invalid"]=!0:t["required-item"]=!0===this.itemSchema.required,(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("textarea",{ref:e=>this.input=e,onBlur:this.onBlur,onFocus:this.onFocus,className:l()(this.className,t),rows:this.ui&&this.ui.rows,maxLength:this.itemSchema.maxLength,defaultValue:this.defaultValue,onChange:this.onInputChange}),this.renderErrors()]})}}},password:{dataTypes:["string"],widget:class extends E{constructor(){super(...arguments),this.inputType="password"}}},date:{dataTypes:["date"],widget:O},datetime:{dataTypes:["date"],widget:class extends E{constructor(){super(...arguments),this.inputType="datetime"}}},time:{dataTypes:["date"],widget:class extends E{constructor(){super(...arguments),this.inputType="time"}}},month:{dataTypes:["date"],widget:class extends E{constructor(){super(...arguments),this.inputType="month"}}},select:{dataTypes:["integer","number","string","date","boolean"],widget:R},url:{dataTypes:["string"],widget:class extends E{constructor(){super(...arguments),this.inputType="url"}}},email:{dataTypes:["string"],widget:class extends E{constructor(){super(...arguments),this.inputType="email"}}},number:{dataTypes:["integer","number"],widget:A},updown:{dataTypes:["integer","number"],widget:P},color:{},checkbox:{dataTypes:["boolean","integer","number"],widget:I},image:{dataTypes:["string"],widget:Ze},checkboxes:{},radio:{dataTypes:["integer","number","string","date","boolean"],widget:class extends C{constructor(){super(...arguments),this.inputs={}}get ui(){return this._ui}setElementValue(e){for(let t in this.inputs){let n=this.inputs[t];n.checked=e===n.value}}setReadOnly(e){this.readOnly=e;for(let t in this.inputs)this.inputs[t].readOnly=e}setDisabled(e){this.disabled=e;for(let t in this.inputs)this.inputs[t].disabled=e}render(){let e,{defaultValue:t,list:n}=this.ui,{isRow:i}=this.context;!0===i&&(e=this.context.rowKey);let r=l()(this.className,"py-0");return(0,_.jsx)("span",{className:r,style:L,children:n.map(((n,i)=>{let{value:r,title:s}=n,a=this.name;return void 0!==e&&(a+="-"+e),(0,_.jsxs)("label",{className:"form-radio-inline",children:[(0,_.jsx)("input",{ref:e=>this.inputs[i]=e,type:"radio",name:a,value:r,defaultChecked:(this.defaultValue||t)===r,onChange:this.onInputChange}),s||r]},i)}))})}}},tagSingle:{dataTypes:["integer"],widget:class extends $e{render(){let{valuesView:e,wrapClassName:t}=this.ui;if(void 0===e)return(0,_.jsx)(_.Fragment,{children:"valuesView must be defined"});let n,{isRow:i}=this.context;!0===i&&(n=this.context.rowKey);let r=l()(this.className,"py-0"),s=this.name;void 0!==n&&(s+="-"+n);let a={className:r,inputName:s,wrapClassName:t,onInputChange:this.onInputChange};return e.renderRadios(this.defaultValue,a)}}},tagMulti:{dataTypes:["string"],widget:class extends $e{constructor(){super(...arguments),this.defaultArr=void 0,this.onInputChange=e=>{let t=[];for(let n in this.inputs){let e=this.inputs[n];!0===e.checked&&t.push(e.value)}this.changeValue(t.join("|"),!0)}}init(){super.init();let e=this.defaultValue;if("string"===typeof e)this.defaultArr=e.split("|").map((e=>Number(e)));else this.defaultArr=[]}render(){let{valuesView:e,wrapClassName:t}=this.ui;if(void 0===e)return(0,_.jsx)(_.Fragment,{children:"valuesView must be defined"});let n={className:l()(this.className,"py-0"),inputs:this.inputs,wrapClassName:t,onInputChange:this.onInputChange};return e.renderChecks(this.defaultValue,n)}}},range:{dataTypes:["integer"],widget:class extends C{constructor(){super(...arguments),this.inputType="range",this.input=void 0}get ui(){return this._ui}setReadOnly(e){this.input.readOnly=this.readOnly=e}setDisabled(e){this.input.disabled=this.disabled=e}render(){let{min:e,max:t,step:n}=this.ui;return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("input",{ref:e=>this.input=e,className:l()(this.className,"form-control","w-min-6c"),type:this.inputType,defaultValue:this.defaultValue,onChange:this.onInputChange,max:t,min:e,step:n})})}}},button:{dataTypes:["button","submit"],widget:B}};function Ke(e,t,n,i){if(void 0===e)return null;if(void 0===t)return;let r,{name:s,type:a}=t;if("arr"===a){let t=e.getItemSchema(s);return(0,_.jsx)(X,{parentContext:e,arrSchema:t,children:n})}let o=e.getUiItem(s);function l(e){switch(e){default:case"string":return E;case"id":return D;case"integer":return P;case"number":return A;case"date":return O;case"boolean":return I;case"button":case"submit":return B}}if(void 0===o)r=l(a);else{let{widget:e}=o;switch(e){default:if(void 0!==e){r=Qe[e].widget}void 0===r&&(r=l(a));break;case"custom":r=o.WidgetClass;break;case"group":return(0,_.jsx)("span",{children:"impletment group"})}}let{widgets:u}=e,c=u[s];return c||(c=new r(e,t,i,n),c.init(),u[s]=c),(0,_.jsx)(c.container,{})}n(631);var Ge=n(888);const Xe={_:{required:"required",number:"not valid number",integer:"not valid integer",min:"min value is ${min}",max:"max value is ${max}"},zh:{_:{required:"\u5fc5\u987b\u586b",number:"\u9700\u8981\u6570\u5b57",integer:"\u9700\u8981\u6574\u6570",min:"\u4e0d\u80fd\u5c0f\u4e8e${min}",max:"\u4e0d\u80fd\u5927\u4e8e${max}"}}};class Je extends s.Component{constructor(e){super(e),this.schema=void 0,this.itemSchemas=void 0,this.uiSchema=void 0,this.res=void 0,this.formContext=void 0,this.disposer=void 0,this.data=void 0,this.Container=void 0,this.FieldContainer=void 0,this.FieldClass=void 0,this.ButtonClass=void 0,this.watch=()=>{let{formData:e}=this.props;void 0!==e&&this.calcSelectOrDelete()},this.DefaultContainer=e=>(0,_.jsx)("form",{className:l()(this.props.className),onSubmit:e=>e.preventDefault(),children:e}),this.DefaultFieldContainer=(e,t)=>{let{fieldLabelSize:n}=this.props;if(n>0){let i;null===e?n=0:i=(0,_.jsx)("label",{className:l()("col-sm-"+n,"col-form-label"),children:e});let r="col-sm-"+(12-n);return(0,_.jsxs)("div",{className:"form-group row",children:[i,(0,_.jsx)("div",{className:r,children:t})]})}return(0,_.jsxs)("div",{className:"form-group",children:[null===e?null:(0,_.jsx)("label",{className:"col-form-label",children:e}),t]})},this.DefaultFieldClass=void 0,this.DefaultButtonClass="text-center py-2",this.DefaultRes=(0,Ge.js)(Xe),this.ArrContainer=(e,t)=>(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:l()("small text-muted text-center bg-light py-1 px-3 mt-4 mb-1"),children:e}),t]}),this.RowContainer=e=>{let t=l()({"py-3":!0});return(0,_.jsx)("div",{className:t,children:e})},this.RowSeperator=(0,_.jsx)("div",{className:"border border-gray border-top"});let{schema:t,uiSchema:n,Container:i,FieldContainer:r,FieldClass:s,ButtonClass:o,res:u}=e;this.Container=i||this.DefaultContainer,this.FieldContainer=r||this.DefaultFieldContainer,this.FieldClass=void 0!==s&&""!==s&&null!==s?s:this.DefaultFieldClass,this.res=u||this.DefaultRes,this.ButtonClass=o||this.DefaultButtonClass,this.schema=t,this.itemSchemas={};for(let a of this.schema)this.itemSchemas[a.name]=a;this.uiSchema=n,this.disposer=(0,a.EH)(this.watch),this.data={}}renderContent(){this.initData(this.props.formData);let e,{children:t}=this.props;return void 0!==t?(this.formContext=new K(this,!0),(0,_.jsx)(_.Fragment,{children:t})):(void 0!==this.uiSchema&&(e=this.uiSchema.Templet),void 0!==e?(this.formContext=new K(this,!0),"function"===typeof e?e(this.data):e):(this.formContext||(this.formContext=new K(this,!1)),(0,_.jsx)(_.Fragment,{children:this.schema.map(((e,n)=>(0,_.jsx)(s.Fragment,{children:Ke(this.formContext,e,t)},n)))})))}initData(e){if(void 0===e&&(e={}),void 0!==this.uiSchema){let{items:t}=this.uiSchema;if(void 0!==t)for(let n in t){let i=t[n].defaultValue;void 0!==i&&void 0===e[n]&&(e[n]=i)}}for(let t of this.schema)this.initDataItem(t,this.data,e)}initDataItem(e,t,n){let{name:i,type:r}=e;if("button"===r)return;if("arr"!==r)return void(t[i]=n[i]);let s=e,{arr:o}=s;if(void 0===o)return;let l=s.itemSchemas={};for(let a of o)l[a.name]=a;let u=n[i];void 0===u?u=[]:!1===Array.isArray(u)&&(u=[u]);let c=[];for(let a of u){let{$isSelected:e,$isDeleted:t}=a,n={$source:a,$isSelected:e,$isDeleted:t};for(let i of o)this.initDataItem(i,n,a);c.push(n)}t[i]=(0,a.LO)(c)}calcSelectOrDelete(){for(let e of this.schema)this.arrItemOperated(e)}arrItemOperated(e){let{name:t,type:n}=e;if("arr"!==n)return;if(void 0===this.data)return;let i=this.data[t];if(void 0===i)return;let{arr:r}=e;for(let s of i){let{$source:e}=s;if(void 0===e)continue;let{$isSelected:t,$isDeleted:n}=e;s.$isSelected=t,s.$isDeleted=n;for(let i of r)this.arrItemOperated(i)}}componentDidMount(){let{beforeShow:e}=this.props;void 0!==e&&e(this.formContext)}componentWillUnmount(){void 0!==this.disposer&&this.disposer()}render(){let e=this.renderContent();return(0,_.jsxs)(G.Provider,{value:this.formContext,children:[s.createElement(this.formContext.renderErrors),this.Container(e)]})}async buttonClick(e){if(this.formContext.checkRules(),!0===this.formContext.hasError)return;let{onButtonClick:t}=this.formContext.form.props;if(void 0===t)return void alert("you should define form onButtonClick");let n=await t(e,this.formContext);void 0!==n&&this.formContext.setError(e,n)}}class Ye extends s.Component{render(){let{name:e,children:t}=this.props,n=this.context;if(void 0===n)return(0,_.jsx)("span",{className:"text-danger",children:"!only in Form!"});let i=n.getItemSchema(e),r=Ke(n,i,t,this.props);return void 0===r?(0,_.jsxs)("span",{className:"text-danger",children:["!!",e," is not defined!!"]}):r}}Ye.contextType=G;class et extends De{constructor(){super(...arguments),this.onChange=e=>{this.newValue=e.target.value;let t=this.value;this.isChanged=this.newValue!==t},this.onBlur=e=>{this.verifyValue()},this.onFocus=()=>{this.error=void 0},this.page=(0,k.Pi)((e=>{let{resolve:t}=e,n=()=>{if(this.verifyValue(),void 0===this.error){let e=this.newValue;t(e)}},i=(0,_.jsx)("button",{className:"btn btn-sm btn-success align-self-center me-2",disabled:!this.isChanged,onClick:n,children:"\u4fdd\u5b58"}),{type:s,max:a,min:o,step:l}=this.inputOptions();return(0,_.jsx)(r.T,{header:this.label,right:i,children:(0,_.jsxs)("div",{className:"m-3",children:[(0,_.jsx)("input",{type:s,onChange:this.onChange,onKeyDown:e=>{13===e.keyCode&&n()},onBlur:this.onBlur,onFocus:this.onFocus,className:"form-control",defaultValue:this.value,min:o,max:a,step:l}),this.uiItem&&(0,_.jsx)("div",{className:"small muted m-2",children:this.uiItem.placeholder}),this.error&&(0,_.jsx)("div",{className:"text-danger",children:this.error})]})})}))}get uiItem(){return this._uiItem}async internalStart(){return new Promise(((e,t)=>{let n=s.createElement(this.page,{resolve:e,reject:t});i.nav.push(n,t)}))}inputOptions(){return{type:"text"}}}class tt extends De{constructor(){super(...arguments),this.onChange=e=>{this.newValue=e;let t=this.value;this.isChanged=this.newValue!==t},this.page=(0,k.Pi)((e=>{let{resolve:t}=e,{name:n}=this.itemSchema,{list:i}=this.uiItem,s=(0,_.jsx)("button",{className:"btn btn-sm btn-success align-self-center",disabled:!this.isChanged,onClick:()=>{this.verifyValue(),void 0===this.error&&t(this.newValue)},children:"\u4fdd\u5b58"}),a=i?i.map(((e,t)=>{let{title:i,value:r}=e;return(0,_.jsx)("div",{className:"col",children:(0,_.jsxs)("label",{className:"px-3 py-2 cursor-pointer",children:[(0,_.jsx)("input",{name:n,type:"radio",value:r,onClick:()=>this.onChange(r),defaultChecked:r===this.value})," ",i||r," \xa0"]})},t)})):(0,_.jsx)(_.Fragment,{children:"no list defined"});return(0,_.jsx)(r.T,{header:"\u66f4\u6539"+this.label,right:s,children:(0,_.jsx)("div",{className:"m-3",children:(0,_.jsx)("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4",children:a})})})}))}get uiItem(){return this._uiItem}init(){void 0===this.value&&(this.value=void 0===this._uiItem?void 0:this._uiItem.defaultValue)}async internalStart(){return new Promise(((e,t)=>{let n=s.createElement(this.page,{resolve:e,reject:t});i.nav.push(n,t)}))}}class nt extends De{constructor(){super(...arguments),this.onChange=e=>{this.newValue=e;let t=this.value;this.isChanged=this.newValue!==t},this.page=(0,k.Pi)((e=>{let{resolve:t}=e,{list:n}=this.uiItem,i=n?n.map(((e,n)=>{let{title:i,value:r}=e;return(0,_.jsx)("div",{className:"px-3 py-2 cursor-pointer bg-white mb-1",onClick:()=>{this.onChange(r),t(this.newValue)},children:i||r},n)})):(0,_.jsx)(_.Fragment,{children:"no list defined"});return(0,_.jsx)(r.T,{header:"\u66f4\u6539"+this.label,children:(0,_.jsx)("div",{className:"my-3",children:i})})}))}get uiItem(){return this._uiItem}async internalStart(){return new Promise(((e,t)=>{let n=s.createElement(this.page,{resolve:e,reject:t});i.nav.push(n,t)}))}}class it extends De{constructor(){super(...arguments),this.onChange=e=>{this.newValue=e;let t=this.value;this.isChanged=this.newValue!==t},this.page=(0,k.Pi)((e=>(0,_.jsx)(r.T,{header:"\u66f4\u6539"+this.label,children:"ddd"})))}get uiItem(){return this._uiItem}async internalStart(){return new Promise((async(e,t)=>{let{pickId:n}=this.uiItem;if(void 0===n)return void alert("IdItemEdit.pickId = undefined");let i=await n(void 0,void 0,this.value);this.onChange(i.id),e(i)}))}async internalEnd(){}}class rt extends De{constructor(){super(...arguments),this.inputs={},this.inputType=void 0,this.page=(0,k.Pi)((e=>{let{resolve:t}=e,n=(0,_.jsx)("button",{className:"btn btn-sm btn-success align-self-center",disabled:!this.isChanged,onClick:()=>{this.verifyValue(),void 0===this.error&&t(this.newValue)},children:"\u4fdd\u5b58"});return(0,_.jsx)(r.T,{header:"\u66f4\u6539"+this.label,right:n,children:(0,_.jsx)("div",{className:"p-3",children:this.renderInputs()})})}))}get uiItem(){return this._uiItem}init(){void 0===this.value&&(this.value=void 0===this._uiItem?void 0:this._uiItem.defaultValue)}async internalStart(){return new Promise(((e,t)=>{let n=s.createElement(this.page,{resolve:e,reject:t});i.nav.push(n,t)}))}renderContent(){let e=this.uiItem.valuesView;return void 0===e?super.renderContent():e.render(this.value)}}class st extends rt{constructor(){super(...arguments),this.inputType="radio",this.onInputChange=e=>{let{currentTarget:t}=e;if(!1===t.checked)return;this.newValue=Number(t.value);let n=this.value;this.isChanged=this.newValue!==n}}renderInputs(){let{valuesView:e}=this.uiItem,t={inputs:this.inputs,onInputChange:this.onInputChange};return e.renderRadios(this.value,t)}}class at extends rt{constructor(){super(...arguments),this.inputType="checkbox",this.onInputChange=e=>{let t=[];for(let i in this.inputs){let e=this.inputs[i];!0===e.checked&&t.push(e.value)}this.newValue=t.join("|");let n=this.value;this.isChanged=this.newValue!==n}}renderInputs(){let{valuesView:e}=this.uiItem,t={inputs:this.inputs,onInputChange:this.onInputChange};return e.renderChecks(this.value,t)}}class ot extends De{constructor(){super(...arguments),this.onChange=e=>{this.newValue=e.target.value;let t=this.value;this.isChanged=this.newValue!==t},this.onBlur=e=>{this.verifyValue()},this.onFocus=()=>{this.error=void 0},this.page=(0,k.Pi)((e=>{let{resolve:t}=e,n=(0,_.jsx)("button",{className:"btn btn-sm btn-success align-self-center me-2",disabled:!this.isChanged,onClick:()=>{if(this.verifyValue(),void 0===this.error){let e=this.newValue;t(e)}},children:"\u4fdd\u5b58"});return(0,_.jsx)(r.T,{header:this.label,right:n,children:(0,_.jsxs)("div",{className:"m-3",children:[(0,_.jsx)("textarea",{onChange:this.onChange,onKeyDown:e=>{},onBlur:this.onBlur,onFocus:this.onFocus,className:"form-control",defaultValue:this.value,rows:6}),this.uiItem&&(0,_.jsx)("div",{className:"small muted m-2",children:this.uiItem.placeholder}),this.error&&(0,_.jsx)("div",{className:"text-danger",children:this.error})]})})}))}get uiItem(){return this._uiItem}async internalStart(){return new Promise(((e,t)=>{let n=s.createElement(this.page,{resolve:e,reject:t});i.nav.push(n,t)}))}}class lt extends De{constructor(){super(...arguments),this.input=void 0,this.onChange=e=>{this.newValue=this.getValue(e.target.checked);let t=this.value;this.isChanged=this.newValue!==t,this.edit.onItemChanged(this,this.newValue)}}get uiItem(){return this._uiItem}get editInRow(){return!0}async internalStart(){if(!this.input)return;if(void 0===this.uiItem)return this.input.checked;let{checked:e}=this.input;return this.getValue(e)}async end(){}renderContent(){let e,{readOnly:t}=this.uiItem,n=!0===t;return!0!==t&&(e=this.onChange),(0,_.jsx)("input",{ref:e=>this.input=e,type:"checkbox",defaultChecked:this.value,disabled:n,onChange:e})}getValue(e){let{trueValue:t,falseValue:n}=this.uiItem;return!0===e?null===t||void 0===t||t:null!==n&&void 0!==n&&n}}class ut extends et{inputOptions(){let e,t,n;return this._uiItem&&(e=this._uiItem.min,t=this._uiItem.max,n=this._uiItem.step),{type:"range",min:e,max:t,step:n}}}class ct extends et{inputOptions(){let e,t,n;return this._uiItem&&(e=this._uiItem.min,t=this._uiItem.max,n=this._uiItem.step),{type:"number",min:e,max:t,step:n}}}var ht;let dt=(0,k.Pi)(ht=class extends s.Component{constructor(e){super(e),this.defaultSepClassName="border-top edit-sep-light-gray",this.defaultRowContainerClassName="d-flex px-3 py-2 bg-white align-items-center",this.topBorder=void 0,this.bottomBorder=void 0,this.rowContainerClassName=void 0,this.sep=void 0,this.uiSchema=void 0,this.rowClick=async e=>{if(void 0===e)return void alert("item has no edit");let{itemSchema:t,uiItem:n,value:i,editInRow:r}=e;if(!0===r)return;let s,{onItemChanged:a,onItemClick:o,stopEdit:l}=this.props;if(!0!==l&&!0!==(null===n||void 0===n?void 0:n.readOnly))if(void 0===o)if(void 0!==e)try{s=await e.start(),s!==i&&(this.props.data[t.name]=s,void 0===a?alert("".concat(t.name," value changed, new: ").concat(s,", pre: ").concat(i)):await a(t,s,i)),await e.end()}catch(u){console.log("no value changed"),console.error(u)}else alert("undefined: let itemEdit:ItemEdit = createItemEdit(itemSchema, uiItem, label, value);");else await o(t,n,i)};let{topBorderClassName:t,bottomBorderClassName:n,sepClassName:i,rowContainerClassName:r,uiSchema:s}=e;this.topBorder=(0,_.jsx)("div",{className:t||this.defaultSepClassName}),this.bottomBorder=(0,_.jsx)("div",{className:n||this.defaultSepClassName}),this.rowContainerClassName=r||this.defaultRowContainerClassName,this.sep=(0,_.jsx)("div",{className:i||this.defaultSepClassName}),this.uiSchema=s&&s.items||{}}render(){let e,{schema:t}=this.props;return(0,_.jsxs)("div",{children:[this.topBorder,t.map(((t,n)=>{let i,r,{stopEdit:a}=this.props,{name:o}=t,l=void 0===this.uiSchema?void 0:this.uiSchema[o];void 0!==l&&(i=l.label||o,r=l.labelHide);let u=function(e,t,n,i,r){let s,a;if(void 0!==n)switch(n.widget){default:break;case"id":a=it;break;case"text":a=et;break;case"textarea":a=ot;break;case"image":a=Me;break;case"select":a=nt;break;case"range":a=ut;break;case"number":case"updown":a=ct;break;case"checkbox":a=lt;break;case"radio":s=new tt(e,t,n,i,r);break;case"tagSingle":s=new st(e,t,n,i,r);break;case"tagMulti":s=new at(e,t,n,i,r)}if(void 0===s){if(void 0===a)switch(t.type){case"string":a=et;break;case"image":a=Me;break;case"boolean":a=lt;break;case"number":case"integer":a=ut}if(void 0===a)return;s=new a(e,t,n,i,r)}return s.init(),s}(this,t,l,i,this.props.data[o]),c=this.rowContainerClassName,{editInRow:h}=u;!1===h&&!0!==a&&(h=!1),!1===h&&(c+=" cursor-pointer");let d,{required:p}=t,f=!0===p&&(0,_.jsx)("span",{className:"text-danger",children:"*"}),m="flex-fill d-flex ";!0===r?d=void 0:(d=(0,_.jsxs)("div",{children:[i," ",f]}),m+="justify-content-end");let v=(0,_.jsxs)(s.Fragment,{children:[e,(0,_.jsxs)("div",{className:"d-flex align-items-center"+c,onClick:async()=>await this.rowClick(u),children:[d,(0,_.jsx)("div",{className:m,children:void 0===u?void 0:u.renderContent()}),!1===h&&(0,_.jsx)("div",{className:"w-2c text-end",children:(0,_.jsx)("i",{className:"fa fa-angle-right"})})]})]},n);return e=this.sep,v})),this.bottomBorder]})}async onItemChanged(e,t){let{itemSchema:n,uiItem:i,value:r}=e;this.props.data[n.name]=t;let{onItemChanged:s,stopEdit:a}=this.props;!0!==a&&!0!==(null===i||void 0===i?void 0:i.readOnly)&&(void 0===s?alert("".concat(n.name," value changed, new: ").concat(t,", pre: ").concat(r)):await s(n,t,r))}})||ht;var pt;let ft=(pt=class{constructor(e){this.list=void 0,this.render=void 0,this.list=e}get isPaged(){let e=this.list.props.items;return null!==e&&void 0!==e&&!1===Array.isArray(e)}get items(){let e=this.list.props.items;return null===e?null:void 0!==e?!0===Array.isArray(e)?e:e.items:void 0}get loading(){let e=this.list.props.items;if(null===e)return!1;if(void 0===e)return!0;let t=e;return void 0!==t.items&&t.loading}get selectedItems(){}dispose(){}renderContent(e,t){let{render:n}=this.list.props.item;return void 0===n?(0,_.jsx)("div",{className:"px-3 py-2",children:JSON.stringify(e)}):n(e,t)}},(0,c.Z)(pt.prototype,"loading",[a.Fl],Object.getOwnPropertyDescriptor(pt.prototype,"loading"),pt.prototype),pt);class mt extends ft{constructor(){super(...arguments),this.render=(e,t)=>{let{className:n,key:i,onClick:r}=this.list.props.item;return(0,_.jsx)("li",{className:l()("va-row-clickable",n),onClick:()=>r&&r(e),children:this.renderContent(e,t)},void 0===i?t:i(e))}}}var vt,gt,yt=n(732);class bt extends ft{constructor(){super(...arguments),this.render=(e,t)=>{let{className:n,key:i}=this.list.props.item;if("string"===typeof e){let t=l()("va-list-gap","px-3","pt-1");return(0,_.jsx)("li",{className:t,children:e},(0,yt.h)())}return(0,_.jsx)("li",{className:l()(n),children:this.renderContent(e,t)},void 0===i?t:i(e))}}}let wt=(vt=class extends ft{constructor(e){super(e),(0,u.Z)(this,"_items",gt,this),this.inputItems={},this.buildItems=()=>{let e,{items:t,isItemSelected:n,selectedItems:i,compare:r}=this.list.props;if(void 0!==t)if(null!==t)if(e=!0===Array.isArray(t)?t:t.items,n){let t=e.map((e=>({selected:n(e),item:e,labelId:(0,yt.h)()})));this._items=t}else{let t;t=void 0===r?(e,t)=>e===t:r;let n=e.map((e=>({selected:void 0!==i&&void 0!==i.find((n=>t(e,n))),item:e,labelId:(0,yt.h)()})));this._items=n}else this._items=null;else this._items=void 0},this.render=(e,t)=>{let{key:n}=this.list.props.item;return s.createElement(this.row,{item:e,index:t,key:void 0===n?t:n(e)})},this.row=(0,k.Pi)((e=>{let{item:t,index:n}=e,{className:i}=this.list.props.item,{labelId:r,selected:s,item:a}=t;return(0,_.jsx)("li",{className:l()(i),children:(0,_.jsxs)("div",{className:"d-flex align-items-center px-3",children:[(0,_.jsx)("input",{ref:e=>{e&&(this.inputItems[r]=e)},className:"",type:"checkbox",value:"",id:r,defaultChecked:s,onChange:e=>{this.onSelect(t,e.target.checked)}}),(0,_.jsx)("label",{className:"",style:{flex:1,marginBottom:0},htmlFor:r,children:this.renderContent(a,n)})]})})})),this.buildItems(),this.listenArraySplice()}listenArraySplice(){let e,{items:t}=this.list.props;void 0!==t&&null!==t&&(e=!0===Array.isArray(t)?t:t.items,!0===(0,a.Ei)(t)&&(0,a.N7)(e,(e=>{if("splice"===e.type){let{index:t,removedCount:n,added:i}=e,r=i&&i.map((e=>({selected:!1,item:e,labelId:(0,yt.h)()})));this._items.splice(t,n,...r),this.buildItems()}}),!0))}get items(){return this._items}checkAll(e){for(let t in this.inputItems)this.inputItems[t].checked=e;for(let t of this._items)t.selected=e}selectAll(){this.checkAll(!0),this.list.props.item.onSelect(void 0,!0,this.anySelected)}unselectAll(){this.checkAll(!1),this.list.props.item.onSelect(void 0,!1,this.anySelected)}get anySelected(){return this._items.some((e=>e.selected))}onSelect(e,t){e.selected=t,this.list.props.item.onSelect(e.item,t,this.anySelected)}get selectedItems(){return this._items.filter((e=>!0===e.selected)).map((e=>e.item))}},gt=(0,c.Z)(vt.prototype,"_items",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt);var xt,jt;let kt=(0,k.Pi)((jt=class e extends s.Component{constructor(e){super(e),this.listBase=void 0,this.selectable=void 0,this._$scroll=e=>{console.log("############### items scroll to "+e)},this.buildBase()}buildBase(){let{item:e}=this.props,{onClick:t,onSelect:n}=e;void 0!==n?this.selectable=this.listBase=new wt(this):this.listBase=void 0!==t?new mt(this):new bt(this)}componentDidUpdate(e,t){!1===d().isEqual(this.props.item,e.item)&&(this.buildBase(),this.forceUpdate())}componentWillUnmount(){this.listBase.dispose()}selectAll(){this.selectable&&this.selectable.selectAll()}unselectAll(){this.selectable&&this.selectable.unselectAll()}get selectedItems(){return this.listBase.selectedItems}render(){let{className:t,header:n,footer:i,before:r,loading:s,none:a,onFocus:o}=this.props;void 0===r&&(r="-"),void 0===s&&(s=()=>(0,_.jsx)("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"})),void 0===a&&(a=e.res.none);let u,c,h,{items:d,loading:p}=this.listBase;function f(e,t){if(e)switch(typeof e){default:case"string":return(0,_.jsx)("li",{className:"va-list-"+t,children:e});case"function":return(0,_.jsx)("li",{className:"va-list-"+t,children:e()});case"object":return(0,_.jsx)("li",{children:e})}}return u=null===d?f(r,"before"):void 0===d?f(s,"loading"):0===d.length?f(a,"none"):d.map(((e,t)=>this.listBase.render(e,t))),!0===p&&d&&(c=f(s,"loading")),void 0!==o&&(h=-1),(0,_.jsxs)("ul",{className:l()("va-list",t),onFocus:o,tabIndex:h,children:[f(n,"header"),u,c,f(i,"footer")]})}},jt.res=(0,Ge.js)({_:{none:"[none]"},zh:{_:{none:"[\u65e0]"}}}),xt=jt))||xt;class _t extends s.Component{constructor(e){super(e),this.menu=void 0,this.button=void 0,this.handleDocumentClick=e=>{!1!==this.state.dropdownOpen&&(this.button&&this.button.contains(e.target)||this.menu&&this.toggle())},this.toggle=()=>{this.setState({dropdownOpen:!this.state.dropdownOpen})},this.state={dropdownOpen:!1}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick),document.addEventListener("touchstart",this.handleDocumentClick)}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("touchstart",this.handleDocumentClick)}render(){let{icon:e,actions:t,isRight:n,className:i,itemIconClass:r,itemCaptionClass:s}=this.props;void 0===n&&(n=!0);let a=t.some((e=>void 0!==e.icon)),{dropdownOpen:o}=this.state,u=i||"cursor-pointer dropdown-toggle btn btn-sm";return(0,_.jsxs)("div",{className:"dropdown",children:[(0,_.jsx)("button",{ref:e=>this.button=e,className:u,"data-toggle":"dropdown","aria-expanded":o,onClick:this.toggle,children:(0,_.jsx)("i",{className:l()("fa fa-fw ","fa-"+(e||"ellipsis-v"))})}),(0,_.jsx)("div",{ref:e=>this.menu=e,className:l()({"dropdown-menu":!0,"dropdown-menu-right":n,show:o}),children:t.map(((e,t)=>{if(!e)return(0,_.jsx)("div",{className:"dropdown-divider"},t);let n,{icon:i,caption:o,action:u,iconClass:c,captionClass:h}=e;if(void 0===i&&void 0===o)return(0,_.jsx)("div",{className:"dropdown-divider"});if(!0===a&&(void 0!==i&&(i="fa-"+i),n=(0,_.jsx)("i",{className:l()("me-2","fa",i,"fa-fw",c||r),"aria-hidden":!0})),void 0===u)return(0,_.jsxs)("h6",{className:"dropdown-header",children:[n," ",o]});return(0,_.jsxs)("a",{className:"dropdown-item",href:"#/",onClick:e=>{e.preventDefault(),u()},onTouchStart:e=>{u()},children:[n," ",(0,_.jsx)("span",{className:h||s,children:o})]},t)}))})]})}}const Ct={md:(e,t)=>"".concat(e,"-").concat(t),ymd:(e,t,n)=>"".concat(e,"-").concat(t,"-").concat(n),yesterday:"Yday",today:"Today",tomorrow:"Tmw",$zh:{md:(e,t)=>"".concat(e,"\u6708").concat(t,"\u65e5"),ymd:(e,t,n)=>"".concat(e,"\u5e74").concat(t,"\u6708").concat(n,"\u65e5"),yesterday:"\u6628\u5929",today:"\u4eca\u5929",tomorrow:"\u660e\u5929"},$en:{md:(e,t)=>"".concat(e,"-").concat(t),ymd:(e,t,n)=>"".concat(e,"-").concat(t,"-").concat(n),yesterday:"Yday",today:"Today",tomorrow:"Tmw"}};function St(e){return Ct[e]}function Nt(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;switch(typeof e){default:n=e;break;case"string":n=new Date(e);break;case"number":n=new Date(1e3*e)}let r,s,a,o,l,u,c=new Date,h=n;r=c.getTime()-h.getTime();let d=h.getHours(),p=h.getMinutes();s=c.getDate(),a=h.getDate(),o=h.getMonth()+1,l=h.getFullYear(),u=c.getFullYear();let f=!1,m=r<-864e5?l===u?(f=!0,St("md")(o,a)):(f=!0,St("ymd")(l,o,a)):r<864e5?a!==s?(f=!0,St(r<0?"tomorrow":"yesterday")):!0===t?(f=!0,""):St("today"):l===u?St("md")(o,a):St("ymd")(l,o,a);return!0===f||!0===i?m+" "+(d+(p<10?":0":":")+p):m}(0,Ge.XB)(Ct,Ct);class Et extends s.Component{render(){return Nt(this.props.date,!1)}}class At extends s.Component{render(){let{date:e,always:t}=this.props;return Nt(e,!0,t)}}class Pt{setValues(e){}}class Ot extends Pt{render(e){return(0,_.jsx)("div",{className:"",children:(0,_.jsx)("div",{className:"w-100",children:(0,_.jsx)("div",{style:{borderTop:"1px solid #f0f0f0"}})})},"_b_"+e)}}class It extends Pt{constructor(e){super(),this.param=void 0,this.param=e}render(e){let t;switch(this.param){default:t="py-2";break;case"=":t="py-1";break;case"-":t="pb-1"}let n=l()(t);return(0,_.jsx)("div",{className:n},"_g_"+e)}}const Tt="justify-content-start",Ut="justify-content-center",Rt="justify-content-end";class Lt extends Pt{get prop(){return this._prop}constructor(e,t){super(),this.gridProps=void 0,this._prop=void 0,this.content=void 0,this.col=void 0,this.gridProps=e,this._prop=t,this.col=!0===e.labelFixLeft?"col":"col-sm"}render(e){let{onClick:t,bk:n}=this.prop,i=l()({"cursor-pointer":void 0!==t,"bg-white":void 0===n,row:!0});return(0,_.jsxs)("div",{className:i,onClick:t,children:[this.renderLabel(),this.renderProp()]},e)}renderLabel(){let{label:e}=this.prop;return void 0===e?null:(0,_.jsx)("label",{className:this.col+"-3 col-form-label",children:e})}renderProp(){let e,t,{label:n}=this.prop;switch(this.gridProps.alignValue){case"left":e=Tt;break;case"center":e=Ut;break;case"right":e=Rt}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}let i=this.col+(void 0===n?"-12":"-9"),r=l()(e,t,i,"d-flex");return(0,_.jsx)("div",{className:r,children:this.renderPropBody()})}renderPropBody(){return(0,_.jsx)("div",{className:"form-control-plaintext",children:this.renderPropContent()})}renderPropContent(){return this.content}}class Vt extends Lt{get prop(){return this._prop}setValues(e){this.content=void 0===e?void 0:e[this.prop.name]}}class Ft extends Lt{get prop(){return this._prop}setValues(e){this.content=void 0===e?void 0:e[this.prop.name]}}class qt extends Lt{get prop(){return this._prop}setValues(e){if(void 0===e)this.content=void 0;else{let t=this.prop.list;this.content="string"===typeof t?e[t]:void 0}}renderPropBody(){let{list:e,row:t}=this.prop,n="string"===typeof e?this.content:e;return void 0===n?(0,_.jsx)("div",{}):(0,_.jsx)("div",{className:"w-100",children:n.map(((e,n)=>(0,_.jsxs)(s.Fragment,{children:[0===n?null:(0,_.jsx)("div",{style:{width:"100%",borderBottom:"1px solid #f0f0f0"}}),s.createElement(t,e)]},n)))})}}class Dt extends Lt{get prop(){return this._prop}renderPropBody(){let{component:e}=this.prop;return e}renderProp(){let e,t,n,{label:i,full:r}=this.prop;switch(this.gridProps.alignValue){case"left":e=Tt;break;case"center":e=Ut;break;case"right":e=Rt}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}n=!0!==r?this.col+(void 0===i?"-12":"-9"):"w-100";let s=l()(e,t,n,"d-flex");return(0,_.jsx)("div",{className:s,children:this.renderPropBody()})}}class zt{constructor(e,t){this.gridProps=void 0,this.props=void 0,this.rows=void 0,this.gridProps=e,this.props=t,this.buildRows()}buildRows(){this.rows=[];let e=!0;for(let t of this.props)if("string"===typeof t)this.rows.push(new It(t)),e=!0;else{let n;switch(e||this.rows.push(new Ot),t.type){default:continue;case"string":n=new Vt(this.gridProps,t);break;case"number":n=new Ft(this.gridProps,t);break;case"list":n=new qt(this.gridProps,t);break;case"component":n=new Dt(this.gridProps,t)}this.rows.push(n),e=!1}}setValues(e){for(let t of this.rows)t.setValues(e)}render(){return this.rows.map(((e,t)=>e.render(String(t))))}}var Bt;let Mt=(0,k.Pi)(Bt=class extends s.Component{render(){let{className:e,rows:t,values:n}=this.props,i=new zt(this.props,t);i.setValues(n);let r=l()("container-fluid",e);return(0,_.jsx)("div",{className:r,children:i.render()})}})||Bt;class Wt extends s.Component{render(){let e,{icon:t,main:n,discription:i,px:r,py:s}=this.props;e="string"===typeof i?(0,_.jsx)("div",{children:i}):i;let a=l()("media",void 0===r?"px-0":"px-"+r,void 0===s?"py-2":"py-"+s);return(0,_.jsxs)("div",{className:a,children:[(0,_.jsx)(J,{className:"me-3 w-4c h-4c",src:t}),(0,_.jsxs)("div",{className:"media-body",children:[(0,_.jsx)("h5",{className:"mt-0",children:n}),e]})]})}}var Ht,Zt;let $t=(Ht=class extends s.Component{constructor(){super(...arguments),this.input=void 0,this.key=null,(0,u.Z)(this,"disabled",Zt,this),this.onChange=e=>{this.key=e.target.value,void 0!==this.key&&(this.key=this.key.trim(),""===this.key&&(this.key=void 0)),!0!==this.props.allowEmptySearch&&(this.disabled=!this.key)},this.onSubmit=async e=>{if(e.preventDefault(),null===this.key&&(this.key=this.props.initKey||""),!0!==this.props.allowEmptySearch){if(!this.key)return;this.input&&(this.input.disabled=!0)}await this.props.onSearch(this.key),this.input&&(this.input.disabled=!1)}}clear(){this.input&&(this.input.value="")}render(){let e,{className:t,inputClassName:n,onFocus:i,label:r,placeholder:s,buttonText:a,maxLength:o,size:u}=this.props;switch(u){default:case"sm":e="input-group-sm";break;case"md":e="input-group-md";break;case"lg":e="input-group-lg"}return(0,_.jsx)("form",{className:t,onSubmit:this.onSubmit,children:(0,_.jsxs)("div",{className:l()("input-group",e),children:[r&&(0,_.jsx)("div",{className:"input-group-addon align-self-center me-2",children:r}),(0,_.jsx)("input",{ref:e=>this.input=e,onChange:this.onChange,type:"text",name:"key",onFocus:i,className:l()("form-control",n||"border-primary"),placeholder:s,defaultValue:this.props.initKey,maxLength:o}),(0,_.jsx)("div",{className:"input-group-append",children:(0,_.jsxs)("button",{className:"btn btn-primary",type:"submit",disabled:this.disabled,children:[(0,_.jsx)("i",{className:"fa fa-search"}),(0,_.jsx)("i",{className:"fa"}),a]})})]})})}},Zt=(0,c.Z)(Ht.prototype,"disabled",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht);var Qt=n(537);const Kt=new class{constructor(e){this.loader=void 0,this.onLoaded=void 0,this.map=(0,a.LO)(new Map),void 0===e&&(e=e=>Qt.BG.user(e)),this.loader=e}use(e,t){if(!e)return;if("object"===typeof e&&(e=e.id),!e)return;this.onLoaded=t,e=Number(e),void 0===this.map.get(e)&&this.map.set(e,e)}getValue(e){if(!e)return;if("object"===typeof e)if(!(e=e.id))return;let t=this.map.get(e);return t?"number"===typeof t?(t<0||(this.map.set(e,-e),this.loader(e).then((t=>{t||(t=null),this.map.set(e,t),this.onLoaded&&this.onLoaded(t)})).catch((e=>{console.error(e)}))),e):t:void 0}}(void 0),Gt=((0,k.Pi)((e=>{let{className:t,style:n,id:r,altImage:s,noneImage:a}=e,o=Kt.getValue(r);switch(typeof o){case"undefined":case"number":return(0,_.jsx)("div",{className:l()(t,"image-none"),style:n,children:a||(0,_.jsx)("i",{className:"fa fa-file-o"})})}let{icon:u}=o;return u?(!0===u.startsWith(":")&&(u=i.nav.resUrl+u.substr(1)),(0,_.jsx)("img",{src:u,className:t,alt:"img",style:n,onError:e=>{e.currentTarget.src=s||"https://tv.jkchemical.com/imgs/0001.png"}})):(0,_.jsx)("div",{className:l()(t,"image-none"),style:n,children:(0,_.jsx)("i",{className:"fa fa-file-o"})})})),(0,k.Pi)((e=>{let{id:t,user:n,render:i,onLoaded:r}=e;if(null===n)return(0,_.jsx)(_.Fragment,{children:"null"});switch(typeof n){case"undefined":n=Kt.getValue(t);break;case"object":let{id:e}=n;Xt(e,r),n=Kt.getValue(e);break;case"number":Xt(n,r),n=Kt.getValue(n);break;case"string":Xt(Number(n),r),n=Kt.getValue(Number(n));break;default:n=void 0}switch(typeof n){case"undefined":case"number":return(0,_.jsx)(_.Fragment,{children:n})}return i(n)})));function Xt(e,t){e&&("object"===typeof e&&(e=e.id),Kt.use(e,t))}const Jt=e=>{let{href:t,children:n,className:r,onClick:s}=e;if(!0===i.nav.isWebNav){let{aClassName:a}=e;if(!t)return(0,_.jsx)("span",{className:"text-danger",children:"Error: href not defined in Ax"});let o=e=>{let n;return e.preventDefault(),s?n=s(e):(i.nav.navigate(t),n=!1),n};return(0,_.jsx)("a",{...e,className:l()(r,a),onClick:o,children:n})}{let{naClassName:a}=e;return s||(s=()=>(i.nav.openSysPage(t),!1)),(0,_.jsx)("span",{className:l()(r,"cursor-pointer",a),onClick:s,children:n})}}},529:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});n(791);var i=n(184);function r(){return(0,i.jsx)("div",{className:"d-flex h-100 align-items-center justify-content-center",children:(0,i.jsx)("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"})})}},590:(e,t,n)=>{"use strict";n.d(t,{gc:()=>I,nav:()=>T});var i=n(269),r=n(229),s=n(791),a=n(894),o=n(763),l=n.n(o),u=n(764),c=n(540),h=n(574);const d={set(e,t){(0,c.Vq)(e,t),h.Jl.setCenterToken(t)},clear(){(0,c.Vq)(0,void 0),h.Jl.setCenterToken(void 0)}};var p=n(537),f=n(184);class m extends s.Component{constructor(){super(...arguments),this.reApi=async()=>{this.props.clearError();const{channel:e,url:t,options:n,resolve:i,reject:r}=this.props;await(0,p.j6)(e,t,n,i,r)},this.close=async()=>{this.props.clearError()}}render(){let e,{error:t,url:n}=this.props;if("object"===typeof t){let n=[];for(let e in t)n.push((0,f.jsxs)("li",{children:[(0,f.jsx)("label",{children:e}),(0,f.jsx)("div",{style:{wordWrap:"break-word"},children:t[e]})]},e));e=(0,f.jsx)("ul",{children:n})}else e=(0,f.jsx)("div",{children:t});return(0,f.jsx)("div",{children:(0,f.jsx)("article",{children:(0,f.jsxs)("main",{className:"va-error",children:[(0,f.jsx)("div",{children:"\u7f51\u7edc\u51fa\u73b0\u95ee\u9898"}),(0,f.jsx)("div",{children:"\u70b9\u51fb\u91cd\u65b0\u8bbf\u95ee"}),(0,f.jsxs)("div",{style:{wordWrap:"break-word"},children:["url: ",n]}),e,(0,f.jsxs)("div",{className:"p-3",children:[(0,f.jsx)("button",{type:"button",onClick:this.reApi,children:"\u91cd\u65b0API"}),(0,f.jsx)("button",{type:"button",onClick:this.close,children:"\u5173\u95ed"})]})]})})})}}const v=e=>{let{message:t}=e;return(0,f.jsx)(u.T,{header:"\u7cfb\u7edf\u63d0\u9192",children:(0,f.jsx)("div",{className:"px-3",children:t})})};var g=n(179),y=n(541),b=n(888),w=n(529),x=n(754),j=(n(631),n(103));class k extends s.Component{constructor(e){super(e),this.timerHandler=void 0,this.reload=()=>{clearInterval(this.timerHandler),T.reload()};let{seconds:t}=e;void 0!==t&&(this.state={seconds:t},t<=0||(this.timerHandler=setInterval((()=>{let{seconds:e}=this.state;e--,e<=0?this.reload():this.setState({seconds:e})}),1e3)))}render(){let e,t,{seconds:n}=this.state;return n>0?(e="\u7a0b\u5e8f\u5347\u7ea7\u4e2d...",t=this.state.seconds+"\u79d2\u949f\u4e4b\u540e\u81ea\u52a8\u91cd\u542f\u52a8"):(e="\u7a0b\u5e8f\u9700\u8981\u5347\u7ea7",t="\u8bf7\u70b9\u51fb\u4e0b\u9762\u6309\u94ae\u91cd\u542f"),(0,f.jsx)(u.T,{header:!1,children:(0,f.jsxs)("div",{className:"text-center p-5",children:[(0,f.jsxs)("div",{className:"text-info py-5",children:[(0,f.jsx)("span",{className:"text-danger",children:e}),(0,f.jsx)("br",{}),t,(0,f.jsx)("br",{}),(0,f.jsx)("span",{className:"small text-muted",children:this.props.message})]}),(0,f.jsx)("button",{className:"btn btn-danger",onClick:this.reload,children:"\u7acb\u523b\u91cd\u542f"})]})})}}const _=e=>(0,f.jsx)(u.T,{header:"\u5347\u7ea7\u8f6f\u4ef6",back:"close",children:(0,f.jsxs)("div",{className:"py-5 px-3 my-5 mx-2 border bg-white rounded",children:[(0,f.jsx)("div",{className:"text-center text-info",children:"\u5347\u7ea7\u5c06\u6e05\u9664\u6240\u6709\u672c\u673a\u7f13\u51b2\u533a\u5185\u5bb9\uff0c\u5e76\u4ece\u670d\u52a1\u5668\u91cd\u65b0\u5b89\u88c5\u7a0b\u5e8f\uff01"}),(0,f.jsx)("div",{className:"text-center mt-5",children:(0,f.jsx)("button",{className:"btn btn-danger me-3",onClick:()=>e.confirm(!0),children:"\u786e\u8ba4\u5347\u7ea7"})})]})});var C,S,N=n(958);const E=new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i").test(navigator.userAgent);let A;const P=[];let O=1;class I extends s.Component{constructor(e){var t;super(e),t=this,this.stack=void 0,this.waitCount=0,this.waitTimeHandler=void 0,this.upgradeUq=()=>{T.start()},this.isHistoryBack=!1,this.navBack=()=>{let e=Date.now();this.isHistoryBack=!0,this.back(!0),this.isHistoryBack=!1,console.log("///\\\\ ".concat(Date.now()-e,"ms backbutton pressed - nav level: ").concat(this.stack.length))},this.back=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=t.stack,i=n.length;if(0===i)return;if(1===i)return void(window.self!==window.top&&window.top.postMessage({type:"pop-app"},"*"));let r=n[i-1];!0===e&&r.confirmClose?!0===await r.confirmClose()&&t.pop():t.pop()},this.clearError=()=>{this.setState({fetchError:void 0})},this.stack=[],this.state={stack:this.stack,wait:0,fetchError:void 0},T.set(this)}async componentDidMount(){window.addEventListener("popstate",this.navBack),await T.init(),await T.start()}get level(){return this.stack.length}startWait(){0===this.waitCount&&(this.setState({wait:1}),this.waitTimeHandler=y.OB.setTimeout("NavView.startWait",(()=>{this.waitTimeHandler=void 0,this.setState({wait:2})}),1e3)),++this.waitCount,this.setState({fetchError:void 0})}endWait(){y.OB.setTimeout(void 0,(()=>{--this.waitCount,0===this.waitCount&&(void 0!==this.waitTimeHandler&&(y.OB.clearTimeout(this.waitTimeHandler),this.waitTimeHandler=void 0),this.setState({wait:0}))}),100)}async onError(e){let t=e.error;if(void 0!==t){if(!0===t.unauthorized)return void await T.showLogin(void 0);switch(t.type){case"unauthorized":return void await T.showLogin(void 0);case"sheet-processing":return void T.push((0,f.jsx)(v,{message:"\u5355\u636e\u6b63\u5728\u5904\u7406\u4e2d\u3002\u8bf7\u91cd\u65b0\u64cd\u4f5c\uff01"}))}}this.setState({fetchError:e})}async showUpgradeUq(e,t){this.show((0,f.jsx)(u.T,{header:!1,children:(0,f.jsxs)("div",{children:["UQ\u5347\u7ea7\u4e86\uff0c\u8bf7\u70b9\u51fb\u6309\u94ae\u5347\u7ea7 ",(0,f.jsx)("br",{}),(0,f.jsxs)("small",{className:"text-muted",children:[e," ver-",t]}),(0,f.jsx)("button",{className:"btn btn-primary",onClick:this.upgradeUq,children:"\u5347\u7ea7"})]})}))}show(e,t){return this.clear(),this.push(e,t)}push(e,t){this.removeCeased(),this.stack.length>0&&window.history.pushState("forward",null,null);let n=O++;return this.stack.push({key:n,view:e,ceased:!1,disposer:t}),this.refresh(),n}replace(e,t){let n,i=this.stack;i.length>0&&(n=i.pop());let r=O++;return this.stack.push({key:r,view:e,ceased:!1,disposer:t}),void 0!==n&&this.dispose(n.disposer),this.refresh(),r}ceaseTop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack.length-1;for(let n=0;n<e&&!(t<0);n++,t--){this.stack[t].ceased=!0}}pop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack,n=t.length;if(e<=0||n<=1)return;n<e&&(e=n);let i=0;for(let r=0;r<e&&0!==t.length;r++)this.popAndDispose(),++i;i>=n&&i--,this.refresh(),this.isHistoryBack}popTo(e){if(void 0!==e&&void 0!==this.stack.find((t=>t.key===e)))for(;this.stack.length>0;){let t=this.stack.length;if(this.stack[t-1].key===e)break;this.pop()}}topKey(){let e=this.stack.length;if(0!==e)return this.stack[e-1].key}removeCeased(){for(;;){let e=this.stack.length-1;if(e<0)break;if(!1===this.stack[e].ceased)break;let t=this.stack.pop(),{disposer:n}=t;this.dispose(n)}this.refresh()}popAndDispose(){this.removeCeased();let e=this.stack.pop();if(void 0===e)return;let{disposer:t}=e;return this.dispose(t),this.removeCeased(),e}dispose(e){if(void 0===e)return;void 0===this.stack.find((t=>t.disposer===e))&&e()}clear(){this.stack.length;for(;this.stack.length>0;)this.popAndDispose()}regConfirmClose(e){let t=this.stack,n=t.length;0!==n&&(t[n-1].confirmClose=e)}confirmBox(e){return window.confirm(e)}render(){const{wait:e,fetchError:t}=this.state;let{stack:n}=this.state,i=n.length-1,r=null,s=null;switch(e){case 1:r=(0,f.jsx)("div",{className:"va-wait va-wait1"});break;case 2:r=(0,f.jsx)("div",{className:"va-wait va-wait2",children:(0,f.jsx)(w.g,{})})}t&&(s=(0,f.jsx)(m,{clearError:this.clearError,...t}));let a=!0===T.testing&&(0,f.jsx)("span",{className:"cursor-pointer position-fixed",style:{top:0,left:"0.2rem",zIndex:90001},children:(0,f.jsx)(j.FA,{className:"text-warning",name:"info-circle"})});return(0,f.jsxs)(f.Fragment,{children:[n.map(((e,t)=>{let{key:n,view:r}=e;return(0,f.jsx)("div",{style:t<i?{visibility:"hidden",position:"absolute"}:void 0,children:r},n)})),r,s,a]})}refresh(){this.setState({stack:this.stack})}}const T=new(C=class{constructor(){this.navView=void 0,this.wsHost=void 0,this.local=new y.Vn,this.navigo=void 0,this.navSettings=void 0,(0,i.Z)(this,"user",S,this),this.testing=void 0,this.language=void 0,this.culture=void 0,this.resUrl=void 0,this.hashParam=void 0,this.centerHost=void 0,this.arrs=["/test","/test/"],this.windowOnError=(e,t,n,i,r)=>{console.error("windowOnError"),console.error(r)},this.windowOnUnhandledRejection=e=>{console.error("windowOnUnhandledRejection"),console.error(e.reason)},this.windowOnClick=e=>{console.error("windowOnClick")},this.windowOnMouseMove=e=>{console.log("navigator.userAgent: "+navigator.userAgent),console.log("mouse move (%s, %s)",e.x,e.y)},this.windowOnScroll=e=>{console.log("scroll event")},this.forceDevelopment=void 0,this.navLogin=async e=>{T.showLogin((async e=>window.history.back()),!1)},this.navLogout=async e=>{T.showLogout((async()=>window.history.back()))},this.navRegister=async e=>{T.showRegister()},this.navForget=async e=>{T.showForget()},this.navPageRoutes=void 0,this.doneSysRoutes=!1,this.sysRoutes={"/login":this.navLogin,"/logout":this.navLogout,"/register":this.navRegister,"/forget":this.navForget},this.isWebNav=!1,this.backIcon=(0,f.jsx)("i",{className:"fa fa-angle-left"}),this.closeIcon=(0,f.jsx)("i",{className:"fa fa-close"}),this.pageWebNav=void 0,this.userToken=void 0,this.showPrivacyPage=()=>{let e=this.getPrivacyContent();e?this.privacyPage(e):T.push((0,f.jsx)(u.T,{header:"\u9690\u79c1\u653f\u7b56",children:(0,f.jsx)("div",{className:"p-3",children:"AppConfig \u4e2d\u6ca1\u6709\u5b9a\u4e49 privacy\u3002\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u5b57\u7b26\u4e32\uff0c\u6216\u8005url\u3002markdown\u683c\u5f0f"})}))},this.privacyPage=async e=>{let t={__html:e};T.push((0,f.jsx)(u.T,{header:"\u9690\u79c1\u653f\u7b56",children:(0,f.jsx)("div",{className:"p-3",dangerouslySetInnerHTML:t})}))},this.createLogin=N.QK,this.login=void 0,this.reload=async()=>{let e=new Promise(((e,t)=>{setTimeout(e,100)}));if("serviceWorker"in navigator){let t=await Promise.race([e,navigator.serviceWorker.ready]);t&&t.unregister()}window.document.location.reload();let t=window.plus;if(t){let e=t.webview;if(e)e.reload&&e.reload(!0);else{let e=t.webView;e&&e.reload&&e.reload(!0)}}},this.resetAll=()=>{this.push((0,f.jsx)(_,{confirm:e=>{!0===e?(this.showReloadPage("\u5f7b\u5e95\u5347\u7ea7"),localStorage.clear()):this.pop()}}))};let{lang:e,district:t}=b.resOptions;this.language=e,this.culture=t,this.testing=!1}get guest(){let e=this.local.guest;if(void 0===e)return 0;let t=e.get();return void 0===t?0:t.guest}set(e){this.navView=e}async onReceive(e){await p.g0.dispatch(e)}async loadUnitJson(){try{let e=this.unitJsonPath(),t=await fetch(e,{});return(await t.json()).unit}catch(e){return void this.local.unit.remove()}}async getPredefinedUnitName(){let e=document.getElementById("unit");if(e)return e.innerText;if(e=document.getElementById("unit.json"),!e)return await this.loadUnitJson();try{let t=e.innerHTML;return JSON.parse(t).unit}catch(t){return await this.loadUnitJson()}}async loadPredefinedUnit(){let e,t={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://note.jjol.cn"}.REACT_APP_UNIT;if(void 0!==t)return Number(t);let n=this.local.unit.get();if(void 0!==n){if(!0!==y.OB.isDevelopment)return n.id;if(e=await this.getPredefinedUnitName(),void 0===e)return;if(n.name===e)return n.id}else if(e=await this.getPredefinedUnitName(),void 0===e)return;let i=await p.YK.unitFromName(e);return void 0!==i&&this.local.unit.set({id:i,name:e}),i}setSettings(e){this.navSettings=e}get oem(){return this.navSettings&&this.navSettings.oem}unitJsonPath(){let{origin:e,pathname:t}=document.location;t=t.toLowerCase();for(let n of this.arrs)if(!0===t.endsWith(n)){t=t.substr(0,t.length-n.length);break}return!0!==t.endsWith("/")&&!0!==t.endsWith("\\")||(t=t.substr(0,t.length-1)),e+t+"/unit.json"}async init(){this.testing=y.OB.testing,!0===this.forceDevelopment&&(y.OB.isDevelopment=!0),await p.host.start(this.testing);let e=document.location.hash;if(void 0!==e&&e.length>0){let t=(0,g.$N)();t<0&&(t=void 0),this.hashParam=e.substring(1,t)}let{url:t,ws:n,resHost:i}=p.host;this.centerHost=t,this.resUrl=(0,p.Cs)(i),this.wsHost=n,(0,p.F$)(t);let r=this.local.guest.get();if(void 0===r&&(r=await p.YK.guest()),!r)throw Error("guest can not be undefined");T.setGuest(r);let s=(0,g.hc)(),a=(0,g.Lc)(s);if(void 0!==s&&window!==window.parent&&void 0!==a)return console.log("this.ws = wsBridge in sub frame"),void(window.self!==window.parent&&window.parent.postMessage({type:"sub-frame-started",hash:a.hash},"*"));let o=await this.loadPredefinedUnit();a.predefinedUnit=o}async start(){try{window.onerror=this.windowOnError,window.onunhandledrejection=this.windowOnUnhandledRejection,!0===E&&(document.onselectstart=function(){return!1},document.oncontextmenu=function(){return!1}),T.clear(),this.startWait();let e=this.local.user.get();if(void 0===e){let{notLogined:e}=this.navView.props;return void(void 0!==e?await e():await T.showLogin(void 0))}await T.logined(e)}catch(e){console.error(e)}finally{this.endWait()}}resolveRoute(){void 0!==this.navigo&&this.navigo.resolve()}on(){return void 0===this.navigo&&(this.navigo=new x.d,!0!==this.isWebNav&&this.navigo.historyAPIUpdateMethod("replaceState")),this.navigo.on(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}navigateToLogin(){T.navigate("/login")}openSysPage(e){let t=this.sysRoutes[e];void 0!==t?t(void 0):alert(e+" is not defined in sysRoutes")}routeFromNavPage(e){return(t,n)=>{e&&(this.isWebNav&&T.clear(),e(t))}}onNavRoute(e){this.on(this.routeFromNavPage(e))}onNavRoutes(e){!1===this.doneSysRoutes&&(this.doneSysRoutes=!0,this.internalOnNavRoutes(this.sysRoutes)),this.internalOnNavRoutes(e)}internalOnNavRoutes(e){if(!e)return;this.navPageRoutes=l().merge(this.navPageRoutes,e);let t={};for(let n in e){let i=e[n];t[n]=this.routeFromNavPage(i)}this.on(t)}setIsWebNav(){this.isWebNav=!0,this.backIcon=(0,f.jsx)("i",{className:"fa fa-arrow-left"}),this.closeIcon=(0,f.jsx)("i",{className:"fa fa-close"})}get isMobile(){return E}navigate(e,t){if(this.navigo)return!0===this.testing&&(e+="#test"),this.navigo.navigate(e,t);alert('Is not in webnav state, cannot navigate to url "'+e+'"')}go(e,t,n){void 0!==this.navigo?this.navigate(t,n):e()}async showAppView(e){let{onLogined:t}=this.navView.props;void 0!==t?(T.clear(),await t(e)):T.push((0,f.jsx)("div",{children:"NavView has no prop onLogined"}))}setGuest(e){this.local.guest.set(e),d.set(0,e.token)}saveLocalUser(){this.local.user.set(this.user)}async loadMe(){let e=await p.BG.me();this.user.icon=e.icon,this.user.nick=e.nick}async internalLogined(e,t,n){(0,p.kS)(),console.log("logined: %s",JSON.stringify(e)),this.user=e,this.saveLocalUser(),this.userToken=e.token,d.set(e.id,e.token),T.clear(),void 0!==t?t(e):!0===this.isWebNav?this.navigate("/index"):await this.showAppView(n)}async logined(e,t){await this.internalLogined(e,t,!1)}async userLogined(e,t){await this.internalLogined(e,t,!0)}loginTop(e){return this.navSettings&&this.navSettings.loginTop||e}privacyEntry(){if(this.getPrivacyContent())return(0,f.jsx)("div",{className:"text-center",children:(0,f.jsx)("button",{className:"btn btn-sm btn-link",onClick:this.showPrivacyPage,children:(0,f.jsx)("small",{className:"text-muted",children:"\u9690\u79c1\u653f\u7b56"})})})}getPrivacyContent(){if(!this.navSettings)return;let{privacy:e}=this.navSettings;return e}setCreateLogin(e){this.createLogin=e}async getLogin(){return this.login?this.login:this.login=await this.createLogin()}async showLogin(e,t){(await this.getLogin()).showLogin(e,t)}async showLogout(e){(await this.getLogin()).showLogout(e)}async showRegister(){(await this.getLogin()).showRegister()}async showForget(){(await this.getLogin()).showForget()}async logout(e){p.appInFrame.unit=void 0,this.local.logoutClear(),this.user=void 0,(0,p.kS)();let t=this.local.guest.get();(0,p.Vq)(0,t&&t.token),this.clear(),void 0===e?await T.start():await e()}async changePassword(){(await this.getLogin()).showChangePassword()}get level(){return this.navView.level}startWait(){var e;null===(e=this.navView)||void 0===e||e.startWait()}endWait(){var e;null===(e=this.navView)||void 0===e||e.endWait()}async onError(e){await this.navView.onError(e)}async showUpgradeUq(e,t){await this.navView.showUpgradeUq(e,t)}show(e,t){this.navView.show(e,t)}push(e,t){this.navView.push(e,t)}replace(e,t){this.navView.replace(e,t)}pop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.navView.pop(e)}topKey(){return this.navView.topKey()}popTo(e){this.navView.popTo(e)}clear(){var e;null===(e=this.navView)||void 0===e||e.clear()}navBack(){this.navView.navBack()}ceaseTop(e){this.navView.ceaseTop(e)}removeCeased(){this.navView.removeCeased()}async back(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];await this.navView.back(e)}regConfirmClose(e){this.navView.regConfirmClose(e)}confirmBox(e){return this.navView.confirmBox(e)}async navToApp(e,t,n,i,r){return new Promise(((s,a)=>{let o=!0===this.centerHost.includes("http://localhost:")?"sheet_debug":"sheet",l=void 0===r?(0,g.Gd)(e,t):(0,g.Gd)(e,t,o,[n,i,r]);console.log("navToApp: %s",JSON.stringify(l)),T.push((0,f.jsxs)("article",{className:"app-container",children:[(0,f.jsx)("span",{id:l.hash,onClick:()=>this.back(),children:(0,f.jsx)("i",{className:"fa fa-arrow-left"})}),(0,f.jsx)("iframe",{src:l.url,title:String(r)})]}),(()=>{s()}))}))}navToSite(e){window.open(e)}get logs(){return P}log(e){P.push(e)}logMark(){let e=new Date;A=e.getTime(),P.push("log-mark: "+e.toTimeString())}logStep(e){P.push(e+": "+((new Date).getTime()-A))}showReloadPage(e){this.push((0,f.jsx)(k,{message:e,seconds:-1}))}async checkVersion(){let{href:e}=document.location;e+=(e.indexOf("?")>=0?"&":"?")+"_t_t_="+(new Date).getTime();let t=await fetch(e),n=await t.text();return(new DOMParser).parseFromString(n,"text/html").getElementsByTagName("html")[0].getAttribute("data-version")}},S=(0,r.Z)(C.prototype,"user",[a.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),C)},754:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});class i{static isPushStateAvailable(){return!("undefined"===typeof window||!window.history||!window.history.pushState)}static clean(e){return e instanceof RegExp?e:i.cleanUrl(e)}static cleanUrl(e){return e.replace(/\/+$/,"").replace(/^\/+/,"^/")}static regExpResultToParams(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce(((e,n,i)=>(null===e&&(e={}),e[t[i]]=decodeURIComponent(n),e)),null):null}static replaceDynamicURLParts(e){let t,n=[];return t=e instanceof RegExp?e:new RegExp(e.replace(i.PARAMETER_REGEXP,(function(e,t,r){return n.push(r),i.REPLACE_VARIABLE_REGEXP})).replace(i.WILDCARD_REGEXP,i.REPLACE_WILDCARD)+i.FOLLOWED_BY_SLASH_REGEXP,i.MATCH_REGEXP_FLAGS),{regexp:t,paramNames:n}}static getUrlDepth(e){return e.replace(/\/$/,"").split("/").length}static compareUrlDepth(e,t){return i.getUrlDepth(t)-i.getUrlDepth(e)}static findMatchedRoutes(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((t=>{let{regexp:n,paramNames:r}=i.replaceDynamicURLParts(i.clean(t.route)),s=e.replace(/^\/+/,"/").match(n),a=i.regExpResultToParams(s,r);return!!s&&{match:s,route:t,params:a}})).filter((e=>e))}static match(e,t){return i.findMatchedRoutes(e,t)[0]||!1}static root(e,t){const n=RegExp("\\/:\\D(\\w*)","g");let r=t.map((t=>{let i=t.route;if(""===i||"*"===i)return e;"string"===typeof i&&(i=i.replace(n,"\\/(\\w|%|[\u4e00-\u9fcc])+"));let r=i+"";return e.split(new RegExp(r))[0]})),s=i.cleanUrl(e),a=r.length;if(0===a)return s;let o=r[0];return 1===a?o:r.reduce(((e,t)=>(e.length>t.length&&(e=t),e)),o)}static isHashChangeAPIAvailable(){return"undefined"!==typeof window&&"onhashchange"in window}static extractGETParameters(e){return e.split(/\?(.*)?$/).slice(1).join("")}static getOnlyURL(e,t,n){let r,s=e;var a=e=>e.split(/\?(.*)?$/)[0];return"undefined"===typeof n&&(n="#"),i.isPushStateAvailable()&&!t?s=a(e).split(n)[0]:(r=e.split(n),s=r.length>1?a(r[1]):a(r[0])),s}static manageHooks(e,t,n,i){if(t&&"object"===typeof t){if(t.before)return void t.before((function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e(),t.after&&t.after(n))}),n);if(t.after)return e(),void(t.after&&t.after(n))}e()}static isHashedRoot(e,t,n){if(i.isPushStateAvailable()&&!t)return!1;if(!e.match(n))return!1;let r=e.split(n);return r.length<2||""===r[1]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#";this.root=void 0,this._routes=[],this._useHash=void 0,this._hash=void 0,this._paused=void 0,this._destroyed=void 0,this._lastRouteResolved=void 0,this._notFoundHandler=void 0,this._defaultHandler=void 0,this._usePushState=void 0,this._genericHooks=void 0,this._historyUpdateMethod=void 0,this.timout=void 0,this._onLocationChange=()=>{console.log("_onLocationChange"),this.resolve()},this.root=null,this._useHash=t,this._hash=n||"#",this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!t&&i.isPushStateAvailable(),this._genericHooks=null,this._historyUpdateMethod="pushState",e?this.root=t?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):t&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}navigate(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=e||"",this._usePushState)t=(n?"":this._getRoot()+"/")+e.replace(/^\/+/,"/"),t=t.replace(/([^:])(\/{2,})/g,"$1/"),t=t.replace("/#test/","/"),this._historyUpdate({},"",t),this.resolve();else if("undefined"!==typeof window){e=e.replace(new RegExp("^"+this._hash),"");let{location:t}=window;t.href=t.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e}return this}on(){let e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];switch(typeof e){case"function":this._defaultHandler={handler:e,hooks:t},this._notFoundHandler||(this._notFoundHandler=this._defaultHandler);break;case"object":Object.keys(e).sort(i.compareUrlDepth).forEach((t=>this.on(t,e[t])));break;default:if(arguments.length<2)break;if("/"===e){this._defaultHandler={handler:"object"===typeof t?t.uses:t,hooks:arguments.length<=2?void 0:arguments[2]};break}this._add(e,t,arguments.length<=2?void 0:arguments[2])}return this}off(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce(((t,n)=>(n.handler!==e&&t.push(n),t)),[]),this}notFound(e,t){return this._notFoundHandler={handler:e,hooks:t},this}resolve(e){let t=e||this._cLoc(),n=this._getRoot(),r=t.replace(n,"");if(this._useHash){const e="^\\/";r=r.replace(new RegExp(e+this._hash),"/")}let s=i.extractGETParameters(e||this._cLoc()),a=i.getOnlyURL(r,this._useHash,this._hash);if(!1===a.startsWith("/")&&(a="/"+a),this._paused)return!1;if(this._lastRouteResolved&&a===this._lastRouteResolved.url&&s===this._lastRouteResolved.query)return this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1;let o=i.match(a,this._routes),l=e=>{i.manageHooks((()=>{i.manageHooks((()=>{this._callLeave(),this._lastRouteResolved={url:a,query:s,hooks:e.hooks},e.handler(s)}),e.hooks)}),this._genericHooks)};if(!1===o)return this._defaultHandler&&(""===a||"/"===a||a===this._hash||i.isHashedRoot(a,this._useHash,this._hash))?(l(this._defaultHandler),!0):(this._notFoundHandler&&l(this._notFoundHandler),!1);let u=o;if(u){this._callLeave(),this._lastRouteResolved={url:a,query:s,hooks:u.route.hooks,params:u.params,name:u.route.name};let e=u.route.handler;return i.manageHooks((()=>{i.manageHooks((()=>{u.route.route instanceof RegExp?e(...u.match.slice(1,u.match.length)):e(u.params,s)}),u.route.hooks,u.params,this._genericHooks)}),this._genericHooks,u.params),u}}destroy(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this.timout),"undefined"!==typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))}updatePageLinks(){"undefined"!==typeof document&&this._findLinks().forEach((e=>{e.hasListenerAttached||(e.addEventListener("click",(t=>{if((t.ctrlKey||t.metaKey)&&"a"===t.currentTarget.tagName.toLowerCase())return!1;var n=this.getLinkPath(e);this._destroyed||(t.preventDefault(),this.navigate(n.replace(/\/+$/,"").replace(/^\/+/,"/")))})),e.hasListenerAttached=!0)}))}generate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce(((n,i)=>{if(i.name===e){n=i.route.toString();for(let e in t)n=n.replace(":"+e,t[e])}return n}),"");return this._useHash?this._hash+n:n}link(e){return this._getRoot()+e}pause(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,this._historyUpdateMethod=e?"replaceState":"pushState"}resume(){this.pause(!1)}historyAPIUpdateMethod(e){return"undefined"===typeof e?this._historyUpdateMethod:(this._historyUpdateMethod=e,e)}disableIfAPINotAvailable(){i.isPushStateAvailable()||this.destroy()}lastRouteResolved(){return this._lastRouteResolved}getLinkPath(e){return e.getAttribute("href")}hooks(e){this._genericHooks=e}_add(e,t,n){return"string"===typeof e&&(e=encodeURI(e)),this._routes.push("object"===typeof t?{route:e,handler:t.uses,name:t.as,hooks:n||t.hooks}:{route:e,handler:t,name:void 0,hooks:n}),this._add}_historyUpdate(e,t,n){switch(this._historyUpdateMethod){default:throw Error("unknow history method "+this._historyUpdateMethod);case"pushState":return void window.history.pushState(e,t,n);case"replaceState":return void window.history.replaceState(e,t,n)}}_getRoot(){if(null===this.root){let e=this._cLoc().split("?")[0];this.root=i.root(e,this._routes)}return this.root.replace("#test","")}_listen(){if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if(i.isHashChangeAPIAvailable())window.addEventListener("hashchange",this._onLocationChange);else{let e=this._cLoc(),t=()=>{let n=this._cLoc();e!==n&&(e=n,this.resolve()),this.timout&&clearTimeout(this.timout),this.timout=setTimeout(t,200)};t()}}_cLoc(){if("undefined"!==typeof window){let{href:e}=window.location;return i.cleanUrl(e)}return""}_findLinks(){return[].slice.call(document.querySelectorAll("[data-navigo]"))}_callLeave(){const e=this._lastRouteResolved;if(e){let{params:t,hooks:n}=e;n&&n.leave&&n.leave(t)}}}i.PARAMETER_REGEXP=/([:*])(\w+)/g,i.WILDCARD_REGEXP=/\*/g,i.REPLACE_VARIABLE_REGEXP="([^\\/]+)",i.REPLACE_WILDCARD="(?:.*)",i.FOLLOWED_BY_SLASH_REGEXP="(?:\\/$|$)",i.MATCH_REGEXP_FLAGS="";new i},764:(e,t,n)=>{"use strict";n.d(t,{T:()=>h});var i,r=n(791),s=n(986),a=n(353),o=n(446),l=n(664),u=n(590),c=n(184);let h=(0,s.Pi)(i=class extends r.Component{constructor(e){super(e),this.tabsView=void 0;let{tabsProps:t}=e;t&&(this.tabsView=new o.S9(t))}renderHeader(e){const{back:t,header:n,right:i,headerClassName:r,afterBack:s,logout:o}=this.props;if(!1===n)return;let l=!1,u={back:t,center:n,right:i,logout:o,className:r,afterBack:s};if(void 0!==e){l=!0;let{renderPageHeader:t}=e;if(t)return t(u)}else l=!1;return(0,a.n)(u,l)}renderFooter(e){const{footer:t}=this.props;if(!t)return;let n=(0,c.jsx)("footer",{children:t});return e?n:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("section",{className:"tv-page-footer",children:n}),n]})}componentDidCatch(e,t){}render(){if(this.tabsView)return r.createElement(this.tabsView.content);const{onScroll:e,onScrollTop:t,onScrollBottom:n,children:i,className:s,webNav:a}=this.props;let o;o=a||u.nav.pageWebNav;let h=(0,c.jsxs)(c.Fragment,{children:[this.renderHeader(o),(0,c.jsx)("main",{children:i}),this.renderFooter(o)]});return o?(0,c.jsx)(l.Cw,{onScroll:e,onScrollTop:t,onScrollBottom:n,className:s,webNav:o,children:h}):(0,c.jsx)(l.pf,{onScroll:e,onScrollTop:t,onScrollBottom:n,className:s,children:h})}})||i},353:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var i=n(791),r=n(590),s=n(184);function a(e,t){let n,i,a=async()=>{await r.nav.back();let{afterBack:t}=e;t&&t()},o=()=>{r.nav.showLogout((async()=>{let{logout:t}=e;"function"===typeof t&&await t(),await r.nav.logout(void 0)}))},l=r.nav.level>1||window.self!==window.top,{back:u,right:c,center:h,logout:d,className:p,ex:f}=e;if(!0===t&&!u&&!c&&!h)return;if(void 0!==d&&window.self===window.top&&("boolean"===typeof d&&!0===d||"function"===typeof d)){let{user:e}=r.nav;if(void 0!==e){let{nick:t,name:n}=e;i=(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("small",{className:"text-light",children:t||n}),(0,s.jsx)("div",{className:"ms-2 py-2 px-3 cursor-pointer",role:"button",onClick:o,children:(0,s.jsx)("i",{className:"fa fa-sign-out fa-lg"})})]})}}if(l)if("none"===e.back)n=void 0;else n=(0,s.jsx)("nav",{onClick:a,children:r.nav.backIcon});window.self!==window.top&&console.log(document.location.href),void 0===n&&"string"===typeof h&&(h=(0,s.jsx)("div",{className:"px-3",children:h}));let m=(c||i)&&(0,s.jsxs)("aside",{children:[c," ",i]}),v=(0,s.jsxs)("header",{className:p,children:[(0,s.jsxs)("nav",{children:[n,(0,s.jsx)("div",{children:h}),m]}),f]});return!0===t?v:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("section",{className:"tv-page-header",children:v}),v]})}i.Component},664:(e,t,n)=>{"use strict";n.d(t,{Cw:()=>l,pf:()=>o});var i=n(791),r=n(184);class s{constructor(e){this.el=void 0,this.el=e}scrollToTop(){setTimeout((()=>this.el.scrollTo(0,0)),20)}scrollToBottom(){setTimeout((()=>this.el.scrollTo(0,this.el.scrollTop+this.el.offsetHeight)),20)}}class a extends i.Component{constructor(){super(...arguments),this.bottomTime=0,this.topTime=0,this.div=void 0,this.refDiv=e=>{e?(this.div=e,this.div.addEventListener("resize",this.onResize)):this.div&&this.div.removeEventListener("resize",this.onResize)},this.onResize=e=>{console.error("div resize")},this.onScroll=async e=>{let{onScroll:t,onScrollTop:n,onScrollBottom:i}=this.props;t&&t(e);let r=e.target,a=new s(r);if(r.scrollTop<30&&void 0!==n){let e=(new Date).getTime();e-this.topTime>100&&(this.topTime=e,n(a).then((e=>{if(!0===e){let e=r.scrollHeight,t=200;t>e&&(t=e),r.scrollTop=t}})))}if(r.scrollTop+r.offsetHeight>r.scrollHeight-30&&void 0!==i){let e=(new Date).getTime();e-this.bottomTime>100&&(this.bottomTime=e,i(a))}}}eachChild(e,t){let{props:n}=e;if(void 0===n)return;let{children:r}=n;void 0!==r&&i.Children.forEach(r,((e,n)=>{let{_$scroll:i}=e;i&&i(t),console.log(e.toString()),this.eachChild(e,t)}))}}class o extends a{render(){let{className:e,style:t}=this.props;return(0,r.jsx)("div",{ref:this.refDiv,className:"tv-page",onScroll:this.onScroll,style:t,children:(0,r.jsx)("article",{className:e,children:this.props.children})})}}class l extends a{render(){let e,t,{className:n,style:i,webNav:s}=this.props,{navHeader:a,navRawHeader:o,navFooter:l,navRawFooter:u}=s;return o?e=o:a&&(e=(0,r.jsx)("header",{children:(0,r.jsx)("main",{children:a})})),u?t=u:l&&(t=(0,r.jsx)("footer",{children:(0,r.jsx)("main",{children:l})})),(0,r.jsxs)("div",{ref:this.refDiv,className:"tv-page-webnav",onScroll:this.onScroll,style:i,children:[e,(0,r.jsx)("article",{className:n,children:this.props.children}),t]})}}},446:(e,t,n)=>{"use strict";n.d(t,{S9:()=>x});var i,r,s,a,o,l,u,c,h=n(269),d=n(229),p=n(791),f=n(894),m=n(986),v=n(694),g=n.n(v),y=n(664),b=n(184);let w=(i=class{constructor(){(0,h.Z)(this,"loaded",r,this),this.name=void 0,(0,h.Z)(this,"selected",s,this),this.caption=void 0,this.contentBuilder=void 0,this.page=void 0,this.notify=void 0,this.load=void 0,this.onShown=void 0,this.onScroll=void 0,this.onScrollTop=void 0,this.onScrollBottom=void 0,this.className=void 0,this._content=void 0}get content(){return this.load&&!1===this.loaded?null:(!1===this.selected||this._content||(void 0!==this.contentBuilder?this._content=this.contentBuilder():void 0!==this.page?this._content=this.page.content():this._content=(0,b.jsx)("div",{className:"p-5",children:"tab \u5e94\u8be5\u5b9a\u4e49content\u6216\u8005page"})),this._content)}async shown(){void 0!==this.onShown&&await this.onShown(),void 0!==this.load&&!1===this.loaded&&(await this.load(),this.loaded=!0)}},r=(0,d.Z)(i.prototype,"loaded",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,d.Z)(i.prototype,"selected",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i);let x=(a=class{constructor(e){this.props=void 0,this.size=void 0,this.tabBg=void 0,this.sep=void 0,(0,h.Z)(this,"selectedTab",o,this),(0,h.Z)(this,"tabArr",l,this),this.tabClick=async e=>{if(!e&&void 0===(e=this.selectedTab)){if(void 0===this.tabArr)return;if(0===this.tabArr.length)return;e=this.tabArr[0]}this.selectedTab.selected=!1,e.selected=!0,this.selectedTab=e,await e.shown()},this.tabs=(0,m.Pi)((()=>{let e,t,{tabPosition:n,borderColor:i}=this.props;i&&(e={borderColor:i,borderStyle:"solid",borderTopWidth:1,borderLeftWidth:1,borderRightWidth:1,borderBottomWidth:1},t={borderColor:i,borderStyle:"solid",borderTopWidth:1,borderBottomWidth:1,borderLeftWidth:0,borderRightWidth:0},"top"===n?(e.borderBottomWidth=0,e.borderTopLeftRadius=10,e.borderTopRightRadius=10,t.borderTopWidth=0):(e.borderTopWidth=0,e.borderBottomLeftRadius=10,e.borderBottomRightRadius=10,t.borderBottomWidth=0));let r=g()("tv-tabs",this.tabBg,this.sep,"tv-tabs-"+this.size);return(0,b.jsx)("div",{className:r,children:this.tabArr.map(((n,i)=>{let r,{selected:s,caption:a,notify:o}=n;if(void 0!==o){let e=o.get();void 0!==e&&(e>0?r=(0,b.jsx)("u",{children:e>99?"99+":e}):e<0&&(r=(0,b.jsx)("u",{className:"dot"})))}return(0,b.jsx)("div",{onClick:()=>this.tabClick(n),style:!0===s?e:t,children:(0,b.jsxs)("div",{children:[r,a(s)]})},i)}))})})),this.content=(0,m.Pi)((()=>{let e={visibility:"hidden"};return(0,b.jsx)(b.Fragment,{children:this.tabArr.map(((t,n)=>{let i,r,s,a,{tabPosition:o}=this.props,{content:l,page:u,onScroll:c,onScrollTop:h,onScrollBottom:d,className:f}=t,m=p.createElement(this.tabs);void 0!==u&&(i=u.header(),r=u.footer());let v,g={visibility:"hidden"};return"top"===o?(s=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("section",{className:"tv-page-header",children:(0,b.jsxs)("header",{children:[m,i]})}),(0,b.jsxs)("header",{style:g,children:[m,i]})]}),void 0!==r&&(a=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("footer",{style:g,children:r}),(0,b.jsx)("section",{className:"tv-page-footer",children:(0,b.jsx)("footer",{children:r})})]}))):(void 0!==i&&(s=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("section",{className:"tv-page-header",children:(0,b.jsx)("header",{children:i})}),(0,b.jsx)("header",{style:g,children:i})]})),a=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("footer",{style:g,children:[r,m]}),(0,b.jsx)("section",{className:"tv-page-footer",children:(0,b.jsxs)("footer",{children:[r,m]})})]})),!1===t.selected&&(v=e),(0,b.jsxs)(y.pf,{className:f,style:v,onScroll:c,onScrollTop:h,onScrollBottom:d,children:[s,l,a]},n)}))})})),this.props=e;let{size:t,tabs:n,tabBg:i,sep:r,selected:s}=e;this.size=t||"md",this.tabArr=n.map((e=>{let t=new w,{name:n,caption:i,content:r,page:a,notify:o,load:l,onShown:u,isSelected:c,onScroll:h,onScrollTop:d,onScrollBottom:p,className:f}=e;return t.name=n,!0!==c&&n!==s||(this.selectedTab=t),t.selected=!1,t.caption=i,void 0!==r?t.contentBuilder=r:void 0!==a&&(t.page=a),t.notify=o,t.load=l,t.onShown=u,t.onScroll=h,t.onScrollTop=d,t.onScrollBottom=p,t.className=f,t})),this.tabBg=i,this.sep=r,void 0===this.selectedTab&&(this.selectedTab=this.tabArr[0]),this.selectedTab.selected=!0}render(){let e,t,{tabPosition:n}=this.props,i=p.createElement(this.tabs),r={display:"none"};return"top"===n?e=(0,b.jsx)("header",{children:i}):t=(0,b.jsx)("footer",{children:i}),(0,b.jsxs)(b.Fragment,{children:[e,this.tabArr.map(((e,t)=>{let n;return!1===e.selected&&(n=r),(0,b.jsx)("div",{className:g()(e.className),style:n,children:e.content},t)})),t]})}},o=(0,d.Z)(a.prototype,"selectedTab",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,d.Z)(a.prototype,"tabArr",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a);(0,m.Pi)(u=class extends p.Component{constructor(e){super(e),this.tabsView=void 0,this.tabsView=new x(e),setTimeout((()=>{this.tabsView.tabClick(void 0)}),100)}render(){return this.tabsView.render()}}),(0,m.Pi)(c=class extends p.Component{constructor(e){super(e),this.tabsView=void 0,this.tabsView=new x(e),setTimeout((()=>{this.tabsView.tabClick(void 0)}),100)}render(){return p.createElement(this.tabsView.content)}})},103:(e,t,n)=>{"use strict";n.d(t,{Ct:()=>u,FA:()=>d,pA:()=>h,rO:()=>p});var i,r=n(791),s=n(986),a=n(694),o=n.n(a),l=n(184);let u=(0,s.Pi)(i=class extends r.Component{render(){let e,{className:t,badge:n,size:i,color:r,badgeAlign:s,badgeVertical:a,children:u}=this.props,c=o()(t,"va-badge",i&&"va-badge-"+i,"va-badge-"+(r||"secondary"),s&&"va-badg-"+s,a&&"va-badg-"+a);return n&&(e=(0,l.jsx)("b",{children:n})),(0,l.jsxs)("div",{className:c,children:[u,e]})}})||i;var c;let h=(0,s.Pi)(c=class extends r.Component{render(){let e,t,n,{className:i,left:r,children:s,right:a,onClick:u}=this.props;return void 0!==r&&(e=(0,l.jsx)("header",{children:r})),void 0!==a&&(t=(0,l.jsx)("footer",{children:a})),void 0!==u&&(n="cursor-pointer"),(0,l.jsxs)("div",{className:o()("va-lmr",i,n),onClick:u,children:[e,(0,l.jsx)("div",{children:s}),t]})}})||c;class d extends r.Component{render(){let{name:e,className:t,size:n,spin:i,fixWidth:r,border:s,pull:a,pulse:u,rotate:c,flip:h,inverse:d}=this.props,p=o()(t,"fa",e&&"fa-"+e,n&&"fa-"+n,r&&"fa-fw",s&&"fa-border",a&&"fa-pull-"+a,i&&"fa-spin",u&&"fa-pulse",c&&"fa-rotate-"+c,h&&"fa-flip-"+h,d&&"fa-inverse");return(0,l.jsx)("i",{className:p})}}r.Component;r.Component;const p=e=>(0,l.jsx)("small",{className:o()("text-muted",e.className),style:e.style,children:e.children})},192:(e,t,n)=>{"use strict";async function i(e,t,n,i,r){await e.fetch(t,n,!1,i,r)}n.d(t,{j:()=>i,q:()=>r});class r{constructor(e,t){this.token=void 0,this.path=void 0,this.showWaiting=void 0,this.path=e||"",this.showWaiting=t}async xcall(e){let t=await this.getHttpChannel();return await t.xcall(this.path,e)}async call(e,t,n){let i=await this.getHttpChannel();return await i.callFetch(e,t,n)}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=await this.getHttpChannel();return await n.get(this.path+e,t)}async post(e,t){let n=await this.getHttpChannel();return await n.post(this.path+e,t)}async put(e,t){let n=await this.getHttpChannel();return await n.put(this.path+e,t)}async delete(e,t){let n=await this.getHttpChannel();return await n.delete(this.path+e,t)}}},179:(e,t,n)=>{"use strict";n.d(t,{$N:()=>v,GA:()=>x,Gd:()=>y,Lc:()=>m,Xp:()=>k,YA:()=>f,ax:()=>w,fW:()=>p,hc:()=>g,iw:()=>h});var i=n(763),r=n.n(i),s=n(106),a=n(732),o=n(540),l=n(574),u=n(326);const c={};function h(){for(let e in c)c[e]=void 0}const d={};let p=new class{constructor(){this.hash=void 0,this._unit=void 0,this.page=void 0,this.param=void 0}get unit(){return this._unit}set unit(e){this._unit=e}};function f(){return window.self!==window.parent}function m(e){if(e){let t=e.split("-"),n=t.length;if(n>0){let e=1;p.hash=t[e++],n>0&&(p.unit=Number(t[e++])),n>1&&(p.page=t[e++]),n>2&&(p.param=t.slice(e++))}}return p}function v(){let e=document.location.hash;if(void 0!==e&&e.length>0){let t=e.lastIndexOf("#tv-");return t<0&&(t=e.lastIndexOf("#tvdebug-")),t}return-1}function g(){let e=v();if(!(e<0))return document.location.hash.substring(e)}function y(e,t,n,i){let r;for(;;){if(r=(0,a.h)(),void 0===d[r]){d[r]={hash:r,unit:t};break}}if(e+="#tv-"+r+"-"+t,void 0!==n&&(e+="-"+n,void 0!==i))for(let s=0;s<i.length;s++)e+="-"+i[s];return{url:e,hash:r}}window.addEventListener("message",(async function(e){var t,n=e.data;switch(n.type){case"sub-frame-started":!function(e){var t=e.data;let n=e.source;(0,l.vo)(n),function(e){let t=document.getElementById(e);void 0!==t&&(t.hidden=!0)}(t.hash);let i=r().clone(s.nav.user);i.type="init-sub-win",n.postMessage(i,"*")}(e);break;case"ws":await s.nav.onReceive(n.msg);break;case"init-sub-win":await async function(e){console.log("initSubWin: set nav.user",e);let t=s.nav.user=e;(0,o.Vq)(t.id,t.token),await s.nav.showAppView()}(n);break;case"pop-app":window.console.log("///\\\\\\ pop-app"),s.nav.navBack();break;case"center-api":await async function(e,t){let{callId:n,url:i,method:r,body:s}=t,a=await o.YO.directCall(i,r,s);e.postMessage({type:"center-api-return",callId:n,result:a},"*")}(e.source,n);break;case"center-api-return":!function(e){let{callId:t,result:n}=e,i=j[t];if(void 0===i)return;j[t]=void 0,i.resolve(n)}(n);break;case"app-api":let i=await async function(e,t){let n=d[e];if(void 0===n)return{name:t,db:void 0,url:void 0,token:void 0};let{unit:i,predefinedUnit:r}=n;i=i||r,i||console.error("no unit defined in unit.json or in index.html, or not logined in",i);let s=t.split("/"),a={unit:i,uqOwner:s[0],uqName:s[1],appOwner:s[2],appName:s[3]};console.log("uqTokenApi.uq onReceiveAppApiMessage",a);let l=await o.oF.uq(a),{db:u,url:c,token:h}=l;return{name:t,db:u,url:c,token:h}}(n.hash,n.apiName);e.source.postMessage({type:"app-api-return",apiName:n.apiName,db:i.db,url:i.url,token:i.token},"*");break;case"app-api-return":console.log("app-api-return: %s",JSON.stringify(n)),console.log("await onAppApiReturn(message);"),await async function(e){let{apiName:t,db:n,url:i,urlTest:r,token:s}=e,a=b[t];if(void 0===a)throw new Error("error app api return");let o=u.h.getUrlOrTest(n,i,r);console.log("onAppApiReturn(message:any): url="+i+", real="+o),a.resolve({name:t,db:n,url:o,token:s})}(n);break;default:if(!0===(null===(t=n.source)||void 0===t?void 0:t.startsWith("react-devtools")))break;window.console.log("message: %s",JSON.stringify(n))}}));const b={};async function w(e,t,n,i,r){if(!f()){let s=function(){let{unit:e,predefinedUnit:t}=p,n=e||t;if(void 0===n)throw new Error("no unit defined in unit.json or not logined in");return n}(),a=await o.oF.uq({unit:s,uqOwner:t,uqName:n,appOwner:i,appName:r});void 0===a.token&&(a.token=o.L6);let{db:l,url:h,urlTest:d}=a,f=u.h.getUrlOrTest(l,h,d);return console.log("realUrl: %s",f),a.url=f,c[e]=a,a}if(console.log("**** before buildAppUq ****",p),void 0===b[e])return new Promise(((t,n)=>{b[e]={resolve:async n=>{let{db:i,url:r,token:s}=await n;c[e]={name:e,db:i,url:r,token:s},b[e]=void 0,console.log("**** after buildAppUq ****",p),t()},reject:n},(window.opener||window.parent).postMessage({type:"app-api",apiName:e,hash:p.hash},"*")}))}function x(e){return c[e]}const j={};async function k(e,t,n){return console.log("bridgeCenterApi: url=%s, method=%s",e,t),await new Promise((async(i,r)=>{let s;for(;;){if(s=(0,a.h)(),void 0===j[s]){j[s]={id:s,resolve:i,reject:r};break}}(window.opener||window.parent).postMessage({type:"center-api",callId:s,url:e,method:t,body:n},"*")}))}},326:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,h:()=>d});var i=n(541);const r="https://note.jjol.cn",s={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://note.jjol.cn"}.REACT_APP_RES_HOST||r,a="localhost:3015",o={centerhost:{value:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://note.jjol.cn"}.REACT_APP_CENTER_DEBUG_HOST||"localhost:3000",local:!1},reshost:{value:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://note.jjol.cn"}.REACT_APP_RES_DEBUG_HOST||"localhost:3015",local:!1},uqhost:{value:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://note.jjol.cn"}.REACT_APP_UQ_DEBUG_HOST||a,local:!1},unitxhost:{value:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://note.jjol.cn"}.REACT_APP_UQ_DEBUG_HOST||a,local:!1},"uq-build":{value:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://note.jjol.cn"}.REACT_APP_UQ_DEBUG_BUILDER_HOST||"localhost:3009",local:!1}},l=["https://","http://"];function u(e){return!0===function(e){for(let t of l)if(!0===e.startsWith(t))return!0;return!1}(e)?e.endsWith("/")?e:e+"/":"http://".concat(e,"/")}function c(e){if(!e)return;return u(e)+"res/"}const h={method:"GET",mode:"no-cors",headers:{"Content-Type":"text/plain"}};const d=new class{constructor(){this.testing=void 0,this.url=void 0,this.ws=void 0,this.resHost=void 0}async start(e){this.testing=e,!0===i.OB.isDevelopment&&await this.tryLocal();let t=this.getCenterHost();this.url=function(e){return u(e)}(t),this.ws=function(e){let t="https://";return!0===e.startsWith(t)?(!0===(e=e.substr(8)).endsWith("/")&&(e=e.substr(0,e.length-1)),"wss://"+e+"/tv/"):"ws://".concat(e,"/tv/")}(t),this.resHost=this.getResHost()}debugHostUrl(e){return"http://".concat(e,"/hello")}async tryLocal(){let e=[],t=[];for(let r in o){let e=o[r],{value:n}=e;t.findIndex((e=>e===n))<0&&t.push(n)}for(let r of t){let t=this.debugHostUrl(r);e.push(f(t))}let n=await Promise.all(e),i=t.length;for(let r=0;r<i;r++){let e=n[r],i=t[r];for(let t in o){let n=o[t];n.value===i&&(n.local=e)}}}getCenterHost(){let{value:e,local:t}=o.centerhost;return!0===document.location.hash.includes("sheet_debug")||!0===i.OB.isDevelopment&&!0===t?e:r}getResHost(){let{value:e,local:t}=o.reshost;return!0===document.location.hash.includes("sheet_debug")||!0===i.OB.isDevelopment&&!0===t?e:s}getUrlOrDebug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uqhost";if(!1===i.OB.isDevelopment)return e;let n=o[t];if(void 0===n)return e;let{value:r,local:s}=n;return!1===s?e:"http://".concat(r,"/")}getUrlOrTest(e,t,n){let i;return n?t||(t=n,this.testing=!0):(n=t)||console.error("no server set for "+e),!0===this.testing?("-"!==n&&(t=n),i="uq/test/"+e+"/"):i="uq/prod/"+e+"/",!1===(t=this.getUrlOrDebug(t)).endsWith("/")&&(t+="/"),t+i}async localCheck(e){return await f(e)}},p=2e3;async function f(e){try{return await function(e){return new Promise(((t,n)=>{fetch(e,h).then((e=>{e.text().then(t).catch(n)})).catch(n);const r=new Error("Connection timed out");i.OB.setTimeout("fetchLocalCheck",n,p,r)}))}(e),!0}catch(t){return!1}}},537:(e,t,n)=>{"use strict";n.d(t,{I:()=>l,Dx:()=>s.Dx,tQ:()=>s.tQ,rw:()=>s.rw,zC:()=>s.zC,appInFrame:()=>u.fW,YK:()=>o,host:()=>c.h,eX:()=>s.eX,kS:()=>s.kS,g0:()=>h.g,j6:()=>i.j,Cs:()=>c.C,Vq:()=>s.Vq,F$:()=>s.F$,BG:()=>s.BG});n(574);var i=n(192),r=n(864),s=n(540);class a extends s.Dx{async guest(){let e=await this.get("",{});switch(typeof e){default:return;case"string":return(0,r.H)(e);case"object":return(0,r.H)(e.token)}}async unitFromName(e){let t=await this.get(e);return t&&t.unit}}const o=new a("tv/guest/",void 0);class l{constructor(e,t){this._params=void 0,this.method="POST",this.waiting=void 0,this._params=e,this.waiting=t}get params(){return this._params}buildParams(){return this.params}get headers(){}}var u=n(179),c=n(326),h=n(12)},12:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});const i=new class{constructor(){this.handlerSeed=1,this.anyHandlers={},this.msgHandlers={}}registerReceiveHandler(){let e,t=this.handlerSeed++,n=arguments.length<=0?void 0:arguments[0];switch(typeof n){case"string":e=arguments.length<=1?void 0:arguments[1],this.msgHandlers[t]={type:n,handler:e};break;case"function":this.anyHandlers[t]=n}return t}unregisterReceiveHandler(e){delete this.anyHandlers[e],delete this.msgHandlers[e]}async dispatch(e){let{$type:t}=e;for(let n in this.anyHandlers)await this.anyHandlers[n](e);for(let n in this.msgHandlers){let{type:i,handler:r}=this.msgHandlers[n];i===t&&await r(e)}}}},540:(e,t,n)=>{"use strict";n.d(t,{Dx:()=>A,tQ:()=>I,rw:()=>k,zC:()=>b,YO:()=>O,L6:()=>x,eX:()=>T,kS:()=>y,Vq:()=>E,F$:()=>_,oF:()=>P,BG:()=>U});var i=n(763),r=n.n(i),s=n(179),a=n(590),o=n(541);const l=["POST","PUT"];class u{constructor(e,t,n){this.timeout=void 0,this.ui=void 0,this.hostUrl=void 0,this.apiToken=void 0,this.startWait=e=>{!0===e&&void 0!==this.ui&&this.ui.startWait()},this.endWait=(e,t)=>{void 0!==this.ui&&this.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=async e=>{void 0!==this.ui&&await this.ui.showError(e)},this.hostUrl=e,this.apiToken=t,this.ui=n,this.timeout=!0===o.OB.isDevelopment?5e5:5e4}used(){this.post("",{})}async xcall(e,t){let n=this.buildOptions(),{headers:i,path:r,method:s}=t;if(void 0!==i){let e=n.headers;for(let t in i)e[t]=encodeURI(i[t])}n.method=s;let a=t.buildParams();return l.indexOf(s)>=0&&void 0!==a&&(n.body=JSON.stringify(a)),await this.innerFetch(e+r,n,t.waiting)}async innerFetchResult(e,t,n){return(await this.innerFetch(e,t,n)).res}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(t){let n=Object.keys(t);if(n.length>0){let i="?";for(let r of n){void 0!==t[r]&&(e+=i+r+"="+t[r],i="&")}}}let i=this.buildOptions();return i.method="GET",await this.innerFetchResult(e,i,n)}async post(e,t,n){let i=this.buildOptions();return i.method="POST",i.body=JSON.stringify(t),await this.innerFetchResult(e,i,n)}async put(e,t,n){let i=this.buildOptions();return i.method="PUT",i.body=JSON.stringify(t),await this.innerFetchResult(e,i,n)}async delete(e,t,n){let i=this.buildOptions();return i.method="DELETE",i.body=JSON.stringify(t),await this.innerFetchResult(e,i,n)}async fetch(e,t,n,i,r){let s=this;this.startWait(n);let l=e;function u(e,n){switch(typeof e){case"string":void 0!==n&&(e+=" "+n);break;case"object":let t=Object.keys(e),i={ex:n};for(let n of t)i[n]=e[n];e=i}return{channel:s,url:l,options:t,resolve:i,reject:r,error:e}}try{console.log("%s-%s %s",t.method,l,t.body||"");let n=Date.now(),a=o.OB.setTimeout(void 0,(()=>{s.endWait(e+" timeout endWait: "+(Date.now()-n)+"ms",r)}),this.timeout),c=await fetch(encodeURI(l),t);if(!1===c.ok)throw o.OB.clearTimeout(a),console.log("ok false endWait"),s.endWait(),console.log("call error %s",c.statusText),c.statusText;let h=c.headers.get("content-type");if(h&&h.indexOf("json")>=0)return c.json().then((async e=>{if(o.OB.clearTimeout(a),s.endWait(),!0===e.ok)return"object"!==typeof e||Array.isArray(e),i(e);let t=e.error;void 0===t?await s.showError(u("not valid tonva json")):(await s.showError(u(t,"retJson.error")),r(t))})).catch((async e=>{await s.showError(u(e,"catch res.json()"))}));{let e=await c.text();o.OB.clearTimeout(a),console.log("text endWait"),s.endWait(),i(e)}}catch(c){if(this.endWait(e,r),"string"===typeof c){if(!0===c.toLowerCase().startsWith("unauthorized"))return void a.nav.logout()}console.error("fecth error (no nav.showError): "+e)}}async callFetch(e,t,n){let i=this.buildOptions();return i.method=t,i.body=n,await new Promise((async(t,n)=>{await this.fetch(e,i,!0,t,n)}))}buildOptions(){return{headers:this.buildHeaders(),method:void 0,body:void 0}}buildHeaders(){let{language:e,culture:t}=a.nav,n={"Content-Type":"application/json;charset=UTF-8"},i=e;return t&&(i+="-"+t),n["Accept-Language"]=i,this.apiToken&&(n.Authorization=this.apiToken),n}}class c extends u{async innerFetch(e,t,n){let i=this.hostUrl+e;return void 0===this.apiToken&&(0,s.YA)()?await(0,s.Xp)(i,t.method,t.body):await new Promise((async(e,r)=>{await this.fetch(i,t,n,e,r)}))}}class h extends u{async innerFetch(e,t,n){let i=this.hostUrl+e;return await new Promise((async(e,r)=>{await this.fetch(i,t,n,e,r)}))}}class d{startWait(){a.nav.startWait()}endWait(){a.nav.endWait()}async showError(e){a.nav.endWait(),await a.nav.onError(e)}async showUpgradeUq(e,t){await a.nav.showUpgradeUq(e,t)}}var p=n(192),f=n(326),m=n(864);let v={},g={};function y(){v={},g={},j={},(0,s.iw)()}class b extends p.q{constructor(e,t,n,i,r,s,a){super(e,a),this.access=void 0,this.appOwner=void 0,this.appName=void 0,this.uqOwner=void 0,this.uqName=void 0,this.uq=void 0,this.appOwner=t,this.appName=n,r&&(this.uqOwner=i,this.uqName=r,this.uq=i+"/"+r),this.access=s,this.showWaiting=a}async init(){await(0,s.ax)(this.uq,this.uqOwner,this.uqName,this.appOwner,this.appName)}async getHttpChannel(){let e,t;!0===this.showWaiting||void 0===this.showWaiting?(e=v,t=new d):e=g;let n=e[this.uq];if(void 0!==n){if(!1===Array.isArray(n))return n}else n=e[this.uq]=[];let i=n;return new Promise((async(r,a)=>{if(i.push({resolve:r,reject:a}),1!==i.length)return;let o=(0,s.GA)(this.uq);o||(await this.init(),o=(0,s.GA)(this.uq));let{url:l,token:u}=o;this.token=u,n=new h(l,u,t),e[this.uq]=n;for(let e of i)e.resolve(n)}))}async loadAccess(){let e=void 0===this.access?"":this.access.join("|");return await this.get("access",{acc:e})}async allSchemas(){return await this.get("all-schemas")}async schema(e){return await this.get("schema/"+e)}async queueModify(e,t,n){return await this.post("queue-modify",{start:e,page:t,entities:n})}async getRoles(){let e=await this.get("get-roles");if(!e)return null;let t=e.split("|"),n=[];for(let i of t)i=i.trim(),i&&n.push(i);return 0===n.length?null:n}async getAllRoleUsers(){return await this.get("get-all-role-users")}async setUserRoles(e,t){await this.post("set-user-roles",{theUser:e,roles:t})}async deleteUserRoles(e){await this.get("delete-user-roles",{theUser:e})}}let w,x,j={};class k extends b{constructor(e){super("tv/",void 0,void 0,void 0,void 0,void 0,!0),this.unitId=void 0,this.unitId=e}async getHttpChannel(){let e=j[this.unitId];return void 0!==e?e:j[this.unitId]=await this.buildChannel()}async buildChannel(){let e=new d,t=new I("tv/",void 0),n=await t.unitxUq(this.unitId),{token:i,db:r,url:s,urlTest:a}=n,o=f.h.getUrlOrTest(r,s,a);return this.token=i,new h(o,i,e)}}function _(e){console.log("setCenterUrl %s",e),w=e,S=void 0,C=void 0}let C,S,N=0;function E(e,t){N=e,x=t,console.log("setCenterToken %s",t),S=void 0,C=void 0}class A extends p.q{async getHttpChannel(){return!0===this.showWaiting||void 0===this.showWaiting?void 0!==C?C:C=new c(w,x,new d):void 0!==S?S:S=new c(w,x)}}const P=new class extends A{constructor(){super(...arguments),this.localMap=o.OB.localDb.map("uqTokens")}async uq(e){let{uqOwner:t,uqName:n}=e,i=t+"/"+n,s=this.localMap.child(i);try{let t=s.get();if(void 0!==t){let{unit:n,user:i}=t;n===e.unit&&i===N||(s.remove(),t=void 0)}let n=Math.floor(Date.now()/1e3);if(void 0!==t){let{tick:e,value:i}=t;if(void 0!==i&&n-e<86400)return r().clone(i)}let i=r().clone(e);i.testing=f.h.testing;let a=await this.get("app-uq",i);if(void 0===a){let{unit:t,uqOwner:n,uqName:i}=e;throw"center get app-uq(unit=".concat(t,", '").concat(n,"/").concat(i,"') - not exists or no unit-service")}return t={unit:e.unit,user:N,tick:n,value:a},s.set(t),r().clone(a)}catch(a){throw s.remove(),a}}}("tv/tie/",void 0);const O=new class extends A{directCall(e,t,n){return this.call(e,t,n)}}("",void 0);class I extends A{async uqs(e,t){return await this.get("tie/app-uqs",{appOwner:e,appName:t})}async uqsPure(e,t){return await this.get("tie/app-uqs",{appOwner:e,appName:t})}async unitxUq(e){return await this.get("tie/unitx-uq",{unit:e})}async changePassword(e){return await this.post("tie/change-password",e)}}async function T(e,t){let n=new I("tv/",void 0);return await n.uqs(e,t)}const U=new class extends A{async login(e){let t=await this.get("user/login",e);switch(typeof t){default:return;case"string":return(0,m.S)(t);case"object":let e=t.token,n=(0,m.S)(e),{nick:i,icon:r}=t;return i&&(n.nick=i),r&&(n.icon=r),n}}async register(e){return await this.post("user/register",e)}async sendVerify(e,t,n){return await this.post("user/set-verify",{account:e,type:t,oem:n})}async checkVerify(e,t){return await this.post("user/check-verify",{account:e,verify:t})}async isExists(e){return await this.get("user/is-exists",{account:e})}async resetPassword(e,t,n,i){return await this.post("user/reset-password",{account:e,password:t,verify:n,type:i})}async userSetProp(e,t){await this.post("tie/user-set-prop",{prop:e,value:t})}async me(){return await this.get("tie/me")}async user(e){return await this.get("tie/user",{id:e})}async fromKey(e){return await this.get("tie/user-from-key",{key:e})}}("tv/",void 0)},574:(e,t,n)=>{"use strict";n.d(t,{Jl:()=>l,vo:()=>s});var i=n(12);let r;function s(e){r=e}class a{constructor(){this.messageHub=i.g}async receive(e){this.messageHub.dispatch(e)}}let o=1;new class extends a{constructor(){super(...arguments),this.wsBaseId="WsBridge seed "+o++}};class l extends a{constructor(e,t){super(),this.wsBaseId="WSChannel seed "+o++,this.wsHost=void 0,this.token=void 0,this.ws=void 0,this.wsHost=e,this.token=t}static setCenterToken(e){l.centerToken=e}connect(){if(void 0!==this.ws)return;let e=this;return new Promise(((t,n)=>{let i=new WebSocket(this.wsHost,this.token||l.centerToken);console.log("connect webSocket %s",this.wsHost),i.onopen=n=>{console.log("webSocket connected %s",this.wsHost),e.ws=i,t()},i.onerror=e=>{n("webSocket can't open!")},i.onmessage=async t=>await e.wsMessage(t),i.onclose=t=>{e.ws=void 0,console.log("webSocket closed!")}}))}close(){void 0!==this.ws&&(this.ws.close(),this.ws=void 0)}async wsMessage(e){try{console.log("websocket message: %s",e.data);let t=JSON.parse(e.data);!function(e){void 0!==r&&r.postMessage({type:"ws",msg:e},"*")}(t),await this.receive(t)}catch(t){console.log("ws msg error: ",t)}}sendWs(e){let t=this;this.connect().then((()=>{t.ws.send(e)}))}}l.centerToken=void 0},888:(e,t,n)=>{"use strict";n.d(t,{B1:()=>u,XB:()=>l,js:()=>a,resOptions:()=>s,t:()=>c});var i=n(763),r=n.n(i);const s={lang:void 0,$lang:void 0,district:void 0,$district:void 0};function a(e){let{lang:t,district:n}=s,i={};if(void 0===e)return i;r().merge(i,e._);let a=e[t];if(void 0===a)return i;r().merge(i,a._);let o=a[n];if(void 0===o)return i;r().merge(i,o);let{entity:l}=i;if(void 0!==l)for(let r in l)l[r.toLowerCase()]=l[r];return i}!function(){let e,t,n=navigator.languages&&navigator.languages[0]||navigator.language;if(n){let i=n.split("-");e=i[0],i.length>1&&(t=i[1].toUpperCase())}else e="zh",t="CN";!function(e,t){s.lang=e,s.$lang="$"+e,s.district=t,s.$district="$"+t}(e,t)}();const o={};function l(e,t){if(void 0===t)return;let{$lang:n,$district:i}=s;if(r().merge(e,t),void 0!==n){let s=t[n];if(void 0!==s){r().merge(e,s);let t=s[i];void 0!==t&&r().merge(e,t)}}return function(t){return e[t]||t}}function u(e){l(o,e)}function c(e){return o[e]||e}},541:(e,t,n)=>{"use strict";n.d(t,{v:()=>c,Vn:()=>b,Fu:()=>a.F,HN:()=>j,OB:()=>y,oX:()=>w,Yd:()=>x,hQ:()=>s.h});n(864);var i,r,s=n(732),a=n(515),o=n(269),l=n(229),u=n(894);let c=(i=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.maxCount=void 0,this.arr=[],(0,o.Z)(this,"dict",r,this),this.maxCount=e}loadIds(e){let t=[];for(let n of e){if(null===n)continue;let e=this.dict.get(n);void 0===e&&(t.push(n),e={id:n},this.dict.set(n,e))}this.loadId(t)}get(e){if(void 0===e||null===e)return null;let t=this.dict.get(e);return void 0===t&&(this.dict.set(e,{id:e}),this.loadId([e]),t=this.dict.get(e)),t}setItem(e,t){void 0===t?(this.dict.set(e,null),this.arr.push({id:e})):(this.dict.set(e,t),this.arr.push(t)),this.arr.length>this.maxCount&&(t=this.arr.shift(),this.dict.delete(t.id))}async loadId(e){let t=await this._loadIds(e);if(void 0===t)for(let n of e){if(null===n)continue;let e=await this._loadId(n);this.setItem(n,e)}else for(let n of e){let e=t.find((e=>e.id===n));this.setItem(n,e)}}},r=(0,l.Z)(i.prototype,"dict",[u.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),i);var h=n(763),d=n.n(h);const p=new class{getItem(e){return localStorage.getItem(e)}setItem(e,t){localStorage.setItem(e,t)}removeItem(e){localStorage.removeItem(e)}};class f{constructor(e,t){this.local=void 0,this.key=void 0,this.local=e,this.key=t}get(){try{let e=this.local.getItem(this.key);if(null===e)return;if(void 0===e)return;return JSON.parse(e)}catch(e){return void this.local.removeItem(this.key)}}set(e){let t=JSON.stringify(e,((e,t)=>{if("_tuid"!==e)return t}));this.local.setItem(this.key,t)}remove(e){void 0===e?this.local.removeItem(this.key):this.local.removeLocal(e)}child(e){return this.local.child(e)}arr(e){return this.local.arr(e)}map(e){return this.local.map(e)}}class m{constructor(e){this.caches=void 0,this.locals=void 0,this.name=void 0,this.name=e,this.caches={},this.locals={}}getItem(e){let t=this.keyForGet(e);if(void 0!==t)return p.getItem(t)}setItem(e,t){let n=this.keyForSet(e);p.setItem(n,t)}removeItem(e){let t=this.keyForSet(e);void 0!==t&&localStorage.removeItem(t)}arr(e){let t=String(e),n=this.locals[t];if(void 0===n){let i=this.keyForSet(e);this.locals[t]=n=new v(i)}return n}map(e){let t=String(e),n=this.locals[t];if(void 0===n){let i=this.keyForSet(e);this.locals[t]=n=new g(i)}return n}removeLocal(e){let t=e.name,n=this.keyForRemove(t);if(void 0===n)return;let i=this.locals[t];void 0===i?i=new v(n):this.locals[t]=void 0,i.removeAll()}child(e){let t=String(e),n=this.caches[t];return void 0!==n?n:this.caches[t]=new f(this,e)}}class v extends m{constructor(e){super(e),this.index=void 0;let t=p.getItem(this.name);this.index=null===t?[]:t.split("\n").map((e=>Number(e)))}saveIndex(){p.setItem(this.name,this.index.join("\n"))}keyForGet(e){if(!(d().indexOf(this.index,e)<0))return"".concat(this.name,".").concat(e)}keyForSet(e){let t=d().indexOf(this.index,e);return t<0?(this.index.unshift(e),this.index.length>500&&this.index.pop()):(this.index.splice(t,1),this.index.unshift(e)),this.saveIndex(),"".concat(this.name,".").concat(e)}keyForRemove(e){let t=d().indexOf(this.index,e);if(!(t<0))return this.index.splice(t,1),this.saveIndex(),"".concat(this.name,".").concat(e)}removeAll(){for(let e of this.index)p.removeItem("".concat(this.name,".").concat(e));p.removeItem(this.name),this.index.splice(0)}item(e){return this.child(e)}}class g extends m{constructor(e){super(e),this.index=void 0,this.max=void 0,this.max=0,this.index={};let t=p.getItem(this.name);if(null!==t){t.split("\n").forEach((e=>{let t=e.indexOf("\t");if(t<0)return;let n=e.substr(0,t),i=Number(e.substr(t+1));!0!==isNaN(i)&&(this.index[n]=i,i>this.max&&(this.max=i))}))}}saveIndex(){let e=[];for(let t in this.index){let n=this.index[t];void 0!==n&&e.push("".concat(t,"\t").concat(n))}p.setItem(this.name,e.join("\n"))}keyForGet(e){let t=this.index[e];if(void 0!==t)return"".concat(this.name,".").concat(t)}keyForSet(e){let t=this.index[e];return void 0===t&&(++this.max,t=this.max,this.index[e]=t,this.saveIndex()),"".concat(this.name,".").concat(t)}keyForRemove(e){let t=this.index[e];if(void 0!==t)return this.index[e]=void 0,this.saveIndex(),"".concat(this.name,".").concat(t)}removeAll(){for(let e in this.index)p.removeItem("".concat(this.name,".").concat(this.index[e])),this.index[e]=void 0;p.removeItem(this.name),this.max=0}item(e){return this.child(e)}}const y=function(){let e=/(\btest\b)/i.test(document.location.href);return{testing:e,isDevelopment:!1,localDb:new g(!0===e?"$$":"$"),setTimeout:function(e,t,i){for(var r=arguments.length,s=new Array(r>3?r-3:0),a=3;a<r;a++)s[a-3]=arguments[a];return n.g.setTimeout(t,i,...s)},clearTimeout:e=>{n.g.clearTimeout(e)},setInterval:function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return n.g.setInterval(e,t,...r)},clearInterval:e=>{n.g.clearInterval(e)}}}();class b{constructor(){this.user=y.localDb.child("user"),this.guest=y.localDb.child("guest"),this.unit=y.localDb.child("unit"),this._user=void 0,this._guest=void 0,this._unit=void 0}readToMemory(){this._user=this.user.get(),this._guest=this.guest.get(),this._unit=this.unit.get()}saveToLocalStorage(){this.user.set(this._user),this.guest.set(this._guest),this.unit.set(this._unit)}logoutClear(){[this.user,this.unit].forEach((e=>e.remove()))}}function w(e,t){if(!e)return;if(!t)return;let n=Object.keys(e);t=t.toLowerCase();for(let i of n)if(i.toLowerCase()===t)return e[i]}const x=/^[0-9]*$/,j=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/},515:(e,t,n)=>{"use strict";n.d(t,{F:()=>m});var i,r,s,a,o,l,u,c=n(269),h=n(229),d=n(763),p=n.n(d),f=n(894);let m=(i=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isFirst=!0,this.pageItemAction=void 0,this.itemConverter=void 0,(0,c.Z)(this,"loading",r,this),(0,c.Z)(this,"beforeLoad",s,this),(0,c.Z)(this,"loaded",a,this),this._items=void 0,(0,c.Z)(this,"allLoaded",o,this),(0,c.Z)(this,"topDiv",l,this),(0,c.Z)(this,"bottomDiv",u,this),this.scrollToTop=()=>{this.scrollIntoView(this.topDiv)},this.scrollToBottom=()=>{this.scrollIntoView(this.bottomDiv)},this.param=void 0,this.firstSize=100,this.pageStart=void 0,this.pageSize=30,this.appendPosition="tail",this.sortOrder=void 0,this.changing=!1,void 0===e&&(e=!1),this._items=f.LO.array([],{deep:e})}get items(){return!0===this.beforeLoad?null:!1!==this.loaded?this._items:void 0}setEachPageItem(e){this.pageItemAction=e}setItemConverter(e){this.itemConverter=e}scrollIntoView(e){setTimeout((()=>{let t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView()}),20)}getPageId(e){}setPageStart(e){this.pageStart=this.getPageId(e)}async load(e,t,n){let i=await this.loadResults(e,t,n),r=i.$page;if(this.itemConverter){let e=[],t=r.length;for(let n=0;n<t;n++){let t=this.itemConverter(r[n],i);e.push(t)}return e}if(void 0!==this.pageItemAction){let e=r.length;for(let t=0;t<e;t++)this.pageItemAction(r[t],i)}return r}reset(){this.isFirst=!0,this.beforeLoad=!0,this.loaded=!1,this.param=void 0,this.allLoaded=!1,this.pageStart=void 0,this._items.clear()}append(e){"tail"===this.appendPosition?this._items.unshift(e):this._items.push(e)}async first(e){this.reset(),this.beforeLoad=!1,this.param=e,await this.more()}async attach(){if(void 0===this.sortOrder)return void console.error("\u6ca1\u6709\u5b9a\u4e49\u589e\u51cf\u5e8f\uff0c\u65e0\u6cd5attach");if(!0===this.changing)return;this.changing=!0;let e,t,n,i=this._items,r="asc"===this.sortOrder;if("tail"===this.appendPosition)e=i[0],t=this.scrollToTop,n=e=>i.unshift(e);else{let r=i.length;e=i[r-1],t=this.scrollToBottom,n=e=>i.splice(r,0,e)}let s,a=this.getPageId(e),o=0,l=50;for(;o<l;){let e=await this.load(this.param,s,3),t=e.length;if(0===t)break;for(let i=0;i<t;i++){let t=e[i];if(s=this.getPageId(t),!0===r){if(s>=a){l=0;break}}else if(s<=a){l=0;break}n(t),++o}}this.changing=!1,o>0&&t()}async refresh(){if(!0===this.changing)return;this.changing=!0;let e=await this.load(this.param,void 0,this.firstSize>this.pageSize?this.firstSize:this.pageSize);this._items.clear(),this.setLoaded(e),this.changing=!1}getRefreshPageId(e){return this.getPageId(e)}async onLoad(){}async onLoaded(){}async more(){if(!0===this.allLoaded)return!1;if(!0===this.loading)return!0;if(!0===this.changing)return!0;this.loading=!0,this.changing=!0,await this.onLoad(),void 0===this.pageStart&&this.setPageStart(void 0);let e=this.pageSize+1;!0===this.isFirst&&this.firstSize>this.pageSize&&(e=this.firstSize+1);let t=await this.load(this.param,this.pageStart,e);this.loaded=!0;let n=t.length;return!0===this.isFirst&&n>this.firstSize||!1===this.isFirst&&n>this.pageSize?(this.allLoaded=!1,--n,t.splice(n,1)):this.allLoaded=!0,this.setLoaded(t),this.isFirst=!1,this.onLoaded(),this.changing=!1,this.loading=!1,!this.allLoaded}setLoaded(e){let t=e.length;0===t?(this.setPageStart(void 0),this._items.clear()):(this.setPageStart(e[t-1]),"tail"===this.appendPosition?this._items.push(...e):this._items.unshift(...e.reverse()))}findItem(e){let t=this.getPageId(e),n=p().findIndex(this._items,(e=>this.getPageId(e)===t));if(!(n<0))return this._items[n]}},r=(0,h.Z)(i.prototype,"loading",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,h.Z)(i.prototype,"beforeLoad",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a=(0,h.Z)(i.prototype,"loaded",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=(0,h.Z)(i.prototype,"allLoaded",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,h.Z)(i.prototype,"items",[f.Fl],Object.getOwnPropertyDescriptor(i.prototype,"items"),i.prototype),l=(0,h.Z)(i.prototype,"topDiv",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"$$top"}}),u=(0,h.Z)(i.prototype,"bottomDiv",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"$$bottom"}}),i)},732:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});const i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=8;function s(){let e=i.length,t="";for(let n=0;n<r;n++)t+=i.charAt(Math.floor(Math.random()*e));return t}},864:(e,t,n)=>{"use strict";n.d(t,{H:()=>a,S:()=>s});var i=n(513),r=n.n(i);function s(e){let t=r()(e);return{id:t.id,name:t.name,guest:t.guest,token:e}}function a(e){return{id:0,guest:r()(e).guest,token:e}}},285:(e,t,n)=>{"use strict";n.d(t,{Qr:()=>c,ps:()=>d,G7:()=>h});var i=n(791),r=n(763),s=n.n(r),a=n(106),o=n(541),l=n(537),u=n(184);class c{get user(){return a.nav.user}get isLogined(){let{user:e}=a.nav;return void 0!==e&&e.id>0}constructor(e){this.res=void 0,this.x=void 0,this._t={},this.t=void 0,this.icon=void 0,this.label=void 0,this.isDev=o.OB.isDevelopment,this.pageWebNav=void 0,this.receiveHandlerId=void 0,this.dispose=()=>{l.g0.unregisterReceiveHandler(this.receiveHandlerId),this.onDispose()},this.onMessageReceive=async e=>{await this.onMessage(e)},this._resolve_$=void 0,this.topPageKey=void 0,this.res=e||{},this.x=this.res.x||{},this.t=e=>this.internalT(e)||e}beforeInit(){}afterInit(){}init(){this.beforeInit(),this.pageWebNav=this.getPageWebNav(),this.afterInit()}internalT(e){return this._t[e]}get webNav(){}getWebNav(){return this.webNav}getPageWebNav(){}get isWebNav(){return a.nav.isWebNav}navigate(e){a.nav.navigate(e)}setRes(e){if(void 0===e)return;let{$lang:t,$district:n}=a.resOptions;if(s().merge(this._t,e),void 0!==t){let i=e[t];if(void 0!==i){s().merge(this._t,i);let e=i[n];void 0!==e&&s().merge(this._t,e)}}}onDispose(){}isMe(e){if(null===e)return!1;let{user:t}=this,n=t.id;switch(typeof e){default:return!1;case"string":return Number(e)===n;case"number":return e===n;case"object":return e.id===n}}async openVPage(e,t,n){let i=new e(this);return await i.open(t,n),i}async replaceVPage(e,t,n){let i=new e(this);return await i.replaceOpen(t,n),i}renderView(e,t){return new e(this).render(t)}async event(e,t){await this.onEvent(e,t)}async onEvent(e,t){}msg(e){alert(e)}errorPage(e,t){this.openPage((0,u.jsx)(a.T3,{header:"App error!",children:(0,u.jsx)("pre",{children:"string"===typeof t?t:t.message})}))}onMessage(e){}async beforeStart(){return!0}async afterStart(){}registerReceiveHandler(){this.receiveHandlerId=l.g0.registerReceiveHandler(this.onMessageReceive)}async start(e){if(this.registerReceiveHandler(),!1!==await this.beforeStart()){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];await this.internalStart(e,...n),await this.afterStart()}}get isCalling(){return void 0!==this._resolve_$}async call(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return void 0===this._resolve_$&&(this._resolve_$=[]),new Promise((async(t,i)=>{this._resolve_$.push(t),await this.start(e,...n)}))}async vCall(e,t){return void 0===this._resolve_$&&(this._resolve_$=[]),new Promise((async(n,i)=>{this._resolve_$.push(n),await new e(this).open(t)}))}returnCall(e){if(void 0===this._resolve_$)return;let t=this._resolve_$.pop();void 0!==t?t(e):alert("the Controller call already returned, or not called")}openPage(e,t){let n;void 0!==t&&(n=()=>{t(void 0)}),a.nav.push(e,n)}replacePage(e,t){a.nav.replace(e,t)}backPage(){a.nav.back()}closePage(e){a.nav.pop(e)}ceasePage(e){a.nav.ceaseTop(e)}go(e,t,n){a.nav.go(e,t,n)}removeCeased(){a.nav.removeCeased()}regConfirmClose(e){a.nav.regConfirmClose(e)}startAction(){this.topPageKey=a.nav.topKey()}get TopKey(){return this.topPageKey}SetTopKey(e){this.topPageKey=e}popToTopPage(){a.nav.popTo(this.topPageKey)}async confirm(e){return new Promise((async(t,n)=>{let{caption:i,message:r,ok:s,yes:o,no:l,classNames:c}=e,h=e=>{this.closePage(),t(e)},d=[];void 0!==s&&d.push((0,u.jsx)("button",{className:"btn btn-primary me-3",onClick:()=>h("ok"),children:s},"ok")),void 0!==o&&d.push((0,u.jsx)("button",{className:"btn btn-success me-3",onClick:()=>h("yes"),children:o},"yes")),void 0!==l&&d.push((0,u.jsx)("button",{className:"btn btn-outline-danger me-3",onClick:()=>h("no"),children:l},"no")),this.openPage((0,u.jsx)(a.T3,{header:i||"\u8bf7\u786e\u8ba4",back:"close",children:(0,u.jsxs)("div",{className:c||"rounded bg-white m-5 p-3 border",children:[(0,u.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:r}),(0,u.jsx)("div",{className:"mt-3 d-flex align-items-center justify-content-center",children:d})]})})),a.nav.regConfirmClose((async()=>(t(void 0),!0)))}))}}class h{constructor(e){this.controller=void 0,this.res=void 0,this.x=void 0,this.t=void 0,this.controller=e,this.res=e.res,this.x=e.x,this.t=e.t}get isDev(){return o.OB.isDevelopment}get isWebNav(){return this.controller.isWebNav}navigate(e){this.controller.navigate(e)}isMe(e){return this.controller.isMe(e)}renderVm(e,t){return new e(this.controller).render(t)}async openVPage(e,t,n){await new e(this.controller).open(t,n)}async event(e,t){await this.controller.event(e,t)}go(e,t,n){this.controller.go(e,t,n)}async vCall(e,t){return await this.controller.vCall(e,t)}returnCall(e){this.controller.returnCall(e)}renderUser(e,t,n){return(0,u.jsx)(a.ys,{user:e,render:e=>{let{name:i,nick:r,icon:s}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.Ee,{src:s,className:t||"w-1c h-1c me-2"}),(0,u.jsx)("span",{className:n,children:r||i})]})}})}renderUserText(e){return(0,u.jsx)(a.ys,{user:e,render:e=>{let{name:t,nick:n}=e;return(0,u.jsx)(u.Fragment,{children:n||t})}})}renderMe(e,t){let{user:n}=this.controller;if(n)return this.renderUser(n.id,e,t)}openPage(e,t,n){let r=typeof t;"object"===r||"undefined"===r?this.controller.openPage(i.createElement(e,t),n):this.controller.openPage((0,u.jsxs)(a.T3,{header:"param type error",children:["View.openPage param must be object, but here is ",r]}),n)}replacePage(e,t){this.controller.replacePage(i.createElement(e,t))}openPageElement(e,t){this.controller.openPage(e,t)}replacePageElement(e,t){this.controller.replacePage(e,t)}backPage(){this.controller.backPage()}closePage(e){this.controller.closePage(e)}ceasePage(e){this.controller.ceasePage(e)}removeCeased(){this.controller.removeCeased()}regConfirmClose(e){this.controller.regConfirmClose(e)}popToTopPage(){this.controller.popToTopPage()}}class d extends h{constructor(){super(...arguments),this.retOnClosePage=void 0}open(e,t){let n;this.init(e),void 0!==t&&(n=()=>t(this.retOnClosePage)),this.openPageElement(this.renderPage(),n)}replaceOpen(e,t){let n;this.init(e),void 0!==t&&(n=()=>t(this.retOnClosePage)),this.replacePageElement(this.renderPage(),n)}render(e){return this.init(e),this.renderPage()}init(e){}header(){return null}right(){return null}content(){return null}footer(){return null}logout(){return!1}renderPage(){let e=this.header();e||(e=!1);let t=this.logout();return(0,u.jsx)(a.T3,{header:e,right:this.right(),footer:this.footer(),onScroll:e=>this.onPageScroll(e),onScrollTop:e=>this.onPageScrollTop(e),onScrollBottom:e=>this.onPageScrollBottom(e),back:this.back,headerClassName:this.headerClassName,className:this.className,afterBack:()=>this.afterBack(),tabsProps:this.tabsProps,logout:t,webNav:this.controller.pageWebNav,children:this.content()})}onPageScroll(e){}async onPageScrollTop(e){return!1}async onPageScrollBottom(e){}afterBack(){}get back(){return"back"}get headerClassName(){return null}get className(){return null}get tabsProps(){return null}}var p,f,m,v,g,y=n(269),b=n(229),w=n(894),x=n(986);p=class extends c{constructor(){super(...arguments),this.props={label:"\u7f16\u8f91"},(0,y.Z)(this,"value",f,this),(0,y.Z)(this,"newValue",m,this),(0,y.Z)(this,"isChanged",v,this),(0,y.Z)(this,"error",g,this),this.onChange=e=>{this.newValue=e.target.value;let t=this.value;this.isChanged=this.newValue!==t},this.onBlur=e=>{this.verifyValue()},this.onFocus=()=>{this.error=void 0},this.onEdit=()=>{let{label:e,maxLength:t,placeholder:n,onValueChange:r}=this.props,s=()=>{this.verifyValue(),void 0===this.error&&(this.value=this.newValue,this.closePage(),r&&r(this.value))},o=i.createElement((0,x.Pi)((()=>(0,u.jsx)("button",{className:"btn btn-sm btn-success align-self-center me-2",disabled:!this.isChanged,onClick:s,children:"\u4fdd\u5b58"}))));this.openPage((0,u.jsx)(a.T3,{header:e,right:o,children:(0,u.jsxs)("div",{className:"m-3",children:[(0,u.jsx)("input",{type:"text",onChange:this.onChange,onKeyDown:e=>{13===e.keyCode&&s()},onBlur:this.onBlur,onFocus:this.onFocus,className:"form-control",defaultValue:this.value,maxLength:t}),i.createElement((0,x.Pi)((()=>n&&(0,u.jsx)("div",{className:"small muted m-2",children:n})))),this.error&&(0,u.jsx)("div",{className:"text-danger",children:this.error})]})}))}}async internalStart(){}render(e,t){return this.value=e,t&&s().merge(this.props,t),i.createElement((0,x.Pi)((()=>(0,u.jsxs)(u.Fragment,{children:[this.renderValue(),this.renderPencil()]}))))}renderValue(){return(0,u.jsx)(u.Fragment,{children:this.value})}renderPencil(){return(0,u.jsxs)("span",{onClick:this.onEdit,className:"cursor-pointer",children:["\xa0 ",(0,u.jsx)(a.FA,{className:"text-info",name:"pencil-square-o"})," \xa0"]})}verifyValue(){}},f=(0,b.Z)(p.prototype,"value",[w.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,b.Z)(p.prototype,"newValue",[w.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=(0,b.Z)(p.prototype,"isChanged",[w.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=(0,b.Z)(p.prototype,"error",[w.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null})},694:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)&&n.length){var a=r.apply(null,n);a&&e.push(a)}else if("object"===s)for(var o in n)i.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},390:e=>{function t(e){this.message=e}t.prototype=new Error,t.prototype.name="InvalidCharacterError",e.exports="undefined"!==typeof window&&window.atob&&window.atob.bind(window)||function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,r,s=0,a=0,o="";r=n.charAt(a++);~r&&(i=s%4?64*i+r:r,s++%4)?o+=String.fromCharCode(255&i>>(-2*s&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o}},180:(e,t,n)=>{var i=n(390);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return i(t)}}},513:(e,t,n)=>{"use strict";var i=n(180);function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!==typeof e)throw new r("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(i(e.split(".")[n]))}catch(s){throw new r("Invalid token specified: "+s.message)}},e.exports.InvalidTokenError=r},763:function(e,t,n){var i;e=n.nmd(e),function(){var r,s="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",l=16,u=32,c=64,h=128,d=256,p=1/0,f=9007199254740991,m=NaN,v=4294967295,g=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",c],["rearg",d]],y="[object Arguments]",b="[object Array]",w="[object Boolean]",x="[object Date]",j="[object Error]",k="[object Function]",_="[object GeneratorFunction]",C="[object Map]",S="[object Number]",N="[object Object]",E="[object Promise]",A="[object RegExp]",P="[object Set]",O="[object String]",I="[object Symbol]",T="[object WeakMap]",U="[object ArrayBuffer]",R="[object DataView]",L="[object Float32Array]",V="[object Float64Array]",F="[object Int8Array]",q="[object Int16Array]",D="[object Int32Array]",z="[object Uint8Array]",B="[object Uint8ClampedArray]",M="[object Uint16Array]",W="[object Uint32Array]",H=/\b__p \+= '';/g,Z=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,G=RegExp(Q.source),X=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,se=RegExp(re.source),ae=/^\s+/,oe=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ve=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",Ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Se="\\u2700-\\u27bf",Ne="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",Pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="['\u2019]",Ie="["+_e+"]",Te="["+Pe+"]",Ue="["+Ce+"]",Re="\\d+",Le="["+Se+"]",Ve="["+Ne+"]",Fe="[^"+_e+Pe+Re+Se+Ne+Ee+"]",qe="\\ud83c[\\udffb-\\udfff]",De="[^"+_e+"]",ze="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+Ee+"]",We="\\u200d",He="(?:"+Ve+"|"+Fe+")",Ze="(?:"+Me+"|"+Fe+")",$e="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Qe="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Ue+"|"+qe+")"+"?",Ge="["+Ae+"]?",Xe=Ge+Ke+("(?:"+We+"(?:"+[De,ze,Be].join("|")+")"+Ge+Ke+")*"),Je="(?:"+[Le,ze,Be].join("|")+")"+Xe,Ye="(?:"+[De+Ue+"?",Ue,ze,Be,Ie].join("|")+")",et=RegExp(Oe,"g"),tt=RegExp(Ue,"g"),nt=RegExp(qe+"(?="+qe+")|"+Ye+Xe,"g"),it=RegExp([Me+"?"+Ve+"+"+$e+"(?="+[Te,Me,"$"].join("|")+")",Ze+"+"+Qe+"(?="+[Te,Me+He,"$"].join("|")+")",Me+"?"+He+"+"+$e,Me+"+"+Qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Je].join("|"),"g"),rt=RegExp("["+We+_e+Ce+Ae+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,lt={};lt[L]=lt[V]=lt[F]=lt[q]=lt[D]=lt[z]=lt[B]=lt[M]=lt[W]=!0,lt[y]=lt[b]=lt[U]=lt[w]=lt[R]=lt[x]=lt[j]=lt[k]=lt[C]=lt[S]=lt[N]=lt[A]=lt[P]=lt[O]=lt[T]=!1;var ut={};ut[y]=ut[b]=ut[U]=ut[R]=ut[w]=ut[x]=ut[L]=ut[V]=ut[F]=ut[q]=ut[D]=ut[C]=ut[S]=ut[N]=ut[A]=ut[P]=ut[O]=ut[I]=ut[z]=ut[B]=ut[M]=ut[W]=!0,ut[j]=ut[k]=ut[T]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),vt=t&&!t.nodeType&&t,gt=vt&&e&&!e.nodeType&&e,yt=gt&&gt.exports===vt,bt=yt&&pt.process,wt=function(){try{var e=gt&&gt.require&&gt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(t){}}(),xt=wt&&wt.isArrayBuffer,jt=wt&&wt.isDate,kt=wt&&wt.isMap,_t=wt&&wt.isRegExp,Ct=wt&&wt.isSet,St=wt&&wt.isTypedArray;function Nt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,i){for(var r=-1,s=null==e?0:e.length;++r<s;){var a=e[r];t(i,a,n(a),e)}return i}function At(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function It(e,t){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var a=e[n];t(a,n,e)&&(s[r++]=a)}return s}function Tt(e,t){return!!(null==e?0:e.length)&&Mt(e,t,0)>-1}function Ut(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function Rt(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function Lt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function Vt(e,t,n,i){var r=-1,s=null==e?0:e.length;for(i&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n}function Ft(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function qt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var Dt=$t("length");function zt(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function Bt(e,t,n,i){for(var r=e.length,s=n+(i?1:-1);i?s--:++s<r;)if(t(e[s],s,e))return s;return-1}function Mt(e,t,n){return t===t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):Bt(e,Ht,n)}function Wt(e,t,n,i){for(var r=n-1,s=e.length;++r<s;)if(i(e[r],t))return r;return-1}function Ht(e){return e!==e}function Zt(e,t){var n=null==e?0:e.length;return n?Gt(e,t)/n:m}function $t(e){return function(t){return null==t?r:t[e]}}function Qt(e){return function(t){return null==e?r:e[t]}}function Kt(e,t,n,i,r){return r(e,(function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)})),n}function Gt(e,t){for(var n,i=-1,s=e.length;++i<s;){var a=t(e[i]);a!==r&&(n=n===r?a:n+a)}return n}function Xt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Jt(e){return e?e.slice(0,vn(e)+1).replace(ae,""):e}function Yt(e){return function(t){return e(t)}}function en(e,t){return Rt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,i=e.length;++n<i&&Mt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Mt(t,e[n],0)>-1;);return n}var sn=Qt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ct[e]}function ln(e){return rt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,i=e.length,r=0,s=[];++n<i;){var a=e[n];a!==t&&a!==o||(e[n]=o,s[r++]=n)}return s}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Dt(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var gn=Qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?mt:yn.defaults(mt.Object(),t,yn.pick(mt,at))).Array,i=t.Date,oe=t.Error,_e=t.Function,Ce=t.Math,Se=t.Object,Ne=t.RegExp,Ee=t.String,Ae=t.TypeError,Pe=n.prototype,Oe=_e.prototype,Ie=Se.prototype,Te=t["__core-js_shared__"],Ue=Oe.toString,Re=Ie.hasOwnProperty,Le=0,Ve=function(){var e=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Ie.toString,qe=Ue.call(Se),De=mt._,ze=Ne("^"+Ue.call(Re).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=yt?t.Buffer:r,Me=t.Symbol,We=t.Uint8Array,He=Be?Be.allocUnsafe:r,Ze=cn(Se.getPrototypeOf,Se),$e=Se.create,Qe=Ie.propertyIsEnumerable,Ke=Pe.splice,Ge=Me?Me.isConcatSpreadable:r,Xe=Me?Me.iterator:r,Je=Me?Me.toStringTag:r,Ye=function(){try{var e=hs(Se,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,rt=i&&i.now!==mt.Date.now&&i.now,ct=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=Ce.ceil,ft=Ce.floor,vt=Se.getOwnPropertySymbols,gt=Be?Be.isBuffer:r,bt=t.isFinite,wt=Pe.join,Dt=cn(Se.keys,Se),Qt=Ce.max,bn=Ce.min,wn=i.now,xn=t.parseInt,jn=Ce.random,kn=Pe.reverse,_n=hs(t,"DataView"),Cn=hs(t,"Map"),Sn=hs(t,"Promise"),Nn=hs(t,"Set"),En=hs(t,"WeakMap"),An=hs(Se,"create"),Pn=En&&new En,On={},In=Vs(_n),Tn=Vs(Cn),Un=Vs(Sn),Rn=Vs(Nn),Ln=Vs(En),Vn=Me?Me.prototype:r,Fn=Vn?Vn.valueOf:r,qn=Vn?Vn.toString:r;function Dn(e){if(eo(e)&&!Ma(e)&&!(e instanceof Wn)){if(e instanceof Mn)return e;if(Re.call(e,"__wrapped__"))return Fs(e)}return new Mn(e)}var zn=function(){function e(){}return function(t){if(!Ya(t))return{};if($e)return $e(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Bn(){}function Mn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new $n;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new Zn(e);this.size=t.size}function Gn(e,t){var n=Ma(e),i=!n&&Ba(e),r=!n&&!i&&$a(e),s=!n&&!i&&!r&&lo(e),a=n||i||r||s,o=a?Xt(e.length,Ee):[],l=o.length;for(var u in e)!t&&!Re.call(e,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ys(u,l))||o.push(u);return o}function Xn(e){var t=e.length;return t?e[Qi(0,t-1)]:r}function Jn(e,t){return Us(Ar(e),oi(t,0,e.length))}function Yn(e){return Us(Ar(e))}function ei(e,t,n){(n!==r&&!qa(e[t],n)||n===r&&!(t in e))&&si(e,t,n)}function ti(e,t,n){var i=e[t];Re.call(e,t)&&qa(i,n)&&(n!==r||t in e)||si(e,t,n)}function ni(e,t){for(var n=e.length;n--;)if(qa(e[n][0],t))return n;return-1}function ii(e,t,n,i){return di(e,(function(e,r,s){t(i,e,n(e),s)})),i}function ri(e,t){return e&&Pr(t,Oo(t),e)}function si(e,t,n){"__proto__"==t&&Ye?Ye(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ai(e,t){for(var i=-1,s=t.length,a=n(s),o=null==e;++i<s;)a[i]=o?r:So(e,t[i]);return a}function oi(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function li(e,t,n,i,s,a){var o,l=1&t,u=2&t,c=4&t;if(n&&(o=s?n(e,i,s,a):n(e)),o!==r)return o;if(!Ya(e))return e;var h=Ma(e);if(h){if(o=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Re.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ar(e,o)}else{var d=fs(e),p=d==k||d==_;if($a(e))return kr(e,l);if(d==N||d==y||p&&!s){if(o=u||p?{}:vs(e),!l)return u?function(e,t){return Pr(e,ps(e),t)}(e,function(e,t){return e&&Pr(t,Io(t),e)}(o,e)):function(e,t){return Pr(e,ds(e),t)}(e,ri(o,e))}else{if(!ut[d])return s?e:{};o=function(e,t,n){var i=e.constructor;switch(t){case U:return _r(e);case w:case x:return new i(+e);case R:return function(e,t){var n=t?_r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case L:case V:case F:case q:case D:case z:case B:case M:case W:return Cr(e,n);case C:return new i;case S:case O:return new i(e);case A:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case P:return new i;case I:return r=e,Fn?Se(Fn.call(r)):{}}var r}(e,d,l)}}a||(a=new Kn);var f=a.get(e);if(f)return f;a.set(e,o),so(e)?e.forEach((function(i){o.add(li(i,t,n,i,e,a))})):to(e)&&e.forEach((function(i,r){o.set(r,li(i,t,n,r,e,a))}));var m=h?r:(c?u?rs:is:u?Io:Oo)(e);return At(m||e,(function(i,r){m&&(i=e[r=i]),ti(o,r,li(i,t,n,r,e,a))})),o}function ui(e,t,n){var i=n.length;if(null==e)return!i;for(e=Se(e);i--;){var s=n[i],a=t[s],o=e[s];if(o===r&&!(s in e)||!a(o))return!1}return!0}function ci(e,t,n){if("function"!=typeof e)throw new Ae(s);return Ps((function(){e.apply(r,n)}),t)}function hi(e,t,n,i){var r=-1,s=Tt,a=!0,o=e.length,l=[],u=t.length;if(!o)return l;n&&(t=Rt(t,Yt(n))),i?(s=Ut,a=!1):t.length>=200&&(s=tn,a=!1,t=new Qn(t));e:for(;++r<o;){var c=e[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,a&&h===h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else s(t,h,i)||l.push(c)}return l}Dn.templateSettings={escape:J,evaluate:Y,interpolate:ee,variable:"",imports:{_:Dn}},Dn.prototype=Bn.prototype,Dn.prototype.constructor=Dn,Mn.prototype=zn(Bn.prototype),Mn.prototype.constructor=Mn,Wn.prototype=zn(Bn.prototype),Wn.prototype.constructor=Wn,Hn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===a?r:n}return Re.call(t,e)?t[e]:r},Hn.prototype.has=function(e){var t=this.__data__;return An?t[e]!==r:Re.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&t===r?a:t,this},Zn.prototype.clear=function(){this.__data__=[],this.size=0},Zn.prototype.delete=function(e){var t=this.__data__,n=ni(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Zn.prototype.get=function(e){var t=this.__data__,n=ni(t,e);return n<0?r:t[n][1]},Zn.prototype.has=function(e){return ni(this.__data__,e)>-1},Zn.prototype.set=function(e,t){var n=this.__data__,i=ni(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},$n.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Cn||Zn),string:new Hn}},$n.prototype.delete=function(e){var t=us(this,e).delete(e);return this.size-=t?1:0,t},$n.prototype.get=function(e){return us(this,e).get(e)},$n.prototype.has=function(e){return us(this,e).has(e)},$n.prototype.set=function(e,t){var n=us(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Qn.prototype.add=Qn.prototype.push=function(e){return this.__data__.set(e,a),this},Qn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new Zn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Zn){var i=n.__data__;if(!Cn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new $n(i)}return n.set(e,t),this.size=n.size,this};var di=Tr(wi),pi=Tr(xi,!0);function fi(e,t){var n=!0;return di(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function mi(e,t,n){for(var i=-1,s=e.length;++i<s;){var a=e[i],o=t(a);if(null!=o&&(l===r?o===o&&!oo(o):n(o,l)))var l=o,u=a}return u}function vi(e,t){var n=[];return di(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function gi(e,t,n,i,r){var s=-1,a=e.length;for(n||(n=gs),r||(r=[]);++s<a;){var o=e[s];t>0&&n(o)?t>1?gi(o,t-1,n,i,r):Lt(r,o):i||(r[r.length]=o)}return r}var yi=Ur(),bi=Ur(!0);function wi(e,t){return e&&yi(e,t,Oo)}function xi(e,t){return e&&bi(e,t,Oo)}function ji(e,t){return It(t,(function(t){return Ga(e[t])}))}function ki(e,t){for(var n=0,i=(t=br(t,e)).length;null!=e&&n<i;)e=e[Ls(t[n++])];return n&&n==i?e:r}function _i(e,t,n){var i=t(e);return Ma(e)?i:Lt(i,n(e))}function Ci(e){return null==e?e===r?"[object Undefined]":"[object Null]":Je&&Je in Se(e)?function(e){var t=Re.call(e,Je),n=e[Je];try{e[Je]=r;var i=!0}catch(a){}var s=Fe.call(e);i&&(t?e[Je]=n:delete e[Je]);return s}(e):function(e){return Fe.call(e)}(e)}function Si(e,t){return e>t}function Ni(e,t){return null!=e&&Re.call(e,t)}function Ei(e,t){return null!=e&&t in Se(e)}function Ai(e,t,i){for(var s=i?Ut:Tt,a=e[0].length,o=e.length,l=o,u=n(o),c=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Rt(d,Yt(t))),c=bn(d.length,c),u[l]=!i&&(t||a>=120&&d.length>=120)?new Qn(l&&d):r}d=e[0];var p=-1,f=u[0];e:for(;++p<a&&h.length<c;){var m=d[p],v=t?t(m):m;if(m=i||0!==m?m:0,!(f?tn(f,v):s(h,v,i))){for(l=o;--l;){var g=u[l];if(!(g?tn(g,v):s(e[l],v,i)))continue e}f&&f.push(v),h.push(m)}}return h}function Pi(e,t,n){var i=null==(e=Ns(e,t=br(t,e)))?e:e[Ls(Ks(t))];return null==i?r:Nt(i,e,n)}function Oi(e){return eo(e)&&Ci(e)==y}function Ii(e,t,n,i,s){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!==e&&t!==t:function(e,t,n,i,s,a){var o=Ma(e),l=Ma(t),u=o?b:fs(e),c=l?b:fs(t),h=(u=u==y?N:u)==N,d=(c=c==y?N:c)==N,p=u==c;if(p&&$a(e)){if(!$a(t))return!1;o=!0,h=!1}if(p&&!h)return a||(a=new Kn),o||lo(e)?ts(e,t,n,i,s,a):function(e,t,n,i,r,s,a){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case U:return!(e.byteLength!=t.byteLength||!s(new We(e),new We(t)));case w:case x:case S:return qa(+e,+t);case j:return e.name==t.name&&e.message==t.message;case A:case O:return e==t+"";case C:var o=un;case P:var l=1&i;if(o||(o=dn),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;i|=2,a.set(e,t);var c=ts(o(e),o(t),i,r,s,a);return a.delete(e),c;case I:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,u,n,i,s,a);if(!(1&n)){var f=h&&Re.call(e,"__wrapped__"),m=d&&Re.call(t,"__wrapped__");if(f||m){var v=f?e.value():e,g=m?t.value():t;return a||(a=new Kn),s(v,g,n,i,a)}}if(!p)return!1;return a||(a=new Kn),function(e,t,n,i,s,a){var o=1&n,l=is(e),u=l.length,c=is(t),h=c.length;if(u!=h&&!o)return!1;var d=u;for(;d--;){var p=l[d];if(!(o?p in t:Re.call(t,p)))return!1}var f=a.get(e),m=a.get(t);if(f&&m)return f==t&&m==e;var v=!0;a.set(e,t),a.set(t,e);var g=o;for(;++d<u;){var y=e[p=l[d]],b=t[p];if(i)var w=o?i(b,y,p,t,e,a):i(y,b,p,e,t,a);if(!(w===r?y===b||s(y,b,n,i,a):w)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var x=e.constructor,j=t.constructor;x==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof j&&j instanceof j||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,i,s,a)}(e,t,n,i,Ii,s))}function Ti(e,t,n,i){var s=n.length,a=s,o=!i;if(null==e)return!a;for(e=Se(e);s--;){var l=n[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var u=(l=n[s])[0],c=e[u],h=l[1];if(o&&l[2]){if(c===r&&!(u in e))return!1}else{var d=new Kn;if(i)var p=i(c,h,u,e,t,d);if(!(p===r?Ii(h,c,3,i,d):p))return!1}}return!0}function Ui(e){return!(!Ya(e)||(t=e,Ve&&Ve in t))&&(Ga(e)?ze:ye).test(Vs(e));var t}function Ri(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Ma(e)?zi(e[0],e[1]):Di(e):dl(e)}function Li(e){if(!ks(e))return Dt(e);var t=[];for(var n in Se(e))Re.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Vi(e){if(!Ya(e))return function(e){var t=[];if(null!=e)for(var n in Se(e))t.push(n);return t}(e);var t=ks(e),n=[];for(var i in e)("constructor"!=i||!t&&Re.call(e,i))&&n.push(i);return n}function Fi(e,t){return e<t}function qi(e,t){var i=-1,r=Ha(e)?n(e.length):[];return di(e,(function(e,n,s){r[++i]=t(e,n,s)})),r}function Di(e){var t=cs(e);return 1==t.length&&t[0][2]?Cs(t[0][0],t[0][1]):function(n){return n===e||Ti(n,e,t)}}function zi(e,t){return ws(e)&&_s(t)?Cs(Ls(e),t):function(n){var i=So(n,e);return i===r&&i===t?No(n,e):Ii(t,i,3)}}function Bi(e,t,n,i,s){e!==t&&yi(t,(function(a,o){if(s||(s=new Kn),Ya(a))!function(e,t,n,i,s,a,o){var l=Es(e,n),u=Es(t,n),c=o.get(u);if(c)return void ei(e,n,c);var h=a?a(l,u,n+"",e,t,o):r,d=h===r;if(d){var p=Ma(u),f=!p&&$a(u),m=!p&&!f&&lo(u);h=u,p||f||m?Ma(l)?h=l:Za(l)?h=Ar(l):f?(d=!1,h=kr(u,!0)):m?(d=!1,h=Cr(u,!0)):h=[]:io(u)||Ba(u)?(h=l,Ba(l)?h=go(l):Ya(l)&&!Ga(l)||(h=vs(u))):d=!1}d&&(o.set(u,h),s(h,u,i,a,o),o.delete(u));ei(e,n,h)}(e,t,o,n,Bi,i,s);else{var l=i?i(Es(e,o),a,o+"",e,t,s):r;l===r&&(l=a),ei(e,o,l)}}),Io)}function Mi(e,t){var n=e.length;if(n)return ys(t+=t<0?n:0,n)?e[t]:r}function Wi(e,t,n){t=t.length?Rt(t,(function(e){return Ma(e)?function(t){return ki(t,1===e.length?e[0]:e)}:e})):[il];var i=-1;t=Rt(t,Yt(ls()));var r=qi(e,(function(e,n,r){var s=Rt(t,(function(t){return t(e)}));return{criteria:s,index:++i,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(r,(function(e,t){return function(e,t,n){var i=-1,r=e.criteria,s=t.criteria,a=r.length,o=n.length;for(;++i<a;){var l=Sr(r[i],s[i]);if(l)return i>=o?l:l*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hi(e,t,n){for(var i=-1,r=t.length,s={};++i<r;){var a=t[i],o=ki(e,a);n(o,a)&&Yi(s,br(a,e),o)}return s}function Zi(e,t,n,i){var r=i?Wt:Mt,s=-1,a=t.length,o=e;for(e===t&&(t=Ar(t)),n&&(o=Rt(e,Yt(n)));++s<a;)for(var l=0,u=t[s],c=n?n(u):u;(l=r(o,c,l,i))>-1;)o!==e&&Ke.call(o,l,1),Ke.call(e,l,1);return e}function $i(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==s){var s=r;ys(r)?Ke.call(e,r,1):hr(e,r)}}return e}function Qi(e,t){return e+ft(jn()*(t-e+1))}function Ki(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Gi(e,t){return Os(Ss(e,t,il),e+"")}function Xi(e){return Xn(Do(e))}function Ji(e,t){var n=Do(e);return Us(n,oi(t,0,n.length))}function Yi(e,t,n,i){if(!Ya(e))return e;for(var s=-1,a=(t=br(t,e)).length,o=a-1,l=e;null!=l&&++s<a;){var u=Ls(t[s]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(s!=o){var h=l[u];(c=i?i(h,u,l):r)===r&&(c=Ya(h)?h:ys(t[s+1])?[]:{})}ti(l,u,c),l=l[u]}return e}var er=Pn?function(e,t){return Pn.set(e,t),e}:il,tr=Ye?function(e,t){return Ye(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:il;function nr(e){return Us(Do(e))}function ir(e,t,i){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(i=i>s?s:i)<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var a=n(s);++r<s;)a[r]=e[r+t];return a}function rr(e,t){var n;return di(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function sr(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t===t&&r<=2147483647){for(;i<r;){var s=i+r>>>1,a=e[s];null!==a&&!oo(a)&&(n?a<=t:a<t)?i=s+1:r=s}return r}return ar(e,t,il,n)}function ar(e,t,n,i){var s=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=n(t))!==t,l=null===t,u=oo(t),c=t===r;s<a;){var h=ft((s+a)/2),d=n(e[h]),p=d!==r,f=null===d,m=d===d,v=oo(d);if(o)var g=i||m;else g=c?m&&(i||p):l?m&&p&&(i||!f):u?m&&p&&!f&&(i||!v):!f&&!v&&(i?d<=t:d<t);g?s=h+1:a=h}return bn(a,4294967294)}function or(e,t){for(var n=-1,i=e.length,r=0,s=[];++n<i;){var a=e[n],o=t?t(a):a;if(!n||!qa(o,l)){var l=o;s[r++]=0===a?0:a}}return s}function lr(e){return"number"==typeof e?e:oo(e)?m:+e}function ur(e){if("string"==typeof e)return e;if(Ma(e))return Rt(e,ur)+"";if(oo(e))return qn?qn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function cr(e,t,n){var i=-1,r=Tt,s=e.length,a=!0,o=[],l=o;if(n)a=!1,r=Ut;else if(s>=200){var u=t?null:Kr(e);if(u)return dn(u);a=!1,r=tn,l=new Qn}else l=t?[]:o;e:for(;++i<s;){var c=e[i],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),o.push(c)}else r(l,h,n)||(l!==o&&l.push(h),o.push(c))}return o}function hr(e,t){return null==(e=Ns(e,t=br(t,e)))||delete e[Ls(Ks(t))]}function dr(e,t,n,i){return Yi(e,t,n(ki(e,t)),i)}function pr(e,t,n,i){for(var r=e.length,s=i?r:-1;(i?s--:++s<r)&&t(e[s],s,e););return n?ir(e,i?0:s,i?s+1:r):ir(e,i?s+1:0,i?r:s)}function fr(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Vt(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),n)}function mr(e,t,i){var r=e.length;if(r<2)return r?cr(e[0]):[];for(var s=-1,a=n(r);++s<r;)for(var o=e[s],l=-1;++l<r;)l!=s&&(a[s]=hi(a[s]||o,e[l],t,i));return cr(gi(a,1),t,i)}function vr(e,t,n){for(var i=-1,s=e.length,a=t.length,o={};++i<s;){var l=i<a?t[i]:r;n(o,e[i],l)}return o}function gr(e){return Za(e)?e:[]}function yr(e){return"function"==typeof e?e:il}function br(e,t){return Ma(e)?e:ws(e,t)?[e]:Rs(yo(e))}var wr=Gi;function xr(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:ir(e,t,n)}var jr=nt||function(e){return mt.clearTimeout(e)};function kr(e,t){if(t)return e.slice();var n=e.length,i=He?He(n):new e.constructor(n);return e.copy(i),i}function _r(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Cr(e,t){var n=t?_r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Sr(e,t){if(e!==t){var n=e!==r,i=null===e,s=e===e,a=oo(e),o=t!==r,l=null===t,u=t===t,c=oo(t);if(!l&&!c&&!a&&e>t||a&&o&&u&&!l&&!c||i&&o&&u||!n&&u||!s)return 1;if(!i&&!a&&!c&&e<t||c&&n&&s&&!i&&!a||l&&n&&s||!o&&s||!u)return-1}return 0}function Nr(e,t,i,r){for(var s=-1,a=e.length,o=i.length,l=-1,u=t.length,c=Qt(a-o,0),h=n(u+c),d=!r;++l<u;)h[l]=t[l];for(;++s<o;)(d||s<a)&&(h[i[s]]=e[s]);for(;c--;)h[l++]=e[s++];return h}function Er(e,t,i,r){for(var s=-1,a=e.length,o=-1,l=i.length,u=-1,c=t.length,h=Qt(a-l,0),d=n(h+c),p=!r;++s<h;)d[s]=e[s];for(var f=s;++u<c;)d[f+u]=t[u];for(;++o<l;)(p||s<a)&&(d[f+i[o]]=e[s++]);return d}function Ar(e,t){var i=-1,r=e.length;for(t||(t=n(r));++i<r;)t[i]=e[i];return t}function Pr(e,t,n,i){var s=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var l=t[a],u=i?i(n[l],e[l],l,n,e):r;u===r&&(u=e[l]),s?si(n,l,u):ti(n,l,u)}return n}function Or(e,t){return function(n,i){var r=Ma(n)?Et:ii,s=t?t():{};return r(n,e,ls(i,2),s)}}function Ir(e){return Gi((function(t,n){var i=-1,s=n.length,a=s>1?n[s-1]:r,o=s>2?n[2]:r;for(a=e.length>3&&"function"==typeof a?(s--,a):r,o&&bs(n[0],n[1],o)&&(a=s<3?r:a,s=1),t=Se(t);++i<s;){var l=n[i];l&&e(t,l,i,a)}return t}))}function Tr(e,t){return function(n,i){if(null==n)return n;if(!Ha(n))return e(n,i);for(var r=n.length,s=t?r:-1,a=Se(n);(t?s--:++s<r)&&!1!==i(a[s],s,a););return n}}function Ur(e){return function(t,n,i){for(var r=-1,s=Se(t),a=i(t),o=a.length;o--;){var l=a[e?o:++r];if(!1===n(s[l],l,s))break}return t}}function Rr(e){return function(t){var n=ln(t=yo(t))?mn(t):r,i=n?n[0]:t.charAt(0),s=n?xr(n,1).join(""):t.slice(1);return i[e]()+s}}function Lr(e){return function(t){return Vt(Xo(Mo(t).replace(et,"")),e,"")}}function Vr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=zn(e.prototype),i=e.apply(n,t);return Ya(i)?i:n}}function Fr(e){return function(t,n,i){var s=Se(t);if(!Ha(t)){var a=ls(n,3);t=Oo(t),n=function(e){return a(s[e],e,s)}}var o=e(t,n,i);return o>-1?s[a?t[o]:o]:r}}function qr(e){return ns((function(t){var n=t.length,i=n,a=Mn.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new Ae(s);if(a&&!l&&"wrapper"==as(o))var l=new Mn([],!0)}for(i=l?i:n;++i<n;){var u=as(o=t[i]),c="wrapper"==u?ss(o):r;l=c&&xs(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[as(c[0])].apply(l,c[3]):1==o.length&&xs(o)?l[u]():l.thru(o)}return function(){var e=arguments,i=e[0];if(l&&1==e.length&&Ma(i))return l.plant(i).value();for(var r=0,s=n?t[r].apply(this,e):i;++r<n;)s=t[r].call(this,s);return s}}))}function Dr(e,t,i,s,a,o,l,u,c,d){var p=t&h,f=1&t,m=2&t,v=24&t,g=512&t,y=m?r:Vr(e);return function h(){for(var b=arguments.length,w=n(b),x=b;x--;)w[x]=arguments[x];if(v)var j=os(h),k=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}(w,j);if(s&&(w=Nr(w,s,a,v)),o&&(w=Er(w,o,l,v)),b-=k,v&&b<d){var _=hn(w,j);return $r(e,t,Dr,h.placeholder,i,w,_,u,c,d-b)}var C=f?i:this,S=m?C[e]:e;return b=w.length,u?w=function(e,t){var n=e.length,i=bn(t.length,n),s=Ar(e);for(;i--;){var a=t[i];e[i]=ys(a,n)?s[a]:r}return e}(w,u):g&&b>1&&w.reverse(),p&&c<b&&(w.length=c),this&&this!==mt&&this instanceof h&&(S=y||Vr(S)),S.apply(C,w)}}function zr(e,t){return function(n,i){return function(e,t,n,i){return wi(e,(function(e,r,s){t(i,n(e),r,s)})),i}(n,e,t(i),{})}}function Br(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;"string"==typeof n||"string"==typeof i?(n=ur(n),i=ur(i)):(n=lr(n),i=lr(i)),s=e(n,i)}return s}}function Mr(e){return ns((function(t){return t=Rt(t,Yt(ls())),Gi((function(n){var i=this;return e(t,(function(e){return Nt(e,i,n)}))}))}))}function Wr(e,t){var n=(t=t===r?" ":ur(t)).length;if(n<2)return n?Ki(t,e):t;var i=Ki(t,pt(e/fn(t)));return ln(t)?xr(mn(i),0,e).join(""):i.slice(0,e)}function Hr(e){return function(t,i,s){return s&&"number"!=typeof s&&bs(t,i,s)&&(i=s=r),t=po(t),i===r?(i=t,t=0):i=po(i),function(e,t,i,r){for(var s=-1,a=Qt(pt((t-e)/(i||1)),0),o=n(a);a--;)o[r?a:++s]=e,e+=i;return o}(t,i,s=s===r?t<i?1:-1:po(s),e)}}function Zr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vo(t),n=vo(n)),e(t,n)}}function $r(e,t,n,i,s,a,o,l,h,d){var p=8&t;t|=p?u:c,4&(t&=~(p?c:u))||(t&=-4);var f=[e,t,s,p?a:r,p?o:r,p?r:a,p?r:o,l,h,d],m=n.apply(r,f);return xs(e)&&As(m,f),m.placeholder=i,Is(m,e,t)}function Qr(e){var t=Ce[e];return function(e,n){if(e=vo(e),(n=null==n?0:bn(fo(n),292))&&bt(e)){var i=(yo(e)+"e").split("e");return+((i=(yo(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Kr=Nn&&1/dn(new Nn([,-0]))[1]==p?function(e){return new Nn(e)}:ll;function Gr(e){return function(t){var n=fs(t);return n==C?un(t):n==P?pn(t):function(e,t){return Rt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xr(e,t,i,a,p,f,m,v){var g=2&t;if(!g&&"function"!=typeof e)throw new Ae(s);var y=a?a.length:0;if(y||(t&=-97,a=p=r),m=m===r?m:Qt(fo(m),0),v=v===r?v:fo(v),y-=p?p.length:0,t&c){var b=a,w=p;a=p=r}var x=g?r:ss(e),j=[e,t,i,a,p,b,w,f,m,v];if(x&&function(e,t){var n=e[1],i=t[1],r=n|i,s=r<131,a=i==h&&8==n||i==h&&n==d&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!s&&!a)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?Nr(u,l,t[4]):l,e[4]=u?hn(e[3],o):t[4]}(l=t[5])&&(u=e[5],e[5]=u?Er(u,l,t[6]):l,e[6]=u?hn(e[5],o):t[6]);(l=t[7])&&(e[7]=l);i&h&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(j,x),e=j[0],t=j[1],i=j[2],a=j[3],p=j[4],!(v=j[9]=j[9]===r?g?0:e.length:Qt(j[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==l?function(e,t,i){var s=Vr(e);return function a(){for(var o=arguments.length,l=n(o),u=o,c=os(a);u--;)l[u]=arguments[u];var h=o<3&&l[0]!==c&&l[o-1]!==c?[]:hn(l,c);return(o-=h.length)<i?$r(e,t,Dr,a.placeholder,r,l,h,r,r,i-o):Nt(this&&this!==mt&&this instanceof a?s:e,this,l)}}(e,t,v):t!=u&&33!=t||p.length?Dr.apply(r,j):function(e,t,i,r){var s=1&t,a=Vr(e);return function t(){for(var o=-1,l=arguments.length,u=-1,c=r.length,h=n(c+l),d=this&&this!==mt&&this instanceof t?a:e;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++o];return Nt(d,s?i:this,h)}}(e,t,i,a);else var k=function(e,t,n){var i=1&t,r=Vr(e);return function t(){return(this&&this!==mt&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,i);return Is((x?er:As)(k,j),e,t)}function Jr(e,t,n,i){return e===r||qa(e,Ie[n])&&!Re.call(i,n)?t:e}function Yr(e,t,n,i,s,a){return Ya(e)&&Ya(t)&&(a.set(t,e),Bi(e,t,r,Yr,a),a.delete(t)),e}function es(e){return io(e)?r:e}function ts(e,t,n,i,s,a){var o=1&n,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var c=a.get(e),h=a.get(t);if(c&&h)return c==t&&h==e;var d=-1,p=!0,f=2&n?new Qn:r;for(a.set(e,t),a.set(t,e);++d<l;){var m=e[d],v=t[d];if(i)var g=o?i(v,m,d,t,e,a):i(m,v,d,e,t,a);if(g!==r){if(g)continue;p=!1;break}if(f){if(!qt(t,(function(e,t){if(!tn(f,t)&&(m===e||s(m,e,n,i,a)))return f.push(t)}))){p=!1;break}}else if(m!==v&&!s(m,v,n,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function ns(e){return Os(Ss(e,r,Ws),e+"")}function is(e){return _i(e,Oo,ds)}function rs(e){return _i(e,Io,ps)}var ss=Pn?function(e){return Pn.get(e)}:ll;function as(e){for(var t=e.name+"",n=On[t],i=Re.call(On,t)?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==e)return r.name}return t}function os(e){return(Re.call(Dn,"placeholder")?Dn:e).placeholder}function ls(){var e=Dn.iteratee||rl;return e=e===rl?Ri:e,arguments.length?e(arguments[0],arguments[1]):e}function us(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function cs(e){for(var t=Oo(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,_s(r)]}return t}function hs(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Ui(n)?n:r}var ds=vt?function(e){return null==e?[]:(e=Se(e),It(vt(e),(function(t){return Qe.call(e,t)})))}:ml,ps=vt?function(e){for(var t=[];e;)Lt(t,ds(e)),e=Ze(e);return t}:ml,fs=Ci;function ms(e,t,n){for(var i=-1,r=(t=br(t,e)).length,s=!1;++i<r;){var a=Ls(t[i]);if(!(s=null!=e&&n(e,a)))break;e=e[a]}return s||++i!=r?s:!!(r=null==e?0:e.length)&&Ja(r)&&ys(a,r)&&(Ma(e)||Ba(e))}function vs(e){return"function"!=typeof e.constructor||ks(e)?{}:zn(Ze(e))}function gs(e){return Ma(e)||Ba(e)||!!(Ge&&e&&e[Ge])}function ys(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function bs(e,t,n){if(!Ya(n))return!1;var i=typeof t;return!!("number"==i?Ha(n)&&ys(t,n.length):"string"==i&&t in n)&&qa(n[t],e)}function ws(e,t){if(Ma(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!oo(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Se(t))}function xs(e){var t=as(e),n=Dn[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var i=ss(n);return!!i&&e===i[0]}(_n&&fs(new _n(new ArrayBuffer(1)))!=R||Cn&&fs(new Cn)!=C||Sn&&fs(Sn.resolve())!=E||Nn&&fs(new Nn)!=P||En&&fs(new En)!=T)&&(fs=function(e){var t=Ci(e),n=t==N?e.constructor:r,i=n?Vs(n):"";if(i)switch(i){case In:return R;case Tn:return C;case Un:return E;case Rn:return P;case Ln:return T}return t});var js=Te?Ga:vl;function ks(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ie)}function _s(e){return e===e&&!Ya(e)}function Cs(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Se(n)))}}function Ss(e,t,i){return t=Qt(t===r?e.length-1:t,0),function(){for(var r=arguments,s=-1,a=Qt(r.length-t,0),o=n(a);++s<a;)o[s]=r[t+s];s=-1;for(var l=n(t+1);++s<t;)l[s]=r[s];return l[t]=i(o),Nt(e,this,l)}}function Ns(e,t){return t.length<2?e:ki(e,ir(t,0,-1))}function Es(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var As=Ts(er),Ps=ct||function(e,t){return mt.setTimeout(e,t)},Os=Ts(tr);function Is(e,t,n){var i=t+"";return Os(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return At(g,(function(n){var i="_."+n[0];t&n[1]&&!Tt(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(i),n)))}function Ts(e){var t=0,n=0;return function(){var i=wn(),s=16-(i-n);if(n=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Us(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var a=Qi(n,s),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}var Rs=function(e){var t=Ta(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,i,r){t.push(i?r.replace(pe,"$1"):n||e)})),t}));function Ls(e){if("string"==typeof e||oo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Vs(e){if(null!=e){try{return Ue.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fs(e){if(e instanceof Wn)return e.clone();var t=new Mn(e.__wrapped__,e.__chain__);return t.__actions__=Ar(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var qs=Gi((function(e,t){return Za(e)?hi(e,gi(t,1,Za,!0)):[]})),Ds=Gi((function(e,t){var n=Ks(t);return Za(n)&&(n=r),Za(e)?hi(e,gi(t,1,Za,!0),ls(n,2)):[]})),zs=Gi((function(e,t){var n=Ks(t);return Za(n)&&(n=r),Za(e)?hi(e,gi(t,1,Za,!0),r,n):[]}));function Bs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:fo(n);return r<0&&(r=Qt(i+r,0)),Bt(e,ls(t,3),r)}function Ms(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var s=i-1;return n!==r&&(s=fo(n),s=n<0?Qt(i+s,0):bn(s,i-1)),Bt(e,ls(t,3),s,!0)}function Ws(e){return(null==e?0:e.length)?gi(e,1):[]}function Hs(e){return e&&e.length?e[0]:r}var Zs=Gi((function(e){var t=Rt(e,gr);return t.length&&t[0]===e[0]?Ai(t):[]})),$s=Gi((function(e){var t=Ks(e),n=Rt(e,gr);return t===Ks(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Ai(n,ls(t,2)):[]})),Qs=Gi((function(e){var t=Ks(e),n=Rt(e,gr);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Ai(n,r,t):[]}));function Ks(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Gs=Gi(Xs);function Xs(e,t){return e&&e.length&&t&&t.length?Zi(e,t):e}var Js=ns((function(e,t){var n=null==e?0:e.length,i=ai(e,t);return $i(e,Rt(t,(function(e){return ys(e,n)?+e:e})).sort(Sr)),i}));function Ys(e){return null==e?e:kn.call(e)}var ea=Gi((function(e){return cr(gi(e,1,Za,!0))})),ta=Gi((function(e){var t=Ks(e);return Za(t)&&(t=r),cr(gi(e,1,Za,!0),ls(t,2))})),na=Gi((function(e){var t=Ks(e);return t="function"==typeof t?t:r,cr(gi(e,1,Za,!0),r,t)}));function ia(e){if(!e||!e.length)return[];var t=0;return e=It(e,(function(e){if(Za(e))return t=Qt(e.length,t),!0})),Xt(t,(function(t){return Rt(e,$t(t))}))}function ra(e,t){if(!e||!e.length)return[];var n=ia(e);return null==t?n:Rt(n,(function(e){return Nt(t,r,e)}))}var sa=Gi((function(e,t){return Za(e)?hi(e,t):[]})),aa=Gi((function(e){return mr(It(e,Za))})),oa=Gi((function(e){var t=Ks(e);return Za(t)&&(t=r),mr(It(e,Za),ls(t,2))})),la=Gi((function(e){var t=Ks(e);return t="function"==typeof t?t:r,mr(It(e,Za),r,t)})),ua=Gi(ia);var ca=Gi((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,ra(e,n)}));function ha(e){var t=Dn(e);return t.__chain__=!0,t}function da(e,t){return t(e)}var pa=ns((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(t){return ai(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Wn&&ys(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:da,args:[s],thisArg:r}),new Mn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(s)}));var fa=Or((function(e,t,n){Re.call(e,n)?++e[n]:si(e,n,1)}));var ma=Fr(Bs),va=Fr(Ms);function ga(e,t){return(Ma(e)?At:di)(e,ls(t,3))}function ya(e,t){return(Ma(e)?Pt:pi)(e,ls(t,3))}var ba=Or((function(e,t,n){Re.call(e,n)?e[n].push(t):si(e,n,[t])}));var wa=Gi((function(e,t,i){var r=-1,s="function"==typeof t,a=Ha(e)?n(e.length):[];return di(e,(function(e){a[++r]=s?Nt(t,e,i):Pi(e,t,i)})),a})),xa=Or((function(e,t,n){si(e,n,t)}));function ja(e,t){return(Ma(e)?Rt:qi)(e,ls(t,3))}var ka=Or((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var _a=Gi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&bs(e,t[0],t[1])?t=[]:n>2&&bs(t[0],t[1],t[2])&&(t=[t[0]]),Wi(e,gi(t,1),[])})),Ca=rt||function(){return mt.Date.now()};function Sa(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Xr(e,h,r,r,r,r,t)}function Na(e,t){var n;if("function"!=typeof t)throw new Ae(s);return e=fo(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Ea=Gi((function(e,t,n){var i=1;if(n.length){var r=hn(n,os(Ea));i|=u}return Xr(e,i,t,n,r)})),Aa=Gi((function(e,t,n){var i=3;if(n.length){var r=hn(n,os(Aa));i|=u}return Xr(t,i,e,n,r)}));function Pa(e,t,n){var i,a,o,l,u,c,h=0,d=!1,p=!1,f=!0;if("function"!=typeof e)throw new Ae(s);function m(t){var n=i,s=a;return i=a=r,h=t,l=e.apply(s,n)}function v(e){var n=e-c;return c===r||n>=t||n<0||p&&e-h>=o}function g(){var e=Ca();if(v(e))return y(e);u=Ps(g,function(e){var n=t-(e-c);return p?bn(n,o-(e-h)):n}(e))}function y(e){return u=r,f&&i?m(e):(i=a=r,l)}function b(){var e=Ca(),n=v(e);if(i=arguments,a=this,c=e,n){if(u===r)return function(e){return h=e,u=Ps(g,t),d?m(e):l}(c);if(p)return jr(u),u=Ps(g,t),m(c)}return u===r&&(u=Ps(g,t)),l}return t=vo(t)||0,Ya(n)&&(d=!!n.leading,o=(p="maxWait"in n)?Qt(vo(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),b.cancel=function(){u!==r&&jr(u),h=0,i=c=a=u=r},b.flush=function(){return u===r?l:y(Ca())},b}var Oa=Gi((function(e,t){return ci(e,1,t)})),Ia=Gi((function(e,t,n){return ci(e,vo(t)||0,n)}));function Ta(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(s);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var a=e.apply(this,i);return n.cache=s.set(r,a)||s,a};return n.cache=new(Ta.Cache||$n),n}function Ua(e){if("function"!=typeof e)throw new Ae(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ta.Cache=$n;var Ra=wr((function(e,t){var n=(t=1==t.length&&Ma(t[0])?Rt(t[0],Yt(ls())):Rt(gi(t,1),Yt(ls()))).length;return Gi((function(i){for(var r=-1,s=bn(i.length,n);++r<s;)i[r]=t[r].call(this,i[r]);return Nt(e,this,i)}))})),La=Gi((function(e,t){var n=hn(t,os(La));return Xr(e,u,r,t,n)})),Va=Gi((function(e,t){var n=hn(t,os(Va));return Xr(e,c,r,t,n)})),Fa=ns((function(e,t){return Xr(e,d,r,r,r,t)}));function qa(e,t){return e===t||e!==e&&t!==t}var Da=Zr(Si),za=Zr((function(e,t){return e>=t})),Ba=Oi(function(){return arguments}())?Oi:function(e){return eo(e)&&Re.call(e,"callee")&&!Qe.call(e,"callee")},Ma=n.isArray,Wa=xt?Yt(xt):function(e){return eo(e)&&Ci(e)==U};function Ha(e){return null!=e&&Ja(e.length)&&!Ga(e)}function Za(e){return eo(e)&&Ha(e)}var $a=gt||vl,Qa=jt?Yt(jt):function(e){return eo(e)&&Ci(e)==x};function Ka(e){if(!eo(e))return!1;var t=Ci(e);return t==j||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!io(e)}function Ga(e){if(!Ya(e))return!1;var t=Ci(e);return t==k||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xa(e){return"number"==typeof e&&e==fo(e)}function Ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function Ya(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}var to=kt?Yt(kt):function(e){return eo(e)&&fs(e)==C};function no(e){return"number"==typeof e||eo(e)&&Ci(e)==S}function io(e){if(!eo(e)||Ci(e)!=N)return!1;var t=Ze(e);if(null===t)return!0;var n=Re.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ue.call(n)==qe}var ro=_t?Yt(_t):function(e){return eo(e)&&Ci(e)==A};var so=Ct?Yt(Ct):function(e){return eo(e)&&fs(e)==P};function ao(e){return"string"==typeof e||!Ma(e)&&eo(e)&&Ci(e)==O}function oo(e){return"symbol"==typeof e||eo(e)&&Ci(e)==I}var lo=St?Yt(St):function(e){return eo(e)&&Ja(e.length)&&!!lt[Ci(e)]};var uo=Zr(Fi),co=Zr((function(e,t){return e<=t}));function ho(e){if(!e)return[];if(Ha(e))return ao(e)?mn(e):Ar(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=fs(e);return(t==C?un:t==P?dn:Do)(e)}function po(e){return e?(e=vo(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fo(e){var t=po(e),n=t%1;return t===t?n?t-n:t:0}function mo(e){return e?oi(fo(e),0,v):0}function vo(e){if("number"==typeof e)return e;if(oo(e))return m;if(Ya(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ya(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ge.test(e);return n||be.test(e)?dt(e.slice(2),n?2:8):ve.test(e)?m:+e}function go(e){return Pr(e,Io(e))}function yo(e){return null==e?"":ur(e)}var bo=Ir((function(e,t){if(ks(t)||Ha(t))Pr(t,Oo(t),e);else for(var n in t)Re.call(t,n)&&ti(e,n,t[n])})),wo=Ir((function(e,t){Pr(t,Io(t),e)})),xo=Ir((function(e,t,n,i){Pr(t,Io(t),e,i)})),jo=Ir((function(e,t,n,i){Pr(t,Oo(t),e,i)})),ko=ns(ai);var _o=Gi((function(e,t){e=Se(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&bs(t[0],t[1],s)&&(i=1);++n<i;)for(var a=t[n],o=Io(a),l=-1,u=o.length;++l<u;){var c=o[l],h=e[c];(h===r||qa(h,Ie[c])&&!Re.call(e,c))&&(e[c]=a[c])}return e})),Co=Gi((function(e){return e.push(r,Yr),Nt(Uo,r,e)}));function So(e,t,n){var i=null==e?r:ki(e,t);return i===r?n:i}function No(e,t){return null!=e&&ms(e,t,Ei)}var Eo=zr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),el(il)),Ao=zr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Re.call(e,t)?e[t].push(n):e[t]=[n]}),ls),Po=Gi(Pi);function Oo(e){return Ha(e)?Gn(e):Li(e)}function Io(e){return Ha(e)?Gn(e,!0):Vi(e)}var To=Ir((function(e,t,n){Bi(e,t,n)})),Uo=Ir((function(e,t,n,i){Bi(e,t,n,i)})),Ro=ns((function(e,t){var n={};if(null==e)return n;var i=!1;t=Rt(t,(function(t){return t=br(t,e),i||(i=t.length>1),t})),Pr(e,rs(e),n),i&&(n=li(n,7,es));for(var r=t.length;r--;)hr(n,t[r]);return n}));var Lo=ns((function(e,t){return null==e?{}:function(e,t){return Hi(e,t,(function(t,n){return No(e,n)}))}(e,t)}));function Vo(e,t){if(null==e)return{};var n=Rt(rs(e),(function(e){return[e]}));return t=ls(t),Hi(e,n,(function(e,n){return t(e,n[0])}))}var Fo=Gr(Oo),qo=Gr(Io);function Do(e){return null==e?[]:en(e,Oo(e))}var zo=Lr((function(e,t,n){return t=t.toLowerCase(),e+(n?Bo(t):t)}));function Bo(e){return Go(yo(e).toLowerCase())}function Mo(e){return(e=yo(e))&&e.replace(xe,sn).replace(tt,"")}var Wo=Lr((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ho=Lr((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Zo=Rr("toLowerCase");var $o=Lr((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Qo=Lr((function(e,t,n){return e+(n?" ":"")+Go(t)}));var Ko=Lr((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Go=Rr("toUpperCase");function Xo(e,t,n){return e=yo(e),(t=n?r:t)===r?function(e){return st.test(e)}(e)?function(e){return e.match(it)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Jo=Gi((function(e,t){try{return Nt(e,r,t)}catch(n){return Ka(n)?n:new oe(n)}})),Yo=ns((function(e,t){return At(t,(function(t){t=Ls(t),si(e,t,Ea(e[t],e))})),e}));function el(e){return function(){return e}}var tl=qr(),nl=qr(!0);function il(e){return e}function rl(e){return Ri("function"==typeof e?e:li(e,1))}var sl=Gi((function(e,t){return function(n){return Pi(n,e,t)}})),al=Gi((function(e,t){return function(n){return Pi(e,n,t)}}));function ol(e,t,n){var i=Oo(t),r=ji(t,i);null!=n||Ya(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=ji(t,Oo(t)));var s=!(Ya(n)&&"chain"in n)||!!n.chain,a=Ga(e);return At(r,(function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Ar(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,Lt([this.value()],arguments))})})),e}function ll(){}var ul=Mr(Rt),cl=Mr(Ot),hl=Mr(qt);function dl(e){return ws(e)?$t(Ls(e)):function(e){return function(t){return ki(t,e)}}(e)}var pl=Hr(),fl=Hr(!0);function ml(){return[]}function vl(){return!1}var gl=Br((function(e,t){return e+t}),0),yl=Qr("ceil"),bl=Br((function(e,t){return e/t}),1),wl=Qr("floor");var xl=Br((function(e,t){return e*t}),1),jl=Qr("round"),kl=Br((function(e,t){return e-t}),0);return Dn.after=function(e,t){if("function"!=typeof t)throw new Ae(s);return e=fo(e),function(){if(--e<1)return t.apply(this,arguments)}},Dn.ary=Sa,Dn.assign=bo,Dn.assignIn=wo,Dn.assignInWith=xo,Dn.assignWith=jo,Dn.at=ko,Dn.before=Na,Dn.bind=Ea,Dn.bindAll=Yo,Dn.bindKey=Aa,Dn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ma(e)?e:[e]},Dn.chain=ha,Dn.chunk=function(e,t,i){t=(i?bs(e,t,i):t===r)?1:Qt(fo(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var a=0,o=0,l=n(pt(s/t));a<s;)l[o++]=ir(e,a,a+=t);return l},Dn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var s=e[t];s&&(r[i++]=s)}return r},Dn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),i=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Lt(Ma(i)?Ar(i):[i],gi(t,1))},Dn.cond=function(e){var t=null==e?0:e.length,n=ls();return e=t?Rt(e,(function(e){if("function"!=typeof e[1])throw new Ae(s);return[n(e[0]),e[1]]})):[],Gi((function(n){for(var i=-1;++i<t;){var r=e[i];if(Nt(r[0],this,n))return Nt(r[1],this,n)}}))},Dn.conforms=function(e){return function(e){var t=Oo(e);return function(n){return ui(n,e,t)}}(li(e,1))},Dn.constant=el,Dn.countBy=fa,Dn.create=function(e,t){var n=zn(e);return null==t?n:ri(n,t)},Dn.curry=function e(t,n,i){var s=Xr(t,8,r,r,r,r,r,n=i?r:n);return s.placeholder=e.placeholder,s},Dn.curryRight=function e(t,n,i){var s=Xr(t,l,r,r,r,r,r,n=i?r:n);return s.placeholder=e.placeholder,s},Dn.debounce=Pa,Dn.defaults=_o,Dn.defaultsDeep=Co,Dn.defer=Oa,Dn.delay=Ia,Dn.difference=qs,Dn.differenceBy=Ds,Dn.differenceWith=zs,Dn.drop=function(e,t,n){var i=null==e?0:e.length;return i?ir(e,(t=n||t===r?1:fo(t))<0?0:t,i):[]},Dn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?ir(e,0,(t=i-(t=n||t===r?1:fo(t)))<0?0:t):[]},Dn.dropRightWhile=function(e,t){return e&&e.length?pr(e,ls(t,3),!0,!0):[]},Dn.dropWhile=function(e,t){return e&&e.length?pr(e,ls(t,3),!0):[]},Dn.fill=function(e,t,n,i){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&bs(e,t,n)&&(n=0,i=s),function(e,t,n,i){var s=e.length;for((n=fo(n))<0&&(n=-n>s?0:s+n),(i=i===r||i>s?s:fo(i))<0&&(i+=s),i=n>i?0:mo(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Dn.filter=function(e,t){return(Ma(e)?It:vi)(e,ls(t,3))},Dn.flatMap=function(e,t){return gi(ja(e,t),1)},Dn.flatMapDeep=function(e,t){return gi(ja(e,t),p)},Dn.flatMapDepth=function(e,t,n){return n=n===r?1:fo(n),gi(ja(e,t),n)},Dn.flatten=Ws,Dn.flattenDeep=function(e){return(null==e?0:e.length)?gi(e,p):[]},Dn.flattenDepth=function(e,t){return(null==e?0:e.length)?gi(e,t=t===r?1:fo(t)):[]},Dn.flip=function(e){return Xr(e,512)},Dn.flow=tl,Dn.flowRight=nl,Dn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},Dn.functions=function(e){return null==e?[]:ji(e,Oo(e))},Dn.functionsIn=function(e){return null==e?[]:ji(e,Io(e))},Dn.groupBy=ba,Dn.initial=function(e){return(null==e?0:e.length)?ir(e,0,-1):[]},Dn.intersection=Zs,Dn.intersectionBy=$s,Dn.intersectionWith=Qs,Dn.invert=Eo,Dn.invertBy=Ao,Dn.invokeMap=wa,Dn.iteratee=rl,Dn.keyBy=xa,Dn.keys=Oo,Dn.keysIn=Io,Dn.map=ja,Dn.mapKeys=function(e,t){var n={};return t=ls(t,3),wi(e,(function(e,i,r){si(n,t(e,i,r),e)})),n},Dn.mapValues=function(e,t){var n={};return t=ls(t,3),wi(e,(function(e,i,r){si(n,i,t(e,i,r))})),n},Dn.matches=function(e){return Di(li(e,1))},Dn.matchesProperty=function(e,t){return zi(e,li(t,1))},Dn.memoize=Ta,Dn.merge=To,Dn.mergeWith=Uo,Dn.method=sl,Dn.methodOf=al,Dn.mixin=ol,Dn.negate=Ua,Dn.nthArg=function(e){return e=fo(e),Gi((function(t){return Mi(t,e)}))},Dn.omit=Ro,Dn.omitBy=function(e,t){return Vo(e,Ua(ls(t)))},Dn.once=function(e){return Na(2,e)},Dn.orderBy=function(e,t,n,i){return null==e?[]:(Ma(t)||(t=null==t?[]:[t]),Ma(n=i?r:n)||(n=null==n?[]:[n]),Wi(e,t,n))},Dn.over=ul,Dn.overArgs=Ra,Dn.overEvery=cl,Dn.overSome=hl,Dn.partial=La,Dn.partialRight=Va,Dn.partition=ka,Dn.pick=Lo,Dn.pickBy=Vo,Dn.property=dl,Dn.propertyOf=function(e){return function(t){return null==e?r:ki(e,t)}},Dn.pull=Gs,Dn.pullAll=Xs,Dn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Zi(e,t,ls(n,2)):e},Dn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Zi(e,t,r,n):e},Dn.pullAt=Js,Dn.range=pl,Dn.rangeRight=fl,Dn.rearg=Fa,Dn.reject=function(e,t){return(Ma(e)?It:vi)(e,Ua(ls(t,3)))},Dn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],s=e.length;for(t=ls(t,3);++i<s;){var a=e[i];t(a,i,e)&&(n.push(a),r.push(i))}return $i(e,r),n},Dn.rest=function(e,t){if("function"!=typeof e)throw new Ae(s);return Gi(e,t=t===r?t:fo(t))},Dn.reverse=Ys,Dn.sampleSize=function(e,t,n){return t=(n?bs(e,t,n):t===r)?1:fo(t),(Ma(e)?Jn:Ji)(e,t)},Dn.set=function(e,t,n){return null==e?e:Yi(e,t,n)},Dn.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Yi(e,t,n,i)},Dn.shuffle=function(e){return(Ma(e)?Yn:nr)(e)},Dn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&bs(e,t,n)?(t=0,n=i):(t=null==t?0:fo(t),n=n===r?i:fo(n)),ir(e,t,n)):[]},Dn.sortBy=_a,Dn.sortedUniq=function(e){return e&&e.length?or(e):[]},Dn.sortedUniqBy=function(e,t){return e&&e.length?or(e,ls(t,2)):[]},Dn.split=function(e,t,n){return n&&"number"!=typeof n&&bs(e,t,n)&&(t=n=r),(n=n===r?v:n>>>0)?(e=yo(e))&&("string"==typeof t||null!=t&&!ro(t))&&!(t=ur(t))&&ln(e)?xr(mn(e),0,n):e.split(t,n):[]},Dn.spread=function(e,t){if("function"!=typeof e)throw new Ae(s);return t=null==t?0:Qt(fo(t),0),Gi((function(n){var i=n[t],r=xr(n,0,t);return i&&Lt(r,i),Nt(e,this,r)}))},Dn.tail=function(e){var t=null==e?0:e.length;return t?ir(e,1,t):[]},Dn.take=function(e,t,n){return e&&e.length?ir(e,0,(t=n||t===r?1:fo(t))<0?0:t):[]},Dn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?ir(e,(t=i-(t=n||t===r?1:fo(t)))<0?0:t,i):[]},Dn.takeRightWhile=function(e,t){return e&&e.length?pr(e,ls(t,3),!1,!0):[]},Dn.takeWhile=function(e,t){return e&&e.length?pr(e,ls(t,3)):[]},Dn.tap=function(e,t){return t(e),e},Dn.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Ae(s);return Ya(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Pa(e,t,{leading:i,maxWait:t,trailing:r})},Dn.thru=da,Dn.toArray=ho,Dn.toPairs=Fo,Dn.toPairsIn=qo,Dn.toPath=function(e){return Ma(e)?Rt(e,Ls):oo(e)?[e]:Ar(Rs(yo(e)))},Dn.toPlainObject=go,Dn.transform=function(e,t,n){var i=Ma(e),r=i||$a(e)||lo(e);if(t=ls(t,4),null==n){var s=e&&e.constructor;n=r?i?new s:[]:Ya(e)&&Ga(s)?zn(Ze(e)):{}}return(r?At:wi)(e,(function(e,i,r){return t(n,e,i,r)})),n},Dn.unary=function(e){return Sa(e,1)},Dn.union=ea,Dn.unionBy=ta,Dn.unionWith=na,Dn.uniq=function(e){return e&&e.length?cr(e):[]},Dn.uniqBy=function(e,t){return e&&e.length?cr(e,ls(t,2)):[]},Dn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?cr(e,r,t):[]},Dn.unset=function(e,t){return null==e||hr(e,t)},Dn.unzip=ia,Dn.unzipWith=ra,Dn.update=function(e,t,n){return null==e?e:dr(e,t,yr(n))},Dn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:dr(e,t,yr(n),i)},Dn.values=Do,Dn.valuesIn=function(e){return null==e?[]:en(e,Io(e))},Dn.without=sa,Dn.words=Xo,Dn.wrap=function(e,t){return La(yr(t),e)},Dn.xor=aa,Dn.xorBy=oa,Dn.xorWith=la,Dn.zip=ua,Dn.zipObject=function(e,t){return vr(e||[],t||[],ti)},Dn.zipObjectDeep=function(e,t){return vr(e||[],t||[],Yi)},Dn.zipWith=ca,Dn.entries=Fo,Dn.entriesIn=qo,Dn.extend=wo,Dn.extendWith=xo,ol(Dn,Dn),Dn.add=gl,Dn.attempt=Jo,Dn.camelCase=zo,Dn.capitalize=Bo,Dn.ceil=yl,Dn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=vo(n))===n?n:0),t!==r&&(t=(t=vo(t))===t?t:0),oi(vo(e),t,n)},Dn.clone=function(e){return li(e,4)},Dn.cloneDeep=function(e){return li(e,5)},Dn.cloneDeepWith=function(e,t){return li(e,5,t="function"==typeof t?t:r)},Dn.cloneWith=function(e,t){return li(e,4,t="function"==typeof t?t:r)},Dn.conformsTo=function(e,t){return null==t||ui(e,t,Oo(t))},Dn.deburr=Mo,Dn.defaultTo=function(e,t){return null==e||e!==e?t:e},Dn.divide=bl,Dn.endsWith=function(e,t,n){e=yo(e),t=ur(t);var i=e.length,s=n=n===r?i:oi(fo(n),0,i);return(n-=t.length)>=0&&e.slice(n,s)==t},Dn.eq=qa,Dn.escape=function(e){return(e=yo(e))&&X.test(e)?e.replace(K,an):e},Dn.escapeRegExp=function(e){return(e=yo(e))&&se.test(e)?e.replace(re,"\\$&"):e},Dn.every=function(e,t,n){var i=Ma(e)?Ot:fi;return n&&bs(e,t,n)&&(t=r),i(e,ls(t,3))},Dn.find=ma,Dn.findIndex=Bs,Dn.findKey=function(e,t){return zt(e,ls(t,3),wi)},Dn.findLast=va,Dn.findLastIndex=Ms,Dn.findLastKey=function(e,t){return zt(e,ls(t,3),xi)},Dn.floor=wl,Dn.forEach=ga,Dn.forEachRight=ya,Dn.forIn=function(e,t){return null==e?e:yi(e,ls(t,3),Io)},Dn.forInRight=function(e,t){return null==e?e:bi(e,ls(t,3),Io)},Dn.forOwn=function(e,t){return e&&wi(e,ls(t,3))},Dn.forOwnRight=function(e,t){return e&&xi(e,ls(t,3))},Dn.get=So,Dn.gt=Da,Dn.gte=za,Dn.has=function(e,t){return null!=e&&ms(e,t,Ni)},Dn.hasIn=No,Dn.head=Hs,Dn.identity=il,Dn.includes=function(e,t,n,i){e=Ha(e)?e:Do(e),n=n&&!i?fo(n):0;var r=e.length;return n<0&&(n=Qt(r+n,0)),ao(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Mt(e,t,n)>-1},Dn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:fo(n);return r<0&&(r=Qt(i+r,0)),Mt(e,t,r)},Dn.inRange=function(e,t,n){return t=po(t),n===r?(n=t,t=0):n=po(n),function(e,t,n){return e>=bn(t,n)&&e<Qt(t,n)}(e=vo(e),t,n)},Dn.invoke=Po,Dn.isArguments=Ba,Dn.isArray=Ma,Dn.isArrayBuffer=Wa,Dn.isArrayLike=Ha,Dn.isArrayLikeObject=Za,Dn.isBoolean=function(e){return!0===e||!1===e||eo(e)&&Ci(e)==w},Dn.isBuffer=$a,Dn.isDate=Qa,Dn.isElement=function(e){return eo(e)&&1===e.nodeType&&!io(e)},Dn.isEmpty=function(e){if(null==e)return!0;if(Ha(e)&&(Ma(e)||"string"==typeof e||"function"==typeof e.splice||$a(e)||lo(e)||Ba(e)))return!e.length;var t=fs(e);if(t==C||t==P)return!e.size;if(ks(e))return!Li(e).length;for(var n in e)if(Re.call(e,n))return!1;return!0},Dn.isEqual=function(e,t){return Ii(e,t)},Dn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Ii(e,t,r,n):!!i},Dn.isError=Ka,Dn.isFinite=function(e){return"number"==typeof e&&bt(e)},Dn.isFunction=Ga,Dn.isInteger=Xa,Dn.isLength=Ja,Dn.isMap=to,Dn.isMatch=function(e,t){return e===t||Ti(e,t,cs(t))},Dn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Ti(e,t,cs(t),n)},Dn.isNaN=function(e){return no(e)&&e!=+e},Dn.isNative=function(e){if(js(e))throw new oe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ui(e)},Dn.isNil=function(e){return null==e},Dn.isNull=function(e){return null===e},Dn.isNumber=no,Dn.isObject=Ya,Dn.isObjectLike=eo,Dn.isPlainObject=io,Dn.isRegExp=ro,Dn.isSafeInteger=function(e){return Xa(e)&&e>=-9007199254740991&&e<=f},Dn.isSet=so,Dn.isString=ao,Dn.isSymbol=oo,Dn.isTypedArray=lo,Dn.isUndefined=function(e){return e===r},Dn.isWeakMap=function(e){return eo(e)&&fs(e)==T},Dn.isWeakSet=function(e){return eo(e)&&"[object WeakSet]"==Ci(e)},Dn.join=function(e,t){return null==e?"":wt.call(e,t)},Dn.kebabCase=Wo,Dn.last=Ks,Dn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var s=i;return n!==r&&(s=(s=fo(n))<0?Qt(i+s,0):bn(s,i-1)),t===t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,s):Bt(e,Ht,s,!0)},Dn.lowerCase=Ho,Dn.lowerFirst=Zo,Dn.lt=uo,Dn.lte=co,Dn.max=function(e){return e&&e.length?mi(e,il,Si):r},Dn.maxBy=function(e,t){return e&&e.length?mi(e,ls(t,2),Si):r},Dn.mean=function(e){return Zt(e,il)},Dn.meanBy=function(e,t){return Zt(e,ls(t,2))},Dn.min=function(e){return e&&e.length?mi(e,il,Fi):r},Dn.minBy=function(e,t){return e&&e.length?mi(e,ls(t,2),Fi):r},Dn.stubArray=ml,Dn.stubFalse=vl,Dn.stubObject=function(){return{}},Dn.stubString=function(){return""},Dn.stubTrue=function(){return!0},Dn.multiply=xl,Dn.nth=function(e,t){return e&&e.length?Mi(e,fo(t)):r},Dn.noConflict=function(){return mt._===this&&(mt._=De),this},Dn.noop=ll,Dn.now=Ca,Dn.pad=function(e,t,n){e=yo(e);var i=(t=fo(t))?fn(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return Wr(ft(r),n)+e+Wr(pt(r),n)},Dn.padEnd=function(e,t,n){e=yo(e);var i=(t=fo(t))?fn(e):0;return t&&i<t?e+Wr(t-i,n):e},Dn.padStart=function(e,t,n){e=yo(e);var i=(t=fo(t))?fn(e):0;return t&&i<t?Wr(t-i,n)+e:e},Dn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(yo(e).replace(ae,""),t||0)},Dn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&bs(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=po(e),t===r?(t=e,e=0):t=po(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=jn();return bn(e+s*(t-e+ht("1e-"+((s+"").length-1))),t)}return Qi(e,t)},Dn.reduce=function(e,t,n){var i=Ma(e)?Vt:Kt,r=arguments.length<3;return i(e,ls(t,4),n,r,di)},Dn.reduceRight=function(e,t,n){var i=Ma(e)?Ft:Kt,r=arguments.length<3;return i(e,ls(t,4),n,r,pi)},Dn.repeat=function(e,t,n){return t=(n?bs(e,t,n):t===r)?1:fo(t),Ki(yo(e),t)},Dn.replace=function(){var e=arguments,t=yo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Dn.result=function(e,t,n){var i=-1,s=(t=br(t,e)).length;for(s||(s=1,e=r);++i<s;){var a=null==e?r:e[Ls(t[i])];a===r&&(i=s,a=n),e=Ga(a)?a.call(e):a}return e},Dn.round=jl,Dn.runInContext=e,Dn.sample=function(e){return(Ma(e)?Xn:Xi)(e)},Dn.size=function(e){if(null==e)return 0;if(Ha(e))return ao(e)?fn(e):e.length;var t=fs(e);return t==C||t==P?e.size:Li(e).length},Dn.snakeCase=$o,Dn.some=function(e,t,n){var i=Ma(e)?qt:rr;return n&&bs(e,t,n)&&(t=r),i(e,ls(t,3))},Dn.sortedIndex=function(e,t){return sr(e,t)},Dn.sortedIndexBy=function(e,t,n){return ar(e,t,ls(n,2))},Dn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=sr(e,t);if(i<n&&qa(e[i],t))return i}return-1},Dn.sortedLastIndex=function(e,t){return sr(e,t,!0)},Dn.sortedLastIndexBy=function(e,t,n){return ar(e,t,ls(n,2),!0)},Dn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=sr(e,t,!0)-1;if(qa(e[n],t))return n}return-1},Dn.startCase=Qo,Dn.startsWith=function(e,t,n){return e=yo(e),n=null==n?0:oi(fo(n),0,e.length),t=ur(t),e.slice(n,n+t.length)==t},Dn.subtract=kl,Dn.sum=function(e){return e&&e.length?Gt(e,il):0},Dn.sumBy=function(e,t){return e&&e.length?Gt(e,ls(t,2)):0},Dn.template=function(e,t,n){var i=Dn.templateSettings;n&&bs(e,t,n)&&(t=r),e=yo(e),t=xo({},t,i,Jr);var s,a,o=xo({},t.imports,i.imports,Jr),l=Oo(o),u=en(o,l),c=0,h=t.interpolate||je,d="__p += '",p=Ne((t.escape||je).source+"|"+h.source+"|"+(h===ee?fe:je).source+"|"+(t.evaluate||je).source+"|$","g"),f="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(p,(function(t,n,i,r,o,l){return i||(i=r),d+=e.slice(c,l).replace(ke,on),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var m=Re.call(t,"variable")&&t.variable;if(m){if(de.test(m))throw new oe("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(H,""):d).replace(Z,"$1").replace($,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Jo((function(){return _e(l,f+"return "+d).apply(r,u)}));if(v.source=d,Ka(v))throw v;return v},Dn.times=function(e,t){if((e=fo(e))<1||e>f)return[];var n=v,i=bn(e,v);t=ls(t),e-=v;for(var r=Xt(i,t);++n<e;)t(n);return r},Dn.toFinite=po,Dn.toInteger=fo,Dn.toLength=mo,Dn.toLower=function(e){return yo(e).toLowerCase()},Dn.toNumber=vo,Dn.toSafeInteger=function(e){return e?oi(fo(e),-9007199254740991,f):0===e?e:0},Dn.toString=yo,Dn.toUpper=function(e){return yo(e).toUpperCase()},Dn.trim=function(e,t,n){if((e=yo(e))&&(n||t===r))return Jt(e);if(!e||!(t=ur(t)))return e;var i=mn(e),s=mn(t);return xr(i,nn(i,s),rn(i,s)+1).join("")},Dn.trimEnd=function(e,t,n){if((e=yo(e))&&(n||t===r))return e.slice(0,vn(e)+1);if(!e||!(t=ur(t)))return e;var i=mn(e);return xr(i,0,rn(i,mn(t))+1).join("")},Dn.trimStart=function(e,t,n){if((e=yo(e))&&(n||t===r))return e.replace(ae,"");if(!e||!(t=ur(t)))return e;var i=mn(e);return xr(i,nn(i,mn(t))).join("")},Dn.truncate=function(e,t){var n=30,i="...";if(Ya(t)){var s="separator"in t?t.separator:s;n="length"in t?fo(t.length):n,i="omission"in t?ur(t.omission):i}var a=(e=yo(e)).length;if(ln(e)){var o=mn(e);a=o.length}if(n>=a)return e;var l=n-fn(i);if(l<1)return i;var u=o?xr(o,0,l).join(""):e.slice(0,l);if(s===r)return u+i;if(o&&(l+=u.length-l),ro(s)){if(e.slice(l).search(s)){var c,h=u;for(s.global||(s=Ne(s.source,yo(me.exec(s))+"g")),s.lastIndex=0;c=s.exec(h);)var d=c.index;u=u.slice(0,d===r?l:d)}}else if(e.indexOf(ur(s),l)!=l){var p=u.lastIndexOf(s);p>-1&&(u=u.slice(0,p))}return u+i},Dn.unescape=function(e){return(e=yo(e))&&G.test(e)?e.replace(Q,gn):e},Dn.uniqueId=function(e){var t=++Le;return yo(e)+t},Dn.upperCase=Ko,Dn.upperFirst=Go,Dn.each=ga,Dn.eachRight=ya,Dn.first=Hs,ol(Dn,function(){var e={};return wi(Dn,(function(t,n){Re.call(Dn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Dn.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Dn[e].placeholder=Dn})),At(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===r?1:Qt(fo(n),0);var i=this.__filtered__&&!t?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=bn(n,i.__takeCount__):i.__views__.push({size:bn(n,v),type:e+(i.__dir__<0?"Right":"")}),i},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),At(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ls(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),At(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),At(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(il)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Gi((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Pi(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(Ua(ls(e)))},Wn.prototype.slice=function(e,t){e=fo(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=fo(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(v)},wi(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=Dn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);s&&(Dn.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,l=t instanceof Wn,u=o[0],c=l||Ma(t),h=function(e){var t=s.apply(Dn,Lt([e],o));return i&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,p=!!this.__actions__.length,f=a&&!d,m=l&&!p;if(!a&&c){t=m?t:new Wn(this);var v=e.apply(t,o);return v.__actions__.push({func:da,args:[h],thisArg:r}),new Mn(v,d)}return f&&m?e.apply(this,o):(v=this.thru(h),f?i?v.value()[0]:v.value():v)})})),At(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Pe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Dn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Ma(r)?r:[],e)}return this[n]((function(n){return t.apply(Ma(n)?n:[],e)}))}})),wi(Wn.prototype,(function(e,t){var n=Dn[t];if(n){var i=n.name+"";Re.call(On,i)||(On[i]=[]),On[i].push({name:t,func:n})}})),On[Dr(r,2).name]=[{name:"wrapper",func:r}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ar(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ar(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ar(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ma(e),i=t<0,r=n?e.length:0,s=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var s=n[i],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=bn(t,e+a);break;case"takeRight":e=Qt(e,t-a)}}return{start:e,end:t}}(0,r,this.__views__),a=s.start,o=s.end,l=o-a,u=i?o:a-1,c=this.__iteratees__,h=c.length,d=0,p=bn(l,this.__takeCount__);if(!n||!i&&r==l&&p==l)return fr(e,this.__actions__);var f=[];e:for(;l--&&d<p;){for(var m=-1,v=e[u+=t];++m<h;){var g=c[m],y=g.iteratee,b=g.type,w=y(v);if(2==b)v=w;else if(!w){if(1==b)continue e;break e}}f[d++]=v}return f},Dn.prototype.at=pa,Dn.prototype.chain=function(){return ha(this)},Dn.prototype.commit=function(){return new Mn(this.value(),this.__chain__)},Dn.prototype.next=function(){this.__values__===r&&(this.__values__=ho(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Dn.prototype.plant=function(e){for(var t,n=this;n instanceof Bn;){var i=Fs(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t},Dn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:da,args:[Ys],thisArg:r}),new Mn(t,this.__chain__)}return this.thru(Ys)},Dn.prototype.toJSON=Dn.prototype.valueOf=Dn.prototype.value=function(){return fr(this.__wrapped__,this.__actions__)},Dn.prototype.first=Dn.prototype.head,Xe&&(Dn.prototype[Xe]=function(){return this}),Dn}();mt._=yn,(i=function(){return yn}.call(t,n,t,e))===r||(e.exports=i)}.call(this)},986:(e,t,n)=>{"use strict";n.d(t,{Pi:()=>ie});var i=n(894),r=n(791);if(!r.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!i.rV)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var s=n(164),a=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a};function o(){var e=a((0,r.useState)(0),2)[1];return(0,r.useCallback)((function(){e((function(e){return e+1}))}),[])}var l={};var u,c=(u="observerBatching","function"===typeof Symbol?Symbol.for(u):"__$mobx-react "+u+"__");function h(e){e()}var d=!1;function p(){return d}function f(e){return(0,i.Gf)(e)}var m,v=1e4,g=1e4,y=new Set;function b(){void 0===m&&(m=setTimeout(w,g))}function w(){m=void 0;var e=Date.now();y.forEach((function(t){var n=t.current;n&&e>=n.cleanAt&&(n.reaction.dispose(),t.current=null,y.delete(t))})),y.size>0&&b()}var x=!1,j=[];var k={};function _(e){return"observer"+e}function C(e,t,n){if(void 0===t&&(t="observed"),void 0===n&&(n=k),p())return e();var s,a=function(e){return function(){x?j.push(e):e()}}((n.useForceUpdate||o)()),l=r.useRef(null);if(!l.current){var u=new i.le(_(t),(function(){c.mounted?a():(u.dispose(),l.current=null)})),c=function(e){return{cleanAt:Date.now()+v,reaction:e}}(u);l.current=c,s=l,y.add(s),b()}var h=l.current.reaction;return r.useDebugValue(h,f),r.useEffect((function(){var e;return e=l,y.delete(e),l.current?l.current.mounted=!0:(l.current={reaction:new i.le(_(t),(function(){a()})),cleanAt:1/0},a()),function(){l.current.reaction.dispose(),l.current=null}}),[]),function(e){x=!0,j=[];try{var t=e();x=!1;var n=j.length>0?j:void 0;return r.useLayoutEffect((function(){n&&n.forEach((function(e){return e()}))}),[n]),t}finally{x=!1}}((function(){var t,n;if(h.track((function(){try{t=e()}catch(i){n=i}})),n)throw n;return t}))}var S=function(){return S=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},S.apply(this,arguments)};function N(e,t){if(p())return e;var n,i,s,a=S({forwardRef:!1},t),o=e.displayName||e.name,l=function(t,n){return C((function(){return e(t,n)}),o)};return l.displayName=o,n=a.forwardRef?(0,r.memo)((0,r.forwardRef)(l)):(0,r.memo)(l),i=e,s=n,Object.keys(i).forEach((function(e){E[e]||Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(i,e))})),n.displayName=o,n}var E={$$typeof:!0,render:!0,compare:!0,type:!0};function A(e){var t=e.children,n=e.render,i=t||n;return"function"!==typeof i?null:C(i)}function P(e,t,n,i,r){var s="children"===t?"render":"children",a="function"===typeof e[t],o="function"===typeof e[s];return a&&o?new Error("MobX Observer: Do not use children and render in the same time in`"+n):a||o?null:new Error("Invalid prop `"+r+"` of type `"+typeof e[t]+"` supplied to `"+n+"`, expected `function`.")}A.propTypes={children:P,render:P},A.displayName="Observer";var O;(O=s.unstable_batchedUpdates)||(O=h),(0,i.jQ)({reactionScheduler:O}),("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:l)[c]=!0;var I=0;var T={};function U(e){return T[e]||(T[e]=function(e){if("function"===typeof Symbol)return Symbol(e);var t="__$mobx-react "+e+" ("+I+")";return I++,t}(e)),T[e]}function R(e,t){if(L(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!Object.hasOwnProperty.call(t,n[r])||!L(e[n[r]],t[n[r]]))return!1;return!0}function L(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function V(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}var F=U("patchMixins"),q=U("patchedDefinition");function D(e,t){for(var n=this,i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];t.locks++;try{var a;return void 0!==e&&null!==e&&(a=e.apply(this,r)),a}finally{t.locks--,0===t.locks&&t.methods.forEach((function(e){e.apply(n,r)}))}}function z(e,t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];D.call.apply(D,[this,e,t].concat(i))}}function B(e,t,n){var i=function(e,t){var n=e[F]=e[F]||{},i=n[t]=n[t]||{};return i.locks=i.locks||0,i.methods=i.methods||[],i}(e,t);i.methods.indexOf(n)<0&&i.methods.push(n);var r=Object.getOwnPropertyDescriptor(e,t);if(!r||!r[q]){var s=e[t],a=M(e,t,r?r.enumerable:void 0,i,s);Object.defineProperty(e,t,a)}}function M(e,t,n,i,r){var s,a=z(r,i);return(s={})[q]=!0,s.get=function(){return a},s.set=function(r){if(this===e)a=z(r,i);else{var s=M(this,t,n,i,r);Object.defineProperty(this,t,s)}},s.configurable=!0,s.enumerable=n,s}var W=i.so||"$mobx",H=U("isMobXReactObserver"),Z=U("isUnmounted"),$=U("skipRender"),Q=U("isForcingUpdate");function K(e){var t=e.prototype;if(e[H]){var n=G(t);console.warn("The provided component class ("+n+") \n                has already been declared as an observer component.")}else e[H]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==r.PureComponent)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==J)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=J;Y(t,"props"),Y(t,"state");var i=t.render;return t.render=function(){return X.call(this,i)},B(t,"componentWillUnmount",(function(){var e;if(!0!==p()&&(null===(e=this.render[W])||void 0===e||e.dispose(),this[Z]=!0,!this.render[W])){var t=G(this);console.warn("The reactive render of an observer class component ("+t+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}})),e}function G(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function X(e){var t=this;if(!0===p())return e.call(this);V(this,$,!1),V(this,Q,!1);var n=G(this),s=e.bind(this),a=!1,o=new i.le(n+".render()",(function(){if(!a&&(a=!0,!0!==t[Z])){var e=!0;try{V(t,Q,!0),t[$]||r.Component.prototype.forceUpdate.call(t),e=!1}finally{V(t,Q,!1),e&&o.dispose()}}}));function l(){a=!1;var e=void 0,t=void 0;if(o.track((function(){try{t=(0,i.$$)(!1,s)}catch(n){e=n}})),e)throw e;return t}return o.reactComponent=this,l[W]=o,this.render=l,l.call(this)}function J(e,t){return p()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t||!R(this.props,e)}function Y(e,t){var n=U("reactProp_"+t+"_valueHolder"),r=U("reactProp_"+t+"_atomHolder");function s(){return this[r]||V(this,r,(0,i.cp)("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=!1;return i.wM&&i.mJ&&(e=(0,i.wM)(!0)),s.call(this).reportObserved(),i.wM&&i.mJ&&(0,i.mJ)(e),this[n]},set:function(e){this[Q]||R(this[n],e)?V(this,n,e):(V(this,n,e),V(this,$,!0),s.call(this).reportChanged(),V(this,$,!1))}})}var ee="function"===typeof Symbol&&Symbol.for,te=ee?Symbol.for("react.forward_ref"):"function"===typeof r.forwardRef&&(0,r.forwardRef)((function(e){return null})).$$typeof,ne=ee?Symbol.for("react.memo"):"function"===typeof r.memo&&(0,r.memo)((function(e){return null})).$$typeof;function ie(e){if(!0===e.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),ne&&e.$$typeof===ne)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(te&&e.$$typeof===te){var t=e.render;if("function"!==typeof t)throw new Error("render property of ForwardRef was not a function");return(0,r.forwardRef)((function(){var e=arguments;return(0,r.createElement)(A,null,(function(){return t.apply(void 0,e)}))}))}return"function"!==typeof e||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(r.Component,e)?K(e):N(e)}if(!r.Component)throw new Error("mobx-react requires React to be available");if(!i.LO)throw new Error("mobx-react requires mobx to be available")},894:(e,t,n)=>{"use strict";n.d(t,{$$:()=>ye,EH:()=>Xe,Ei:()=>Et,Fl:()=>ee,Gf:()=>at,LJ:()=>It,LO:()=>Q,N7:()=>dt,Pb:()=>Bt,cp:()=>_,jQ:()=>nt,le:()=>Fe,mJ:()=>he,rV:()=>He,rg:()=>oe,so:()=>x,wM:()=>ce,z:()=>Ke});var i="An invariant failed, however the error is obfuscated because this is a production build.",r=[];Object.freeze(r);var s={};function a(){return++Ae.mobxGuid}function o(e){throw l(!1,e),"X"}function l(e,t){if(!e)throw new Error("[mobx] "+(t||i))}Object.freeze(s);function u(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var c=function(){};function h(e){return null!==e&&"object"===typeof e}function d(e){if(null===e||"object"!==typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function p(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function f(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return h(e)&&!0===e[n]}}function m(e){return e instanceof Map}function v(e){return e instanceof Set}function g(e){var t=new Set;for(var n in e)t.add(n);return Object.getOwnPropertySymbols(e).forEach((function(n){Object.getOwnPropertyDescriptor(e,n).enumerable&&t.add(n)})),Array.from(t)}function y(e){return e&&e.toString?e.toString():new String(e).toString()}function b(e){return null===e?null:"object"===typeof e?""+e:e}var w="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,x=Symbol("mobx administration"),j=function(){function e(e){void 0===e&&(e="Atom@"+a()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=G.NOT_TRACKING}return e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.reportObserved=function(){return Re(this)},e.prototype.reportChanged=function(){Te(),function(e){if(e.lowestObserverState===G.STALE)return;e.lowestObserverState=G.STALE,e.observers.forEach((function(t){t.dependenciesState===G.UP_TO_DATE&&(t.isTracing!==X.NONE&&Le(t,e),t.onBecomeStale()),t.dependenciesState=G.STALE}))}(this),Ue()},e.prototype.toString=function(){return this.name},e}(),k=f("Atom",j);function _(e,t,n){void 0===t&&(t=c),void 0===n&&(n=c);var i,r=new j(e);return t!==c&&tt("onBecomeObserved",r,t,i),n!==c&&et(r,n),r}var C={identity:function(e,t){return e===t},structural:function(e,t){return Zt(e,t)},default:function(e,t){return Object.is(e,t)},shallow:function(e,t){return Zt(e,t,1)}},S=function(e,t){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},S(e,t)};var N=function(){return N=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},N.apply(this,arguments)};function E(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function A(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(o){r={error:o}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}function P(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e}var O=Symbol("mobx did run lazy initializers"),I=Symbol("mobx pending decorators"),T={},U={};function R(e){var t,n;if(!0!==e[O]){var i=e[I];if(i){p(e,O,!0);var r=P(Object.getOwnPropertySymbols(i),Object.keys(i));try{for(var s=E(r),a=s.next();!a.done;a=s.next()){var o=i[a.value];o.propertyCreator(e,o.prop,o.descriptor,o.decoratorTarget,o.decoratorArguments)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}}}function L(e,t){return function(){var n,i,s=function(i,r,s,a){if(!0===a)return t(i,r,s,i,n),null;if(!Object.prototype.hasOwnProperty.call(i,I)){var o=i[I];p(i,I,N({},o))}return i[I][r]={prop:r,propertyCreator:t,descriptor:s,decoratorTarget:i,decoratorArguments:n},function(e,t){var n=t?T:U;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return R(this),this[e]},set:function(t){R(this),this[e]=t}})}(r,e)};return(2===(i=arguments).length||3===i.length)&&("string"===typeof i[1]||"symbol"===typeof i[1])||4===i.length&&!0===i[3]?(n=r,s.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),s)}}function V(e,t,n){return ct(e)?e:Array.isArray(e)?Q.array(e,{name:n}):d(e)?Q.object(e,void 0,{name:n}):m(e)?Q.map(e,{name:n}):v(e)?Q.set(e,{name:n}):e}function F(e){return e}function q(e){l(e);var t=L(!0,(function(t,n,i,r,s){var a=i?i.initializer?i.initializer.call(t):i.value:void 0;Vt(t).addObservableProp(n,a,e)}));return t.enhancer=e,t}var D={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function z(e){return null===e||void 0===e?D:"string"===typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(D);var B=q(V),M=q((function(e,t,n){return void 0===e||null===e||Bt(e)||Et(e)||It(e)||Rt(e)?e:Array.isArray(e)?Q.array(e,{name:n,deep:!1}):d(e)?Q.object(e,void 0,{name:n,deep:!1}):m(e)?Q.map(e,{name:n,deep:!1}):v(e)?Q.set(e,{name:n,deep:!1}):o(!1)})),W=q(F),H=q((function(e,t,n){return Zt(e,t)?t:e}));function Z(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?F:V}var $={box:function(e,t){arguments.length>2&&K("box");var n=z(t);return new xe(e,Z(n),n.name,!0,n.equals)},array:function(e,t){arguments.length>2&&K("array");var n=z(t);return function(e,t,n,i){void 0===n&&(n="ObservableArray@"+a());void 0===i&&(i=!1);var r=new _t(n,t,i);s=r.values,o=x,l=r,Object.defineProperty(s,o,{enumerable:!1,writable:!1,configurable:!0,value:l});var s,o,l;var u=new Proxy(r.values,kt);if(r.proxy=u,e&&e.length){var c=be(!0);r.spliceWithArray(0,0,e),we(c)}return u}(e,Z(n),n.name)},map:function(e,t){arguments.length>2&&K("map");var n=z(t);return new Ot(e,Z(n),n.name)},set:function(e,t){arguments.length>2&&K("set");var n=z(t);return new Ut(e,Z(n),n.name)},object:function(e,t,n){"string"===typeof arguments[1]&&K("object");var i=z(n);if(!1===i.proxy)return it({},e,t,i);var r=rt(i),s=function(e){var t=new Proxy(e,vt);return e[x].proxy=t,t}(it({},void 0,void 0,i));return st(s,e,t,r),s},ref:W,shallow:M,deep:B,struct:H},Q=function(e,t,n){if("string"===typeof arguments[1]||"symbol"===typeof arguments[1])return B.apply(null,arguments);if(ct(e))return e;var i=d(e)?Q.object(e,t,n):Array.isArray(e)?Q.array(e,t):m(e)?Q.map(e,t):v(e)?Q.set(e,t):e;if(i!==e)return i;o(!1)};function K(e){o("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys($).forEach((function(e){return Q[e]=$[e]}));var G,X,J=L(!1,(function(e,t,n,i,r){var s=n.get,a=n.set,o=r[0]||{};Vt(e).addComputedProp(e,t,N({get:s,set:a,context:e},o))})),Y=J({equals:C.structural}),ee=function(e,t,n){if("string"===typeof t)return J.apply(null,arguments);if(null!==e&&"object"===typeof e&&1===arguments.length)return J.apply(null,arguments);var i="object"===typeof t?t:{};return i.get=e,i.set="function"===typeof t?t:i.set,i.name=i.name||e.name||"",new je(i)};ee.struct=Y,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(G||(G={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(X||(X={}));var te=function(e){this.cause=e};function ne(e){return e instanceof te}function ie(e){switch(e.dependenciesState){case G.UP_TO_DATE:return!1;case G.NOT_TRACKING:case G.STALE:return!0;case G.POSSIBLY_STALE:for(var t=ce(!0),n=le(),i=e.observing,r=i.length,s=0;s<r;s++){var a=i[s];if(ke(a)){if(Ae.disableErrorBoundaries)a.get();else try{a.get()}catch(o){return ue(n),he(t),!0}if(e.dependenciesState===G.STALE)return ue(n),he(t),!0}}return de(e),ue(n),he(t),!1}}function re(e){var t=e.observers.size>0;Ae.computationDepth>0&&t&&o(!1),Ae.allowStateChanges||!t&&"strict"!==Ae.enforceActions||o(!1)}function se(e,t,n){var i=ce(!0);de(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Ae.runId;var r,s=Ae.trackingDerivation;if(Ae.trackingDerivation=e,!0===Ae.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(a){r=new te(a)}return Ae.trackingDerivation=s,function(e){for(var t=e.observing,n=e.observing=e.newObserving,i=G.UP_TO_DATE,r=0,s=e.unboundDepsCount,a=0;a<s;a++){0===(o=n[a]).diffValue&&(o.diffValue=1,r!==a&&(n[r]=o),r++),o.dependenciesState>i&&(i=o.dependenciesState)}n.length=r,e.newObserving=null,s=t.length;for(;s--;){0===(o=t[s]).diffValue&&Oe(o,e),o.diffValue=0}for(;r--;){var o;1===(o=n[r]).diffValue&&(o.diffValue=0,Pe(o,e))}i!==G.UP_TO_DATE&&(e.dependenciesState=i,e.onBecomeStale())}(e),he(i),r}function ae(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Oe(t[n],e);e.dependenciesState=G.NOT_TRACKING}function oe(e){var t=le();try{return e()}finally{ue(t)}}function le(){var e=Ae.trackingDerivation;return Ae.trackingDerivation=null,e}function ue(e){Ae.trackingDerivation=e}function ce(e){var t=Ae.allowStateReads;return Ae.allowStateReads=e,t}function he(e){Ae.allowStateReads=e}function de(e){if(e.dependenciesState!==G.UP_TO_DATE){e.dependenciesState=G.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=G.UP_TO_DATE}}var pe=0,fe=1,me=Object.getOwnPropertyDescriptor((function(){}),"name");me&&me.configurable;function ve(e,t,n){var i=function(){return ge(e,t,n||this,arguments)};return i.isMobxAction=!0,i}function ge(e,t,n,i){var r=function(e,t,n){var i=!1,r=0;0;var s=le();Te();var a=be(!0),o=ce(!0),l={prevDerivation:s,prevAllowStateChanges:a,prevAllowStateReads:o,notifySpy:i,startTime:r,actionId:fe++,parentActionId:pe};return pe=l.actionId,l}();try{return t.apply(n,i)}catch(s){throw r.error=s,s}finally{!function(e){pe!==e.actionId&&o("invalid action stack. did you forget to finish an action?");pe=e.parentActionId,void 0!==e.error&&(Ae.suppressReactionErrors=!0);we(e.prevAllowStateChanges),he(e.prevAllowStateReads),Ue(),ue(e.prevDerivation),e.notifySpy;Ae.suppressReactionErrors=!1}(r)}}function ye(e,t){var n,i=be(e);try{n=t()}finally{we(i)}return n}function be(e){var t=Ae.allowStateChanges;return Ae.allowStateChanges=e,t}function we(e){Ae.allowStateChanges=e}var xe=function(e){function t(t,n,i,r,s){void 0===i&&(i="ObservableValue@"+a()),void 0===r&&(r=!0),void 0===s&&(s=C.default);var o=e.call(this,i)||this;return o.enhancer=n,o.name=i,o.equals=s,o.hasUnreportedChange=!1,o.value=n(t,void 0,i),o}return function(e,t){function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){this.value;if((e=this.prepareNewValue(e))!==Ae.UNCHANGED){false,this.setNewValue(e)}},t.prototype.prepareNewValue=function(e){if(re(this),gt(this)){var t=bt(this,{object:this,type:"update",newValue:e});if(!t)return Ae.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Ae.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),wt(this)&&jt(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return yt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),xt(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return b(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(j),je=(f("ObservableValue",xe),function(){function e(e){this.dependenciesState=G.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=G.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+a(),this.value=new te(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=X.NONE,l(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+a(),e.set&&(this.setter=ve(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?C.structural:C.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState!==G.UP_TO_DATE)return;e.lowestObserverState=G.POSSIBLY_STALE,e.observers.forEach((function(t){t.dependenciesState===G.UP_TO_DATE&&(t.dependenciesState=G.POSSIBLY_STALE,t.isTracing!==X.NONE&&Le(t,e),t.onBecomeStale())}))}(this)},e.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(e){return e()}))},e.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(e){return e()}))},e.prototype.get=function(){this.isComputing&&o("Cycle detected in computation "+this.name+": "+this.derivation),0!==Ae.inBatch||0!==this.observers.size||this.keepAlive?(Re(this),ie(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState===G.STALE)return;e.lowestObserverState=G.STALE,e.observers.forEach((function(t){t.dependenciesState===G.POSSIBLY_STALE?t.dependenciesState=G.STALE:t.dependenciesState===G.UP_TO_DATE&&(e.lowestObserverState=G.UP_TO_DATE)}))}(this)):ie(this)&&(this.warnAboutUntrackedRead(),Te(),this.value=this.computeValue(!1),Ue());var e=this.value;if(ne(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(ne(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){l(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else l(!1,!1)},e.prototype.trackAndCompute=function(){var e=this.value,t=this.dependenciesState===G.NOT_TRACKING,n=this.computeValue(!0),i=t||ne(e)||ne(n)||!this.equals(e,n);return i&&(this.value=n),i},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Ae.computationDepth++,e)t=se(this,this.derivation,this.scope);else if(!0===Ae.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(n){t=new te(n)}return Ae.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(ae(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,i=!0,r=void 0;return Xe((function(){var s=n.get();if(!i||t){var a=le();e({type:"update",object:n,newValue:s,oldValue:r}),ue(a)}i=!1,r=s}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return b(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}()),ke=f("ComputedValue",je),_e=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Ce={};function Se(){return"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:Ce}var Ne=!0,Ee=!1,Ae=function(){var e=Se();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Ne=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new _e).version&&(Ne=!1),Ne?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new _e):(setTimeout((function(){Ee||o("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new _e)}();function Pe(e,t){e.observers.add(t),e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Oe(e,t){e.observers.delete(t),0===e.observers.size&&Ie(e)}function Ie(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Ae.pendingUnobservations.push(e))}function Te(){Ae.inBatch++}function Ue(){if(0===--Ae.inBatch){ze();for(var e=Ae.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof je&&n.suspend())}Ae.pendingUnobservations=[]}}function Re(e){var t=Ae.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&Ae.inBatch>0&&Ie(e),!1)}function Le(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===X.BREAK){var n=[];Ve(at(e),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof je?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}function Ve(e,t,n){t.length>=1e3?t.push("(and many more)"):(t.push(""+new Array(n).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return Ve(e,t,n+1)})))}var Fe=function(){function e(e,t,n,i){void 0===e&&(e="Reaction@"+a()),void 0===i&&(i=!1),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.requiresObservable=i,this.observing=[],this.newObserving=[],this.dependenciesState=G.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+a(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=X.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ae.pendingReactions.push(this),ze())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Te(),this._isScheduled=!1,ie(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(e){this.reportExceptionInDerivation(e)}}Ue()}},e.prototype.track=function(e){if(!this.isDisposed){Te();false,this._isRunning=!0;var t=se(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ae(this),ne(t)&&this.reportExceptionInDerivation(t.cause),Ue()}},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Ae.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Ae.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,e),Ae.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Te(),ae(this),Ue()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[x]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"===typeof e[e.length-1]&&(n=e.pop());var i=function(e){switch(e.length){case 0:return Ae.trackingDerivation;case 1:return Mt(e[0]);case 2:return Mt(e[0],e[1])}}(e);if(!i)return o(!1);i.isTracing===X.NONE&&console.log("[mobx.trace] '"+i.name+"' tracing enabled");i.isTracing=n?X.BREAK:X.LOG}(this,e)},e}();var qe=100,De=function(e){return e()};function ze(){Ae.inBatch>0||Ae.isRunningReactions||De(Be)}function Be(){Ae.isRunningReactions=!0;for(var e=Ae.pendingReactions,t=0;e.length>0;){++t===qe&&(console.error("Reaction doesn't converge to a stable state after "+qe+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction()}Ae.isRunningReactions=!1}var Me=f("Reaction",Fe);function We(e){var t=De;De=function(n){return e((function(){return t(n)}))}}function He(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Ze(){o(!1)}function $e(e){return function(t,n,i){if(i){if(i.value)return{value:ve(e,i.value),enumerable:!1,configurable:!0,writable:!0};var r=i.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return ve(e,r.call(this))}}}return function(e){return function(t,n,i){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){p(this,n,Qe(e,t))}})}}(e).apply(this,arguments)}}var Qe=function(e,t,n,i){return 1===arguments.length&&"function"===typeof e?ve(e.name||"<unnamed action>",e):2===arguments.length&&"function"===typeof t?ve(e,t):1===arguments.length&&"string"===typeof e?$e(e):!0!==i?$e(t).apply(null,arguments):void p(e,t,ve(e.name||t,n.value,this))};function Ke(e,t){"string"===typeof e||e.name;return ge(0,"function"===typeof e?e:t,this,void 0)}function Ge(e,t,n){p(e,t,ve(t,n.bind(e)))}function Xe(e,t){void 0===t&&(t=s);var n,i=t&&t.name||e.name||"Autorun@"+a();if(!t.scheduler&&!t.delay)n=new Fe(i,(function(){this.track(l)}),t.onError,t.requiresObservable);else{var r=Ye(t),o=!1;n=new Fe(i,(function(){o||(o=!0,r((function(){o=!1,n.isDisposed||n.track(l)})))}),t.onError,t.requiresObservable)}function l(){e(n)}return n.schedule(),n.getDisposer()}Qe.bound=function(e,t,n,i){return!0===i?(Ge(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Ge(this,t,n.value||n.initializer.call(this)),this[t]},set:Ze}:{enumerable:!1,configurable:!0,set:function(e){Ge(this,t,e)},get:function(){}}};var Je=function(e){return e()};function Ye(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Je}function et(e,t,n){return tt("onBecomeUnobserved",e,t,n)}function tt(e,t,n,i){var r="function"===typeof i?Mt(t,n):Mt(t),s="function"===typeof i?i:n,a=e+"Listeners";return r[a]?r[a].add(s):r[a]=new Set([s]),"function"!==typeof r[e]?o(!1):function(){var e=r[a];e&&(e.delete(s),0===e.size&&delete r[a])}}function nt(e){var t=e.enforceActions,n=e.computedRequiresReaction,i=e.computedConfigurable,r=e.disableErrorBoundaries,s=e.reactionScheduler,a=e.reactionRequiresObservable,l=e.observableRequiresReaction;if(!0===e.isolateGlobalState&&((Ae.pendingReactions.length||Ae.inBatch||Ae.isRunningReactions)&&o("isolateGlobalState should be called before MobX is running any reactions"),Ee=!0,Ne&&(0===--Se().__mobxInstanceCount&&(Se().__mobxGlobals=void 0),Ae=new _e)),void 0!==t){var u=void 0;switch(t){case!0:case"observed":u=!0;break;case!1:case"never":u=!1;break;case"strict":case"always":u="strict";break;default:o("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}Ae.enforceActions=u,Ae.allowStateChanges=!0!==u&&"strict"!==u}void 0!==n&&(Ae.computedRequiresReaction=!!n),void 0!==a&&(Ae.reactionRequiresObservable=!!a),void 0!==l&&(Ae.observableRequiresReaction=!!l,Ae.allowStateReads=!Ae.observableRequiresReaction),void 0!==i&&(Ae.computedConfigurable=!!i),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Ae.disableErrorBoundaries=!!r),s&&We(s)}function it(e,t,n,i){var r=rt(i=z(i));return R(e),Vt(e,i.name,r.enhancer),t&&st(e,t,n,r),e}function rt(e){return e.defaultDecorator||(!1===e.deep?W:B)}function st(e,t,n,i){var r,s;Te();try{var a=w(t);try{for(var o=E(a),l=o.next();!l.done;l=o.next()){var u=l.value,c=Object.getOwnPropertyDescriptor(t,u);0;var h=(n&&u in n?n[u]:c.get?J:i)(e,u,c,!0);h&&Object.defineProperty(e,u,h)}}catch(d){r={error:d}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}}finally{Ue()}}function at(e,t){return ot(Mt(e,t))}function ot(e){var t={name:e.name};return e.observing&&e.observing.length>0&&(t.dependencies=function(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t}(e.observing).map(ot)),t}function lt(){this.message="FLOW_CANCELLED"}function ut(e,t){return null!==e&&void 0!==e&&(void 0!==t?!!Bt(e)&&e[x].values.has(t):Bt(e)||!!e[x]||k(e)||Me(e)||ke(e))}function ct(e){return 1!==arguments.length&&o(!1),ut(e)}function ht(e,t,n){if(2!==arguments.length||Rt(e))if(Bt(e)){var i=e[x];i.values.get(t)?i.write(t,n):i.addObservableProp(t,n,i.defaultEnhancer)}else if(It(e))e.set(t,n);else if(Rt(e))e.add(t);else{if(!Et(e))return o(!1);"number"!==typeof t&&(t=parseInt(t,10)),l(t>=0,"Not a valid index: '"+t+"'"),Te(),t>=e.length&&(e.length=t+1),e[t]=n,Ue()}else{Te();var r=t;try{for(var s in r)ht(e,s,r[s])}finally{Ue()}}}function dt(e,t,n,i){return"function"===typeof n?function(e,t,n,i){return Wt(e,t).observe(n,i)}(e,t,n,i):function(e,t,n){return Wt(e).observe(t,n)}(e,t,n)}lt.prototype=Object.create(Error.prototype);function pt(e,t){void 0===t&&(t=void 0),Te();try{return e.apply(t)}finally{Ue()}}function ft(e){return e[x]}function mt(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e}var vt={has:function(e,t){if(t===x||"constructor"===t||t===O)return!0;var n=ft(e);return mt(t)?n.has(t):t in e},get:function(e,t){if(t===x||"constructor"===t||t===O)return e[t];var n=ft(e),i=n.values.get(t);if(i instanceof j){var r=i.get();return void 0===r&&n.has(t),r}return mt(t)&&n.has(t),e[t]},set:function(e,t,n){return!!mt(t)&&(ht(e,t,n),!0)},deleteProperty:function(e,t){return!!mt(t)&&(ft(e).remove(t),!0)},ownKeys:function(e){return ft(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return o("Dynamic observable objects cannot be frozen"),!1}};function gt(e){return void 0!==e.interceptors&&e.interceptors.length>0}function yt(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),u((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function bt(e,t){var n=le();try{for(var i=P(e.interceptors||[]),r=0,s=i.length;r<s&&(l(!(t=i[r](t))||t.type,"Intercept handlers should return nothing or a change object"),t);r++);return t}finally{ue(n)}}function wt(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function xt(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),u((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function jt(e,t){var n=le(),i=e.changeListeners;if(i){for(var r=0,s=(i=i.slice()).length;r<s;r++)i[r](t);ue(n)}}var kt={get:function(e,t){return t===x?e[x]:"length"===t?e[x].getArrayLength():"number"===typeof t?Ct.get.call(e,t):"string"!==typeof t||isNaN(t)?Ct.hasOwnProperty(t)?Ct[t]:e[t]:Ct.get.call(e,parseInt(t))},set:function(e,t,n){return"length"===t&&e[x].setArrayLength(n),"number"===typeof t&&Ct.set.call(e,t,n),"symbol"===typeof t||isNaN(t)?e[t]=n:Ct.set.call(e,parseInt(t),n),!0},preventExtensions:function(e){return o("Observable arrays cannot be frozen"),!1}};var _t=function(){function e(e,t,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new j(e||"ObservableArray@"+a()),this.enhancer=function(n,i){return t(n,i,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return yt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),xt(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!==typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=t},e.prototype.spliceWithArray=function(e,t,n){var i=this;re(this.atom);var s=this.values.length;if(void 0===e?e=0:e>s?e=s:e<0&&(e=Math.max(0,s+e)),t=1===arguments.length?s-e:void 0===t||null===t?0:Math.max(0,Math.min(t,s-e)),void 0===n&&(n=r),gt(this)){var a=bt(this,{object:this.proxy,type:"splice",index:e,removedCount:t,added:n});if(!a)return r;t=a.removedCount,n=a.added}n=0===n.length?n:n.map((function(e){return i.enhancer(e,void 0)}));var o=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,o),this.dehanceValues(o)},e.prototype.spliceItemsIntoValues=function(e,t,n){var i;if(n.length<1e4)return(i=this.values).splice.apply(i,P([e,t],n));var r=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),r},e.prototype.notifyArrayChildUpdate=function(e,t,n){var i=!this.owned&&!1,r=wt(this),s=r||i?{object:this.proxy,type:"update",index:e,newValue:t,oldValue:n}:null;this.atom.reportChanged(),r&&jt(this,s)},e.prototype.notifyArraySplice=function(e,t,n){var i=!this.owned&&!1,r=wt(this),s=r||i?{object:this.proxy,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom.reportChanged(),r&&jt(this,s)},e}(),Ct={intercept:function(e){return this[x].intercept(e)},observe:function(e,t){return void 0===t&&(t=!1),this[x].observe(e,t)},clear:function(){return this.splice(0)},replace:function(e){var t=this[x];return t.spliceWithArray(0,t.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=this[x];switch(arguments.length){case 0:return[];case 1:return r.spliceWithArray(e);case 2:return r.spliceWithArray(e,t)}return r.spliceWithArray(e,t,n)},spliceWithArray:function(e,t,n){return this[x].spliceWithArray(e,t,n)},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[x];return n.spliceWithArray(n.values.length,0,e),n.values.length},pop:function(){return this.splice(Math.max(this[x].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this[x];return n.spliceWithArray(0,0,e),n.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var t=this.slice();return t.sort.apply(t,arguments)},remove:function(e){var t=this[x],n=t.dehanceValues(t.values).indexOf(e);return n>-1&&(this.splice(n,1),!0)},get:function(e){var t=this[x];if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,t){var n=this[x],i=n.values;if(e<i.length){re(n.atom);var r=i[e];if(gt(n)){var s=bt(n,{type:"update",object:n.proxy,index:e,newValue:t});if(!s)return;t=s.newValue}(t=n.enhancer(t,r))!==r&&(i[e]=t,n.notifyArrayChildUpdate(e,t,r))}else{if(e!==i.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+i.length);n.spliceWithArray(e,0,[t])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(e){"function"===typeof Array.prototype[e]&&(Ct[e]=function(){var t=this[x];t.atom.reportObserved();var n=t.dehanceValues(t.values);return n[e].apply(n,arguments)})})),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach((function(e){"function"===typeof Array.prototype[e]&&(Ct[e]=function(t,n){var i=this,r=this[x];return r.atom.reportObserved(),r.dehanceValues(r.values)[e]((function(e,r){return t.call(n,e,r,i)}),n)})})),["reduce","reduceRight"].forEach((function(e){Ct[e]=function(){var t=this,n=this[x];n.atom.reportObserved();var i=arguments[0];return arguments[0]=function(e,r,s){return r=n.dehanceValue(r),i(e,r,s,t)},n.values[e].apply(n.values,arguments)}}));var St,Nt=f("ObservableArrayAdministration",_t);function Et(e){return h(e)&&Nt(e[x])}var At,Pt={},Ot=function(){function e(e,t,n){if(void 0===t&&(t=V),void 0===n&&(n="ObservableMap@"+a()),this.enhancer=t,this.name=n,this[St]=Pt,this._keysAtom=_(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!==typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Ae.trackingDerivation)return this._has(e);var n=this._hasMap.get(e);if(!n){var i=n=new xe(this._has(e),F,this.name+"."+y(e)+"?",!1);this._hasMap.set(e,i),et(i,(function(){return t._hasMap.delete(e)}))}return n.get()},e.prototype.set=function(e,t){var n=this._has(e);if(gt(this)){var i=bt(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if((re(this._keysAtom),gt(this))&&!(i=bt(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=wt(this),i=n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return pt((function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),n&&jt(this,i),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);n&&n.setNewValue(t)},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==Ae.UNCHANGED){var i=!1,r=wt(this),s=r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;i,n.setNewValue(t),r&&jt(this,s)}},e.prototype._addValue=function(e,t){var n=this;re(this._keysAtom),pt((function(){var i=new xe(t,n.enhancer,n.name+"."+y(e),!1);n._data.set(e,i),t=i.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()}));var i=!1,r=wt(this);r&&jt(this,r?{type:"add",object:this,name:e,newValue:t}:null)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=this.keys();return Gt({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:e.get(r)}}})},e.prototype.entries=function(){var e=this,t=this.keys();return Gt({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,e.get(r)]}}})},e.prototype[(St=x,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,t){var n,i;try{for(var r=E(this),s=r.next();!s.done;s=r.next()){var a=A(s.value,2),o=a[0],l=a[1];e.call(t,l,o,this)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},e.prototype.merge=function(e){var t=this;return It(e)&&(e=e.toJS()),pt((function(){var n=be(!0);try{d(e)?g(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=A(e,2),i=n[0],r=n[1];return t.set(i,r)})):m(e)?(e.constructor!==Map&&o("Cannot initialize from classes that inherit from Map: "+e.constructor.name),e.forEach((function(e,n){return t.set(n,e)}))):null!==e&&void 0!==e&&o("Cannot initialize map from "+e)}finally{we(n)}})),this},e.prototype.clear=function(){var e=this;pt((function(){oe((function(){var t,n;try{for(var i=E(e.keys()),r=i.next();!r.done;r=i.next()){var s=r.value;e.delete(s)}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}))}))},e.prototype.replace=function(e){var t=this;return pt((function(){var n,i,r,s,a=function(e){if(m(e)||It(e))return e;if(Array.isArray(e))return new Map(e);if(d(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return o("Cannot convert to map from '"+e+"'")}(e),l=new Map,u=!1;try{for(var c=E(t._data.keys()),h=c.next();!h.done;h=c.next()){var p=h.value;if(!a.has(p))if(t.delete(p))u=!0;else{var f=t._data.get(p);l.set(p,f)}}}catch(C){n={error:C}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}try{for(var v=E(a.entries()),g=v.next();!g.done;g=v.next()){var y=A(g.value,2),b=(p=y[0],f=y[1],t._data.has(p));if(t.set(p,f),t._data.has(p)){var w=t._data.get(p);l.set(p,w),b||(u=!0)}}}catch(S){r={error:S}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(r)throw r.error}}if(!u)if(t._data.size!==l.size)t._keysAtom.reportChanged();else for(var x=t._data.keys(),j=l.keys(),k=x.next(),_=j.next();!k.done;){if(k.value!==_.value){t._keysAtom.reportChanged();break}k=x.next(),_=j.next()}t._data=l})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,t,n={};try{for(var i=E(this),r=i.next();!r.done;r=i.next()){var s=A(r.value,2),a=s[0],o=s[1];n["symbol"===typeof a?a:y(a)]=o}}catch(l){e={error:l}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map((function(t){return y(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return xt(this,e)},e.prototype.intercept=function(e){return yt(this,e)},e}(),It=f("ObservableMap",Ot),Tt={},Ut=function(){function e(e,t,n){if(void 0===t&&(t=V),void 0===n&&(n="ObservableSet@"+a()),this.name=n,this[At]=Tt,this._data=new Set,this._atom=_(this.name),this[Symbol.toStringTag]="Set","function"!==typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,i){return t(e,i,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;pt((function(){oe((function(){var t,n;try{for(var i=E(e._data.values()),r=i.next();!r.done;r=i.next()){var s=r.value;e.delete(s)}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}))}))},e.prototype.forEach=function(e,t){var n,i;try{for(var r=E(this),s=r.next();!s.done;s=r.next()){var a=s.value;e.call(t,a,a,this)}}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if((re(this._atom),gt(this))&&!(r=bt(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){pt((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=!1,i=wt(this),r=i?{type:"add",object:this,newValue:e}:null;n,i&&jt(this,r)}return this},e.prototype.delete=function(e){var t=this;if(gt(this)&&!(i=bt(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var n=wt(this),i=n?{type:"delete",object:this,oldValue:e}:null;return pt((function(){t._atom.reportChanged(),t._data.delete(e)})),n&&jt(this,i),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Gt({next:function(){var i=e;return e+=1,i<n.length?{value:[t[i],n[i]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e=this,t=0,n=Array.from(this._data.values());return Gt({next:function(){return t<n.length?{value:e.dehanceValue(n[t++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return Rt(e)&&(e=e.toJS()),pt((function(){var n=be(!0);try{Array.isArray(e)||v(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!==e&&void 0!==e&&o("Cannot initialize set from "+e)}finally{we(n)}})),this},e.prototype.observe=function(e,t){return xt(this,e)},e.prototype.intercept=function(e){return yt(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},e.prototype[(At=x,Symbol.iterator)]=function(){return this.values()},e}(),Rt=f("ObservableSet",Ut),Lt=function(){function e(e,t,n,i){void 0===t&&(t=new Map),this.target=e,this.values=t,this.name=n,this.defaultEnhancer=i,this.keysAtom=new j(n+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,t){var n=this.target,i=this.values.get(e);if(i instanceof je)i.set(t);else{if(gt(this)){if(!(a=bt(this,{type:"update",object:this.proxy||n,name:e,newValue:t})))return;t=a.newValue}if((t=i.prepareNewValue(t))!==Ae.UNCHANGED){var r=wt(this),s=!1,a=r?{type:"update",object:this.proxy||n,oldValue:i.value,name:e,newValue:t}:null;s,i.setNewValue(t),r&&jt(this,a)}}},e.prototype.has=function(e){var t=this.pendingKeys||(this.pendingKeys=new Map),n=t.get(e);if(n)return n.get();var i=!!this.values.get(e);return n=new xe(i,F,this.name+"."+y(e)+"?",!1),t.set(e,n),n.get()},e.prototype.addObservableProp=function(e,t,n){void 0===n&&(n=this.defaultEnhancer);var i=this.target;if(gt(this)){var r=bt(this,{object:this.proxy||i,name:e,type:"add",newValue:t});if(!r)return;t=r.newValue}var s=new xe(t,n,this.name+"."+y(e),!1);this.values.set(e,s),t=s.value,Object.defineProperty(i,e,function(e){return Ft[e]||(Ft[e]={configurable:!0,enumerable:!0,get:function(){return this[x].read(e)},set:function(t){this[x].write(e,t)}})}(e)),this.notifyPropertyAddition(e,t)},e.prototype.addComputedProp=function(e,t,n){var i=this.target;n.name=n.name||this.name+"."+y(t),this.values.set(t,new je(n)),(e===i||function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n||!1!==n.configurable&&!1!==n.writable}(e,t))&&Object.defineProperty(e,t,function(e){return qt[e]||(qt[e]={configurable:Ae.computedConfigurable,enumerable:!1,get:function(){return Dt(this).read(e)},set:function(t){Dt(this).write(e,t)}})}(t))},e.prototype.remove=function(e){if(this.values.has(e)){var t=this.target;if(gt(this))if(!(o=bt(this,{object:this.proxy||t,name:e,type:"remove"})))return;try{Te();var n=wt(this),i=!1,r=this.values.get(e),s=r&&r.get();if(r&&r.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var a=this.pendingKeys.get(e);a&&a.set(!1)}delete this.target[e];var o=n?{type:"remove",object:this.proxy||t,oldValue:s,name:e}:null;i,n&&jt(this,o)}finally{Ue()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return xt(this,e)},e.prototype.intercept=function(e){return yt(this,e)},e.prototype.notifyPropertyAddition=function(e,t){var n=wt(this),i=n?{type:"add",object:this.proxy||this.target,name:e,newValue:t}:null;if(n&&jt(this,i),this.pendingKeys){var r=this.pendingKeys.get(e);r&&r.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,t;this.keysAtom.reportObserved();var n=[];try{for(var i=E(this.values),r=i.next();!r.done;r=i.next()){var s=A(r.value,2),a=s[0];s[1]instanceof xe&&n.push(a)}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},e}();function Vt(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=V),Object.prototype.hasOwnProperty.call(e,x))return e[x];d(e)||(t=(e.constructor.name||"ObservableObject")+"@"+a()),t||(t="ObservableObject@"+a());var i=new Lt(e,new Map,y(t),n);return p(e,x,i),i}var Ft=Object.create(null),qt=Object.create(null);function Dt(e){var t=e[x];return t||(R(e),e[x])}var zt=f("ObservableObjectAdministration",Lt);function Bt(e){return!!h(e)&&(R(e),zt(e[x]))}function Mt(e,t){if("object"===typeof e&&null!==e){if(Et(e))return void 0!==t&&o(!1),e[x].atom;if(Rt(e))return e[x];if(It(e)){var n=e;return void 0===t?n._keysAtom:((i=n._data.get(t)||n._hasMap.get(t))||o(!1),i)}var i;if(R(e),t&&!e[x]&&e[t],Bt(e))return t?((i=e[x].values.get(t))||o(!1),i):o(!1);if(k(e)||ke(e)||Me(e))return e}else if("function"===typeof e&&Me(e[x]))return e[x];return o(!1)}function Wt(e,t){return e||o("Expecting some object"),void 0!==t?Wt(Mt(e,t)):k(e)||ke(e)||Me(e)||It(e)||Rt(e)?e:(R(e),e[x]?e[x]:void o(!1))}var Ht=Object.prototype.toString;function Zt(e,t,n){return void 0===n&&(n=-1),$t(e,t,n)}function $t(e,t,n,i,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var s=typeof e;if("function"!==s&&"object"!==s&&"object"!=typeof t)return!1;var a=Ht.call(e);if(a!==Ht.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Qt(e),t=Qt(t);var o="[object Array]"===a;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!("function"===typeof l&&l instanceof l&&"function"===typeof u&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var c=(i=i||[]).length;c--;)if(i[c]===e)return r[c]===t;if(i.push(e),r.push(t),o){if((c=e.length)!==t.length)return!1;for(;c--;)if(!$t(e[c],t[c],n-1,i,r))return!1}else{var h=Object.keys(e),d=void 0;if(c=h.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!Kt(t,d=h[c])||!$t(e[d],t[d],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function Qt(e){return Et(e)?e.slice():m(e)||It(e)||v(e)||Rt(e)?Array.from(e.entries()):e}function Kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Gt(e){return e[Symbol.iterator]=Xt,e}function Xt(){return this}if("undefined"===typeof Proxy||"undefined"===typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:He,extras:{getDebugName:function(e,t){return(void 0!==t?Mt(e,t):Bt(e)||It(e)||Rt(e)?Wt(e):Mt(e)).name}},$mobx:x})},725:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,r){for(var s,a,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in s=Object(arguments[l]))n.call(s,u)&&(o[u]=s[u]);if(t){a=t(s);for(var c=0;c<a.length;c++)i.call(s,a[c])&&(o[a[c]]=s[a[c]])}}return o}},424:(e,t,n)=>{"use strict";var i=n(725),r=n(791);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=60106,o=60107,l=60108,u=60114,c=60109,h=60110,d=60112,p=60113,f=60120,m=60115,v=60116,g=60121,y=60117,b=60119,w=60129,x=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;a=j("react.portal"),o=j("react.fragment"),l=j("react.strict_mode"),u=j("react.profiler"),c=j("react.provider"),h=j("react.context"),d=j("react.forward_ref"),p=j("react.suspense"),f=j("react.suspense_list"),m=j("react.memo"),v=j("react.lazy"),g=j("react.block"),y=j("react.fundamental"),b=j("react.scope"),w=j("react.debug_trace_mode"),x=j("react.legacy_hidden")}function k(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case o:return"Fragment";case a:return"Portal";case u:return"Profiler";case l:return"StrictMode";case p:return"Suspense";case f:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case h:return(e.displayName||"Context")+".Consumer";case c:return(e._context.displayName||"Context")+".Provider";case d:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case m:return k(e.type);case g:return k(e._render);case v:t=e._payload,e=e._init;try{return k(e(t))}catch(n){}}return null}var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C={};function S(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var N=new Uint16Array(16),E=0;15>E;E++)N[E]=E+1;N[15]=0;var A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P=Object.prototype.hasOwnProperty,O={},I={};function T(e){return!!P.call(I,e)||!P.call(O,e)&&(A.test(e)?I[e]=!0:(O[e]=!0,!1))}function U(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){R[e]=new U(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];R[t]=new U(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){R[e]=new U(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){R[e]=new U(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){R[e]=new U(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){R[e]=new U(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){R[e]=new U(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){R[e]=new U(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){R[e]=new U(e,5,!1,e.toLowerCase(),null,!1,!1)}));var L=/[\-:]([a-z])/g;function V(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(L,V);R[t]=new U(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(L,V);R[t]=new U(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(L,V);R[t]=new U(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){R[e]=new U(e,1,!1,e.toLowerCase(),null,!1,!1)})),R.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){R[e]=new U(e,1,!1,e.toLowerCase(),null,!0,!0)}));var F=/["'&<>]/;function q(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=F.exec(e);if(t){var n,i="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(i+=e.substring(r,n)),r=n+1,i+=t}e=r!==n?i+e.substring(r,n):i}return e}function D(e,t){var n,i=R.hasOwnProperty(e)?R[e]:null;return(n="style"!==e)&&(n=null!==i?0===i.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),n||function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,i,!1)?"":null!==i?(e=i.attributeName,3===(n=i.type)||4===n&&!0===t?e+'=""':(i.sanitizeURL&&(t=""+t),e+'="'+q(t)+'"')):T(e)?e+'="'+q(t)+'"':""}var z="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},B=null,M=null,W=null,H=!1,Z=!1,$=null,Q=0;function K(){if(null===B)throw Error(s(321));return B}function G(){if(0<Q)throw Error(s(312));return{memoizedState:null,queue:null,next:null}}function X(){return null===W?null===M?(H=!1,M=W=G()):(H=!0,W=M):null===W.next?(H=!1,W=W.next=G()):(H=!0,W=W.next),W}function J(e,t,n,i){for(;Z;)Z=!1,Q+=1,W=null,n=e(t,i);return Y(),n}function Y(){B=null,Z=!1,M=null,Q=0,W=$=null}function ee(e,t){return"function"===typeof t?t(e):t}function te(e,t,n){if(B=K(),W=X(),H){var i=W.queue;if(t=i.dispatch,null!==$&&void 0!==(n=$.get(i))){$.delete(i),i=W.memoizedState;do{i=e(i,n.action),n=n.next}while(null!==n);return W.memoizedState=i,[i,t]}return[W.memoizedState,t]}return e=e===ee?"function"===typeof t?t():t:void 0!==n?n(t):t,W.memoizedState=e,e=(e=W.queue={last:null,dispatch:null}).dispatch=ie.bind(null,B,e),[W.memoizedState,e]}function ne(e,t){if(B=K(),t=void 0===t?null:t,null!==(W=X())){var n=W.memoizedState;if(null!==n&&null!==t){var i=n[1];e:if(null===i)i=!1;else{for(var r=0;r<i.length&&r<t.length;r++)if(!z(t[r],i[r])){i=!1;break e}i=!0}if(i)return n[0]}}return e=e(),W.memoizedState=[e,t],e}function ie(e,t,n){if(!(25>Q))throw Error(s(301));if(e===B)if(Z=!0,e={action:n,next:null},null===$&&($=new Map),void 0===(n=$.get(t)))$.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function re(){}var se=null,ae={readContext:function(e){var t=se.threadID;return S(e,t),e[t]},useContext:function(e){K();var t=se.threadID;return S(e,t),e[t]},useMemo:ne,useReducer:te,useRef:function(e){B=K();var t=(W=X()).memoizedState;return null===t?(e={current:e},W.memoizedState=e):t},useState:function(e){return te(ee,e)},useLayoutEffect:function(){},useCallback:function(e,t){return ne((function(){return e}),t)},useImperativeHandle:re,useEffect:re,useDebugValue:re,useDeferredValue:function(e){return K(),e},useTransition:function(){return K(),[function(e){e()},!1]},useOpaqueIdentifier:function(){return(se.identifierPrefix||"")+"R:"+(se.uniqueID++).toString(36)},useMutableSource:function(e,t){return K(),t(e._source)}},oe="http://www.w3.org/1999/xhtml";function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ue={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ce=i({menuitem:!0},ue),he={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];Object.keys(he).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var pe=/([A-Z])/g,fe=/^ms-/,me=r.Children.toArray,ve=_.ReactCurrentDispatcher,ge={listing:!0,pre:!0,textarea:!0},ye=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,be={},we={};var xe=Object.prototype.hasOwnProperty,je={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function ke(e,t){if(void 0===e)throw Error(s(152,k(t)||"Component"))}function _e(e,t,n){function a(r,a){var o=a.prototype&&a.prototype.isReactComponent,l=function(e,t,n,i){if(i&&"object"===typeof(i=e.contextType)&&null!==i)return S(i,n),i[n];if(e=e.contextTypes){for(var r in n={},e)n[r]=t[r];t=n}else t=C;return t}(a,t,n,o),u=[],c=!1,h={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===u)return null},enqueueReplaceState:function(e,t){c=!0,u=[t]},enqueueSetState:function(e,t){if(null===u)return null;u.push(t)}};if(o){if(o=new a(r.props,l,h),"function"===typeof a.getDerivedStateFromProps){var d=a.getDerivedStateFromProps.call(null,r.props,o.state);null!=d&&(o.state=i({},o.state,d))}}else if(B={},o=a(r.props,l,h),null==(o=J(a,r.props,o,l))||null==o.render)return void ke(e=o,a);if(o.props=r.props,o.context=l,o.updater=h,void 0===(h=o.state)&&(o.state=h=null),"function"===typeof o.UNSAFE_componentWillMount||"function"===typeof o.componentWillMount)if("function"===typeof o.componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&o.UNSAFE_componentWillMount(),u.length){h=u;var p=c;if(u=null,c=!1,p&&1===h.length)o.state=h[0];else{d=p?h[0]:o.state;var f=!0;for(p=p?1:0;p<h.length;p++){var m=h[p];null!=(m="function"===typeof m?m.call(o,d,r.props,l):m)&&(f?(f=!1,d=i({},d,m)):i(d,m))}o.state=d}}else u=null;if(ke(e=o.render(),a),"function"===typeof o.getChildContext&&"object"===typeof(r=a.childContextTypes)){var v=o.getChildContext();for(var g in v)if(!(g in r))throw Error(s(108,k(a)||"Unknown",g))}v&&(t=i({},t,v))}for(;r.isValidElement(e);){var o=e,l=o.type;if("function"!==typeof l)break;a(o,l)}return{child:e,context:t}}var Ce=function(){function e(e,t,n){r.isValidElement(e)?e.type!==o?e=[e]:(e=e.props.children,e=r.isValidElement(e)?[e]:me(e)):e=me(e),e={type:null,domNamespace:oe,children:e,childIndex:0,context:C,footer:""};var i=N[0];if(0===i){var a=N,l=2*(i=a.length);if(!(65536>=l))throw Error(s(304));var u=new Uint16Array(l);for(u.set(a),(N=u)[0]=i+1,a=i;a<l-1;a++)N[a]=a+1;N[l-1]=0}else N[0]=N[i];this.threadID=i,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=n&&n.identifierPrefix||""}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;N[e]=N[0],N[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,i=this.threadID;S(n,i);var r=n[i];this.contextStack[t]=n,this.contextValueStack[t]=r,n[i]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=se;se=this;var n=ve.current;ve.current=ae;try{for(var i=[""],r=!1;i[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;N[a]=N[0],N[0]=a;break}var o=this.stack[this.stack.length-1];if(r||o.childIndex>=o.children.length){var l=o.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===o.type)this.currentSelectValue=null;else if(null!=o.type&&null!=o.type.type&&o.type.type.$$typeof===c)this.popProvider(o.type);else if(o.type===p){this.suspenseDepth--;var u=i.pop();if(r){r=!1;var h=o.fallbackFrame;if(!h)throw Error(s(303));this.stack.push(h),i[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}i[this.suspenseDepth]+=u}i[this.suspenseDepth]+=l}else{var d=o.children[o.childIndex++],f="";try{f+=this.render(d,o.context,o.domNamespace)}catch(m){if(null!=m&&"function"===typeof m.then)throw Error(s(294));throw m}i.length<=this.suspenseDepth&&i.push(""),i[this.suspenseDepth]+=f}}return i[0]}finally{ve.current=n,se=t,Y()}},t.render=function(e,t,n){if("string"===typeof e||"number"===typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?q(n):this.previousWasTextNode?"\x3c!-- --\x3e"+q(n):(this.previousWasTextNode=!0,q(n));if(e=(t=_e(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!r.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((n=e.$$typeof)===a)throw Error(s(257));throw Error(s(258,n.toString()))}return e=me(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}var g=e.type;if("string"===typeof g)return this.renderDOM(e,t,n);switch(g){case x:case w:case l:case u:case f:case o:return e=me(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case p:throw Error(s(294));case b:throw Error(s(343))}if("object"===typeof g&&null!==g)switch(g.$$typeof){case d:B={};var j=g.render(e.props,e.ref);return j=J(g.render,e.props,j,e.ref),j=me(j),this.stack.push({type:null,domNamespace:n,children:j,childIndex:0,context:t,footer:""}),"";case m:return e=[r.createElement(g.type,i({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case c:return n={type:e,domNamespace:n,children:g=me(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case h:g=e.type,j=e.props;var k=this.threadID;return S(g,k),g=me(j.children(g[k])),this.stack.push({type:e,domNamespace:n,children:g,childIndex:0,context:t,footer:""}),"";case y:throw Error(s(338));case v:return g=(j=(g=e.type)._init)(g._payload),e=[r.createElement(g,i({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}throw Error(s(130,null==g?g:typeof g,""))},t.renderDOM=function(e,t,n){var a=e.type.toLowerCase();if(n===oe&&le(a),!be.hasOwnProperty(a)){if(!ye.test(a))throw Error(s(65,a));be[a]=!0}var o=e.props;if("input"===a)o=i({type:void 0},o,{defaultChecked:void 0,defaultValue:void 0,value:null!=o.value?o.value:o.defaultValue,checked:null!=o.checked?o.checked:o.defaultChecked});else if("textarea"===a){var l=o.value;if(null==l){l=o.defaultValue;var u=o.children;if(null!=u){if(null!=l)throw Error(s(92));if(Array.isArray(u)){if(!(1>=u.length))throw Error(s(93));u=u[0]}l=""+u}null==l&&(l="")}o=i({},o,{value:void 0,children:""+l})}else if("select"===a)this.currentSelectValue=null!=o.value?o.value:o.defaultValue,o=i({},o,{value:void 0});else if("option"===a){u=this.currentSelectValue;var c=function(e){if(void 0===e||null===e)return e;var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(o.children);if(null!=u){var h=null!=o.value?o.value+"":c;if(l=!1,Array.isArray(u)){for(var d=0;d<u.length;d++)if(""+u[d]===h){l=!0;break}}else l=""+u===h;o=i({selected:void 0,children:void 0},o,{selected:l,children:c})}}if(l=o){if(ce[a]&&(null!=l.children||null!=l.dangerouslySetInnerHTML))throw Error(s(137,a));if(null!=l.dangerouslySetInnerHTML){if(null!=l.children)throw Error(s(60));if("object"!==typeof l.dangerouslySetInnerHTML||!("__html"in l.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=l.style&&"object"!==typeof l.style)throw Error(s(62))}l=o,u=this.makeStaticMarkup,c=1===this.stack.length,h="<"+e.type;e:if(-1===a.indexOf("-"))d="string"===typeof l.is;else switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":d=!1;break e;default:d=!0}for(x in l)if(xe.call(l,x)){var p=l[x];if(null!=p){if("style"===x){var f=void 0,m="",v="";for(f in p)if(p.hasOwnProperty(f)){var g=0===f.indexOf("--"),y=p[f];if(null!=y){if(g)var b=f;else if(b=f,we.hasOwnProperty(b))b=we[b];else{var w=b.replace(pe,"-$1").toLowerCase().replace(fe,"-ms-");b=we[b]=w}m+=v+b+":",v=f,m+=g=null==y||"boolean"===typeof y||""===y?"":g||"number"!==typeof y||0===y||he.hasOwnProperty(v)&&he[v]?(""+y).trim():y+"px",v=";"}}p=m||null}f=null,d?je.hasOwnProperty(x)||(f=T(f=x)&&null!=p?f+'="'+q(p)+'"':""):f=D(x,p),f&&(h+=" "+f)}}u||c&&(h+=' data-reactroot=""');var x=h;l="",ue.hasOwnProperty(a)?x+="/>":(x+=">",l="</"+e.type+">");e:{if(null!=(u=o.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break e}}else if("string"===typeof(u=o.children)||"number"===typeof u){u=q(u);break e}u=null}return null!=u?(o=[],ge.hasOwnProperty(a)&&"\n"===u.charAt(0)&&(x+="\n"),x+=u):o=me(o.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?le(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:a,children:o,childIndex:0,context:t,footer:l}),this.previousWasTextNode=!1,x},e}();t.renderToNodeStream=function(){throw Error(s(207))},t.renderToStaticMarkup=function(e,t){e=new Ce(e,!0,t);try{return e.read(1/0)}finally{e.destroy()}},t.renderToStaticNodeStream=function(){throw Error(s(208))},t.renderToString=function(e,t){e=new Ce(e,!1,t);try{return e.read(1/0)}finally{e.destroy()}},t.version="17.0.2"},463:(e,t,n)=>{"use strict";var i=n(791),r=n(725),s=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(a(227));var o=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function v(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!p.call(m,e)||!p.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=60103,k=60106,_=60107,C=60108,S=60114,N=60109,E=60110,A=60112,P=60113,O=60120,I=60115,T=60116,U=60121,R=60128,L=60129,V=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var q=Symbol.for;j=q("react.element"),k=q("react.portal"),_=q("react.fragment"),C=q("react.strict_mode"),S=q("react.profiler"),N=q("react.provider"),E=q("react.context"),A=q("react.forward_ref"),P=q("react.suspense"),O=q("react.suspense_list"),I=q("react.memo"),T=q("react.lazy"),U=q("react.block"),q("react.scope"),R=q("react.opaque.id"),L=q("react.debug_trace_mode"),V=q("react.offscreen"),F=q("react.legacy_hidden")}var D,z="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function M(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var i=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){i=l}e.call(t.prototype)}else{try{throw Error()}catch(l){i=l}e()}}catch(l){if(l&&i&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o])return"\n"+r[a].replace(" at new "," at ")}while(1<=a&&0<=o);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function Z(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case S:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case I:return $(e.type);case U:return $(e._render);case T:t=e._payload,e=e._init;try{return $(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=K(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,n):t.hasOwnProperty("defaultValue")&&re(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function re(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ue(e,t){var n=Q(t.value),i=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,me,ve=(me=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=we(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(ye).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var je=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(e,t){if(t){if(je[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ne=null,Ee=null;function Ae(e){if(e=nr(e)){if("function"!==typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=rr(t),Se(e.stateNode,e.type,t))}}function Pe(e){Ne?Ee?Ee.push(e):Ee=[e]:Ne=e}function Oe(){if(Ne){var e=Ne,t=Ee;if(Ee=Ne=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ie(e,t){return e(t)}function Te(e,t,n,i,r){return e(t,n,i,r)}function Ue(){}var Re=Ie,Le=!1,Ve=!1;function Fe(){null===Ne&&null===Ee||(Ue(),Oe())}function qe(e,t){var n=e.stateNode;if(null===n)return null;var i=rr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){De=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){De=!1}function Be(e,t,n,i,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,We=null,He=!1,Ze=null,$e={onError:function(e){Me=!0,We=e}};function Qe(e,t,n,i,r,s,a,o,l){Me=!1,We=null,Be.apply($e,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ke(e)!==e)throw Error(a(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Xe(r),e;if(s===i)return Xe(r),t;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ye(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,it,rt=!1,st=[],at=null,ot=null,lt=null,ut=new Map,ct=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,i,r){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[i]}}function ft(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":ot=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function mt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e=pt(t,n,i,r,s),null!==t&&(null!==(t=nr(t))&&tt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function vt(e){var t=tr(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=nr(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(rt=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=nr(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==at&&gt(at)&&(at=null),null!==ot&&gt(ot)&&(ot=null),null!==lt&&gt(lt)&&(lt=null),ut.forEach(yt),ct.forEach(yt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,bt)))}function xt(e){function t(t){return wt(t,e)}if(0<st.length){wt(st[0],e);for(var n=1;n<st.length;n++){var i=st[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==at&&wt(at,e),null!==ot&&wt(ot,e),null!==lt&&wt(lt,e),ut.forEach(t),ct.forEach(t),n=0;n<ht.length;n++)(i=ht[n]).blockedOn===e&&(i.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)vt(n),null===n.blockedOn&&ht.shift()}function jt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kt={animationend:jt("Animation","AnimationEnd"),animationiteration:jt("Animation","AnimationIteration"),animationstart:jt("Animation","AnimationStart"),transitionend:jt("Transition","TransitionEnd")},_t={},Ct={};function St(e){if(_t[e])return _t[e];if(!kt[e])return e;var t,n=kt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ct)return _t[e]=n[t];return e}h&&(Ct=document.createElement("div").style,"AnimationEvent"in window||(delete kt.animationend.animation,delete kt.animationiteration.animation,delete kt.animationstart.animation),"TransitionEvent"in window||delete kt.transitionend.transition);var Nt=St("animationend"),Et=St("animationiteration"),At=St("animationstart"),Pt=St("transitionend"),Ot=new Map,It=new Map,Tt=["abort","abort",Nt,"animationEnd",Et,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Ut(e,t){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),It.set(i,t),Ot.set(i,r),u(r,[i])}}(0,s.unstable_now)();var Rt=8;function Lt(e){if(0!==(1&e))return Rt=15,1;if(0!==(2&e))return Rt=14,2;if(0!==(4&e))return Rt=13,4;var t=24&e;return 0!==t?(Rt=12,t):0!==(32&e)?(Rt=11,32):0!==(t=192&e)?(Rt=10,t):0!==(256&e)?(Rt=9,256):0!==(t=3584&e)?(Rt=8,t):0!==(4096&e)?(Rt=7,4096):0!==(t=4186112&e)?(Rt=6,t):0!==(t=62914560&e)?(Rt=5,t):67108864&e?(Rt=4,67108864):0!==(134217728&e)?(Rt=3,134217728):0!==(t=805306368&e)?(Rt=2,t):0!==(1073741824&e)?(Rt=1,1073741824):(Rt=8,e)}function Vt(e,t){var n=e.pendingLanes;if(0===n)return Rt=0;var i=0,r=0,s=e.expiredLanes,a=e.suspendedLanes,o=e.pingedLanes;if(0!==s)i=s,r=Rt=15;else if(0!==(s=134217727&n)){var l=s&~a;0!==l?(i=Lt(l),r=Rt):0!==(o&=s)&&(i=Lt(o),r=Rt)}else 0!==(s=n&~a)?(i=Lt(s),r=Rt):0!==o&&(i=Lt(o),r=Rt);if(0===i)return 0;if(i=n&((0>(i=31-Mt(i))?0:1<<i)<<1)-1,0!==t&&t!==i&&0===(t&a)){if(Lt(t),r<=Rt)return t;Rt=r}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-Mt(t)),i|=e[n],t&=~r;return i}function Ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function qt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Dt(24&~t))?qt(10,t):e;case 10:return 0===(e=Dt(192&~t))?qt(8,t):e;case 8:return 0===(e=Dt(3584&~t))&&(0===(e=Dt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Dt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Dt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,(e=e.eventTimes)[t=31-Mt(t)]=n}var Mt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Ht|0)|0},Wt=Math.log,Ht=Math.LN2;var Zt=s.unstable_UserBlockingPriority,$t=s.unstable_runWithPriority,Qt=!0;function Kt(e,t,n,i){Le||Ue();var r=Xt,s=Le;Le=!0;try{Te(r,e,t,n,i)}finally{(Le=s)||Fe()}}function Gt(e,t,n,i){$t(Zt,Xt.bind(null,e,t,n,i))}function Xt(e,t,n,i){var r;if(Qt)if((r=0===(4&t))&&0<st.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,i),st.push(e);else{var s=Jt(e,t,n,i);if(null===s)r&&ft(e,i);else{if(r){if(-1<dt.indexOf(e))return e=pt(s,e,t,n,i),void st.push(e);if(function(e,t,n,i,r){switch(t){case"focusin":return at=mt(at,e,t,n,i,r),!0;case"dragenter":return ot=mt(ot,e,t,n,i,r),!0;case"mouseover":return lt=mt(lt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return ut.set(s,mt(ut.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ct.set(s,mt(ct.get(s)||null,e,t,n,i,r)),!0}return!1}(s,e,t,n,i))return;ft(e,i)}Ui(e,t,i,null,n)}}}function Jt(e,t,n,i){var r=Ce(i);if(null!==(r=tr(r))){var s=Ke(r);if(null===s)r=null;else{var a=s.tag;if(13===a){if(null!==(r=Ge(s)))return r;r=null}else if(3===a){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ui(e,t,i,r,n),null}var Yt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,i=n.length,r="value"in Yt?Yt.value:Yt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return tn=r.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function an(){return!1}function on(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?sn:an,this.isPropagationStopped=an,this}return r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var ln,un,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(hn),pn=r({},hn,{view:0,detail:0}),fn=on(pn),mn=r({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(ln=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=ln=0,cn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=on(mn),gn=on(r({},mn,{dataTransfer:0})),yn=on(r({},pn,{relatedTarget:0})),bn=on(r({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=r({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=on(wn),jn=on(r({},hn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Nn(){return Sn}var En=r({},pn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(En),Pn=on(r({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=on(r({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),In=on(r({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=r({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Un=on(Tn),Rn=[9,13,27,32],Ln=h&&"CompositionEvent"in window,Vn=null;h&&"documentMode"in document&&(Vn=document.documentMode);var Fn=h&&"TextEvent"in window&&!Vn,qn=h&&(!Ln||Vn&&8<Vn&&11>=Vn),Dn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function $n(e,t,n,i){Pe(i),0<(t=Li(t,"onChange")).length&&(n=new dn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Qn=null,Kn=null;function Gn(e){Ei(e,0)}function Xn(e){if(X(ir(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(h){var ei;if(h){var ti="oninput"in document;if(!ti){var ni=document.createElement("div");ni.setAttribute("oninput","return;"),ti="function"===typeof ni.oninput}ei=ti}else ei=!1;Yn=ei&&(!document.documentMode||9<document.documentMode)}function ii(){Qn&&(Qn.detachEvent("onpropertychange",ri),Kn=Qn=null)}function ri(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];if($n(t,Kn,e,Ce(e)),e=Gn,Le)e(t);else{Le=!0;try{Ie(e,t)}finally{Le=!1,Fe()}}}}function si(e,t,n){"focusin"===e?(ii(),Kn=n,(Qn=t).attachEvent("onpropertychange",ri)):"focusout"===e&&ii()}function ai(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function oi(e,t){if("click"===e)return Xn(t)}function li(e,t){if("input"===e||"change"===e)return Xn(t)}var ui="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ci=Object.prototype.hasOwnProperty;function hi(e,t){if(ui(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!ci.call(t,n[i])||!ui(e[n[i]],t[n[i]]))return!1;return!0}function di(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pi(e,t){var n,i=di(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=di(i)}}function fi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mi(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gi=h&&"documentMode"in document&&11>=document.documentMode,yi=null,bi=null,wi=null,xi=!1;function ji(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==yi||yi!==J(i)||("selectionStart"in(i=yi)&&vi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},wi&&hi(wi,i)||(wi=i,0<(i=Li(bi,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=yi)))}Ut("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ut("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ut(Tt,2);for(var ki="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_i=0;_i<ki.length;_i++)It.set(ki[_i],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Si=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ci));function Ni(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,o,l,u){if(Qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var c=We;Me=!1,We=null,He||(He=!0,Ze=c)}}(i,t,void 0,e),e.currentTarget=null}function Ei(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Ni(r,o,u),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Ni(r,o,u),s=l}}}if(He)throw e=Ze,He=!1,Ze=null,e}function Ai(e,t){var n=sr(t),i=e+"__bubble";n.has(i)||(Ti(t,e,2,!1),n.add(i))}var Pi="_reactListening"+Math.random().toString(36).slice(2);function Oi(e){e[Pi]||(e[Pi]=!0,o.forEach((function(t){Si.has(t)||Ii(t,!1,e,null),Ii(t,!0,e,null)})))}function Ii(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==i&&!t&&Si.has(e)){if("scroll"!==e)return;r|=2,s=i}var a=sr(s),o=e+"__"+(t?"capture":"bubble");a.has(o)||(t&&(r|=4),Ti(s,e,r,t),a.add(o))}function Ti(e,t,n,i){var r=It.get(t);switch(void 0===r?2:r){case 0:r=Kt;break;case 1:r=Gt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ui(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=tr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}!function(e,t,n){if(Ve)return e(t,n);Ve=!0;try{return Re(e,t,n)}finally{Ve=!1,Fe()}}((function(){var i=s,r=Ce(n),a=[];e:{var o=Ot.get(e);if(void 0!==o){var l=dn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Nt:case Et:case At:l=bn;break;case Pt:l=In;break;case"scroll":l=fn;break;case"wheel":l=Un;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=qe(f,d))&&c.push(Ri(f,m,p)))),h)break;f=f.return}0<c.length&&(o=new l(o,u,null,n,r),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!tr(u)&&!u[Yi])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?tr(u):null)&&(u!==(h=Ke(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=vn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Pn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?o:ir(l),p=null==u?o:ir(u),(o=new c(m,f+"leave",l,n,r)).target=h,o.relatedTarget=p,m=null,tr(r)===i&&((c=new c(d,f+"enter",u,n,r)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,f=0,p=c=l;p;p=Vi(p))f++;for(p=0,m=d;m;m=Vi(m))p++;for(;0<f-p;)c=Vi(c),f--;for(;0<p-f;)d=Vi(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=Vi(c),d=Vi(d)}c=null}else c=null;null!==l&&Fi(a,o,l,c,!1),null!==u&&null!==h&&Fi(a,h,u,c,!0)}if("select"===(l=(o=i?ir(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var v=Jn;else if(Zn(o))if(Yn)v=li;else{v=ai;var g=si}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(v=oi);switch(v&&(v=v(e,i))?$n(a,v,n,r):(g&&g(e,o,i),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&re(o,"number",o.value)),g=i?ir(i):window,e){case"focusin":(Zn(g)||"true"===g.contentEditable)&&(yi=g,bi=i,wi=null);break;case"focusout":wi=bi=yi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,ji(a,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":ji(a,n,r)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(qn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=nn()):(en="value"in(Yt=r)?Yt.value:Yt.textContent,Wn=!0)),0<(g=Li(i,b)).length&&(b=new jn(b,e,null,n,r),a.push({event:b,listeners:g}),y?b.data=y:null!==(y=Mn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(zn=!0,Dn);case"textInput":return(e=t.data)===Dn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=nn(),tn=en=Yt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Li(i,"onBeforeInput")).length&&(r=new jn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Ei(a,t)}))}function Ri(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Li(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=qe(e,n))&&i.unshift(Ri(e,s,r)),null!=(s=qe(e,t))&&i.push(Ri(e,s,r))),e=e.return}return i}function Vi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Fi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==u&&(o=u,r?null!=(l=qe(n,s))&&a.unshift(Ri(n,l,o)):r||null!=(l=qe(n,s))&&a.push(Ri(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function qi(){}var Di=null,zi=null;function Bi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Mi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wi="function"===typeof setTimeout?setTimeout:void 0,Hi="function"===typeof clearTimeout?clearTimeout:void 0;function Zi(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function $i(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Ki=0;var Gi=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Gi,Ji="__reactProps$"+Gi,Yi="__reactContainer$"+Gi,er="__reactEvents$"+Gi;function tr(e){var t=e[Xi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yi]||n[Xi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qi(e);null!==e;){if(n=e[Xi])return n;e=Qi(e)}return t}n=(e=n).parentNode}return null}function nr(e){return!(e=e[Xi]||e[Yi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ir(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function rr(e){return e[Ji]||null}function sr(e){var t=e[er];return void 0===t&&(t=e[er]=new Set),t}var ar=[],or=-1;function lr(e){return{current:e}}function ur(e){0>or||(e.current=ar[or],ar[or]=null,or--)}function cr(e,t){or++,ar[or]=e.current,e.current=t}var hr={},dr=lr(hr),pr=lr(!1),fr=hr;function mr(e,t){var n=e.type.contextTypes;if(!n)return hr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gr(){ur(pr),ur(dr)}function yr(e,t,n){if(dr.current!==hr)throw Error(a(168));cr(dr,t),cr(pr,n)}function br(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in e))throw Error(a(108,$(t)||"Unknown",s));return r({},n,i)}function wr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hr,fr=dr.current,cr(dr,e),cr(pr,pr.current),!0}function xr(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=br(e,t,fr),i.__reactInternalMemoizedMergedChildContext=e,ur(pr),ur(dr),cr(dr,e)):ur(pr),cr(pr,n)}var jr=null,kr=null,_r=s.unstable_runWithPriority,Cr=s.unstable_scheduleCallback,Sr=s.unstable_cancelCallback,Nr=s.unstable_shouldYield,Er=s.unstable_requestPaint,Ar=s.unstable_now,Pr=s.unstable_getCurrentPriorityLevel,Or=s.unstable_ImmediatePriority,Ir=s.unstable_UserBlockingPriority,Tr=s.unstable_NormalPriority,Ur=s.unstable_LowPriority,Rr=s.unstable_IdlePriority,Lr={},Vr=void 0!==Er?Er:function(){},Fr=null,qr=null,Dr=!1,zr=Ar(),Br=1e4>zr?Ar:function(){return Ar()-zr};function Mr(){switch(Pr()){case Or:return 99;case Ir:return 98;case Tr:return 97;case Ur:return 96;case Rr:return 95;default:throw Error(a(332))}}function Wr(e){switch(e){case 99:return Or;case 98:return Ir;case 97:return Tr;case 96:return Ur;case 95:return Rr;default:throw Error(a(332))}}function Hr(e,t){return e=Wr(e),_r(e,t)}function Zr(e,t,n){return e=Wr(e),Cr(e,t,n)}function $r(){if(null!==qr){var e=qr;qr=null,Sr(e)}Qr()}function Qr(){if(!Dr&&null!==Fr){Dr=!0;var e=0;try{var t=Fr;Hr(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fr=null}catch(n){throw null!==Fr&&(Fr=Fr.slice(e+1)),Cr(Or,$r),n}finally{Dr=!1}}}var Kr=x.ReactCurrentBatchConfig;function Gr(e,t){if(e&&e.defaultProps){for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xr=lr(null),Jr=null,Yr=null,es=null;function ts(){es=Yr=Jr=null}function ns(e){var t=Xr.current;ur(Xr),e.type._context._currentValue=t}function is(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function rs(e,t){Jr=e,es=Yr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ra=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Yr){if(null===Jr)throw Error(a(308));Yr=t,Jr.dependencies={lanes:0,firstContext:t,responders:null}}else Yr=Yr.next=t;return e._currentValue}var as=!1;function os(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cs(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,i){var s=e.updateQueue;as=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var u=l,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==o&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==a){for(d=s.baseState,o=0,h=c=u=null;;){l=a.lane;var p=a.eventTime;if((i&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(l=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,l);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(l="function"===typeof(f=m.payload)?f.call(p,d,l):f)||void 0===l)break e;d=r({},d,l);break e;case 2:as=!0}}null!==a.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[a]:l.push(a))}else p={eventTime:p,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,u=d):h=h.next=p,o|=l;if(null===(a=a.next)){if(null===(l=s.shared.pending))break;a=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===h&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,zo|=o,e.lanes=o,e.memoizedState=d}}function ps(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var fs=(new i.Component).refs;function ms(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:r({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var vs={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=dl(),r=pl(e),s=us(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),cs(e,s),fl(e,r,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=dl(),r=pl(e),s=us(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),cs(e,s),fl(e,r,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dl(),i=pl(e),r=us(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),cs(e,r),fl(e,i,n)}};function gs(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!hi(n,i)||!hi(r,s))}function ys(e,t,n){var i=!1,r=hr,s=t.contextType;return"object"===typeof s&&null!==s?s=ss(s):(r=vr(t)?fr:dr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?mr(e,r):hr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vs,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function bs(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&vs.enqueueReplaceState(t,t.state,null)}function ws(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=fs,os(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=ss(s):(s=vr(t)?fr:dr.current,r.context=mr(e,s)),ds(e,n,r,i),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&vs.enqueueReplaceState(r,r.state,null),ds(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4)}var xs=Array.isArray;function js(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=i.refs;t===fs&&(t=i.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ks(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function _s(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Zl(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags=2,n):i:(t.flags=2,n):n}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Gl(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=js(e,t,n),i.return=e,i):((i=$l(n.type,n.key,n.props,null,e.mode,i)).ref=js(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xl(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Ql(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Gl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(n=$l(t.type,t.key,t.props,null,e.mode,n)).ref=js(e,null,t),n.return=e,n;case k:return(t=Xl(t,e.mode,n)).return=e,t}if(xs(t)||B(t))return(t=Ql(t,e.mode,n,null)).return=e,t;ks(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return n.key===r?n.type===_?h(e,t,n.props.children,i,r):u(e,t,n,i):null;case k:return n.key===r?c(e,t,n,i):null}if(xs(n)||B(n))return null!==r?null:h(e,t,n,i,null);ks(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case j:return e=e.get(null===i.key?n:i.key)||null,i.type===_?h(t,e,i.props.children,r,i.key):u(t,e,i,r);case k:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(xs(i)||B(i))return h(t,e=e.get(n)||null,i,r,null);ks(t,i)}return null}function m(r,a,o,l){for(var u=null,c=null,h=a,m=a=0,v=null;null!==h&&m<o.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=p(r,h,o[m],l);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(r,h),a=s(g,a,m),null===c?u=g:c.sibling=g,c=g,h=v}if(m===o.length)return n(r,h),u;if(null===h){for(;m<o.length;m++)null!==(h=d(r,o[m],l))&&(a=s(h,a,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=i(r,h);m<o.length;m++)null!==(v=f(h,r,m,o[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=s(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(r,e)})),u}function v(r,o,l,u){var c=B(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=o,v=o=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(r,m,y.value,u);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(r,m),o=s(b,o,v),null===h?c=b:h.sibling=b,h=b,m=g}if(y.done)return n(r,m),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=d(r,y.value,u))&&(o=s(y,o,v),null===h?c=y:h.sibling=y,h=y);return c}for(m=i(r,m);!y.done;v++,y=l.next())null!==(y=f(m,r,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),o=s(y,o,v),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(r,e)})),c}return function(e,i,s,l){var u="object"===typeof s&&null!==s&&s.type===_&&null===s.key;u&&(s=s.props.children);var c="object"===typeof s&&null!==s;if(c)switch(s.$$typeof){case j:e:{for(c=s.key,u=i;null!==u;){if(u.key===c){if(7===u.tag){if(s.type===_){n(e,u.sibling),(i=r(u,s.props.children)).return=e,e=i;break e}}else if(u.elementType===s.type){n(e,u.sibling),(i=r(u,s.props)).ref=js(e,u,s),i.return=e,e=i;break e}n(e,u);break}t(e,u),u=u.sibling}s.type===_?((i=Ql(s.props.children,e.mode,l,s.key)).return=e,e=i):((l=$l(s.type,s.key,s.props,null,e.mode,l)).ref=js(e,i,s),l.return=e,e=l)}return o(e);case k:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(e,i.sibling),(i=r(i,s.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Xl(s,e.mode,l)).return=e,e=i}return o(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,s)).return=e,e=i):(n(e,i),(i=Gl(s,e.mode,l)).return=e,e=i),o(e);if(xs(s))return m(e,i,s,l);if(B(s))return v(e,i,s,l);if(c&&ks(e,s),"undefined"===typeof s&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,$(e.type)||"Component"))}return n(e,i)}}var Cs=_s(!0),Ss=_s(!1),Ns={},Es=lr(Ns),As=lr(Ns),Ps=lr(Ns);function Os(e){if(e===Ns)throw Error(a(174));return e}function Is(e,t){switch(cr(Ps,t),cr(As,e),cr(Es,Ns),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ur(Es),cr(Es,t)}function Ts(){ur(Es),ur(As),ur(Ps)}function Us(e){Os(Ps.current);var t=Os(Es.current),n=pe(t,e.type);t!==n&&(cr(As,e),cr(Es,n))}function Rs(e){As.current===e&&(ur(Es),ur(As))}var Ls=lr(0);function Vs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fs=null,qs=null,Ds=!1;function zs(e,t){var n=Wl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ms(e){if(Ds){var t=qs;if(t){var n=t;if(!Bs(e,t)){if(!(t=$i(n.nextSibling))||!Bs(e,t))return e.flags=-1025&e.flags|2,Ds=!1,void(Fs=e);zs(Fs,n)}Fs=e,qs=$i(t.firstChild)}else e.flags=-1025&e.flags|2,Ds=!1,Fs=e}}function Ws(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fs=e}function Hs(e){if(e!==Fs)return!1;if(!Ds)return Ws(e),Ds=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Mi(t,e.memoizedProps))for(t=qs;t;)zs(e,t),t=$i(t.nextSibling);if(Ws(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){qs=$i(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}qs=null}}else qs=Fs?$i(e.stateNode.nextSibling):null;return!0}function Zs(){qs=Fs=null,Ds=!1}var $s=[];function Qs(){for(var e=0;e<$s.length;e++)$s[e]._workInProgressVersionPrimary=null;$s.length=0}var Ks=x.ReactCurrentDispatcher,Gs=x.ReactCurrentBatchConfig,Xs=0,Js=null,Ys=null,ea=null,ta=!1,na=!1;function ia(){throw Error(a(321))}function ra(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ui(e[n],t[n]))return!1;return!0}function sa(e,t,n,i,r,s){if(Xs=s,Js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ks.current=null===e||null===e.memoizedState?Oa:Ia,e=n(i,r),na){s=0;do{if(na=!1,!(25>s))throw Error(a(301));s+=1,ea=Ys=null,t.updateQueue=null,Ks.current=Ta,e=n(i,r)}while(na)}if(Ks.current=Pa,t=null!==Ys&&null!==Ys.next,Xs=0,ea=Ys=Js=null,ta=!1,t)throw Error(a(300));return e}function aa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ea?Js.memoizedState=ea=e:ea=ea.next=e,ea}function oa(){if(null===Ys){var e=Js.alternate;e=null!==e?e.memoizedState:null}else e=Ys.next;var t=null===ea?Js.memoizedState:ea.next;if(null!==t)ea=t,Ys=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Ys=e).memoizedState,baseState:Ys.baseState,baseQueue:Ys.baseQueue,queue:Ys.queue,next:null},null===ea?Js.memoizedState=ea=e:ea=ea.next=e}return ea}function la(e,t){return"function"===typeof t?t(e):t}function ua(e){var t=oa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=Ys,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var l=o=s=null,u=r;do{var c=u.lane;if((Xs&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),i=u.eagerReducer===e?u.eagerState:e(i,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(o=l=h,s=i):l=l.next=h,Js.lanes|=c,zo|=c}u=u.next}while(null!==u&&u!==r);null===l?s=i:l.next=o,ui(i,t.memoizedState)||(Ra=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=l,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function ca(e){var t=oa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);ui(s,t.memoizedState)||(Ra=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function ha(e,t,n){var i=t._getVersion;i=i(t._source);var r=t._workInProgressVersionPrimary;if(null!==r?e=r===i:(e=e.mutableReadLanes,(e=(Xs&e)===e)&&(t._workInProgressVersionPrimary=i,$s.push(t))),e)return n(t._source);throw $s.push(t),Error(a(350))}function da(e,t,n,i){var r=To;if(null===r)throw Error(a(349));var s=t._getVersion,o=s(t._source),l=Ks.current,u=l.useState((function(){return ha(r,t,n)})),c=u[1],h=u[0];u=ea;var d=e.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var v=Js;return e.memoizedState={refs:p,source:t,subscribe:i},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var e=s(t._source);if(!ui(o,e)){e=n(t._source),ui(h,e)||(c(e),e=pl(v),r.mutableReadLanes|=e&r.pendingLanes),e=r.mutableReadLanes,r.entangledLanes|=e;for(var i=r.entanglements,a=e;0<a;){var l=31-Mt(a),u=1<<l;i[l]|=e,a&=~u}}}),[n,t,i]),l.useEffect((function(){return i(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var i=pl(v);r.mutableReadLanes|=i&r.pendingLanes}catch(s){n((function(){throw s}))}}))}),[t,i]),ui(f,n)&&ui(m,t)&&ui(d,i)||((e={pending:null,dispatch:null,lastRenderedReducer:la,lastRenderedState:h}).dispatch=c=Aa.bind(null,Js,e),u.queue=e,u.baseQueue=null,h=ha(r,t,n),u.memoizedState=u.baseState=h),h}function pa(e,t,n){return da(oa(),e,t,n)}function fa(e){var t=aa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:la,lastRenderedState:e}).dispatch=Aa.bind(null,Js,e),[t.memoizedState,e]}function ma(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Js.updateQueue)?(t={lastEffect:null},Js.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function va(e){return e={current:e},aa().memoizedState=e}function ga(){return oa().memoizedState}function ya(e,t,n,i){var r=aa();Js.flags|=e,r.memoizedState=ma(1|t,n,void 0,void 0===i?null:i)}function ba(e,t,n,i){var r=oa();i=void 0===i?null:i;var s=void 0;if(null!==Ys){var a=Ys.memoizedState;if(s=a.destroy,null!==i&&ra(i,a.deps))return void ma(t,n,s,i)}Js.flags|=e,r.memoizedState=ma(1|t,n,s,i)}function wa(e,t){return ya(516,4,e,t)}function xa(e,t){return ba(516,4,e,t)}function ja(e,t){return ba(4,2,e,t)}function ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _a(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ba(4,2,ka.bind(null,t,e),n)}function Ca(){}function Sa(e,t){var n=oa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ra(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Na(e,t){var n=oa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ra(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ea(e,t){var n=Mr();Hr(98>n?98:n,(function(){e(!0)})),Hr(97<n?97:n,(function(){var n=Gs.transition;Gs.transition=1;try{e(!1),t()}finally{Gs.transition=n}}))}function Aa(e,t,n){var i=dl(),r=pl(e),s={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?s.next=s:(s.next=a.next,a.next=s),t.pending=s,a=e.alternate,e===Js||null!==a&&a===Js)na=ta=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=a(o,n);if(s.eagerReducer=a,s.eagerState=l,ui(l,o))return}catch(u){}fl(e,r,i)}}var Pa={readContext:ss,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useMutableSource:ia,useOpaqueIdentifier:ia,unstable_isNewReconciler:!1},Oa={readContext:ss,useCallback:function(e,t){return aa().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,2,ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ya(4,2,e,t)},useMemo:function(e,t){var n=aa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=aa();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Aa.bind(null,Js,e),[i.memoizedState,e]},useRef:va,useState:fa,useDebugValue:Ca,useDeferredValue:function(e){var t=fa(e),n=t[0],i=t[1];return wa((function(){var t=Gs.transition;Gs.transition=1;try{i(e)}finally{Gs.transition=t}}),[e]),n},useTransition:function(){var e=fa(!1),t=e[0];return va(e=Ea.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var i=aa();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},da(i,e,t,n)},useOpaqueIdentifier:function(){if(Ds){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Ki++).toString(36))),Error(a(355))})),n=fa(t)[1];return 0===(2&Js.mode)&&(Js.flags|=516,ma(5,(function(){n("r:"+(Ki++).toString(36))}),void 0,null)),t}return fa(t="r:"+(Ki++).toString(36)),t},unstable_isNewReconciler:!1},Ia={readContext:ss,useCallback:Sa,useContext:ss,useEffect:xa,useImperativeHandle:_a,useLayoutEffect:ja,useMemo:Na,useReducer:ua,useRef:ga,useState:function(){return ua(la)},useDebugValue:Ca,useDeferredValue:function(e){var t=ua(la),n=t[0],i=t[1];return xa((function(){var t=Gs.transition;Gs.transition=1;try{i(e)}finally{Gs.transition=t}}),[e]),n},useTransition:function(){var e=ua(la)[0];return[ga().current,e]},useMutableSource:pa,useOpaqueIdentifier:function(){return ua(la)[0]},unstable_isNewReconciler:!1},Ta={readContext:ss,useCallback:Sa,useContext:ss,useEffect:xa,useImperativeHandle:_a,useLayoutEffect:ja,useMemo:Na,useReducer:ca,useRef:ga,useState:function(){return ca(la)},useDebugValue:Ca,useDeferredValue:function(e){var t=ca(la),n=t[0],i=t[1];return xa((function(){var t=Gs.transition;Gs.transition=1;try{i(e)}finally{Gs.transition=t}}),[e]),n},useTransition:function(){var e=ca(la)[0];return[ga().current,e]},useMutableSource:pa,useOpaqueIdentifier:function(){return ca(la)[0]},unstable_isNewReconciler:!1},Ua=x.ReactCurrentOwner,Ra=!1;function La(e,t,n,i){t.child=null===e?Ss(t,null,n,i):Cs(t,e.child,n,i)}function Va(e,t,n,i,r){n=n.render;var s=t.ref;return rs(t,r),i=sa(e,t,n,i,s,r),null===e||Ra?(t.flags|=1,La(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,ro(e,t,r))}function Fa(e,t,n,i,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Hl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$l(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,qa(e,t,a,i,r,s))}return a=e.child,0===(r&s)&&(r=a.memoizedProps,(n=null!==(n=n.compare)?n:hi)(r,i)&&e.ref===t.ref)?ro(e,t,s):(t.flags|=1,(e=Zl(a,i)).ref=t.ref,e.return=t,t.child=e)}function qa(e,t,n,i,r,s){if(null!==e&&hi(e.memoizedProps,i)&&e.ref===t.ref){if(Ra=!1,0===(s&r))return t.lanes=e.lanes,ro(e,t,s);0!==(16384&e.flags)&&(Ra=!0)}return Ba(e,t,n,i,s)}function Da(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},jl(t,n);else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},jl(t,e),null;t.memoizedState={baseLanes:0},jl(t,null!==s?s.baseLanes:n)}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,jl(t,i);return La(e,t,r,n),t.child}function za(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ba(e,t,n,i,r){var s=vr(n)?fr:dr.current;return s=mr(t,s),rs(t,r),n=sa(e,t,n,i,s,r),null===e||Ra?(t.flags|=1,La(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,ro(e,t,r))}function Ma(e,t,n,i,r){if(vr(n)){var s=!0;wr(t)}else s=!1;if(rs(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ys(t,n,i),ws(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=ss(u):u=mr(t,u=vr(n)?fr:dr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==u)&&bs(t,a,i,u),as=!1;var d=t.memoizedState;a.state=d,ds(t,i,a,r),l=t.memoizedState,o!==i||d!==l||pr.current||as?("function"===typeof c&&(ms(t,n,c,i),l=t.memoizedState),(o=as||gs(t,n,o,i,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4),i=!1)}else{a=t.stateNode,ls(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Gr(t.type,o),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ss(l):l=mr(t,l=vr(n)?fr:dr.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&bs(t,a,i,l),as=!1,d=t.memoizedState,a.state=d,ds(t,i,a,r);var f=t.memoizedState;o!==h||d!==f||pr.current||as?("function"===typeof p&&(ms(t,n,p,i),f=t.memoizedState),(u=as||gs(t,n,u,i,d,f,l))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),i=!1)}return Wa(e,t,n,i,s,r)}function Wa(e,t,n,i,r,s){za(e,t);var a=0!==(64&t.flags);if(!i&&!a)return r&&xr(t,n,!1),ro(e,t,s);i=t.stateNode,Ua.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=Cs(t,e.child,null,s),t.child=Cs(t,null,o,s)):La(e,t,o,s),t.memoizedState=i.state,r&&xr(t,n,!0),t.child}function Ha(e){var t=e.stateNode;t.pendingContext?yr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yr(0,t.context,!1),Is(e,t.containerInfo)}var Za,$a,Qa,Ka,Ga={dehydrated:null,retryLane:0};function Xa(e,t,n){var i,r=t.pendingProps,s=Ls.current,a=!1;return(i=0!==(64&t.flags))||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(s|=1),cr(Ls,1&s),null===e?(void 0!==r.fallback&&Ms(t),e=r.children,s=r.fallback,a?(e=Ja(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ga,e):"number"===typeof r.unstable_expectedLoadTime?(e=Ja(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ga,t.lanes=33554432,e):((n=Kl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(r=eo(e,t,r.children,r.fallback,n),a=t.child,s=e.child.memoizedState,a.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ga,r):(n=Ya(e,t,r.children,n),t.memoizedState=null,n))}function Ja(e,t,n,i){var r=e.mode,s=e.child;return t={mode:"hidden",children:t},0===(2&r)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Kl(t,r,0,null),n=Ql(n,r,i,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function Ya(e,t,n,i){var r=e.child;return e=r.sibling,n=Zl(r,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function eo(e,t,n,i,r){var s=t.mode,a=e.child;e=a.sibling;var o={mode:"hidden",children:n};return 0===(2&s)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=o,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Zl(a,o),null!==e?i=Zl(e,i):(i=Ql(i,s,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function to(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),is(e.return,t)}function no(e,t,n,i,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.lastEffect=s)}function io(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(La(e,t,i.children,n),0!==(2&(i=Ls.current)))i=1&i|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&to(e,n);else if(19===e.tag)to(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(cr(Ls,i),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Vs(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),no(t,!1,r,n,s,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Vs(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}no(t,!0,n,null,s,t.lastEffect);break;case"together":no(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ro(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zo|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Zl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Zl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function so(e,t){if(!Ds)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ao(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vr(t.type)&&gr(),null;case 3:return Ts(),ur(pr),ur(dr),Qs(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Hs(t)?t.flags|=4:i.hydrate||(t.flags|=256)),$a(t),null;case 5:Rs(t);var s=Os(Ps.current);if(n=t.type,null!==e&&null!=t.stateNode)Qa(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(null===t.stateNode)throw Error(a(166));return null}if(e=Os(Es.current),Hs(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[Xi]=t,i[Ji]=o,n){case"dialog":Ai("cancel",i),Ai("close",i);break;case"iframe":case"object":case"embed":Ai("load",i);break;case"video":case"audio":for(e=0;e<Ci.length;e++)Ai(Ci[e],i);break;case"source":Ai("error",i);break;case"img":case"image":case"link":Ai("error",i),Ai("load",i);break;case"details":Ai("toggle",i);break;case"input":ee(i,o),Ai("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ai("invalid",i);break;case"textarea":le(i,o),Ai("invalid",i)}for(var u in ke(n,o),e=null,o)o.hasOwnProperty(u)&&(s=o[u],"children"===u?"string"===typeof s?i.textContent!==s&&(e=["children",s]):"number"===typeof s&&i.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(u)&&null!=s&&"onScroll"===u&&Ai("scroll",i));switch(n){case"input":G(i),ie(i,o,!0);break;case"textarea":G(i),ce(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=qi)}i=e,t.updateQueue=i,null!==i&&(t.flags|=4)}else{switch(u=9===s.nodeType?s:s.ownerDocument,e===he.html&&(e=de(n)),e===he.html?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=u.createElement(n,{is:i.is}):(e=u.createElement(n),"select"===n&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,n),e[Xi]=t,e[Ji]=i,Za(e,t,!1,!1),t.stateNode=e,u=_e(n,i),n){case"dialog":Ai("cancel",e),Ai("close",e),s=i;break;case"iframe":case"object":case"embed":Ai("load",e),s=i;break;case"video":case"audio":for(s=0;s<Ci.length;s++)Ai(Ci[s],e);s=i;break;case"source":Ai("error",e),s=i;break;case"img":case"image":case"link":Ai("error",e),Ai("load",e),s=i;break;case"details":Ai("toggle",e),s=i;break;case"input":ee(e,i),s=Y(e,i),Ai("invalid",e);break;case"option":s=se(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=r({},i,{value:void 0}),Ai("invalid",e);break;case"textarea":le(e,i),s=oe(e,i),Ai("invalid",e);break;default:s=i}ke(n,s);var c=s;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];"style"===o?xe(e,h):"dangerouslySetInnerHTML"===o?null!=(h=h?h.__html:void 0)&&ve(e,h):"children"===o?"string"===typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=h&&"onScroll"===o&&Ai("scroll",e):null!=h&&w(e,o,h,u))}switch(n){case"input":G(e),ie(e,i,!1);break;case"textarea":G(e),ce(e);break;case"option":null!=i.value&&e.setAttribute("value",""+Q(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ae(e,!!i.multiple,o,!1):null!=i.defaultValue&&ae(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=qi)}Bi(n,i)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ka(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));n=Os(Ps.current),Os(Es.current),Hs(t)?(i=t.stateNode,n=t.memoizedProps,i[Xi]=t,i.nodeValue!==n&&(t.flags|=4)):((i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Xi]=t,t.stateNode=i)}return null;case 13:return ur(Ls),i=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Hs(t):n=null!==e.memoizedState,i&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ls.current)?0===Fo&&(Fo=3):(0!==Fo&&3!==Fo||(Fo=4),null===To||0===(134217727&zo)&&0===(134217727&Bo)||yl(To,Ro))),(i||n)&&(t.flags|=4),null);case 4:return Ts(),$a(t),null===e&&Oi(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(ur(Ls),null===(i=t.memoizedState))return null;if(o=0!==(64&t.flags),null===(u=i.rendering))if(o)so(i,!1);else{if(0!==Fo||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Vs(e))){for(t.flags|=64,so(i,!1),null!==(o=u.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return cr(Ls,1&Ls.current|2),t.child}e=e.sibling}null!==i.tail&&Br()>Zo&&(t.flags|=64,o=!0,so(i,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Vs(u))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),so(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!Ds)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*Br()-i.renderingStartTime>Zo&&1073741824!==n&&(t.flags|=64,o=!0,so(i,!1),t.lanes=33554432);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=i.last)?n.sibling=u:t.child=u,i.last=u)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Br(),n.sibling=null,t=Ls.current,cr(Ls,o?1&t|2:1&t),n):null;case 23:case 24:return kl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function oo(e){switch(e.tag){case 1:vr(e.type)&&gr();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ts(),ur(pr),ur(dr),Qs(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Rs(e),null;case 13:return ur(Ls),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ur(Ls),null;case 4:return Ts(),null;case 10:return ns(e),null;case 23:case 24:return kl(),null;default:return null}}function lo(e,t){try{var n="",i=t;do{n+=Z(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Za=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$a=function(){},Qa=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Os(Es.current);var a,o=null;switch(n){case"input":s=Y(e,s),i=Y(e,i),o=[];break;case"option":s=se(e,s),i=se(e,i),o=[];break;case"select":s=r({},s,{value:void 0}),i=r({},i,{value:void 0}),o=[];break;case"textarea":s=oe(e,s),i=oe(e,i),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(e.onclick=qi)}for(h in ke(n,i),n=null,s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var u=s[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var c=i[h];if(u=null!=s?s[h]:void 0,i.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ai("scroll",e),o||u===c||(o=[])):"object"===typeof c&&null!==c&&c.$$typeof===R?c.toString():(o=o||[]).push(h,c))}n&&(o=o||[]).push("style",n);var h=o;(t.updateQueue=h)&&(t.flags|=4)}},Ka=function(e,t,n,i){n!==i&&(t.flags|=4)};var co="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=us(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Go||(Go=!0,Xo=i),uo(0,t)},n}function po(e,t,n){(n=us(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return uo(0,t),i(r)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===Jo?Jo=new Set([this]):Jo.add(this),uo(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fo="function"===typeof WeakSet?WeakSet:Set;function mo(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Dl(e,n)}else t.current=null}function vo(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Gr(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Zi(t.stateNode.containerInfo))}throw Error(a(163))}function go(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e;i=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Vl(n,e),Ll(n,e)),e=i}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(i=n.elementType===n.type?t.memoizedProps:Gr(n.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ps(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ps(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Bi(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(a(163))}function yo(e,t){for(var n=e;;){if(5===n.tag){var i=n.stateNode;if(t)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,i.style.display=we("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bo(e,t){if(kr&&"function"===typeof kr.onCommitFiberUnmount)try{kr.onCommitFiberUnmount(jr,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var i=n,r=i.destroy;if(i=i.tag,void 0!==r)if(0!==(4&i))Vl(t,n);else{i=t;try{r()}catch(s){Dl(i,s)}}n=n.next}while(n!==e)}break;case 1:if(mo(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Dl(t,s)}break;case 5:mo(t);break;case 4:Co(e,t)}}function wo(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xo(e){return 5===e.tag||3===e.tag||4===e.tag}function jo(e){e:{for(var t=e.return;null!==t;){if(xo(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(a(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}i?ko(e,n,t):_o(e,n,t)}function ko(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=qi));else if(4!==i&&null!==(e=e.child))for(ko(e,t,n),e=e.sibling;null!==e;)ko(e,t,n),e=e.sibling}function _o(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(_o(e,t,n),e=e.sibling;null!==e;)_o(e,t,n),e=e.sibling}function Co(e,t){for(var n,i,r=t,s=!1;;){if(!s){s=r.return;e:for(;;){if(null===s)throw Error(a(160));switch(n=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===r.tag||6===r.tag){e:for(var o=e,l=r,u=l;;)if(bo(o,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(o=n,l=r.stateNode,8===o.nodeType?o.parentNode.removeChild(l):o.removeChild(l)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(bo(e,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(s=!1)}r.sibling.return=r.return,r=r.sibling}}function So(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{3===(3&i.tag)&&(e=i.destroy,i.destroy=void 0,void 0!==e&&e()),i=i.next}while(i!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){i=t.memoizedProps;var r=null!==e?e.memoizedProps:i;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Ji]=i,"input"===e&&"radio"===i.type&&null!=i.name&&te(n,i),_e(e,r),t=_e(e,i),r=0;r<s.length;r+=2){var o=s[r],l=s[r+1];"style"===o?xe(n,l):"dangerouslySetInnerHTML"===o?ve(n,l):"children"===o?ge(n,l):w(n,o,l,t)}switch(e){case"input":ne(n,i);break;case"textarea":ue(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(s=i.value)?ae(n,!!i.multiple,s,!1):e!==!!i.multiple&&(null!=i.defaultValue?ae(n,!!i.multiple,i.defaultValue,!0):ae(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ho=Br(),yo(t.child,!0)),void No(t);case 19:return void No(t);case 23:case 24:return void yo(t,null!==t.memoizedState)}throw Error(a(163))}function No(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fo),t.forEach((function(t){var i=Bl.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function Eo(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ao=Math.ceil,Po=x.ReactCurrentDispatcher,Oo=x.ReactCurrentOwner,Io=0,To=null,Uo=null,Ro=0,Lo=0,Vo=lr(0),Fo=0,qo=null,Do=0,zo=0,Bo=0,Mo=0,Wo=null,Ho=0,Zo=1/0;function $o(){Zo=Br()+500}var Qo,Ko=null,Go=!1,Xo=null,Jo=null,Yo=!1,el=null,tl=90,nl=[],il=[],rl=null,sl=0,al=null,ol=-1,ll=0,ul=0,cl=null,hl=!1;function dl(){return 0!==(48&Io)?Br():-1!==ol?ol:ol=Br()}function pl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Mr()?1:2;if(0===ll&&(ll=Do),0!==Kr.transition){0!==ul&&(ul=null!==Wo?Wo.pendingLanes:0),e=ll;var t=4186112&~ul;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Mr(),0!==(4&Io)&&98===e?e=qt(12,ll):e=qt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function fl(e,t,n){if(50<sl)throw sl=0,al=null,Error(a(185));if(null===(e=ml(e,t)))return null;Bt(e,t,n),e===To&&(Bo|=t,4===Fo&&yl(e,Ro));var i=Mr();1===t?0!==(8&Io)&&0===(48&Io)?bl(e):(vl(e,n),0===Io&&($o(),$r())):(0===(4&Io)||98!==i&&99!==i||(null===rl?rl=new Set([e]):rl.add(e)),vl(e,n)),Wo=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function vl(e,t){for(var n=e.callbackNode,i=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Mt(o),u=1<<l,c=s[l];if(-1===c){if(0===(u&i)||0!==(u&r)){c=t,Lt(u);var h=Rt;s[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);o&=~u}if(i=Vt(e,e===To?Ro:0),t=Rt,0===i)null!==n&&(n!==Lr&&Sr(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Lr&&Sr(n)}15===t?(n=bl.bind(null,e),null===Fr?(Fr=[n],qr=Cr(Or,Qr)):Fr.push(n),n=Lr):14===t?n=Zr(99,bl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Zr(n,gl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gl(e){if(ol=-1,ul=ll=0,0!==(48&Io))throw Error(a(327));var t=e.callbackNode;if(Rl()&&e.callbackNode!==t)return null;var n=Vt(e,e===To?Ro:0);if(0===n)return null;var i=n,r=Io;Io|=16;var s=Sl();for(To===e&&Ro===i||($o(),_l(e,i));;)try{Al();break}catch(l){Cl(e,l)}if(ts(),Po.current=s,Io=r,null!==Uo?i=0:(To=null,Ro=0,i=Fo),0!==(Do&Bo))_l(e,0);else if(0!==i){if(2===i&&(Io|=64,e.hydrate&&(e.hydrate=!1,Zi(e.containerInfo)),0!==(n=Ft(e))&&(i=Nl(e,n))),1===i)throw t=qo,_l(e,0),yl(e,n),vl(e,Br()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,i){case 0:case 1:throw Error(a(345));case 2:case 5:Il(e);break;case 3:if(yl(e,n),(62914560&n)===n&&10<(i=Ho+500-Br())){if(0!==Vt(e,0))break;if(((r=e.suspendedLanes)&n)!==n){dl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Wi(Il.bind(null,e),i);break}Il(e);break;case 4:if(yl(e,n),(4186112&n)===n)break;for(i=e.eventTimes,r=-1;0<n;){var o=31-Mt(n);s=1<<o,(o=i[o])>r&&(r=o),n&=~s}if(n=r,10<(n=(120>(n=Br()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ao(n/1960))-n)){e.timeoutHandle=Wi(Il.bind(null,e),n);break}Il(e);break;default:throw Error(a(329))}}return vl(e,Br()),e.callbackNode===t?gl.bind(null,e):null}function yl(e,t){for(t&=~Mo,t&=~Bo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Mt(t),i=1<<n;e[n]=-1,t&=~i}}function bl(e){if(0!==(48&Io))throw Error(a(327));if(Rl(),e===To&&0!==(e.expiredLanes&Ro)){var t=Ro,n=Nl(e,t);0!==(Do&Bo)&&(n=Nl(e,t=Vt(e,t)))}else n=Nl(e,t=Vt(e,0));if(0!==e.tag&&2===n&&(Io|=64,e.hydrate&&(e.hydrate=!1,Zi(e.containerInfo)),0!==(t=Ft(e))&&(n=Nl(e,t))),1===n)throw n=qo,_l(e,0),yl(e,t),vl(e,Br()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Il(e),vl(e,Br()),null}function wl(e,t){var n=Io;Io|=1;try{return e(t)}finally{0===(Io=n)&&($o(),$r())}}function xl(e,t){var n=Io;Io&=-2,Io|=8;try{return e(t)}finally{0===(Io=n)&&($o(),$r())}}function jl(e,t){cr(Vo,Lo),Lo|=t,Do|=t}function kl(){Lo=Vo.current,ur(Vo)}function _l(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hi(n)),null!==Uo)for(n=Uo.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&gr();break;case 3:Ts(),ur(pr),ur(dr),Qs();break;case 5:Rs(i);break;case 4:Ts();break;case 13:case 19:ur(Ls);break;case 10:ns(i);break;case 23:case 24:kl()}n=n.return}To=e,Uo=Zl(e.current,null),Ro=Lo=Do=t,Fo=0,qo=null,Mo=Bo=zo=0}function Cl(e,t){for(;;){var n=Uo;try{if(ts(),Ks.current=Pa,ta){for(var i=Js.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ta=!1}if(Xs=0,ea=Ys=Js=null,na=!1,Oo.current=null,null===n||null===n.return){Fo=1,qo=t,Uo=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=Ro,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.lanes=c.lanes):(o.updateQueue=null,o.memoizedState=null)}var h=0!==(1&Ls.current),d=a;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var v=d.updateQueue;if(null===v){var g=new Set;g.add(u),d.updateQueue=g}else v.add(u);if(0===(2&d.mode)){if(d.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=us(-1,1);y.tag=2,cs(o,y)}o.lanes|=1;break e}l=void 0,o=t;var b=s.pingCache;if(null===b?(b=s.pingCache=new co,l=new Set,b.set(u,l)):void 0===(l=b.get(u))&&(l=new Set,b.set(u,l)),!l.has(o)){l.add(o);var w=zl.bind(null,s,u,o);u.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error(($(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fo&&(Fo=2),l=lo(l,o),d=a;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ho(0,s,t));break e;case 1:s=l;var x=d.type,j=d.stateNode;if(0===(64&d.flags)&&("function"===typeof x.getDerivedStateFromError||null!==j&&"function"===typeof j.componentDidCatch&&(null===Jo||!Jo.has(j)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,po(d,s,t));break e}}d=d.return}while(null!==d)}Ol(n)}catch(k){t=k,Uo===n&&null!==n&&(Uo=n=n.return);continue}break}}function Sl(){var e=Po.current;return Po.current=Pa,null===e?Pa:e}function Nl(e,t){var n=Io;Io|=16;var i=Sl();for(To===e&&Ro===t||_l(e,t);;)try{El();break}catch(r){Cl(e,r)}if(ts(),Io=n,Po.current=i,null!==Uo)throw Error(a(261));return To=null,Ro=0,Fo}function El(){for(;null!==Uo;)Pl(Uo)}function Al(){for(;null!==Uo&&!Nr();)Pl(Uo)}function Pl(e){var t=Qo(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,null===t?Ol(e):Uo=t,Oo.current=null}function Ol(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ao(n,t,Lo)))return void(Uo=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Lo)||0===(4&n.mode)){for(var i=0,r=n.child;null!==r;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=oo(t)))return n.flags&=2047,void(Uo=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Uo=t);Uo=t=e}while(null!==t);0===Fo&&(Fo=5)}function Il(e){var t=Mr();return Hr(99,Tl.bind(null,e,t)),null}function Tl(e,t){do{Rl()}while(null!==el);if(0!==(48&Io))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var i=n.lanes|n.childLanes,r=i,s=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;for(var o=e.eventTimes,l=e.expirationTimes;0<s;){var u=31-Mt(s),c=1<<u;r[u]=0,o[u]=-1,l[u]=-1,s&=~c}if(null!==rl&&0===(24&i)&&rl.has(e)&&rl.delete(e),e===To&&(Uo=To=null,Ro=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){if(r=Io,Io|=32,Oo.current=null,Di=Qt,vi(o=mi())){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,s=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(S){l=null;break e}var h=0,d=-1,p=-1,f=0,m=0,v=o,g=null;t:for(;;){for(var y;v!==l||0!==s&&3!==v.nodeType||(d=h+s),v!==u||0!==c&&3!==v.nodeType||(p=h+c),3===v.nodeType&&(h+=v.nodeValue.length),null!==(y=v.firstChild);)g=v,v=y;for(;;){if(v===o)break t;if(g===l&&++f===s&&(d=h),g===u&&++m===c&&(p=h),null!==(y=v.nextSibling))break;g=(v=g).parentNode}v=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;zi={focusedElem:o,selectionRange:l},Qt=!1,cl=null,hl=!1,Ko=i;do{try{Ul()}catch(S){if(null===Ko)throw Error(a(330));Dl(Ko,S),Ko=Ko.nextEffect}}while(null!==Ko);cl=null,Ko=i;do{try{for(o=e;null!==Ko;){var b=Ko.flags;if(16&b&&ge(Ko.stateNode,""),128&b){var w=Ko.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:jo(Ko),Ko.flags&=-3;break;case 6:jo(Ko),Ko.flags&=-3,So(Ko.alternate,Ko);break;case 1024:Ko.flags&=-1025;break;case 1028:Ko.flags&=-1025,So(Ko.alternate,Ko);break;case 4:So(Ko.alternate,Ko);break;case 8:Co(o,l=Ko);var j=l.alternate;wo(l),null!==j&&wo(j)}Ko=Ko.nextEffect}}catch(S){if(null===Ko)throw Error(a(330));Dl(Ko,S),Ko=Ko.nextEffect}}while(null!==Ko);if(x=zi,w=mi(),b=x.focusedElem,o=x.selectionRange,w!==b&&b&&b.ownerDocument&&fi(b.ownerDocument.documentElement,b)){null!==o&&vi(b)&&(w=o.start,void 0===(x=o.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),l=b.textContent.length,j=Math.min(o.start,l),o=void 0===o.end?j:Math.min(o.end,l),!x.extend&&j>o&&(l=o,o=j,j=l),l=pi(b,j),s=pi(b,o),l&&s&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==s.node||x.focusOffset!==s.offset)&&((w=w.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),j>o?(x.addRange(w),x.extend(s.node,s.offset)):(w.setEnd(s.node,s.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Qt=!!Di,zi=Di=null,e.current=n,Ko=i;do{try{for(b=e;null!==Ko;){var k=Ko.flags;if(36&k&&go(b,Ko.alternate,Ko),128&k){w=void 0;var _=Ko.ref;if(null!==_){var C=Ko.stateNode;Ko.tag,w=C,"function"===typeof _?_(w):_.current=w}}Ko=Ko.nextEffect}}catch(S){if(null===Ko)throw Error(a(330));Dl(Ko,S),Ko=Ko.nextEffect}}while(null!==Ko);Ko=null,Vr(),Io=r}else e.current=n;if(Yo)Yo=!1,el=e,tl=t;else for(Ko=i;null!==Ko;)t=Ko.nextEffect,Ko.nextEffect=null,8&Ko.flags&&((k=Ko).sibling=null,k.stateNode=null),Ko=t;if(0===(i=e.pendingLanes)&&(Jo=null),1===i?e===al?sl++:(sl=0,al=e):sl=0,n=n.stateNode,kr&&"function"===typeof kr.onCommitFiberRoot)try{kr.onCommitFiberRoot(jr,n,void 0,64===(64&n.current.flags))}catch(S){}if(vl(e,Br()),Go)throw Go=!1,e=Xo,Xo=null,e;return 0!==(8&Io)||$r(),null}function Ul(){for(;null!==Ko;){var e=Ko.alternate;hl||null===cl||(0!==(8&Ko.flags)?Ye(Ko,cl)&&(hl=!0):13===Ko.tag&&Eo(e,Ko)&&Ye(Ko,cl)&&(hl=!0));var t=Ko.flags;0!==(256&t)&&vo(e,Ko),0===(512&t)||Yo||(Yo=!0,Zr(97,(function(){return Rl(),null}))),Ko=Ko.nextEffect}}function Rl(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Hr(e,Fl)}return!1}function Ll(e,t){nl.push(t,e),Yo||(Yo=!0,Zr(97,(function(){return Rl(),null})))}function Vl(e,t){il.push(t,e),Yo||(Yo=!0,Zr(97,(function(){return Rl(),null})))}function Fl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Io))throw Error(a(331));var t=Io;Io|=32;var n=il;il=[];for(var i=0;i<n.length;i+=2){var r=n[i],s=n[i+1],o=r.destroy;if(r.destroy=void 0,"function"===typeof o)try{o()}catch(u){if(null===s)throw Error(a(330));Dl(s,u)}}for(n=nl,nl=[],i=0;i<n.length;i+=2){r=n[i],s=n[i+1];try{var l=r.create;r.destroy=l()}catch(u){if(null===s)throw Error(a(330));Dl(s,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Io=t,$r(),!0}function ql(e,t,n){cs(e,t=ho(0,t=lo(n,t),1)),t=dl(),null!==(e=ml(e,1))&&(Bt(e,1,t),vl(e,t))}function Dl(e,t){if(3===e.tag)ql(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ql(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Jo||!Jo.has(i))){var r=po(n,e=lo(t,e),1);if(cs(n,r),r=dl(),null!==(n=ml(n,1)))Bt(n,1,r),vl(n,r);else if("function"===typeof i.componentDidCatch&&(null===Jo||!Jo.has(i)))try{i.componentDidCatch(t,e)}catch(s){}break}}n=n.return}}function zl(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=dl(),e.pingedLanes|=e.suspendedLanes&n,To===e&&(Ro&n)===n&&(4===Fo||3===Fo&&(62914560&Ro)===Ro&&500>Br()-Ho?_l(e,0):Mo|=n),vl(e,t)}function Bl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Mr()?1:2:(0===ll&&(ll=Do),0===(t=Dt(62914560&~ll))&&(t=4194304))),n=dl(),null!==(e=ml(e,t))&&(Bt(e,t,n),vl(e,n))}function Ml(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wl(e,t,n,i){return new Ml(e,t,n,i)}function Hl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Zl(e,t){var n=e.alternate;return null===n?((n=Wl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $l(e,t,n,i,r,s){var o=2;if(i=e,"function"===typeof e)Hl(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Ql(n.children,r,s,t);case L:o=8,r|=16;break;case C:o=8,r|=1;break;case S:return(e=Wl(12,n,t,8|r)).elementType=S,e.type=S,e.lanes=s,e;case P:return(e=Wl(13,n,t,r)).type=P,e.elementType=P,e.lanes=s,e;case O:return(e=Wl(19,n,t,r)).elementType=O,e.lanes=s,e;case V:return Kl(n,r,s,t);case F:return(e=Wl(24,n,t,r)).elementType=F,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case E:o=9;break e;case A:o=11;break e;case I:o=14;break e;case T:o=16,i=null;break e;case U:o=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Wl(o,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Ql(e,t,n,i){return(e=Wl(7,e,i,t)).lanes=n,e}function Kl(e,t,n,i){return(e=Wl(23,e,i,t)).elementType=V,e.lanes=n,e}function Gl(e,t,n){return(e=Wl(6,e,null,t)).lanes=n,e}function Xl(e,t,n){return(t=Wl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Yl(e,t,n,i){var r=t.current,s=dl(),o=pl(r);e:if(n){t:{if(Ke(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(vr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(vr(u)){n=br(n,u,l);break e}}n=l}else n=hr;return null===t.context?t.context=n:t.pendingContext=n,(t=us(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),cs(r,t),fl(r,o,s),o}function eu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nu(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function iu(e,t,n){var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jl(e,t,null!=n&&!0===n.hydrate),t=Wl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,os(t),e[Yi]=n.current,Oi(8===e.nodeType?e.parentNode:e),i)for(e=0;e<i.length;e++){var r=(t=i[e])._getVersion;r=r(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,r]:n.mutableSourceEagerHydrationData.push(t,r)}this._internalRoot=n}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function su(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s._internalRoot;if("function"===typeof r){var o=r;r=function(){var e=eu(a);o.call(e)}}Yl(t,a,e,r)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new iu(e,0,t?{hydrate:!0}:void 0)}(n,i),a=s._internalRoot,"function"===typeof r){var l=r;r=function(){var e=eu(a);l.call(e)}}xl((function(){Yl(t,a,e,r)}))}return eu(a)}function au(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(t))throw Error(a(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qo=function(e,t,n){var i=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pr.current)Ra=!0;else{if(0===(n&i)){switch(Ra=!1,t.tag){case 3:Ha(t),Zs();break;case 5:Us(t);break;case 1:vr(t.type)&&wr(t);break;case 4:Is(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var r=t.type._context;cr(Xr,r._currentValue),r._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xa(e,t,n):(cr(Ls,1&Ls.current),null!==(t=ro(e,t,n))?t.sibling:null);cr(Ls,1&Ls.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(64&e.flags)){if(i)return io(e,t,n);t.flags|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),cr(Ls,Ls.current),i)break;return null;case 23:case 24:return t.lanes=0,Da(e,t,n)}return ro(e,t,n)}Ra=0!==(16384&e.flags)}else Ra=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=mr(t,dr.current),rs(t,n),r=sa(null,t,i,e,r,n),t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(i)){var s=!0;wr(t)}else s=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,os(t);var o=i.getDerivedStateFromProps;"function"===typeof o&&ms(t,i,o,e),r.updater=vs,t.stateNode=r,r._reactInternals=t,ws(t,i,e,n),t=Wa(null,t,i,!0,s,n)}else t.tag=0,La(null,t,r,n),t=t.child;return t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Hl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===I)return 14}return 2}(r),e=Gr(r,e),s){case 0:t=Ba(null,t,r,e,n);break e;case 1:t=Ma(null,t,r,e,n);break e;case 11:t=Va(null,t,r,e,n);break e;case 14:t=Fa(null,t,r,Gr(r.type,e),i,n);break e}throw Error(a(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ba(e,t,i,r=t.elementType===i?r:Gr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ma(e,t,i,r=t.elementType===i?r:Gr(i,r),n);case 3:if(Ha(t),i=t.updateQueue,null===e||null===i)throw Error(a(282));if(i=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,ls(e,t),ds(t,i,null,n),(i=t.memoizedState.element)===r)Zs(),t=ro(e,t,n);else{if((s=(r=t.stateNode).hydrate)&&(qs=$i(t.stateNode.containerInfo.firstChild),Fs=t,s=Ds=!0),s){if(null!=(e=r.mutableSourceEagerHydrationData))for(r=0;r<e.length;r+=2)(s=e[r])._workInProgressVersionPrimary=e[r+1],$s.push(s);for(n=Ss(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else La(e,t,i,n),Zs();t=t.child}return t;case 5:return Us(t),null===e&&Ms(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,o=r.children,Mi(i,r)?o=null:null!==s&&Mi(i,s)&&(t.flags|=16),za(e,t),La(e,t,o,n),t.child;case 6:return null===e&&Ms(t),null;case 13:return Xa(e,t,n);case 4:return Is(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Cs(t,null,i,n):La(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Va(e,t,i,r=t.elementType===i?r:Gr(i,r),n);case 7:return La(e,t,t.pendingProps,n),t.child;case 8:case 12:return La(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value;var l=t.type._context;if(cr(Xr,l._currentValue),l._currentValue=s,null!==o)if(l=o.value,0===(s=ui(l,s)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(l,s):1073741823))){if(o.children===r.children&&!pr.current){t=ro(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){o=l.child;for(var c=u.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&s)){1===l.tag&&((c=us(-1,n&-n)).tag=2,cs(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),is(l.return,n),u.lanes|=n;break}c=c.next}}else o=10===l.tag&&l.type===t.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}La(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(s=t.pendingProps).children,rs(t,n),i=i(r=ss(r,s.unstable_observedBits)),t.flags|=1,La(e,t,i,n),t.child;case 14:return s=Gr(r=t.type,t.pendingProps),Fa(e,t,r,s=Gr(r.type,s),i,n);case 15:return qa(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Gr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,vr(i)?(e=!0,wr(t)):e=!1,rs(t,n),ys(t,i,r),ws(t,i,r,n),Wa(null,t,i,!0,e,n);case 19:return io(e,t,n);case 23:case 24:return Da(e,t,n)}throw Error(a(156,t.tag))},iu.prototype.render=function(e){Yl(e,this._internalRoot,null,null)},iu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Yl(null,e,null,(function(){t[Yi]=null}))},et=function(e){13===e.tag&&(fl(e,4,dl()),nu(e,4))},tt=function(e){13===e.tag&&(fl(e,67108864,dl()),nu(e,67108864))},nt=function(e){if(13===e.tag){var t=dl(),n=pl(e);fl(e,n,t),nu(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=rr(i);if(!r)throw Error(a(90));X(i),ne(i,r)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Ie=wl,Te=function(e,t,n,i,r){var s=Io;Io|=4;try{return Hr(98,e.bind(null,t,n,i,r))}finally{0===(Io=s)&&($o(),$r())}},Ue=function(){0===(49&Io)&&(function(){if(null!==rl){var e=rl;rl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,vl(e,Br())}))}$r()}(),Rl())},Re=function(e,t){var n=Io;Io|=2;try{return e(t)}finally{0===(Io=n)&&($o(),$r())}};var ou={Events:[nr,ir,rr,Pe,Oe,Rl,{current:!1}]},lu={findFiberByHostInstance:tr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uu={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{jr=cu.inject(uu),kr=cu}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=au,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Io;if(0!==(48&n))return e(t);Io|=1;try{if(e)return Hr(99,e.bind(null,t))}finally{Io=n,$r()}},t.hydrate=function(e,t,n){if(!ru(t))throw Error(a(200));return su(null,e,t,!0,n)},t.render=function(e,t,n){if(!ru(t))throw Error(a(200));return su(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(a(40));return!!e._reactRootContainer&&(xl((function(){su(null,null,e,!1,(function(){e._reactRootContainer=null,e[Yi]=null}))})),!0)},t.unstable_batchedUpdates=wl,t.unstable_createPortal=function(e,t){return au(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!ru(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return su(e,t,n,!1,i)},t.version="17.0.2"},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},340:(e,t,n)=>{"use strict";e.exports=n(424)},374:(e,t,n)=>{"use strict";n(725);var i=n(791),r=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;r=s("react.element"),t.Fragment=s("react.fragment")}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,s={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:u,ref:c,props:s,_owner:a.current}}t.jsx=u,t.jsxs=u},117:(e,t,n)=>{"use strict";var i=n(725),r=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,o=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),o=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var b=y.prototype=new g;b.constructor=y,i(b,v.prototype),b.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,j={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!j.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:r,type:e,key:a,ref:o,props:s,_owner:w.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,n,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case s:l=!0}}if(l)return a=a(l=e),e=""===i?"."+S(l,0):i,Array.isArray(a)?(n="",null!=e&&(n=e.replace(C,"$&/")+"/"),N(a,t,n,"",(function(e){return e}))):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=i+S(o=e[u],u);l+=N(o,t,n,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=N(o=o.value,t,n,c=i+S(o,u++),a);else if("object"===o)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function E(e,t,n){if(null==e)return e;var i=[],r=0;return N(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function O(){var e=P.current;if(null===e)throw Error(p(321));return e}var I={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:E,forEach:function(e,t,n){E(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(p(143));return e}},t.Component=v,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var s=i({},e.props),a=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!j.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}return{$$typeof:r,type:e.type,key:a,ref:o,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";var n,i,r,s;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,h=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(n){throw setTimeout(h,0),n}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(h,0))},i=function(e,t){c=setTimeout(e,t)},r=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var f=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,v=null,g=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();b=e+y;try{v(!0,e)?x.postMessage(null):(m=!1,v=null)}catch(n){throw x.postMessage(null),n}}else m=!1},n=function(e){v=e,m||(m=!0,x.postMessage(null))},i=function(e,n){g=d((function(){e(t.unstable_now())}),n)},r=function(){p(g),g=-1}}function j(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,r=e[i];if(!(void 0!==r&&0<C(r,t)))break e;e[i]=t,e[n]=r,n=i}}function k(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var s=2*(i+1)-1,a=e[s],o=s+1,l=e[o];if(void 0!==a&&0>C(a,n))void 0!==l&&0>C(l,a)?(e[i]=l,e[o]=n,i=o):(e[i]=a,e[s]=n,i=s);else{if(!(void 0!==l&&0>C(l,n)))break e;e[i]=l,e[o]=n,i=o}}}return t}return null}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],N=[],E=1,A=null,P=3,O=!1,I=!1,T=!1;function U(e){for(var t=k(N);null!==t;){if(null===t.callback)_(N);else{if(!(t.startTime<=e))break;_(N),t.sortIndex=t.expirationTime,j(S,t)}t=k(N)}}function R(e){if(T=!1,U(e),!I)if(null!==k(S))I=!0,n(L);else{var t=k(N);null!==t&&i(R,t.startTime-e)}}function L(e,n){I=!1,T&&(T=!1,r()),O=!0;var s=P;try{for(U(n),A=k(S);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=A.callback;if("function"===typeof a){A.callback=null,P=A.priorityLevel;var o=a(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?A.callback=o:A===k(S)&&_(S),U(n)}else _(S);A=k(S)}if(null!==A)var l=!0;else{var u=k(N);null!==u&&i(R,u.startTime-n),l=!1}return l}finally{A=null,P=s,O=!1}}var V=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){I||O||(I=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return k(S)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,s,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:E++,callback:s,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>o?(e.sortIndex=a,j(N,e),null===k(S)&&e===k(N)&&(T?r():T=!0,i(R,a-o))):(e.sortIndex=l,j(S,e),I||O||(I=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},631:()=>{},229:(e,t,n)=>{"use strict";function i(e,t,n,i,r){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),s),r&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(r):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}n.d(t,{Z:()=>i})},269:(e,t,n)=>{"use strict";function i(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,{Z:()=>i})}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".858f495f.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="tonva-admins:";n.l=(i,r,s,a)=>{if(e[i])e[i].push(r);else{var o,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[r];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="./",(()=>{var e={179:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,s,a=i[0],o=i[1],l=i[2],u=0;if(a.some((t=>0!==e[t]))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(i);u<a.length;u++)s=a[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunktonva_admins=self.webpackChunktonva_admins||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e=n(791),t=n(164),i=n(541),r=n(537),s=n(106),a=(n(958),n(763)),o=n.n(a);const l="\n",u="\\ntbfvr",c=u.charCodeAt(0),h=u.charCodeAt(1),d=u.charCodeAt(2),p=u.charCodeAt(3),f=u.charCodeAt(4),m=u.charCodeAt(5),v=u.charCodeAt(6),g="\n\t\b\f\v\r",y=g.charCodeAt(0),b=g.charCodeAt(1),w=g.charCodeAt(2),x=g.charCodeAt(3),j=g.charCodeAt(4),k=g.charCodeAt(5);class _{get sName(){return this.jName||this.name}constructor(e,t,n){this.jName=void 0,this.schema=void 0,this.ver=0,this.sys=void 0,this.uq=void 0,this.name=void 0,this.typeId=void 0,this.cache=void 0,this.uqApi=void 0,this.fields=void 0,this.arrFields=void 0,this.returns=void 0,this.face=void 0,this.fieldMaps={},this.uq=e,this.name=t,this.typeId=n,this.sys=this.name.indexOf("$")>=0,this.cache=this.uq.localMap.item(this.name),this.uqApi=this.uq.uqApi}fieldMap(e){void 0===e&&(e="$");let t=this.fieldMaps[e];if(void 0===t){let n;if("$"===e)n=this.fields;else if(void 0!==this.arrFields){let t=this.arrFields.find((t=>t.name===e));void 0!==t&&(n=t.fields)}else if(void 0!==this.returns){let t=this.returns.find((t=>t.name===e));void 0!==t&&(n=t.fields)}if(void 0===n)return{};t={};for(let e of n)t[e.name]=e;this.fieldMaps[e]=t}return t}async loadSchema(){if(void 0!==this.schema)return;let e=this.cache.get();e||(e=await this.uq.loadEntitySchema(this.name)),this.buildSchema(e),await this.loadValues()}buildSchema(e){this.setSchema(e),this.buildFieldsTuid()}async loadValues(){}clearSchema(){this.schema=void 0}setSchema(e){if(void 0===e)return;let{name:t,version:n}=e;this.ver=n||0,this.setJName(t),this.cache.set(e),this.schema=e,this.buildFieldsTuid()}setJName(e){e!==this.name&&(this.jName=e)}buildFieldsTuid(){let{fields:e,arrs:t,returns:n}=this.schema;this.uq.buildFieldTuid(this.fields=e),this.uq.buildArrFieldsTuid(this.arrFields=t,e),this.uq.buildArrFieldsTuid(this.returns=n,e)}schemaStringify(){return JSON.stringify(this.schema,((e,t)=>{if("_tuid"!==e)return t}),4)}tuidFromName(e,t){if(void 0===this.schema)return;let{fields:n,arrs:i}=this.schema,r=this.uq;function s(e,t){if(void 0===t)return;let n=t.find((t=>t.name===e));return void 0!==n?r.getTuid(n.tuid):void 0}let a=e.toLowerCase();if(void 0===t)return s(a,n);if(void 0===i)return;let o=t.toLowerCase(),l=i.find((e=>e.name===o));return void 0!==l?s(a,l.fields):void 0}buildParams(e){let t={},n=this.fields;void 0!==n&&this.buildFieldsParams(t,n,e);let i=this.arrFields;if(void 0!==i)for(let r of i){let{name:n,fields:i}=r;if(void 0===e[n])continue;let s=[];t[n]=s;for(let t of e){let e={};this.buildFieldsParams(e,i,t),s.push(e)}}return t}buildFieldsParams(e,t,n){for(let i of t){let t,{name:r,type:s}=i,a=n[r];switch(s){case"datetime":t=this.buildDateTimeParam(a);break;case"date":t=a instanceof Date?"".concat(a.getFullYear(),"-").concat(a.getMonth()+1,"-").concat(a.getDate()):a;break;default:switch(typeof a){default:t=a;break;case"object":if(a instanceof Date){t=a;break}let e=i._tuid;t=void 0===e?a.id:e.getIdFromObj(a)}}e[r]=t}}buildDateTimeParam(e){let t;switch(typeof e){default:throw new Error("escape datetime field in pack data error: value="+e);case"undefined":return;case"object":t=e;break;case"string":case"number":t=new Date(e)}return Math.floor(t.getTime()/1e3)}buildDateParam(e){let t;switch(typeof e){default:throw new Error("escape datetime field in pack data error: value="+e);case"undefined":return"";case"string":return e;case"object":t=e;break;case"number":t=new Date(e)}let n=t.toISOString(),i=n.indexOf("T");return i>0?n.substr(0,i):n}pack(e){let t=[],n=this.fields;void 0!==n&&this.packRow(t,n,e);let r=this.arrFields;if(void 0!==r)for(let s of r){let{name:n,fields:r}=s,a=(0,i.oX)(e,n);this.packArr(t,r,a)}return t.join("")}escape(e,t){let n=e[t.name];if("datetime"===t.type)return this.buildDateTimeParam(n);switch(typeof n){default:return n;case"object":let e=t._tuid;return void 0===e?n.id:e.getIdFromObj(n);case"string":let i=n.length,r="",s=0;for(let t=0;t<i;t++){let e;switch(n.charCodeAt(t)){default:continue;case c:e="\\\\";break;case b:e="\\t";break;case y:e="\\n";break;case x:e="\\f";break;case j:e="\\v";break;case w:e="\\b";break;case k:e="\\r"}r+=n.substring(s,t)+e,s=t+1}return r+n.substring(s);case"undefined":return""}}packRow(e,t,n){let i=t.length;if(0===i)return;let r="";r+=this.escape(n,t[0]);for(let s=1;s<i;s++){let e=t[s];r+="\t"+this.escape(n,e)}e.push(r+l)}packArr(e,t,n){if(void 0!==n)if(0===n.length)e.push(l);else for(let i of n)this.packRow(e,t,i);else e.push(l);e.push(l)}cacheFieldsInValue(e,t){for(let n of t){let{name:t,_tuid:i}=n;if(void 0===i)continue;let r=e[t];e[t]=i.boxId(r)}}unpackTuidIdsOfFields(e,t){if(void 0===t)return e;let n=[];for(let i of e){if(!i)continue;let e=i.length,r=0;for(;r<e;){if(10===i.charCodeAt(r)){++r;break}let e={};r=this.unpackRow(e,t,i,r),n.push(e)}}return n}unpackSheet(e){let t={},n=this.fields,i=0;void 0!==n&&(i=this.unpackRow(t,n,e,i));let r=this.arrFields;if(void 0!==r)for(let s of r)i=this.unpackArr(t,s,e,i);return t}unpackReturns(e,t){let n={},i=0,r=t||this.returns;if(void 0!==r)for(let s of r)i=this.unpackArr(n,s,e,i);return n}unpackRow(e,t,n,i){let r=0,s=0,a=i,o=0,l=n.length,u=t.length;for(;i<l;i++)if(r=s,s=n.charCodeAt(i),9===s){let s=t[o],{name:c}=s;if(8!==r){if(i>a){let t=n.substring(a,i);e[c]=this.to(e,t,s)}}else e[c]=null;if(a=i+1,++o,o>=u)return(i=n.indexOf("\n",a))>=0?++i:i=l,i}else if(10===s){let s=t[o],{name:l}=s;if(8!==r){if(i>a){let t=n.substring(a,i);e[l]=this.to(e,t,s)}}else e[l]=null;return++o,++i}let c=t[o],{name:h}=c;if(8!==r){let t=n.substring(a);e[h]=this.to(e,t,c)}return l}to(e,t,n){switch(n.type){default:return t;case"text":case"char":return this.reverseNT(t);case"datetime":case"time":case"timestamp":let e=Number(t);return!0===isNaN(e)?new Date(t):new Date(1e3*e);case"date":let i=t.split("-");return new Date(Number(i[0]),Number(i[1])-1,Number(i[2]));case"tinyint":case"smallint":case"int":case"bigint":case"dec":return Number(t);case"id":let r=Number(t),{_tuid:s}=n;return void 0===s?r:s.boxId(r)}}reverseNT(e){if(void 0===e)return;if(null===e)return;let t=e.length,n="",i=0;for(let r=0;r<t;r++){if(e.charCodeAt(r)===c){if(r===t-1)break;let s;switch(e.charCodeAt(r+1)){default:continue;case c:s="\\";break;case h:s="\n";break;case d:s="\t";break;case p:s="\b";break;case f:s="\f";break;case m:s="\v";break;case v:s="\r"}n+=e.substring(i,r)+s,i=r+2,++r}}return n+=e.substring(i,t),n}unpackArr(e,t,n,i){let r=i,s=[],a=n.length,{name:o,fields:l}=t;for(;i<a;){let e=n.charCodeAt(i);if(10===e){if(i===r){if(e=n.charCodeAt(i),10!==e)throw new Error("upackArr: arr\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f10\uff0c\u5219\u5fc5\u987b\u7d27\u8ddf\u4e00\u4e2a10\uff0c\u8868\u793a\u6574\u4e2aarr\u7684\u7ed3\u675f");++i}++i;break}let t={};s.push(t),i=this.unpackRow(t,l,n,i)}return e[o]=s,i}}class C extends r.I{constructor(e,t){super(t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2]),this.tries=void 0,this._entity=void 0,this.tries=0,this._entity=e}get entity(){return this._entity}async request(){return await this.entity.loadSchema(),await this.innerRequest()}async innerCall(){return await this.entity.uqApi.xcall(this)}async innerRequest(){let e=await this.innerCall(),{$uq:t,$modify:n,res:i}=e;if(this.entity.uq.pullModify(n),void 0===t){return this.xresult(i)}return await this.retry(t)}xresult(e){return e}get headers(){let{ver:e,uq:t}=this.entity,{uqVersion:n}=t;return{uq:"".concat(n),en:"".concat(e)}}async retry(e){if(++this.tries,this.tries>5)throw new Error("can not get right uq response schema, 5 tries");return this.rebuildSchema(e),await this.innerRequest()}rebuildSchema(e){let{uq:t,entity:n}=e;void 0!==t&&this.entity.uq.buildEntities(t),void 0!==n&&this.entity.setSchema(n)}}class S extends C{get entity(){return this._entity}}class N extends C{get entity(){return this._entity}get path(){return"query/".concat(this.entity.name)}xresult(e){return this.entity.unpackReturns(e)}buildParams(){return this.entity.buildParams(this.params)}}class E extends C{get params(){return this._params}get entity(){return this._entity}get path(){return"query-page/".concat(this.entity.name)}buildParams(){let e,{pageStart:t,pageSize:n,params:i}=this.params;return e=void 0===i?{key:""}:this.entity.buildParams(i),e.$pageStart=t,e.$pageSize=n,e}xresult(e){return this.entity.unpackReturns(e)}}var A=n(894);class P{constructor(e){this.queue=[],this.cache=A.LO.map({},{deep:!1}),this.loading=!1,this.localArr=void 0,this.waitingIds=[],this.tuidInner=void 0,this.divName=void 0,this.tuidInner=e,this.initLocalArr()}initLocalArr(){this.localArr=this.tuidInner.cache.arr(this.tuidInner.name+".ids")}useId(e,t){if(e&&!1!==Number.isInteger(e))if(!0!==this.cache.has(e))if(this.tuidInner.cacheTuids(!0===t?70:20),this.cache.set(e,e),this.waitingIds.findIndex((t=>t===e))>=0)this.moveToHead(e);else{if(this.queue.length>=1e3){let t=this.queue.shift();if(t===e)return void this.queue.push(t);if(!0===this.cache.has(t))this.cache.delete(t);else{let e=this.waitingIds.findIndex((e=>e===t));this.waitingIds.splice(e,1)}}this.waitingIds.push(e),this.queue.push(e)}else this.moveToHead(e)}moveToHead(e){let t=this.queue.findIndex((t=>t===e));this.queue.splice(t,1),this.queue.push(e)}getValue(e){return this.cache.get(e)}remove(e){this.cache.delete(e);let t=this.queue.findIndex((t=>t===e));this.queue.splice(t,1),this.localArr.removeItem(e)}valueFromId(e){let t;switch(typeof e){case"object":t=e.id;break;case"number":t=e;break;default:return}return this.getValue(t)}resetCache(e){this.remove(e),this.useId(e)}cacheValue(e){if(void 0===e)return!1;let t=this.getIdFromObj(e);if(void 0===t)return!1;let n=this.waitingIds.findIndex((e=>e===t));return n>=0&&this.waitingIds.splice(n,1),this.cache.set(t,e),!0}getIdFromObj(e){return this.tuidInner.getIdFromObj(e)}async cacheIds(){if(0===this.waitingIds.length)return;let e=await this.loadIds();void 0!==e&&0!==e.length?this.cacheIdValues(e):this.waitingIds.splice(0,this.waitingIds.length)}cacheIdValues(e){if(void 0===e)return;let t=this.unpackTuidIds(e);for(let n of t)!1!==this.cacheValue(n)&&this.cacheTuidFieldValues(n)}async modifyIds(e){let t=(await this.loadTuidIdsOrLocal(e)).filter((e=>{let t=e.indexOf("\t");t<0&&(t=e.length);let n=Number(e.substr(0,t));return void 0!==this.localArr.getItem(n)}));0!==t.length&&this.cacheIdValues(t)}async loadIds(){if(!0===this.loading)return;this.loading=!0;let e=await this.loadTuidIdsOrLocal(this.waitingIds);return this.loading=!1,e}unpackTuidIds(e){return this.tuidInner.unpackTuidIds(e)}cacheTuidFieldValues(e){this.tuidInner.cacheTuidFieldValues(e)}async assureObj(e){let t=this.cache.get(e);switch(typeof t){case"object":return t;case"number":this.cache.set(e,e)}let n=await this.loadTuidIdsOrLocal([e]);this.cacheIdValues(n)}async loadTuidIdsOrLocal(e){let t=[],n=[];for(let r of e){let e=this.localArr.getItem(r);e?t.push(e):n.push(r)}let i=n.length;if(i>0){let e=await this.tuidInner.loadTuidIds(this.divName,n);for(let r=0;r<i;r++){let i=e[r];if(!i)continue;let s=i.indexOf("\t");s<0&&(s=i.length);let a=Number(i.substr(0,s));o().remove(n,(e=>e===a)),t.push(i),this.localArr.setItem(a,i)}i=n.length;for(let t=0;t<i;t++)this.localArr.setItem(n[t],"")}return t}}class O extends P{constructor(e,t){super(e),this.div=void 0,this.divName=void 0,this.div=t,this.divName=t.name,this.localArr=e.cache.arr(e.name+".ids."+this.divName)}initLocalArr(){}getIdFromObj(e){return this.div.getIdFromObj(e)}unpackTuidIds(e){return this.div.unpackTuidIds(e)}cacheTuidFieldValues(e){this.div.cacheTuidFieldValues(e)}}class I extends _{constructor(){super(...arguments),this.noCache=void 0,this.typeName="tuid",this.idName=void 0,this.cached=void 0,this.unique=void 0,this.isImport=!1}setSchema(e){super.setSchema(e);let{id:t}=e;this.idName=t}buildTuidBox(){return new $(this)}getIdFromObj(e){return e[this.idName]}stopCache(){this.noCache=!0}static idValue(e){switch(typeof e){default:throw new Error("unknown id");case"object":return e.id;case"number":return e}}static equ(e,t){return void 0!==e&&null!==e&&(void 0!==t&&null!==t&&T.idValue(e)===T.idValue(t))}cacheIds(){}async modifyIds(e){}}class T extends I{}class U extends T{constructor(e,t,n){super(e,t,n),this.divs=void 0,this.cacheFields=void 0,this.idCache=void 0,this.localArr=void 0,this.idCache=new P(this),this.localArr=this.cache.arr(this.name+".whole"),!0===e.newVersion&&this.localArr.removeAll()}setSchema(e){super.setSchema(e);let{arrs:t}=e;if(void 0!==t){this.divs={};for(let e of t){let{name:t}=e,n=new Q(this.uq,this,t);this.divs[t]=n,n.setSchema(e),n.buildFieldsTuid()}}}useId(e,t){!0!==this.noCache&&e&&this.idCache.useId(e,t)}boxId(e){if(!e)return;if("object"===typeof e)return e;this.useId(e);let{createBoxId:t}=this.uq;return t?t(this,e):{id:e}}valueFromId(e){return this.idCache.getValue(e)}resetCache(e){"object"===typeof e&&(e=e.id),this.idCache.resetCache(e)}async assureBox(e){if(e)return"object"===typeof e&&(e=e.id),await this.idCache.assureObj(e),this.idCache.getValue(e)}cacheIds(){if(this.idCache.cacheIds(),void 0!==this.divs)for(let e in this.divs)this.divs[e].cacheIds()}async modifyIds(e){await this.idCache.modifyIds(e)}cacheTuids(e){this.uq.cacheTuids(e)}get hasDiv(){return void 0!==this.divs}div(e){return this.divs&&this.divs[e]}async loadTuidIds(e,t){let n=await new V(this,{divName:e,ids:t},!1).request();return n.length>0&&(this.cached=!0),n}async loadMain(e){return"object"===typeof e&&(e=e.id),await this.idCache.assureObj(e),this.idCache.valueFromId(e)}async load(e){if(void 0===e||0===e)return;let t,n;if("object"===typeof e&&(e=e.id),n=t?JSON.parse(t):await new L(this,e).request(),void 0!==n){for(let e of this.schema.fields){let{tuid:t}=e;if(void 0===t)continue;let i=this.uq.getTuid(t);if(void 0===i)continue;let r=e.name;n[r]=i.boxId(n[r])}return this.idCache.cacheValue(n),this.cacheTuidFieldValues(n),n}}cacheTuidFieldValues(e){let{fields:t,arrs:n}=this.schema;if(this.cacheFieldsInValue(e,t),void 0!==n)for(let i of n){let{name:t,fields:n}=i,r=e[t];if(void 0===r)continue;let s=this.div(t);for(let e of r)s.cacheValue(e),this.cacheFieldsInValue(e,n)}}buildFieldsTuid(){super.buildFieldsTuid();let{mainFields:e,$create:t,$update:n,stampOnMain:i}=this.schema;this.cacheFields=e||this.fields,!0===i&&(!0===t&&this.cacheFields.push({name:"$create",type:"timestamp",_tuid:void 0}),!0===n&&this.cacheFields.push({name:"$update",type:"timestamp",_tuid:void 0})),this.uq.buildFieldTuid(this.cacheFields)}unpackTuidIds(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)}async save(e,t){let n=await new F(this,{id:e,props:t}).request();return void 0!==e&&(this.idCache.remove(e),this.localArr.removeItem(e)),n}async saveProp(e,t,n){await new B(this,{id:e,prop:t,value:n}).request(),this.idCache.remove(e),await this.idCache.assureObj(e)}async all(){return await new D(this,{}).request()}async search(e,t,n){return await this.searchArr(void 0,e,t,n)}async searchArr(e,t,n,i){let r={arr:void 0,owner:e,key:t,pageStart:n,pageSize:i},s=await new q(this,r).request(),{fields:a}=this.schema;for(let o of s)this.cacheFieldsInValue(o,a);return s}async loadArr(e,t,n){if(void 0!==n&&0!==n)return await new z(this,{arr:e,owner:t,id:n}).request()}async saveArr(e,t,n,i){return await new M(this,{arr:e,owner:t,id:n,props:i}).request()}async posArr(e,t,n,i){return await new W(this,{arr:e,owner:t,id:n,order:i}).request()}async no(){return await new H(this,void 0).request()}}class R extends C{get entity(){return this._entity}}class L extends R{constructor(){super(...arguments),this.method="GET"}get path(){return"tuid/".concat(this.entity.name,"/").concat(this.params)}}class V extends R{get path(){let{divName:e}=this.params;return"tuidids/".concat(this.entity.name,"/").concat(void 0!==e?e:"$")}buildParams(){return this.params.ids}xresult(e){return e.split("\n")}}class F extends R{get path(){return"tuid/".concat(this.entity.name)}buildParams(){let{fields:e,arrs:t}=this.entity.schema,{id:n,props:i}=this.params,r={$id:n};if(this.transParams(r,i,e),void 0!==t)for(let s of t){let e=s.name,t=[],n=s.fields,a=i[e];if(void 0!==a)for(let i of a){let e={};this.transParams(e,i,n),t.push(e)}r[e]=t}return r}transParams(e,t,n){if(void 0!==t)for(let i of n){let{name:n,tuid:r,type:s}=i,a=t[n];if(void 0!==r)"object"===typeof a&&null!==a&&(a=a.id);else switch(s){case"date":a=this.entity.buildDateParam(a);break;case"datetime":a=this.entity.buildDateTimeParam(a)}e[n]=a}}}class q extends R{get path(){return"tuids/".concat(this.entity.name)}}class D extends R{constructor(){super(...arguments),this.method="GET"}get path(){return"tuid-all/".concat(this.entity.name)}}class z extends R{constructor(){super(...arguments),this.method="GET"}get path(){let{arr:e,owner:t,id:n}=this.params;return"tuid-arr/".concat(this.entity.name,"/").concat(t,"/").concat(e,"/").concat(n)}}class B extends R{get path(){return"tuid-prop/".concat(this.entity.name,"/")}}class M extends R{get path(){let{arr:e,owner:t}=this.params;return"tuid-arr/".concat(this.entity.name,"/").concat(t,"/").concat(e,"/")}buildParams(){let{id:e,props:t}=this.params,n=o().clone(t);return n.$id=e,n}}class W extends R{get path(){let{arr:e,owner:t}=this.params;return"tuid-arr-pos/".concat(this.entity.name,"/").concat(t,"/").concat(e,"/")}buildParams(){let{id:e,order:t}=this.params;return{bid:e,$order:t}}}class H extends R{get path(){return"tuid-no/".concat(this.entity.name,"/")}buildParams(){let e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}}class Z extends T{constructor(e,t,n,i){super(e,t,n),this.tuidLocal=void 0,this.from=void 0,this.isImport=!0,this.from=i}setFrom(e){this.tuidLocal=e}useId(e){this.tuidLocal.useId(e)}boxId(e){return this.tuidLocal.boxId(e)}valueFromId(e){return this.tuidLocal.valueFromId(e)}resetCache(e){this.tuidLocal.resetCache(e)}async assureBox(e){return await this.tuidLocal.assureBox(e),this.tuidLocal.valueFromId(e)}get hasDiv(){return this.tuidLocal.hasDiv}div(e){return this.tuidLocal.div(e)}async loadMain(e){return await this.tuidLocal.loadMain(e)}async load(e){return await this.tuidLocal.load(e)}async save(e,t){return await this.tuidLocal.save(e,t)}async saveProp(e,t,n){await this.tuidLocal.saveProp(e,t,n)}async all(){return await this.tuidLocal.all()}async search(e,t,n){return await this.tuidLocal.search(e,t,n)}async searchArr(e,t,n,i){return await this.tuidLocal.searchArr(e,t,n,i)}async loadArr(e,t,n){return await this.tuidLocal.loadArr(e,t,n)}async saveArr(e,t,n,i){await this.tuidLocal.saveArr(e,t,n,i)}async posArr(e,t,n,i){await this.tuidLocal.posArr(e,t,n,i)}async no(){return await this.tuidLocal.no()}}class ${constructor(e){this.tuid=void 0,this.ownerField=void 0,this.tuid=e}boxId(e){return this.tuid.boxId(e)}getIdFromObj(e){return this.tuid.getIdFromObj(e)}useId(e){return this.tuid.useId(e)}async showInfo(){alert("showInfo not implemented")}}class Q extends U{constructor(e,t,n){super(e,n,0),this.typeName="div",this.cacheFields=void 0,this.tuid=void 0,this.idName=void 0,this.idCache=void 0,this.tuid=t,this.idName="id",this.idCache=new O(t,this)}get owner(){return this.tuid}buildFieldsTuid(){super.buildFieldsTuid();let{mainFields:e}=this.schema;this.uq.buildFieldTuid(this.cacheFields=e)}buildTuidDivBox(e){return new K(this.tuid,this,e)}getIdFromObj(e){return e[this.idName]}cacheValue(e){this.idCache.cacheValue(e)}useId(e,t){!0!==this.noCache&&this.idCache.useId(e,t)}valueFromId(e){return this.idCache.getValue(e)}async assureBox(e){return await this.idCache.assureObj(e),this.idCache.getValue(e)}async cacheIds(){await this.idCache.cacheIds()}cacheTuidFieldValues(e){let t=this.schema.fields;this.cacheFieldsInValue(e,t)}unpackTuidIds(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)}}class K extends ${constructor(e,t,n){super(e),this.ownerField=void 0,this.div=void 0,this.div=t,this.ownerField=n}boxId(e){return this.div.boxId(e)}getIdFromObj(e){return this.div.getIdFromObj(e)}useId(e){return this.div.useId(e)}}class G{constructor(e){this.uq=void 0,this.modifyMax=void 0,this.cacheTimer=void 0,this.loadIds=()=>{this.clearCacheTimer();let{tuids:e}=this.uq;for(let t in e){e[t].cacheIds()}},this.uq=e}cacheTuids(e){this.clearCacheTimer(),this.cacheTimer=i.OB.setTimeout("TuidsCache.cacheTuids",this.loadIds,e)}clearCacheTimer(){void 0!==this.cacheTimer&&(i.OB.clearTimeout(this.cacheTimer),this.cacheTimer=void 0)}pullModify(e){if(void 0===e)return;let t=Math.floor(Date.now()/1e3);void 0===this.modifyMax&&(this.modifyMax=this.uq.localModifyMax.get(),void 0===this.modifyMax&&(this.modifyMax={max:e,seconds:t},this.uq.localModifyMax.set(this.modifyMax)));let{max:n,seconds:i}=this.modifyMax;if(t-i<3600)return;if(e<=n)return;let r=[],{tuids:s}=this.uq;for(let a in s)r.push(a);0!==r.length&&(this.modifyMax.seconds=t,this.innerPullModify(r.join("\t")))}async innerPullModify(e){let{uqApi:t,tuids:n}=this.uq,{max:i}=this.modifyMax,r=await t.queueModify(i,30,e),s={},a=0;for(let l of r.queue){let{id:e,entity:t,key:i}=l;if(!i)continue;let r=n[t];if(void 0===r)continue;let o=s[t];void 0===o&&(o=s[t]={tuid:r,ids:[]}),o.ids.push(i),e>a&&(a=e)}for(let l in s){let{tuid:e,ids:t}=s[l];await e.modifyIds(t)}let o=Math.floor(Date.now()/1e3);this.modifyMax={max:a,seconds:o},this.uq.localModifyMax.set(this.modifyMax)}}var X=n(986),J=n(184);const Y=(e,t,n)=>(0,J.jsxs)(J.Fragment,{children:[e,": ",ee(t)]});function ee(e){let t="{";if(void 0===e)return"undefined";for(let n in e){let i=e[n];if(t+=n+": ",void 0===i)t+="undefined";else if(null===i)t+="null";else switch(typeof i){default:t+=i;break;case"function":t+="function";break;case"object":t+="{obj}"}t+=", "}return t+"}"}class te{constructor(e,t,n){this.id=void 0,this.tuid=void 0,this.ui=void 0,this.isUndefined=void 0,this.id=Number(e),this.tuid=t,this.ui=n,this.isUndefined=void 0===this.tuid}get obj(){return this.tuid.valueFromId(this.id)}equ(e){return void 0!==e&&null!==e&&("object"===typeof e?this.id===e.id:this.id===e)}render(e,t){if(void 0===this.id||null===this.id||!0===isNaN(this.id))return;let n=this.boxName,i=this.obj;if(!0===this.isUndefined)return void 0!==e?e(i,t):Y(n,i);switch(typeof i){case"undefined":return(0,J.jsxs)("span",{className:"text-black-50",children:[n," undefined"]});case"number":return(0,J.jsxs)("span",{className:"text-light",children:[n," ",this.id]})}if(void 0===e&&(e=this.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){let t=e(i);return void 0!==t?t:(0,J.jsxs)("span",{className:"text-danger",children:[n," ",this.id]})}return Y(n,i)}get boxName(){return this.tuid.name}async assure(){return await this.tuid.assureBox(this.id),this}}(0,X.Pi)((e=>{let{tuidValue:t,ui:n,x:i,nullUI:r}=e;if(void 0===t)return void 0===r?(0,J.jsx)("small",{className:"text-muted",children:"[\u65e0]"}):r();if(null===t)return void 0===r?(0,J.jsx)(J.Fragment,{children:"[null]"}):r();let s=typeof t;switch(s){default:if(void 0===n)return(0,J.jsxs)(J.Fragment,{children:[s,"-",t]});{let e=n(t,i);return void 0!==e?e:(0,J.jsx)(J.Fragment,{children:t})}case"object":let e=function(e,t,n){let i,r=e;switch(typeof e){case"undefined":i=(0,J.jsx)(J.Fragment,{children:"boxId undefined"});break;case"number":i=(0,J.jsxs)(J.Fragment,{children:["id:",e]});break;default:if("function"!==typeof r.render){if(void 0!==t)return t(e,n);i=Y(r.boxName,e)}}return void 0!==i?(0,J.jsx)("del",{className:"text-danger",children:i}):r.render(t,n)}(t,n,i);return void 0!==e?e:void 0===r?(0,J.jsx)(J.Fragment,{children:"id null"}):r();case"number":return(0,J.jsxs)(J.Fragment,{children:["id...",t]})}}));class ne extends _{get typeName(){return"action"}async submit(e){let t=new re(this,e);return await t.request()}async submitReturns(e){return await new se(this,e).request()}async submitConvert(e){return await new ae(this,e).request()}}class ie extends ne{}class re extends S{get path(){return"action/"+this.entity.name}buildParams(){return{data:this.entity.pack(this.params)}}}class se extends re{get path(){return"action/"+this.entity.name+"/returns"}xresult(e){let{returns:t}=this.entity,n=t.length,i={};for(let r=0;r<n;r++){i[t[r].name]=e[r]}return i}}class ae extends re{get path(){return"action-convert/"+this.entity.name}buildParams(){return{data:this.params}}}var oe=n(515);class le extends _{constructor(){super(...arguments),this.states=void 0,this.verify=void 0}get typeName(){return"sheet"}setSchema(e){super.setSchema(e),this.states=e.states,this.verify=e.verify}build(e){this.states=[];for(let t of e.ops)this.states.push({name:t,actions:void 0})}createSheetState(e,t){let n={name:e,actions:[]},i=n.actions;for(let r in t){let e={name:r};i.push(e)}return n}async save(e,t){let{id:n}=this.uq,i={app:n,discription:e,data:t};return await new he(this,i).request()}async saveDebugDirect(e,t){let{id:n}=this.uq,i={app:n,discription:e,data:t};return await new de(this,i).request()}async action(e,t,n,i){return await new pe(this,{id:e,flow:t,state:n,action:i}).request()}async actionDebugDirect(e,t,n,i){return await new fe(this,{id:e,flow:t,state:n,action:i}).request()}unpack(e){let t=e[0][0];return{brief:t,data:this.unpackSheet(t.data),flows:e[1]}}async getSheet(e){let t=await new me(this,e).request();return 0===t[0].length?await this.getArchive(e):this.unpack(t)}async getArchive(e){let t=await new ve(this,e).request();return this.unpack(t)}async getArchives(e,t){let n={pageStart:e,pageSize:t};return await new ge(this,n).request()}async getStateSheets(e,t,n){let i={state:e,pageStart:t,pageSize:n};return await new ye(this,i).request()}createPageStateItems(){return new je(this)}async stateSheetCount(){return await new be(this,void 0).request()}async userSheets(e,t,n,i){let r={state:e,user:t,pageStart:n,pageSize:i};return await new we(this,r).request()}async mySheets(e,t,n){let i={state:e,pageStart:t,pageSize:n};return await new xe(this,i).request()}}class ue extends le{}class ce extends C{constructor(){super(...arguments),this.suffix=void 0}get entity(){return this._entity}get path(){return"sheet/".concat(this.entity.name,"/").concat(this.suffix)}}class he extends ce{get path(){return"sheet/".concat(this.entity.name)}buildParams(){let{app:e,discription:t,data:n}=this.params;return{app:e,discription:t,data:this.entity.pack(n)}}xresult(e){let{verify:t}=this.entity;if(void 0===t)return e;let n=e.verify;if(void 0===n||0===n.length)return e.verify=void 0,e;let{returns:i}=t;return e.verify=this.entity.unpackReturns(n,i),e}}class de extends he{get path(){return"sheet/".concat(this.entity.name,"/direct")}}class pe extends ce{constructor(){super(...arguments),this.method="PUT"}get path(){return"sheet/".concat(this.entity.name)}}class fe extends pe{get path(){return"sheet/".concat(this.entity.name,"/direct")}}class me extends ce{constructor(){super(...arguments),this.method="GET"}buildParams(){}get path(){return"sheet/".concat(this.entity.name,"/get/").concat(this.params)}}class ve extends ce{constructor(){super(...arguments),this.method="GET"}buildParams(){}get path(){return"sheet/".concat(this.entity.name,"/archive/").concat(this.params)}}class ge extends ce{constructor(){super(...arguments),this.suffix="archives"}}class ye extends ce{constructor(){super(...arguments),this.suffix="states"}}class be extends ce{constructor(){super(...arguments),this.method="GET",this.suffix="statecount"}xresult(e){let{states:t}=this.entity;return t.map((t=>{let n=t.name,i=0,r=e.find((e=>e.state===n));return void 0!==r&&(i=r.count),{state:n,count:i}}))}}class we extends ce{constructor(){super(...arguments),this.suffix="user-sheets"}xresult(e){return e}}class xe extends ce{constructor(){super(...arguments),this.suffix="my-sheets"}xresult(e){return e}}class je extends oe.F{constructor(e){super(!0),this.sheet=void 0,this.sheet=e,this.pageSize=10}async loadResults(e,t,n){return{$page:await this.sheet.getStateSheets(e,t,n)}}getPageId(e){return void 0===e?0:e.id}}var ke,_e,Ce=n(269),Se=n(229);let Ne=(ke=class extends _{constructor(){super(...arguments),this.pageStart=void 0,this.pageSize=void 0,this.params=void 0,this.more=void 0,this.startField=void 0,(0,Ce.Z)(this,"list",_e,this),this.returns=void 0,this.isPaged=void 0}get typeName(){return"query"}setSchema(e){super.setSchema(e);let{returns:t}=e;this.isPaged=t&&void 0!==t.find((e=>"$page"===e.name))}resetPage(e,t){this.pageStart=void 0,this.pageSize=e,this.params=t,this.more=!1,this.list=void 0}get hasMore(){return this.more}async loadPage(){if(void 0===this.pageSize)throw new Error("call resetPage(size:number, params:any) first");let e;if(void 0!==this.pageStart)switch(this.startField.type){default:e=this.pageStart;break;case"date":case"time":case"datetime":e=this.pageStart.getTime()}let t=(await this.page(this.params,e,this.pageSize+1)).$page;if(this.list=A.LO.array([],{deep:!1}),void 0!==t){if(t.length>this.pageSize){this.more=!0,t.pop();let e=this.returns.find((e=>"$page"===e.name));this.startField=e.fields[0],this.pageStart=t[t.length-1][this.startField.name]}else this.more=!1;this.list.push(...t)}}pageCaller(e){return new E(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}async page(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r={pageStart:t,pageSize:n,params:e};return await this.pageCaller(r,i).request()}queryCaller(e){return new N(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}async query(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await this.queryCaller(e,t).request()}async table(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=await this.query(e,t);for(let i in n)return n[i]}async obj(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=await this.table(e,t);if(n.length>0)return n[0]}async scalar(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=await this.obj(e,t);for(let i in n)return n[i]}},_e=(0,Se.Z)(ke.prototype,"list",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke);class Ee extends Ne{}class Ae extends Ee{constructor(){super(...arguments),this.queryApiName="book"}get typeName(){return"book"}queryCaller(e){return new Pe(this,e)}}class Pe extends N{get path(){return"book/".concat(this.entity.name)}}class Oe extends Ee{constructor(){super(...arguments),this.queryApiName="history"}get typeName(){return"history"}}class Ie extends _{constructor(){super(...arguments),this.keys=void 0,this.actions={},this.queries={},this.schemaFrom=void 0}get typeName(){return"map"}setSchema(e){super.setSchema(e),this.schemaFrom=this.schema.from;let{actions:t,queries:n,keys:i}=e;this.uq.buildFieldTuid(this.keys=i);for(let r in t){let e=t[r],{name:n}=e,i=this.uq.newAction(n,void 0);i.setSchema(e),i.buildFieldsTuid(),this.actions[r]=i}for(let r in n){let e=n[r],{name:t}=e,i=this.uq.newQuery(t,void 0);i.setSchema(e),i.buildFieldsTuid(),this.queries[r]=i}}async add(e){return await new Ue(this,e).request()}async del(e){return await new Re(this,e).request()}async all(){return await new Le(this,void 0).request()}async page(e,t,n){return await new Ve(this,{pageStart:t,pageSize:n,param:e}).request()}async query(e){let t=new Fe(this,e);return await t.request()}async table(e){let t=await this.query(e);for(let n in t)return t[n]}async obj(e){let t=await this.table(e);if(t.length>0)return t[0]}async scalar(e){let t=await this.obj(e);for(let n in t)return t[n]}}class Te extends C{get entity(){return this._entity}get path(){}async innerCall(){let e=this.getCaller(this.params),t=await this.entity.uqApi.xcall(e);return{res:e.xresult(t.res)}}buildParams(){return super.buildParams()}}class Ue extends Te{getCaller(e){return new qe(this.entity,this.entity.actions.add,e)}}class Re extends Te{getCaller(e){return new De(this.entity,this.entity.actions.add,e)}}class Le extends Te{getCaller(e){return new ze(this.entity,this.entity.queries.all,e)}}class Ve extends Te{getCaller(e){return new Be(this.entity,this.entity.queries.page,e)}}class Fe extends Te{getCaller(e){return new Me(this.entity,this.entity.queries.query,e)}}class qe extends re{constructor(e,t,n){super(t,n),this.map=void 0,this.map=e}get path(){return"map/".concat(this.map.name,"/add")}get headers(){}}class De extends re{constructor(e,t,n){super(t,n),this.map=void 0,this.map=e}get path(){return"map/".concat(this.map.name,"/del")}get headers(){}}class ze extends E{constructor(e,t,n){super(t,n),this.map=void 0,this.map=e}get path(){return"map/".concat(this.map.name,"/all")}get headers(){}}class Be extends E{constructor(e,t,n){super(t,n),this.map=void 0,this.map=e}get path(){return"map/".concat(this.map.name,"/page")}get headers(){}}class Me extends N{constructor(e,t,n){super(t,n),this.map=void 0,this.map=e}get path(){return"map/".concat(this.map.name,"/query")}get headers(){}}class We extends Ee{constructor(){super(...arguments),this.queryApiName="pending"}get typeName(){return"pending"}}const He={height:"auto"};class Ze{constructor(e){this.tag=void 0,this.tag=e}render(e){let t;return t="number"===typeof e?[this.tag.nameFromId(e)]:this.tag.namesFromIds(e),(0,J.jsx)("div",{className:"d-flex flex-wrap ",children:t.map(((e,t)=>(0,J.jsx)("div",{className:"mx-2 border border-muted rounded px-3 bg-light",children:e},t)))})}renderRadios(e,t){let n=this.tag.values.map(((n,i)=>(0,J.jsx)("div",{className:"col",children:this.renderRadio(n,e,t)},i)));return this.renderView(t,n)}renderChecks(e,t){let n=void 0===e?void 0:e.split("|").map((e=>Number(e))),i=this.tag.values.map(((e,i)=>{let r=void 0===n?void 0:n.indexOf(e.id)>=0;return(0,J.jsx)("div",{className:"col",children:this.renderCheck(e,r,t)},i)}));return this.renderView(t,i)}renderView(e,t){let{className:n,wrapClassName:i}=e;return i=i?"row "+i:"row row-cols-2 row-cols-sm-3 row-cols-md-4",(0,J.jsx)("div",{className:n,style:He,children:(0,J.jsx)("div",{className:i,children:t})})}renderRadio(e,t,n){let{id:i,name:r}=e,{inputs:s,inputName:a,onInputChange:o}=n,l=s&&(e=>s[i]=e);return(0,J.jsxs)("label",{className:"form-radio-inline",children:[(0,J.jsx)("input",{ref:l,type:"radio",name:a,value:i,defaultChecked:t===i,onChange:o}),r]})}renderCheck(e,t,n){let{id:i,name:r}=e,{inputs:s,onInputChange:a}=n,o=s&&(e=>s[i]=e);return(0,J.jsxs)("label",{className:"form-radio-inline",children:[(0,J.jsx)("input",{ref:o,type:"checkbox",value:i,defaultChecked:t,onChange:a}),r]})}}class $e extends _{constructor(){super(...arguments),this.values=void 0,this.coll={},this._view=void 0}get typeName(){return"tag"}get view(){return void 0!==this._view?this._view:this._view=new Ze(this)}nameFromId(e){let t=this.coll[e];return void 0===t?void 0:t.name}namesFromIds(e){let t=[];for(let n of e.split("|")){let e=this.coll[Number(n)],i=void 0===e?void 0:e.name;void 0!==i&&t.push(i)}return t}async loadValues(){if(void 0!==this.values)return this.values;this.values=[];let e=await this.uqApi.get("tag/values/"+this.name);if(void 0===e)return;let t=e.split("\n");for(let n of t){if(0===n.length)continue;let e=n.split("\t"),t=Number(e[0]),i={id:t,name:e[1],ext:e[2]};this.values.push(i),this.coll[t]=i}return this.values}}class Qe extends _{get typeName(){return"enum"}}class Ke{constructor(e,t,n,i){this.enums={},this.actions={},this.sheets={},this.queries={},this.books={},this.maps={},this.histories={},this.pendings={},this.tags={},this.tuidsCache=void 0,this.localAccess=void 0,this.tvs=void 0,this.localMap=void 0,this.localModifyMax=void 0,this.tuids={},this.createBoxId=void 0,this.newVersion=void 0,this.uqOwner=void 0,this.uqName=void 0,this.name=void 0,this.uqApi=void 0,this.id=void 0,this.uqVersion=void 0,this.createBoxIdFromTVs=(e,t)=>{let{name:n}=e;return new te(t,e,this.tvs[n])},this.tuidArr=[],this.actionArr=[],this.enumArr=[],this.sheetArr=[],this.queryArr=[],this.bookArr=[],this.mapArr=[],this.historyArr=[],this.pendingArr=[],this.tagArr=[],this.createBoxId=n,void 0===n&&(this.createBoxId=this.createBoxIdFromTVs,this.tvs=i||{});let{id:s,uqOwner:a,uqName:o,access:l,newVersion:u}=t;this.newVersion=u,this.uqOwner=a,this.uqName=o,this.id=s,this.name=a+"/"+o,this.uqVersion=0,this.localMap=e.localMap.map(this.name),this.localModifyMax=this.localMap.child("$modifyMax"),this.localAccess=this.localMap.child("$access");let c;if(c=null===l||void 0===l||"*"===l?[]:l.split(";").map((e=>e.trim())).filter((e=>e.length>0)),"$$$/$unitx"===this.name)this.uqApi=new r.rw(r.appInFrame.unit);else{let{appOwner:t,appName:n}=e;this.uqApi=new r.zC("tv/",t,n,a,o,c,!0)}this.tuidsCache=new G(this)}get entities(){return o().merge({},this.actions,this.sheets,this.queries,this.books,this.maps,this.histories,this.pendings,this.tuids,this.tags)}tuid(e){return this.tuids[e.toLowerCase()]}tuidDiv(e,t){let n=this.tuids[e.toLowerCase()];return n&&n.div(t.toLowerCase())}action(e){return this.actions[e.toLowerCase()]}sheet(e){return this.sheets[e.toLowerCase()]}query(e){return this.queries[e.toLowerCase()]}book(e){return this.books[e.toLowerCase()]}map(e){return this.maps[e.toLowerCase()]}history(e){return this.histories[e.toLowerCase()]}pending(e){return this.pendings[e.toLowerCase()]}sheetFromTypeId(e){for(let t in this.sheets){let n=this.sheets[t];if(n.typeId===e)return n}}async init(){await this.uqApi.init()}async loadEntities(){try{let e=this.localAccess.get();if(e||(e=await this.uqApi.loadAccess()),!e)return;this.buildEntities(e)}catch(e){return e}}buildEntities(e){this.localAccess.set(e);let{access:t,tuids:n,version:i}=e;this.uqVersion=i,this.buildTuids(n),this.buildAccess(t)}buildTuids(e){for(let t in e){let n=e[t],{typeId:i,from:r}=n;this.newTuid(t,i,r).sys=!0}for(let t in e){let n=e[t];this.getTuid(t).setSchema(n)}for(let t in this.tuids){this.tuids[t].buildFieldsTuid()}}async loadEntitySchema(e){return await this.uqApi.schema(e)}async loadAllSchemas(){let e=await this.uqApi.allSchemas();[this.actionArr,this.enumArr,this.sheetArr,this.queryArr,this.bookArr,this.mapArr,this.historyArr,this.pendingArr,this.tagArr].forEach((t=>{t.forEach((t=>{let n=e[t.name.toLowerCase()];if(!n)return;let i=n.call;i&&t.buildSchema(i)}))}))}getTuid(e){return this.tuids[e]}buildAccess(e){for(let t in e){let n=e[t];switch(typeof n){case"string":this.fromType(t,n);break;case"object":this.fromObj(t,n)}}}cacheTuids(e){this.tuidsCache.cacheTuids(e)}newEnum(e,t){let n=this.enums[e];return void 0!==n||(n=this.enums[e]=new Qe(this,e,t),this.enumArr.push(n)),n}newAction(e,t){let n=this.actions[e];return void 0!==n||(n=this.actions[e]=new ie(this,e,t),this.actionArr.push(n)),n}newTuid(e,t,n){let i=this.tuids[e];return void 0!==i||(i=void 0!==n?new Z(this,e,t,n):new U(this,e,t),this.tuids[e]=i,this.tuidArr.push(i)),i}newQuery(e,t){let n=this.queries[e];return void 0!==n||(n=this.queries[e]=new Ee(this,e,t),this.queryArr.push(n)),n}newBook(e,t){let n=this.books[e];return void 0!==n||(n=this.books[e]=new Ae(this,e,t),this.bookArr.push(n)),n}newMap(e,t){let n=this.maps[e];return void 0!==n||(n=this.maps[e]=new Ie(this,e,t),this.mapArr.push(n)),n}newTag(e,t){let n=this.tags[e];return void 0!==n||(n=this.tags[e]=new $e(this,e,t),this.tagArr.push(n)),n}newHistory(e,t){let n=this.histories[e];if(void 0===n)return n=this.histories[e]=new Oe(this,e,t),this.historyArr.push(n),n}newPending(e,t){let n=this.pendings[e];if(void 0===n)return n=this.pendings[e]=new We(this,e,t),this.pendingArr.push(n),n}newSheet(e,t){let n=this.sheets[e];return void 0!==n||(n=this.sheets[e]=new ue(this,e,t),this.sheetArr.push(n)),n}fromType(e,t){let n=t.split("|");t=n[0];let i=Number(n[1]);switch(t){case"tuid":break;case"action":this.newAction(e,i);break;case"query":this.newQuery(e,i);break;case"book":this.newBook(e,i);break;case"map":this.newMap(e,i);break;case"history":this.newHistory(e,i);break;case"sheet":this.newSheet(e,i);break;case"pending":this.newPending(e,i);break;case"tag":this.newTag(e,i);break;case"enum":this.newEnum(e,i)}}fromObj(e,t){if("sheet"===t.$)this.buildSheet(e,t)}buildSheet(e,t){let n=this.sheets[e];void 0===n&&(n=this.newSheet(e,t.id)),n.build(t)}buildFieldTuid(e,t){if(void 0!==e){for(let t of e){let{tuid:e}=t;if(void 0===e)continue;let n=this.getTuid(e);void 0!==n&&(t._tuid=n.buildTuidBox())}for(let n of e){let{owner:i}=n;if(void 0===i)continue;let r=e.find((e=>e.name===i));if(void 0===r&&(void 0!==t&&(r=t.find((e=>e.name===i))),void 0===r))throw new Error("owner field ".concat(i," is undefined"));let{arr:s,tuid:a}=n,o=this.getTuid(r._tuid.tuid.name);if(void 0===o)continue;let l=o.div(s||a);if(n._tuid=l&&l.buildTuidDivBox(r),void 0===n._tuid)throw new Error("owner field ".concat(i," is not tuid"))}}}buildArrFieldsTuid(e,t){if(void 0!==e)for(let n of e){let{fields:e}=n;void 0!==e&&this.buildFieldTuid(e,t)}}pullModify(e){this.tuidsCache.pullModify(e)}}class Ge{static async load(e,t,n){let i=Ge.value=new Ge(e,n),{appOwner:s,appName:a}=i,{localData:o}=i,l=o.get();if(!l||l.version!==t){if(l=await(0,r.eX)(s,a),!l.id)return["".concat(s,"/").concat(a,"\u4e0d\u5b58\u5728\u3002\u8bf7\u4ed4\u7ec6\u68c0\u67e5app\u5168\u540d\u3002")];l.version=t,o.set(l);for(let e of l.uqs)e.newVersion=!0}let{id:u,uqs:c}=l;i.id=u,await i.init(c);let h=await i.load();0!==h.length||(h.push(...i.setTuidImportsLocal()),0!==h.length)?Ge.errors=h:Ge._uqs=i.buildUQs()}constructor(e,t){this.collection=void 0,this.tvs=void 0,this.appOwner=void 0,this.appName=void 0,this.localMap=void 0,this.localData=void 0,this.id=void 0,this.tvs=t||{},this.buildTVs(),this.collection={};let n=e.split("/");if(2!==n.length)throw new Error("tonvaApp name must be / separated, owner/app");this.appOwner=n[0],this.appName=n[1],this.localMap=i.OB.localDb.map(e),this.localData=this.localMap.child("uqData")}addUq(e){this.collection[e.name]=e}buildTVs(){for(let e in this.tvs){let t=this.tvs[e];if(void 0===t)continue;let n=e.toLowerCase();if(n!==e){this.tvs[n]=t;for(let e in t){let n=t[e];if(void 0===n)continue;let i=e.toLowerCase();i!==e&&(t[i]=n)}}}}async init(e){let t=e.map((e=>{let{uqOwner:t,uqName:n}=e,i=t+"/"+n,r=new Ke(this,e,void 0,this.tvs[i]||this.tvs[n]);this.collection[i]=r;let s=i.toLowerCase();return s!==i&&(this.collection[s]=r),r.init()}));await Promise.all(t)}async load(){let e=[],t=[];for(let i in this.collection){let e=this.collection[i];t.push(e.loadEntities())}let n=await Promise.all(t);for(let i of n){let t=i;void 0===t||e.push(t)}return e}buildUQs(){let e=this,t={};for(let n in this.collection){let i=this.collection[n],r=i.uqName,s=r.toLowerCase(),a=r.split(/[-._]/).join("").toLowerCase(),o=i.entities,l=Object.keys(o);for(let e of l){let t=o[e],{name:n}=t;o[n.toLowerCase()]=t}let u=t[s]=new Proxy(o,{get:function(t,n,i){let s=t[n.toLowerCase()];if(void 0!==s)return s;let a="entity ".concat(r,".").concat(String(n)," not defined");console.error(a),e.showReload("UQ\u9519\u8bef\uff1a"+a)}});a!==s&&(t[a]=u)}return new Proxy(t,{get:function(t,n,i){let r=t[n.toLowerCase()];if(void 0!==r)return r;console.error("error in uqs"),e.showReload("\u4ee3\u7801\u9519\u8bef\uff1a\u65b0\u589e uq ".concat(String(n)))}})}getUqCollection(){return this.collection}showReload(e){this.localMap.removeAll(),s.nav.showReloadPage(e)}setTuidImportsLocal(){let e=[];for(let t in this.collection){let n=this.collection[t];for(let t of n.tuidArr)if(!0===t.isImport){let n=this.setInner(t);n&&e.push(n)}}return e}setInner(e){let{from:t}=e,n=t.owner+"/"+t.uq,i=this.collection[n];if(void 0===i)return"setInner(tuidImport: TuidImport): uq ".concat(n," is not loaded");let r=e.name,s=i.tuid(r);return void 0===s?"setInner(tuidImport: TuidImport): uq ".concat(n," has no Tuid ").concat(r):!0===s.isImport?"setInner(tuidImport: TuidImport): uq ".concat(n," Tuid ").concat(r," is import"):void e.setFrom(s)}}Ge._uqs=void 0,Ge.value=void 0,Ge.errors=void 0;var Xe=n(285);class Je extends r.Dx{async userAppUnits(e){return await this.get("tie/user-app-units",{app:e})}async userFromId(e){return await this.get("user/user-name-nick-icon-from-id",{userId:e})}async userFromKey(e){return await this.get("tie/user-from-key",{key:e})}}const Ye=new Je("tv/",void 0);class et extends Xe.ps{constructor(){super(...arguments),this.page=e=>{let{predefinedUnit:t}=e,{user:n}=s.nav,i=n?n.name:"[\u672a\u767b\u5f55]",{appOwner:r,appName:a}=Ge.value;return(0,J.jsx)(s.T3,{header:"APP\u65e0\u6cd5\u8fd0\u884c",logout:!0,children:(0,J.jsxs)("div",{className:"m-3 text-danger container",children:[(0,J.jsxs)("div",{className:"form-group row",children:[(0,J.jsx)("div",{className:"col-sm-3 font-weight-bold",children:"\u767b\u5f55\u7528\u6237"}),(0,J.jsx)("div",{className:"col-sm text-body",children:i})]}),(0,J.jsxs)("div",{className:"form-group row",children:[(0,J.jsx)("div",{className:"col-sm-3 font-weight-bold",children:"App"}),(0,J.jsx)("div",{className:"col-sm text-body",children:"".concat(r,"/").concat(a)})]}),(0,J.jsxs)("div",{className:"form-group row",children:[(0,J.jsx)("div",{className:"col-sm-3 font-weight-bold",children:"\u9884\u8bbe\u5c0f\u53f7"}),(0,J.jsx)("div",{className:"col-sm text-body",children:t||(0,J.jsx)("small",{className:"",children:"[\u65e0\u9884\u8bbe\u5c0f\u53f7]"})})]}),(0,J.jsxs)("div",{className:"form-group row",children:[(0,J.jsxs)("div",{className:"col-sm-3 font-weight-bold",children:["\u53ef\u80fd\u539f\u56e0",(0,J.jsx)(s.FA,{name:"exclamation-triangle"})]}),(0,J.jsx)("div",{className:"col-sm text-body",children:(0,J.jsxs)("ul",{className:"p-0",children:[(0,J.jsxs)("li",{children:["\u6ca1\u6709\u5c0f\u53f7\u8fd0\u884c ",a]}),(0,J.jsxs)("li",{children:["\u7528\u6237 ",(0,J.jsx)("b",{children:i})," \u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u8fd0\u884c",a,"\u7684\u5c0f\u53f7"]}),t&&(0,J.jsxs)("li",{children:["\u9884\u8bbe\u5c0f\u53f7 ",(0,J.jsx)("b",{children:t})," \u6ca1\u6709\u8fd0\u884cApp ",a]})]})})]}),(0,J.jsxs)("div",{className:"form-group row",children:[(0,J.jsxs)("div",{className:"col-sm-3 font-weight-bold",children:["\u5c0f\u53f7",t]}),(0,J.jsxs)("div",{className:"col-sm text-body",children:["\u9884\u8bbe\u5c0f\u53f7\u5b9a\u4e49\u5728 public/unit.json \u6587\u4ef6\u4e2d\u3002 \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u7531url\u76f4\u63a5\u542f\u52a8\u3002 \u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95eeapp\u4e4b\u540e\uff0c\u4f1a\u7f13\u5b58\u5728localStorage\u91cc\u3002",(0,J.jsx)("br",{}),"\u5982\u679c\u8981\u5220\u53bb\u7f13\u5b58\u7684\u9884\u5b9a\u4e49Unit\uff0clogout\u7136\u540e\u518dlogin\u3002"]})]})]})})}}async open(e){this.openPage(this.page,{predefinedUnit:e})}}class tt extends Xe.ps{constructor(){super(...arguments),this.renderRow=(e,t)=>{let{id:n,nick:i,name:r}=e;return(0,J.jsx)(s.pA,{className:"px-3 py-2",right:"id: "+n,children:(0,J.jsx)("div",{children:i||r})})},this.onRowClick=async e=>{r.appInFrame.unit=e.id,this.controller.setAppUnit(e),await this.controller.start()},this.page=()=>(0,J.jsx)(s.T3,{header:"\u9009\u62e9\u5c0f\u53f7",logout:!0,children:(0,J.jsx)(s.aV,{items:this.controller.appUnits,item:{render:this.renderRow,onClick:this.onRowClick}})})}async open(){this.openPage(this.page)}}class nt extends Xe.ps{constructor(){super(...arguments),this.page=e=>(0,J.jsx)(s.T3,{header:"ERROR",children:(0,J.jsxs)("div",{className:"m-3",children:[(0,J.jsx)("div",{className:"p-3 d-flex justify-content-center align-items-center",children:(0,J.jsx)("button",{className:"btn btn-danger",onClick:s.nav.resetAll,children:"\u91cd\u542f\u7f51\u9875"})}),(0,J.jsx)("div",{children:"Load Uqs \u53d1\u751f\u9519\u8bef\uff1a"}),e.errors.map(((e,t)=>(0,J.jsx)("div",{children:e},t)))]})})}async open(e){this.openPage(this.page,{errors:e})}}class it extends Xe.ps{constructor(){super(...arguments),this.page=e=>{let{error:t}=e;return(0,J.jsx)(s.T3,{header:"App start error!",children:(0,J.jsx)("pre",{children:"string"===typeof t?t:t.message})})}}async open(e){this.openPage(this.page,{error:e})}}class rt extends Xe.Qr{constructor(e){if(super(void 0),this.appConfig=void 0,this._uqs=void 0,this.name=void 0,this.noUnit=void 0,this.appUnits=void 0,this.appUnit=void 0,this.roleDefines=void 0,this.appConfig=e||s.nav.navSettings,this.appConfig){let{appName:e,noUnit:t}=this.appConfig;if(this.name=e,void 0===e)throw new Error('appName like "owner/app" must be defined in MainConfig');this.noUnit=t}}get uqs(){return this._uqs}internalT(e){return(0,s.t)(e)}setRes(e){(0,s.B1)(e)}hasRole(e){let t;if("string"===typeof e){if(0===e.length)return!1;let n=this.roleDefines.findIndex((t=>t===e));if(n<0)return!1;t=1<<n}else t=e;return 0!==(this.appUnit.roles&t)}setAppUnit(e){this.appUnit=e;let{roleDefs:t}=e;this.roleDefines=t?t.split("\t"):[]}async beforeStart(){try{if(this.onNavRoutes(),!this.appConfig)return!0;let{appName:e,version:t,tvs:n}=this.appConfig;await Ge.load(e,t,n),this._uqs=Ge._uqs;let i=Ge.errors,{predefinedUnit:a}=r.appInFrame,{user:o}=s.nav;if(void 0!==o&&o.id>0){let e=await Ye.userAppUnits(Ge.value.id);if(this.appUnits=e,!0===this.noUnit)return!0;switch(this.appUnits.length){case 0:return this.showUnsupport(a),!1;case 1:let e=this.appUnits[0];this.setAppUnit(e);let{id:t}=e,n=t;if(void 0===n||n<0||void 0!==a&&n!==a)return this.showUnsupport(a),!1;r.appInFrame.unit=n;break;default:if(a>0&&void 0!==this.appUnits.find((e=>e.id===a))){r.appInFrame.unit=a;break}return this.openVPage(tt),!1}}return void 0===i||(this.openVPage(nt,i),!1)}catch(e){return this.openVPage(it,e),!1}}async afterStart(){s.nav.resolveRoute()}async userFromId(e){return await Ye.userFromId(e)}on(){return s.nav.on(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}onNavRoutes(){}showUnsupport(e){s.nav.clear(),this.openVPage(et,e)}}class st extends Xe.Qr{constructor(e){super(e.res),this._uqs=void 0,this._cApp=void 0,this._cApp=e,this._uqs=e&&e.uqs}get uqs(){return this._uqs}get cApp(){return this._cApp}hasRole(e){var t;return null===(t=this._cApp)||void 0===t?void 0:t.hasRole(e)}internalT(e){let t=super.internalT(e);return void 0!==t?t:this._cApp.internalT(e)}newC(e,t){let n=new e(this.cApp);return n.init(t),n}newSub(e,t){let n=new e(this);return n.init(t),n}getWebNav(){var e;let t=null===(e=this._cApp)||void 0===e?void 0:e.getWebNav();if(void 0===t)return;let n=o().clone(t);return o().merge(n,this.webNav),n}}class at extends r.Dx{async userAppUnits(e){return await this.get("tie/user-app-units",{app:e})}async stickies(){return await this.get("sticky/list",{start:0,pageSize:30})}async ties(){return await this.get("tie/list",{start:0,pageSize:30})}async apps(e){return await this.get("tie/apps",{unit:e})}async appApi(e,t,n){return await this.get("tie/app-api",{unit:e,app:t,apiName:n})}async userId(e){return await this.get("tie/user-id",{name:e})}async user(e){return await this.get("tie/user",{id:e})}async userUnitAdmins(){return await this.get("tie/user-admin-units",{})}async sendMessage(e,t,n){let{unit:i}=r.appInFrame;return await this.post("tie/send-message",{type:t,fromUnit:i,fromApp:0,toUser:e,content:n})}async unit(e){return await this.get("unit/",{unit:e})}async unitMemberCount(e){return await this.get("unit/member-count",{unit:e})}async unitAdmins(e){return await this.get("unit/admins",{unit:e})}async unitAppAdmins(e,t){return await this.get("unit/app-admins",{unit:e,app:t})}async unitSetAdmin(e,t,n,i,r){return await this.post("unit/set-admin",{fellow:e,unit:t,isOwner:n,isAdmin:i,isDev:r})}async unitAddAdmin(e,t,n,i,r){return await this.post("unit/add-admin",{user:e,unit:t,isOwner:n,isAdmin:i,isDev:r})}async unitDelAdmin(e,t){return await this.post("unit/del-admin",{user:t,unit:e})}async adminDevs(e){return await this.get("unit/admin-devs",{unit:e})}async addDev(e,t){return await this.post("unit/add-dev",{unit:e,dev:t})}async delDev(e,t){return await this.post("unit/del-dev",{unit:e,dev:t})}async unitApps(e){return await this.get("unit/apps",{unit:e})}async unitAddApp(e,t){return await this.post("unit/add-app",{unit:e,app:t})}async unitDeleteApp(e,t,n){await this.post("unit/delete-app",{unit:e,app:t,deleted:n})}async unitChangeProp(e,t,n){await this.post("unit/change-prop",{unit:e,prop:t,value:n})}async searchApp(e,t,n,i){return await this.get("unit/search-app",{unit:e,key:t,pageStart:n,pageSize:i})}async unitRoles(e){return await this.get("unit/roles",{unit:e})}async unitAddRole(e,t,n){return await this.post("unit/add-role",{unit:e,name:t,discription:n})}async unitRoleChangeProp(e,t,n,i){await this.post("unit/change-role-prop",{unit:e,role:t,prop:n,value:i})}async unitRoleApps(e,t){return await this.get("unit/role-apps",{unit:e,role:t})}async unitRoleSetApps(e,t,n){await this.post("unit/role-set-apps",{unit:e,role:t,apps:n})}async unitMembers(e,t,n,i,r){return await this.get("unit/members",{unit:e,role:t,key:n,pageStart:i,pageSize:r})}async unitAssignMember(e,t,n){await this.post("unit/assign-member",{unit:e,member:t,assigned:n})}async unitMemberRoles(e,t){return await this.get("unit/member-roles",{unit:e,member:t})}async unitSetMemberRoles(e,t,n){await this.post("unit/member-set-roles",{unit:e,member:t,roles:n})}async unitUsers(e,t,n,i){return await this.get("unit/users",{unit:e,key:t,pageStart:n,pageSize:i})}async unitAppUsers(e,t,n,i){return await this.get("unit/app-users",{unit:e,key:t,pageStart:n,pageSize:i})}async unitOneAppUsers(e,t,n,i){return await this.get("unit/one-app-users",{unit:e,app:t,pageStart:n,pageSize:i})}async unitOneUserApps(e,t,n,i){return await this.get("unit/one-user-apps",{unit:e,user:t,pageStart:n,pageSize:i})}async unitAppEditUsers(e,t,n,i,r){return await this.get("unit/app-edit-users",{unit:e,app:t,key:n,pageStart:i,pageSize:r})}async unitUserEditApps(e,t,n,i,r){return await this.get("unit/user-edit-apps",{unit:e,user:t,key:n,pageStart:i,pageSize:r})}async bindAppUser(e,t,n,i){await this.post("unit/bind-app-user",{unit:e,app:t,user:n,bind:i})}async userFromKey(e){return await this.get("tie/user-from-key",{key:e})}async unitAddUser(e,t){await this.post("unit/add-user",{unit:e,user:t})}async setAppAdmin(e,t,n,i,r){return await this.post("unit/set-app-admin",{unit:e,app:t,user:n,name:i,isAdmin:r})}async setAppRoles(e,t,n,i,r){return await this.post("unit/set-app-roles",{unit:e,app:t,user:n,name:i,roles:r})}}const ot=new at("tv/",!0),lt=50;class ut extends r.Dx{async userAppUnits(e){return await this.get("tie/user-app-units",{app:e})}async uqBuilderUrl(){return await this.get("uq-builder-url",void 0)}async counts(e){return await this.get("counts",{unit:e})}async app(e){return await this.get("app",{id:e})}async bus(e){let t=await this.get("bus",{id:e}),{schema:n,source:i}=t;return i||(t.source=n),t}async uq(e){return await this.get("uq",{id:e})}async uqSource(e){return await this.get("uq-source-code",{uq:e})}async server(e){return await this.get("server",{id:e})}async apps(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;return await this.get("apps",{unit:e,pageSize:t})}async uqs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;return await this.get("uqs",{unit:e,pageSize:t})}async unitUQs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;return await this.get("unit-uqs",{unit:e,pageSize:t})}async buses(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;return await this.get("buses",{unit:e,pageSize:t})}async servers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;return await this.get("servers",{unit:e,pageSize:t})}async services(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;return await this.get("services",{unit:e,pageSize:t})}async saveApp(e){return await this.post("app-save",e)}async saveUq(e){return await this.post("uq-save",e)}async saveBus(e){return await this.post("bus-save",e)}async saveServer(e){return await this.post("server-save",e)}async saveService(e){return await this.post("service-save",e)}async delApp(e,t){return await this.post("app-del",{unit:e,id:t})}async delUq(e,t){return await this.post("uq-del",{unit:e,id:t})}async delBus(e,t){return await this.post("bus-del",{unit:e,id:t})}async delServer(e,t){return await this.post("server-del",{unit:e,id:t})}async delUqdb(e,t){return await this.post("uqdb-del",{unit:e,id:t})}async delService(e,t){return await this.post("service-del",{unit:e,id:t})}async loadAppUqs(e){return await this.get("app-uqs",{app:e})}async appBindUq(e,t,n){let i=n.join(";");await this.post("app-bind-uq",{unit:e,app:t,uqs:i})}async appSetUqMain(e,t,n){await this.post("app-set-uq-main",{unit:e,app:t,uq:n})}async searchUq(e,t,n,i){return await this.get("uq-search",{unit:e,key:t,pageStart:n,pageSize:i})}async getMyUqs(e){return await this.get("my-uqs",{unit:e})}async searchApp(e,t,n,i){return await this.get("app-search",{unit:e,key:t,pageStart:n,pageSize:i})}async searchServer(e,t,n,i){return await this.get("server-search",{unit:e,key:t,pageStart:n,pageSize:i})}async searchUqdb(e,t,n,i){return await this.get("uqdb-search",{unit:e,key:t,pageStart:n,pageSize:i})}async loadUqServices(e,t){return await this.get("uq-services",{unit:e,uq:t})}async changeServiceProp(e,t,n,i){return await this.post("service-change-prop",{unit:e,service:t,prop:n,value:i})}async uqGetEntities(e,t){return await this.get("uq-get-entities",{unit:e,uq:t})}async adminDevAdd(e){await this.post("admin-dev-add",e)}async adminDevDel(e){await this.post("admin-dev-del",e)}}const ct=new ut("tv/dev/",!0);class ht extends i.v{async _loadIds(e){}async _loadId(e){return await ot.unit(e)}}class dt extends i.v{async _loadIds(e){}async _loadId(e){return await ct.uq(e)}}class pt extends i.v{async _loadIds(e){}async _loadId(e){return await ct.app(e)}}class ft extends i.v{async _loadIds(e){}async _loadId(e){return await ct.bus(e)}}class mt extends i.v{async _loadIds(e){}async _loadId(e){return await ot.user(e)}}class vt extends i.v{async _loadIds(e){}async _loadId(e){return await ct.server(e)}}const gt=new class{constructor(){this.units=void 0,this.uqs=void 0,this.apps=void 0,this.buses=void 0,this.servers=void 0,this.users=void 0,this.reset()}reset(){this.units=new ht,this.uqs=new dt,this.apps=new pt,this.buses=new ft,this.servers=new vt,this.users=new mt}};var yt,bt,wt,xt,jt,kt,_t,Ct,St,Nt;let Et=(yt=class{constructor(e,t){this.store=void 0,this.dev=void 0,(0,Ce.Z)(this,"items",bt,this),(0,Ce.Z)(this,"cur",wt,this),this.store=e,this.dev=t}async load(){let e=await this._load();this.items=e}async saveCur(e){let t={};void 0!==this.cur?o().assign(t,this.cur,e):o().assign(t,e),t.unit=e.unit=this.store.unit.id,t.mine=1;let n=await this._save(t);if(void 0===this.cur){if(0===n)return!1;t.id=n,void 0!==this.items&&this.items.unshift(t),this._inc(),this.cur=(0,A.LO)(t)}else o().assign(this.cur,t);return!0}async check(e){return!0}async save(e){let t={};o().assign(t,e),t.unit=e.unit=this.store.unit.id;let n=await this._save(t);if(0!==n)return t.id=n,t}async del(){let e=this.cur;if(void 0===e)return;let t=e.id;if(await this._del(e),void 0===this.items)return;let n=this.items.findIndex((e=>e.id===t));n>=0&&(this.items.splice(n,1),this._dec())}},bt=(0,Se.Z)(yt.prototype,"items",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),wt=(0,Se.Z)(yt.prototype,"cur",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),yt),At=(xt=class extends Et{constructor(){super(...arguments),(0,Ce.Z)(this,"uqs",jt,this),(0,Ce.Z)(this,"searchedUqs",kt,this)}async _load(){return await ct.apps(this.store.unit.id)}async _save(e){return await ct.saveApp(e)}async _del(e){await ct.delApp(this.store.unit.id,e.id)}_inc(){this.dev.counts.app++}_dec(){this.dev.counts.app--}async loadCurUqs(){let e=await ct.loadAppUqs(this.cur.id);this.uqs=e}async searchUq(e){this.searchedUqs=await ct.searchUq(this.store.unit.id,e,0,Bt)}},jt=(0,Se.Z)(xt.prototype,"uqs",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),kt=(0,Se.Z)(xt.prototype,"searchedUqs",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),xt);class Pt extends Et{async _load(){return await ct.uqs(this.store.unit.id)}async _save(e){return await ct.saveUq(e)}async _del(e){await ct.delUq(this.store.unit.id,e.id)}_inc(){this.dev.counts.uq++}_dec(){this.dev.counts.uq--}}class Ot extends Et{async _load(){let e=await ct.buses(this.store.unit.id);for(let t of e){let{schema:e,source:n}=t;n||(t.source=e)}return e}async _save(e){return await ct.saveBus(e)}async _del(e){await ct.delBus(this.store.unit.id,e.id)}_inc(){this.dev.counts.bus++}_dec(){this.dev.counts.bus--}checkBusName(e,t){let n=t.split("/");switch(n.length){default:return alert("'".concat(t,"'\u4e0d\u7b26\u5408bus\u540d\u79f0\u7684\u683c\u5f0f: \u6240\u6709\u8005/\u540d\u79f0")),!1;case 1:if(n[0].toLowerCase()!==e.name)return alert("$prop '".concat(t,"' in schema \u5e94\u8be5\u8ddf\u540d\u79f0\u4e00\u81f4")),!1;break;case 2:if(n[0].toLowerCase()!==this.store.unit.name.toLowerCase()||n[1].toLowerCase()!==e.name.toLowerCase())return alert("$prop '".concat(t,"' in schema \u5e94\u8be5\u8ddf \u6240\u6709\u8005/\u540d\u79f0 \u4e00\u81f4")),!1}return!0}async check(e){let{source:t}=e;try{let n=JSON.parse(t);for(let t in n){let i=n[t];if(null===i||void 0===i)return alert("face ".concat(t," is null\uff0c\u8bf7\u8bbe\u7f6e\u5185\u5bb9")),!1;switch(typeof i){case"object":break;case"string":if("$"===t&&!1===this.checkBusName(e,i))return!1;delete n[t];continue;default:delete n[t];continue}if(!0===Array.isArray(i)){if(!1===Vt(i,n))return!1}else if(!1===Ft(i,n))return!1}for(let e in n){let t=n[e];if(t&&!1===Ut(t,n,[]))return alert("face ".concat(e," \u5305\u542b\u4e86\u5faa\u73af\u5f15\u7528")),!1}return e.schema=JSON.stringify(n),e.owner||(e.owner=this.store.unit.name),!0}catch(n){return alert(n.message),!1}}}const It=["id","number","string","array"];function Tt(e,t){let n=t[e];return void 0===n?(alert("face ".concat(e," not defined")),!1):!1!==Array.isArray(n)||(alert("face ".concat(e," is referenced, bus is not array")),!1)}function Ut(e,t,n){let i=e.length,r=!1,s=[];for(let a=0;a<i;a++){let i=e[a];if("string"!==typeof i){Rt(s,i);continue}r=!0;let o=t[i];if(o){if(n.findIndex((e=>e===o))>=0)return!1;if(!1===Ut(o,t,[e]))return!1;for(let e of o)Rt(s,e)}}return!0===r&&e.splice(0,e.length,...s),!0}function Rt(e,t){for(let n of e){let{name:e}=n,{name:i,type:r}=t;if(e.toLowerCase()===i.toLowerCase())return void(n.type=r)}e.push(t)}function Lt(e){if(void 0===e)return;let t=e.indexOf("--");if(t>=0&&(e=e.substr(0,t)),0===(e=e.trim()).length)return;let n=e.split(":"),i=n.length;if(0===i)return;if(1===i)return e;let r,s=n[0].trim(),a=n[1].trim();if(0!==s.length){switch(a){default:r=a,a="array";case"id":case"number":case"string":}return{name:s,type:a,fields:r}}}function Vt(e,t){if(!1===Array.isArray(e))return alert("face must be array"),!1;let n=e.length,i=[];for(let r=0;r<n;r++){let n=e[r];switch(typeof n){default:return alert("face\u4e2d\u7684\u9879\uff0c\u53ea\u80fd\u662fobject\u6216\u8005\u5b57\u7b26\u4e32"),!1;case"object":n["-"]&&delete n["-"],n["--"]&&delete n["--"];break;case"string":let s=Lt(n);if(void 0===s){i.push(r);continue}if("string"===typeof s){if(!t[s])return alert("'".concat(n,"' \u6ca1\u6709\u5b9a\u4e49")),!1;e.splice(r,1,s);continue}n=s,e.splice(r,1,s)}let{type:s}=n;if(void 0===s)return alert("type not defined"),!1;if("array"===s){let{fields:e}=n;if(!1===Tt(e,t))return!1}if(It.indexOf(s)<0)return"date"===s?alert("\u4e0d\u518d\u652f\u6301\u6570\u636e\u7c7b\u578bdate\uff0c\u8bf7\u7528number unixtime\u4f5c\u4e3a\u5a92\u4ecb"):alert("\u4e0d\u652f\u6301\u6570\u636e\u7c7b\u578b ".concat(s)),!1}n=i.length;for(let r=n-1;r>=0;r--)e.splice(i[r],1);return!0}function Ft(e,t){for(let n in e){let i=e[n];switch(n){default:return alert(n+": not allowed in bus query."),!1;case"param":if(!1===qt(i,t))return!1;break;case"returns":let e=i;if("string"===typeof i){if(e=t[i],void 0===e)return alert(i+" is not defined"),!1;t.returns=e}if(!1===Vt(e,t))return!1}}return!0}function qt(e,t){if(null===e||void 0===e)return!0;if("string"===typeof e)return Tt(e,t);if(Array.isArray(e)){if(!1===function(e,t){for(let n of e){let e;if("string"===typeof n){let t=n.indexOf(":");if(t<=0)return alert("type is not defined"),!1;e=n.substr(t+1).trim()}else e=n.type;if(["id","string","number","array"].indexOf(e)<0)return alert("type ".concat(e," out of ['id', 'string', 'number', 'array']")),!1}return!0}(e))return!1;for(let t=0;t<e.length;t++){let n=e[t];"string"===typeof n&&(e[t]=Lt(n))}return!0}return alert("param of a query can only be string or array"),!1}class Dt extends Et{async _load(){return await ct.servers(this.store.unit.id)}async _save(e){return await ct.saveServer(e)}async _del(e){await ct.delServer(this.store.unit.id,e.id)}_inc(){this.dev.counts.server++}_dec(){this.dev.counts.server--}}class zt extends Et{async _load(){return await ct.services(this.store.unit.id)}async _save(e){return await ct.saveService(e)}async _del(e){await ct.delService(this.store.unit.id,e.id)}_inc(){this.dev.counts.service++}_dec(){this.dev.counts.service--}async changeProp(e,t){let n=await ct.changeServiceProp(this.store.unit.id,this.cur.id,e,t);switch(e){case"url":this.cur.url=t;break;case"urlTest":this.cur.urlTest=t;break;case"server":this.cur.server=t;break;case"db":this.cur.db=t}return n}async loadUqServices(e){let t=await ct.loadUqServices(this.store.unit.id,e);this.items=t[0]}}const Bt=50;let Mt=(_t=class{constructor(e,t,n){this.store=void 0,this.dev=void 0,this.search=void 0,(0,Ce.Z)(this,"items",Ct,this),this.allLoaded=!1,this.key=void 0,this.pageStart=0,this.store=e,this.dev=t,this.search=n}async first(e){this.key=e,this.items=void 0,this.allLoaded=!1,this.pageStart=0,await this.more()}async more(){if(!0===this.allLoaded)return;let e=await this.search(this.store.unit.id,this.key,this.pageStart,Bt),t=e.length;t>Bt?(this.allLoaded=!1,--t,e.splice(t,1)):this.allLoaded=!0,t>0?(this.pageStart=e[t-1].id,void 0===this.items?this.items=e:this.items.push(...e)):this.items=[]}},Ct=(0,Se.Z)(_t.prototype,"items",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),_t),Wt=(St=class{constructor(e){this.store=void 0,(0,Ce.Z)(this,"counts",Nt,this),this.apps=void 0,this.uqs=void 0,this.buses=void 0,this.servers=void 0,this.services=void 0,this.searchApp=void 0,this.searchUq=void 0,this.searchServer=void 0,this.store=e,this.apps=new At(e,this),this.uqs=new Pt(e,this),this.buses=new Ot(e,this),this.servers=new Dt(e,this),this.services=new zt(e,this),this.searchApp=new Mt(e,this,ct.searchApp.bind(ct)),this.searchUq=new Mt(e,this,ct.searchUq.bind(ct)),this.searchServer=new Mt(e,this,ct.searchServer.bind(ct))}async loadCounts(){let{unit:e}=this.store;this.counts=await ct.counts(e.id)}},Nt=(0,Se.Z)(St.prototype,"counts",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),St);var Ht,Zt,$t,Qt,Kt,Gt,Xt,Jt,Yt,en;const tn=new(Ht=class{constructor(){this.dev=void 0,this.uqServer=void 0,(0,Ce.Z)(this,"unit",Zt,this),(0,Ce.Z)(this,"memberCount",$t,this),(0,Ce.Z)(this,"apps",Qt,this),(0,Ce.Z)(this,"role",Kt,this),(0,Ce.Z)(this,"roles",Gt,this),(0,Ce.Z)(this,"roleApps",Xt,this),(0,Ce.Z)(this,"roleMember",Jt,this),(0,Ce.Z)(this,"roleMembers",Yt,this),(0,Ce.Z)(this,"memberRoles",en,this),this.unitAdmins=void 0,this.accUnits=void 0,this.devUnits=void 0,this.bothUnits=void 0}get unitId(){return r.appInFrame.unit}init(){this.unit=void 0,this.apps=void 0,this.dev=new Wt(this)}logout(){r.appInFrame.hash=void 0,r.appInFrame.unit=void 0,this.init(),this.memberCount=void 0,this.apps=void 0,this.role=void 0,this.roles=void 0,this.roleApps=void 0,this.roleMember=void 0,this.roleMembers=void 0,this.memberRoles=void 0}async loadAdminUnits(){let e=await ot.userUnitAdmins(),t=this.unitAdmins=e[0];if(1===t.length)r.appInFrame.unit=t[0].id,await tn.loadUnit();else{this.accUnits=[],this.devUnits=[],this.bothUnits=[];for(let e of t){let{type:t}=e;3===(3&t)?this.bothUnits.push(e):1===(1&t)?this.devUnits.push(e):2===(2&t)&&this.accUnits.push(e)}}}setRole(e){this.role!==e&&(this.role=e,this.roleApps=void 0,this.roleMember=void 0,this.roleMembers=void 0,this.memberRoles=void 0)}setRoleUser(e){this.roleMember!==e&&(this.roleMember=e,this.memberRoles=void 0)}async unitChangeProp(e,t){await ot.unitChangeProp(this.unit.id,e,t),this.unit[e]=t}async loadApps(){void 0===this.apps&&(this.apps=await ot.unitApps(this.unitId))}async loadUnit(){if(void 0===this.unitId)return;let e=await ot.unit(this.unitId);this.unit=e,this.memberCount=await ot.unitMemberCount(this.unitId);let t=await ct.uqBuilderUrl(),{url:n}=t;this.uqServer=r.host.getUrlOrDebug(n,"uq-build")}async stopUnitApp(e){await ot.unitDeleteApp(this.unit.id,e,1),this.apps.find((t=>t.id===e)).inUnit=0}async restoreUnitApp(e){let t=await ot.unitAddApp(this.unit.id,e);return t<=0?t:(this.apps.find((t=>t.id===e)).inUnit=1,1)}async addUnitApp(e){let t=await ot.unitAddApp(this.unit.id,e.id);return t<=0?t:(this.apps.push(e),1)}async loadRoles(){if(void 0!==this.roles)return;let e=await ot.unitRoles(this.unit.id);e.forEach((e=>{switch(e.id){case 1:e.name="\u8bbf\u5ba2",e.discription="\u53ef\u4ee5\u83b7\u53d6\u5f00\u653e\u4fe1\u606f";break;case 2:e.name="\u666e\u901a",e.discription="\u80fd\u8bbf\u95ee\u6700\u57fa\u672c\u7684\u529f\u80fd"}})),this.roles=e}async unitAddRole(e,t){let n=await ot.unitAddRole(this.unit.id,e,t);return n>0&&this.roles.push({id:n,name:e,discription:t,count:void 0}),n}async roleChangeProp(e,t){await ot.unitRoleChangeProp(this.unit.id,this.role.id,e,t),this.role[e]=t}async loadRoleApps(){let e=await ot.unitRoleApps(this.unit.id,this.role.id);this.roleApps=e.map((e=>this.apps.find((t=>t.id===e.id))))}async setRoleApps(e){await ot.unitRoleSetApps(this.unit.id,this.role.id,e.map((e=>e.id))),this.roleApps=e}async loadMembers(){let e=await ot.unitMembers(this.unit.id,void 0===this.role?0:this.role.id,void 0,0,100);this.roleMembers=e}async unitAssignMember(e){await ot.unitAssignMember(this.unit.id,this.roleMember.id,e),this.roleMember.assigned=e}async loadMemberRoles(){let e=(await ot.unitMemberRoles(this.unit.id,this.roleMember.id)).map((e=>{let t=e.id,n=this.roles.find((e=>e.id===t));return o().clone(n)}));this.memberRoles=e}async setMemberRoles(e){await ot.unitSetMemberRoles(this.unit.id,this.roleMember.id,e.map((e=>e.id))),this.roles.forEach((t=>{let n=t.id,i=this.memberRoles.find((e=>e.id===n)),r=e.find((e=>e.id===n));if(void 0===i)void 0!==r&&t.count++;else{if(void 0!==r)return;t.count--}})),this.memberRoles=e}},Zt=(0,Se.Z)(Ht.prototype,"unit",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=(0,Se.Z)(Ht.prototype,"memberCount",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=(0,Se.Z)(Ht.prototype,"apps",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=(0,Se.Z)(Ht.prototype,"role",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gt=(0,Se.Z)(Ht.prototype,"roles",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xt=(0,Se.Z)(Ht.prototype,"roleApps",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt=(0,Se.Z)(Ht.prototype,"roleMember",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yt=(0,Se.Z)(Ht.prototype,"roleMembers",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),en=(0,Se.Z)(Ht.prototype,"memberRoles",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht);class nn extends st{get cApp(){return this._cApp}}var rn=n(694),sn=n.n(rn);const an={1:"\u5f00\u53d1\u53f7",2:"\u5c0f\u53f7",3:"\u7cfb\u7edf\u53f7"};function on(e){return an[e.type]}class ln extends e.Component{render(){let{date_init:e,date_update:t}=this.props;return(0,J.jsxs)("small",{className:"text-muted",children:["\u66f4\u65b0: ",(0,J.jsx)(s.S9,{date:t}),(0,J.jsx)("i",{className:"fa fa-fw"}),"\u521b\u5efa: ",(0,J.jsx)(s.KX,{date:e})]})}}function un(t,n,i,r){let s,a;return!0===t?(s="a",a={className:sn()(n,"cursor-pointer"),onClick:i,href:"#"}):(s="span",a={className:n}),e.createElement(s,a,r)}var cn,hn;let dn=(0,X.Pi)(cn=class extends e.Component{constructor(){super(...arguments),this.onClick=e=>(e.preventDefault(),s.nav.push((0,J.jsx)(fn,{id:this.props.id})),!1)}render(){let{id:e,isLink:t,className:n}=this.props;if(void 0===e)return null;if(null===e)return null;let i,r=gt.units.get(e);if(!r)return null;let{name:s,nick:a,discription:o}=r,l=o&&"- "+o;return i=a?(0,J.jsxs)(J.Fragment,{children:[a," \xa0 ",(0,J.jsxs)("small",{className:"text-muted",children:[s," ",l]})]}):s?(0,J.jsxs)(J.Fragment,{children:[s," \xa0 ",(0,J.jsx)("small",{className:"text-muted",children:l})]}):e,un(t,n,this.onClick,i)}})||cn,pn=(0,X.Pi)(hn=class extends e.Component{render(){let{id:e}=this.props;if(void 0===e)return null;let t=gt.units.get(e),{name:n}=t;return(0,J.jsx)(J.Fragment,{children:n})}})||hn;class fn extends e.Component{constructor(){super(...arguments),this.rows=void 0}render(){let e=gt.units.get(this.props.id),{name:t,icon:n,discription:i}=e;return this.rows=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:n,main:t,discription:i})},""],(0,J.jsx)(s.T3,{header:"\u5c0f\u53f7 - \u8be6\u7ec6\u8d44\u6599",children:(0,J.jsx)(s.QX,{rows:this.rows,values:this.props})})}}const mn={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CENTER_HOST:"https://note.jjol.cn"}.REACT_APP_ICON;var vn,gn;let yn=(0,X.Pi)(vn=class extends e.Component{constructor(){super(...arguments),this.onClick=e=>(e.preventDefault(),s.nav.push((0,J.jsx)(bn,{id:this.props.id})),!1)}render(){let e,{id:t,className:n,isLink:i}=this.props,r=gt.uqs.get(t);if(null===r)e=t;else{let{name:n,discription:i}=r,s=i&&"- "+i;e=void 0!==n?(0,J.jsxs)(J.Fragment,{children:[n,"\xa0",(0,J.jsx)("small",{className:"text-muted",children:s})]}):t}return un(i,n,this.onClick,e)}})||vn,bn=(0,X.Pi)(gn=class extends e.Component{constructor(){super(...arguments),this.rows=void 0}render(){let e=gt.uqs.get(this.props.id),{name:t,discription:n,unit:i,date_init:r,date_update:a}=e,o=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:n}),(0,J.jsx)(ln,{date_update:a,date_init:r})]});return this.rows=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:mn,main:t,discription:o})},"",{type:"component",label:"\u6240\u6709\u8005",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:i,isLink:!0})})}],(0,J.jsx)(s.T3,{header:"UQ - \u8be6\u7ec6\u8d44\u6599",children:(0,J.jsx)(s.QX,{rows:this.rows,values:this.props})})}})||gn;var wn,xn,jn,kn;class _n extends e.Component{render(){let e,{name:t,discription:n}=this.props;return n&&(e=(0,J.jsx)("div",{className:"small text-muted",children:n})),(0,J.jsxs)("div",{className:"form-control-plaintext",children:[(0,J.jsx)("div",{children:t}),e]})}}(0,X.Pi)(wn=class extends e.Component{constructor(){super(...arguments),this.onClick=e=>(e.preventDefault(),s.nav.push((0,J.jsx)(Cn,{id:this.props.id})),!1)}render(){let t,{id:n,isLink:i,className:r}=this.props,s=gt.apps.get(n);if(null===s)t=n;else{let{name:i,discription:r}=s,a=r&&"- "+r;t=void 0!==i?(0,J.jsxs)(e.Fragment,{children:[i," \xa0 ",(0,J.jsx)("small",{className:"text-muted",children:a})]}):n}return un(i,r,this.onClick,t)}});let Cn=(0,X.Pi)((jn=class extends e.Component{constructor(){super(...arguments),this.rows=void 0,(0,Ce.Z)(this,"apis",kn,this)}async componentDidMount(){this.apis.list=await ct.loadAppUqs(this.props.id)}render(){let e=gt.apps.get(this.props.id),{unit:t,name:n,discription:i,icon:r,date_init:a,date_update:o}=e,l=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:i}),(0,J.jsx)(ln,{date_update:o,date_init:a})]});return this.rows=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:r,main:n,discription:l})},"",{type:"component",label:"\u6240\u6709\u8005",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:t,isLink:!0})})},this.apis],(0,J.jsx)(s.T3,{header:"APP - \u8be6\u7ec6\u8d44\u6599",children:(0,J.jsx)(s.QX,{rows:this.rows,values:this.props})})}},kn=(0,Se.Z)(jn.prototype,"apis",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{label:"\u5173\u8054API",type:"list",list:void 0,row:_n}}}),xn=jn))||xn;var Sn,Nn;let En=(0,X.Pi)(Sn=class extends e.Component{constructor(){super(...arguments),this.onClick=e=>(e.preventDefault(),s.nav.push((0,J.jsx)(An,{id:this.props.id})),!1)}render(){let e,{id:t,className:n,isLink:i}=this.props,r=gt.buses.get(t);if(null===r)e=t;else{let{name:n,owner:i}=r;e=void 0!==n?(0,J.jsxs)(J.Fragment,{children:[n," / ",i]}):t}return un(i,n,this.onClick,e)}})||Sn,An=(0,X.Pi)(Nn=class extends e.Component{constructor(){super(...arguments),this.rows=void 0}render(){let e=gt.buses.get(this.props.id),{name:t,discription:n,unit:i,date_init:r,date_update:a}=e,o=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:n}),(0,J.jsx)(ln,{date_update:a,date_init:r})]});return this.rows=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:mn,main:t,discription:o})},"",{type:"component",label:"\u6240\u6709\u8005",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:i,isLink:!0})})}],(0,J.jsx)(s.T3,{header:"UQ - \u8be6\u7ec6\u8d44\u6599",children:(0,J.jsx)(s.QX,{rows:this.rows,values:this.props})})}})||Nn;var Pn;let On=(0,X.Pi)(Pn=class extends e.Component{constructor(){super(...arguments),this.onClick=e=>(e.preventDefault(),s.nav.push((0,J.jsx)(In,{id:this.props.id})),!1)}render(){let e,{id:t,isLink:n,className:i}=this.props,r=gt.servers.get(t);if(null===r)e=t;else{let{ip:n,name:i,url:s}=r;e=void 0!==i?(0,J.jsxs)(J.Fragment,{children:[i,"\xa0 ",(0,J.jsx)("small",{className:"text-muted",children:s||n})]}):t}return e||(e=(0,J.jsx)("small",{className:"text-muted",children:"[\u65e0]"})),un(n,i,this.onClick,e)}})||Pn;class In extends e.Component{constructor(){super(...arguments),this.rows=void 0}render(){let e=gt.servers.get(this.props.id),{discription:t,ip:n,unit:i}=e;return this.rows=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:mn,main:t,discription:n})},"",{type:"component",label:"\u6240\u6709\u8005",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:i,isLink:!0})})},{type:"string",label:"\u4e91\u670d\u52a1",name:"cloud"}],(0,J.jsx)(s.T3,{header:"\u670d\u52a1\u5668 - \u8be6\u7ec6\u8d44\u6599",children:(0,J.jsx)(s.QX,{rows:this.rows,values:this.props})})}}class Tn extends e.Component{constructor(e){super(e),this.value=void 0,this.onChange=e=>{let t=this.props.value,n=t&&t.trim();this.value=e.currentTarget.value.trim(),this.setState({disabled:n===this.value})},this.onSubmit=async()=>{let e=this.props.value,t=e&&e.trim(),n=this.value,i=this.props.onChanged;if(void 0!==i){let e=await i(n,t);if("string"===typeof e)return void this.setState({error:e});s.nav.pop()}},this.state={disabled:!0}}renderControl(){return(0,J.jsx)("input",{className:"form-control w-100",type:"text",defaultValue:this.props.value,onChange:this.onChange})}render(){let e,{title:t,buttonText:n,info:i}=this.props,{disabled:r,error:a}=this.state,o=(0,J.jsx)("button",{className:"btn btn-success btn-sm",disabled:r,onClick:this.onSubmit,children:n||"\u4fdd\u5b58"});return void 0!==a&&(e=(0,J.jsx)("div",{className:"text-danger",children:a})),(0,J.jsx)(s.T3,{header:t,right:o,children:(0,J.jsxs)("div",{className:"my-4 mx-3",children:[this.renderControl(),e,(0,J.jsx)("small",{className:"d-block mt-2 text-muted",children:i})]})})}}var Un,Rn,Ln;let Vn=(0,X.Pi)((Rn=class extends e.Component{constructor(){super(...arguments),(0,Ce.Z)(this,"items",Ln,this),this.itemClick=e=>{let{resolve:t,idFromItem:n}=this.props;t(n(e)),s.nav.pop()},this.onSearch=async e=>{let{candidateItems:t,params:n}=this.props;if("function"===typeof t){let i=await t(n,e);this.items=i}}}async componentDidMount(){let{candidateItems:e,params:t}=this.props;this.items=Array.isArray(e)?e:await e(t,"")}render(){let{caption:e,row:t,searchPlaceHolder:n}=this.props;return(0,J.jsxs)(s.T3,{header:e,back:"close",children:[(0,J.jsx)("div",{className:"container",children:(0,J.jsx)(s.Rj,{className:"my-2",onSearch:this.onSearch,placeholder:n,maxLength:100})}),(0,J.jsx)(s.aV,{items:this.items,item:{onClick:this.itemClick,render:t}})]})}},Ln=(0,Se.Z)(Rn.prototype,"items",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Un=Rn))||Un;function Fn(e){return function(t,n){return new Promise(((i,r)=>{s.nav.push((0,J.jsx)(qn,{resolve:i,face:t,params:n,...e}))}))}}class qn extends e.Component{constructor(e){super(e),this.items=void 0,this.state={items:null},this.itemClick=this.itemClick.bind(this),this.onSearch=this.onSearch.bind(this)}async componentDidMount(){let{candidateItems:e,params:t}=this.props;this.setState({items:Array.isArray(e)?e:await e(t,"")})}itemClick(e){let{resolve:t}=this.props;t(e),s.nav.pop()}async onSearch(e){let{candidateItems:t,params:n}=this.props;if("function"===typeof t){let i=await t(n,e);this.setState({items:i})}}render(){let{caption:e,row:t,searchPlaceHolder:n}=this.props;return(0,J.jsxs)(s.T3,{header:e,back:"close",children:[(0,J.jsx)("div",{className:"container",children:(0,J.jsx)(s.Rj,{className:"my-2",onSearch:this.onSearch,placeholder:n,maxLength:100})}),(0,J.jsx)(s.aV,{items:this.state.items,item:{onClick:this.itemClick,render:t}})]})}}var Dn,zn,Bn;let Mn=(0,X.Pi)((zn=class extends e.Component{constructor(){super(...arguments),(0,Ce.Z)(this,"uqAccesses",Bn,this),this.renderUqRow=(e,t)=>{let{name:n,owner:i,discription:r}=e;return(0,J.jsxs)(s.pA,{className:"py-2",right:(0,J.jsx)("small",{className:"text-muted",children:r}),children:[i," / ",n]})},this.act=async()=>{let{app:e,appActed:t}=this.props,{id:n,inUnit:i}=e,r=1;if(0===i){await tn.restoreUnitApp(n)<=0&&alert("app \u6216\u8005 uq \u6ca1\u6709\u5b9a\u4e49 service")}else if(1===i)await tn.stopUnitApp(n),r=0;else{let t=o().clone(e);t.id=n,t.inUnit=1,await tn.addUnitApp(t)<=0&&alert("app \u6216\u8005 uq \u6ca1\u6709\u5b9a\u4e49 service")}void 0!==t&&t(n,r),s.nav.pop()}}async componentDidMount(){this.uqAccesses=await ct.loadAppUqs(this.props.app.id)}render(){let e,t,n,{unit:i,name:r,discription:a,icon:o,inUnit:l,date_init:u,date_update:c}=this.props.app,h=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:a}),(0,J.jsx)(ln,{date_update:c,date_init:u})]});1===l?(e="ban",t="\u505c\u7528APP",n="btn-danger"):0===l?(e="refresh",t="\u6062\u590dAPP",n="btn-success"):(e="plus",t="\u542f\u7528APP",n="btn-primary");let d=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:o,main:r,discription:h})},"",{type:"component",label:"\u5f00\u53d1\u53f7",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:i,isLink:!0})})},{type:"component",label:"\u5173\u8054UQ",component:(0,J.jsx)(s.aV,{className:"w-100",items:this.uqAccesses,item:{render:this.renderUqRow}})},"","",{type:"component",bk:"",component:(0,J.jsxs)("button",{className:sn()("btn","w-100",n),onClick:this.act,children:[(0,J.jsx)(s.FA,{name:e,size:"lg"})," ",t]})}];return(0,J.jsx)("div",{children:(0,J.jsx)(s.QX,{rows:d,values:this.props})})}},Bn=(0,Se.Z)(zn.prototype,"uqAccesses",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dn=zn))||Dn;var Wn;class Hn extends i.Fu{constructor(e){super(),this.unitId=void 0,this.unitId=e}async loadResults(e,t,n){return{$page:await ot.searchApp(this.unitId,this.param,this.pageStart,this.pageSize)}}setPageStart(e){this.pageStart=void 0===e?0:e.id}}let Zn=(0,X.Pi)(Wn=class extends e.Component{constructor(e){super(e),this.apps=void 0,this.onSearch=async e=>{await this.apps.first(e)},this.appClick=e=>{s.nav.push((0,J.jsx)(s.T3,{header:"App\u8be6\u7ec6\u4fe1\u606f",children:(0,J.jsx)(Mn,{app:e,appActed:this.appActed})}))},this.appActed=(e,t)=>{let n=this.apps.items,i=n.find((t=>t.id===e));i.inUnit=t,n.replace([i])},this.apps=new Hn(tn.unit.id)}renderApp(e){let t,{name:n,discription:i,icon:r,inUnit:a}=e;return 1===a?t=(0,J.jsx)("small",{children:"\u5df2\u542f\u7528"}):0===a&&(t=(0,J.jsx)("small",{children:"\u5df2\u505c\u7528"})),(0,J.jsx)(s.pA,{className:"px-3 py-2",left:(0,J.jsx)(s.Ct,{children:(0,J.jsx)(s.Ee,{src:r})}),right:t,children:(0,J.jsxs)("div",{className:"px-3",children:[(0,J.jsx)("div",{children:n}),(0,J.jsx)("small",{className:"text-muted",children:i})]})})}render(){let e=this.apps.items,t=(0,J.jsx)(s.Rj,{onSearch:this.onSearch,className:"w-100 mx-1",placeholder:"\u641c\u7d22App",maxLength:100});return(0,J.jsx)(s.T3,{header:t,children:(0,J.jsx)(s.aV,{items:e,item:{onClick:this.appClick,render:this.renderApp},before:"\u641c\u7d22App\u540d\u5b57"})})}})||Wn;var $n;let Qn=(0,X.Pi)($n=class extends e.Component{async componentDidMount(){await tn.loadApps()}itemRender(e,t){let n,{name:i,discription:r,icon:a,inUnit:o}=e;return 0===o&&(n=(0,J.jsx)(s.FA,{className:"text-danger",name:"ban"})),(0,J.jsx)(s.pA,{className:"px-3 py-1",left:(0,J.jsx)(s.Ct,{children:(0,J.jsx)(s.Ee,{src:a})}),right:n,children:(0,J.jsxs)("div",{className:"px-3",children:[(0,J.jsx)("div",{children:i}),(0,J.jsx)("small",{className:"text-muted",children:r})]})})}appClick(e){s.nav.push((0,J.jsx)(s.T3,{header:"App\u8be6\u7ec6\u4fe1\u606f",children:(0,J.jsx)(Mn,{app:e})}))}newItem(){s.nav.push((0,J.jsx)(Zn,{...this.props}))}render(){let e=(0,J.jsx)("button",{className:"btn btn-success btn-sm me-1 align-self-center",onClick:()=>this.newItem(),children:(0,J.jsx)(s.FA,{name:"plus"})});return(0,J.jsx)(s.T3,{header:"\u542f\u505cApp",right:e,children:(0,J.jsx)(s.aV,{items:tn.apps,item:{render:this.itemRender,onClick:this.appClick}})})}})||$n;class Kn extends Xe.ps{constructor(){super(...arguments),this.page=()=>{let{appList:e,listRowClick:t,showNewApp:n}=this.controller,i=(0,J.jsx)("button",{className:"btn btn-success btn-sm me-2",onClick:n,children:(0,J.jsx)(s.FA,{name:"plus"})});return(0,J.jsx)(s.T3,{header:"App",right:i,children:(0,J.jsx)(s.aV,{items:e,item:{render:this.appRow,onClick:t}})})},this.appRow=e=>{let{name:t,caption:n,icon:i,date_init:r}=e,a=(0,J.jsx)(s.Ct,{size:"sm",children:(0,J.jsx)(s.Ee,{src:i})}),o=n?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("div",{className:"small text-muted",children:t}),(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:n})})]}):(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:t})}),l=(0,J.jsx)("small",{className:"text-muted",children:(0,J.jsx)(s.KX,{date:r})});return(0,J.jsx)(s.pA,{className:"py-2 px-3 align-items-stretch",left:a,right:l,children:(0,J.jsx)("div",{className:"px-3",children:o})})}}async open(e){this.openPage(this.page)}}const Gn=e=>{let{discription:t,cloud:n,ip:i}=e;return(0,J.jsxs)(J.Fragment,{children:[t," ",n," ",i]})},Xn=[{name:"name",type:"string",maxLength:100,required:!0},{name:"caption",type:"string",maxLength:100},{name:"discription",type:"string",maxLength:250},{name:"url",type:"string",maxLength:200},{name:"public",type:"boolean"},{name:"server",type:"id"},{name:"icon",type:"image"},{name:"submit",type:"submit"}];class Jn extends Xe.ps{constructor(){super(...arguments),this.candidateItems=async(e,t)=>(await tn.dev.searchServer.first(t),tn.dev.searchServer.items),this.moreCandidates=async()=>{await tn.dev.searchServer.more()},this.renderRow=(e,t)=>(0,J.jsx)("div",{className:"px-3 py-2",children:(0,J.jsx)(Gn,{...e})}),this.pickServerId=(e,t,n)=>new Promise(((e,t)=>{s.nav.push((0,J.jsx)(Vn,{caption:"\u9009\u62e9\u670d\u52a1\u5668",searchPlaceHolder:"\u641c\u7d22\u670d\u52a1\u5668",candidateItems:this.candidateItems,moreCandidates:this.moreCandidates,row:this.renderRow,idFromItem:e=>e.id,resolve:e,params:void 0}),(()=>{t()}))})),this.renderServerInput=e=>(0,J.jsx)(On,{id:e}),this.uiSchema={items:{name:{widget:"text",label:"\u540d\u79f0"},caption:{widget:"text",label:"\u6807\u9898"},discription:{widget:"textarea",label:"\u63cf\u8ff0",rows:5},url:{widget:"text",label:"URL",placeholder:"http(s)://APP\u5730\u5740"},public:{widget:"checkbox",label:"\u516c\u5f00"},server:{widget:"id",label:"\u670d\u52a1\u5668",pickId:this.pickServerId,Templet:this.renderServerInput},icon:{widget:"image",label:"\u6807\u5fd7\u56fe"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},this.onButtonClick=async(e,t)=>{let{data:n}=t,i=o().clone(this.controller.app)||{};o().merge(i,n),await this.controller.saveApp(i),s.nav.pop()},this.page=void 0,this.form=(0,X.Pi)((()=>(0,J.jsx)(s.l0,{fieldLabelSize:2,className:"m-3",schema:Xn,uiSchema:this.uiSchema,formData:this.initValues,onButtonClick:this.onButtonClick})))}async open(){this.openPage(this.page)}}class Yn extends Jn{constructor(){super(...arguments),this.page=()=>{let{app:t}=this.controller,{name:n}=t;return(0,J.jsx)(s.T3,{header:"\u4fee\u6539APP - "+n,back:"close",children:e.createElement(this.form)})}}get initValues(){return this.controller.app}}class ei extends Jn{constructor(){super(...arguments),this.page=()=>(0,J.jsx)(s.T3,{header:"\u65b0\u5efaAPP",back:"close",children:e.createElement(this.form)})}get initValues(){return{}}}var ti,ni;let ii=(ti=class extends Xe.ps{constructor(){super(...arguments),(0,Ce.Z)(this,"uqs",ni,this),this.onSearch=async e=>{this.uqs=await this.controller.searchUq(e,0,100)},this.page=(0,X.Pi)((()=>{let{onUq:e}=this.controller,t=(0,J.jsx)(s.Rj,{className:"w-100 mx-1",label:"\u9009\u62e9\u5173\u8054UQ ",onSearch:this.onSearch,placeholder:"\u641c\u7d22UQ\u540d\u5b57",maxLength:100});return(0,J.jsx)(s.T3,{back:"close",header:t,children:(0,J.jsx)(s.aV,{items:this.uqs,item:{render:this.row,onClick:e}})})})),this.row=e=>{let{owner:t,name:n,discription:i}=e;return(0,J.jsx)(s.pA,{className:"py-2 px-3",right:i,children:(0,J.jsxs)("div",{children:[t," / ",n]})})}}async open(){this.uqs=await this.controller.searchUq("",0,200),this.openPage(this.page)}},ni=(0,Se.Z)(ti.prototype,"uqs",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ti);class ri extends Xe.ps{constructor(){super(...arguments),this.editItem=async()=>{await this.openVPage(Yn)},this.deleteItem=async()=>{!0===window.confirm("\u771f\u7684\u8981\u5220\u9664\u5417\uff1f\u7cfb\u7edf\u5220\u9664\u65f6\u5e76\u4e0d\u4f1a\u68c0\u67e5\u76f8\u5173\u5f15\u7528\uff0c\u8bf7\u8c28\u614e")&&(await this.controller.deleteApp(),s.nav.pop())},this.page=(0,X.Pi)((()=>{let{app:e,uqs:t}=this.controller,{unit:n,name:i,caption:r,discription:a,icon:o,server:l,date_init:u,date_update:c}=e,h=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:a}),(0,J.jsx)(ln,{date_update:c,date_init:u})]}),d=[{caption:"\u4fee\u6539App",action:this.editItem,icon:"edit"},{caption:"\u5220\u9664",action:this.deleteItem,icon:"trash-o"}],p=(0,J.jsx)(s.Qo,{actions:d,className:"btn-primary me-2"}),f=r?(0,J.jsxs)(J.Fragment,{children:[i,": ",(0,J.jsx)("b",{children:r})]}):(0,J.jsx)("b",{children:i}),m=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:o,main:f,discription:h})},"",{type:"component",label:"\u5f00\u53d1\u53f7",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:n,isLink:!0})})},{label:"URL",name:"url",type:"string"},{type:"component",label:"\u670d\u52a1\u5668",component:(0,J.jsx)(On,{id:l})},""],v=(0,J.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>this.openVPage(ii),children:"\u589e\u52a0UQ"});return(0,J.jsxs)(s.T3,{header:"App - "+i,right:p,children:[(0,J.jsx)(s.QX,{rows:m,values:e}),(0,J.jsx)(s.pA,{className:"mx-3 mt-3 mb-1",right:v,children:"\u5173\u8054UQ"}),(0,J.jsx)(s.aV,{items:t,item:{render:this.renderUqRow,onClick:this.uqClick}})]})})),this.uqClick=e=>{this.controller.onUq(e)},this.renderUqRow=(e,t)=>{if(void 0===e)return null;let{name:n,discription:i,unit:r}=e,a=i&&(0,J.jsxs)("div",{className:"small text-muted",children:[" \xa0 ",i]}),o=this.controller.isMain(e),l=sn()("px-3 py-2 align-items-center bg-white",!0===o&&"font-weight-bold my-2");return(0,J.jsxs)(s.pA,{className:l,right:a,children:[!0===o&&(0,J.jsx)(s.FA,{className:"text-warning me-3",name:"star-o"}),(0,J.jsx)(pn,{id:r})," / ",n]})}}async open(){this.openPage(this.page)}}class si extends Xe.ps{constructor(){super(...arguments),this.uq=void 0,this.saveUqBind=async()=>{await this.controller.saveUqBind(this.uq),this.closePage(2)},this.removeUqBind=async()=>{await this.controller.removeUqBind(this.uq),s.nav.pop()},this.setMainUQ=async()=>{this.controller.saveSetUqMain(this.uq),this.closePage()},this.page=()=>{let e,t,{owner:n,name:i,discription:r}=this.uq;return!0===this.controller.isBinded(this.uq)?(e=!1===this.controller.isMain(this.uq)?(0,J.jsx)("button",{className:"btn btn-primary btn-sm",onClick:this.setMainUQ,children:"\u8bbe\u4e3a\u4e3bUQ"}):(0,J.jsxs)("div",{children:[(0,J.jsx)(s.FA,{className:"text-warning",name:"star-o"})," \u4e3bUQ"]}),t=(0,J.jsx)("button",{className:"btn btn-outline-danger btn-sm",onClick:this.removeUqBind,children:"\u53d6\u6d88\u5173\u8054"})):e=(0,J.jsx)("button",{className:"btn btn-primary btn-sm",onClick:this.saveUqBind,children:"\u4fdd\u5b58\u5173\u8054"}),(0,J.jsx)(s.T3,{header:"\u5173\u8054UQ",children:(0,J.jsxs)("div",{className:"m-3 py-3 px-3 bg-white border",children:[(0,J.jsxs)("div",{children:[n," / ",i]}),(0,J.jsx)("div",{className:"text-muted",children:r}),(0,J.jsx)(s.pA,{className:"pt-3",right:t,children:e})]})})}}async open(e){this.uq=e,this.openPage(this.page)}}var ai,oi,li,ui;let ci=(ai=class extends Xe.Qr{constructor(){super(...arguments),this.unitId=void 0,this.app=void 0,(0,Ce.Z)(this,"appList",oi,this),(0,Ce.Z)(this,"uqs",li,this),(0,Ce.Z)(this,"uqMain",ui,this),this.listRowClick=async e=>{this.app=e;let t,{uqMain:n}=e,i=await ct.loadAppUqs(e.id);this.uqs=i.map(((e,i)=>{let{owner:r,id:s,name:a,discription:o,unit:l,date_init:u,date_update:c}=e,h={id:s,name:a,discription:o,unit:l,owner:r,date_init:u,date_update:c,service_count:void 0};return s===n&&(this.uqMain=h,t=i),h})),void 0!==t&&(this.uqs.splice(t,1),this.uqs.unshift(this.uqMain)),this.openVPage(ri)},this.saveSetUqMain=async e=>{await ct.appSetUqMain(this.unitId,this.app.id,e.id),this.setUqMain(e)},this.showNewApp=()=>{this.app=void 0,this.openVPage(ei)},this.saveApp=async e=>{let t,n=new Date;void 0===this.app?(t=o().clone(e),t.date_init=n):(t=o().clone(this.app),o().merge(t,e)),t.unit=this.unitId,t.date_update=n;let i=await ct.saveApp(t);t.id=i;let r=this.appList.find((e=>e.id===i));void 0!==r?o().merge(r,t):this.appList.push(t)},this.isBinded=e=>this.uqs.findIndex((t=>t.id===e.id))>=0,this.isMain=e=>void 0!==this.uqMain&&this.uqMain.id===e.id,this.deleteApp=async()=>{await ct.delApp(this.unitId,this.app.id);let e=this.appList.findIndex((e=>e.id===this.app.id));e>=0&&this.appList.splice(e,1)},this.searchUq=async(e,t,n)=>await ct.searchUq(this.unitId,e,t,n),this.getMyUqs=async()=>await ct.getMyUqs(this.unitId),this.onUq=e=>{this.openVPage(si,e)},this.saveUqBind=async e=>{let t=this.uqs.map((e=>e.id));t.findIndex((t=>t===e.id))<0&&t.push(e.id),await ct.appBindUq(this.unitId,this.app.id,t),this.uqs.push(e),1===this.uqs.length&&this.setUqMain(e)},this.removeUqBind=async e=>{let t=[];for(let i of this.uqs)i.id!==e.id&&t.push(i.id);await ct.appBindUq(this.unitId,this.app.id,t);let n=this.uqs.findIndex((t=>t.id===e.id));n>=0&&this.uqs.splice(n,1),this.uqMain&&this.uqMain.id===e.id&&(this.uqMain=void 0)}}async internalStart(e){this.unitId=e,this.appList=await ct.apps(this.unitId),this.openVPage(Kn)}setUqMain(e){this.uqMain=e;let t=this.uqs.findIndex((t=>t.id===e.id));t>=0&&this.uqs.splice(t,1),this.uqs.unshift(e)}},oi=(0,Se.Z)(ai.prototype,"appList",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),li=(0,Se.Z)(ai.prototype,"uqs",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ui=(0,Se.Z)(ai.prototype,"uqMain",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ai);var hi,di,pi,fi,mi,vi,gi=n(340);const yi="///++++++",bi="------///";class wi{constructor(){this.rowId=void 0,this.render=void 0}renderHtml(){return gi.renderToStaticMarkup(this.render())}afterMount(){}isMe(e){return!1}}class xi extends wi{constructor(e){super(),this.text=void 0,this.render=()=>{if(0===this.text.trim().length)return null;let e=this.text.split("\n");return(0,J.jsx)(J.Fragment,{children:e.map(((e,t)=>0===e.length?(0,J.jsx)("div",{children:"\xa0"},t):(0,J.jsx)("div",{children:e},t)))})},this.text=e}}let ji=(hi=class extends wi{constructor(e,t){super(),this.name=void 0,this.group=void 0,(0,Ce.Z)(this,"collaps",di,this),this.onClick=()=>{let e=this.collaps;1!==e&&(e=2===e?3:2,this.setCollaps(e))},this.render=()=>{let e,t,n,i=this.group[0],r=i.indexOf("\n");if(r<0)r=void 0;else{let e=i.indexOf("(");e<r&&(r=e)}return e=i.substring(0,r),1===this.collaps?t=(0,J.jsx)(s.FA,{name:"spinner",className:"text-primary fa-spin"}):3===this.collaps?(t=(0,J.jsx)(s.FA,{name:"arrow-circle-up",className:"text-success"}),n=(0,J.jsx)("div",{id:this.cId,children:this.group.map(((e,t)=>0===e.trim().length?null:(0,J.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:e},t)))})):t=(0,J.jsx)(s.FA,{name:"arrow-circle-down",className:"text-success"}),(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)("div",{id:this.elId,className:"cursor-pointer text-primary",onClick:this.onClick,children:[t," ",(0,J.jsx)("u",{children:e})]}),n]})},this.name=e,this.group=t,this.collaps=1}get elId(){return"g"+this.rowId}get cId(){return"c"+this.rowId}setCollaps(e){this.collaps=e;let t=document.getElementById(this.elId),n=t.firstElementChild;if(n){let t;switch(e){case 1:t="fa fa-spin text-primary";break;case 2:t="fa fa-arrow-circle-down text-success";break;case 3:t="fa fa-arrow-circle-up text-success"}n.className=t}if(3===e){let e=gi.renderToStaticMarkup((0,J.jsx)("div",{id:this.cId,children:this.group.map(((e,t)=>0===e.trim().length?null:(0,J.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:e},t)))}));const n=document.createRange();n.selectNode(t);const i=n.createContextualFragment(e);t.parentNode.insertBefore(i,t.nextSibling)}else{let e=document.getElementById(this.cId);e&&e.parentNode.removeChild(e)}}isMe(e){return this.name===e}afterMount(){let e=document.getElementById(this.elId);e&&e.addEventListener("click",this.onClick)}},di=(0,Se.Z)(hi.prototype,"collaps",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hi);class ki extends wi{constructor(e){super(),this.name=void 0,this.name=e}}class _i extends wi{constructor(t){super(),this.error=void 0,this.render=()=>(0,J.jsxs)("div",{className:"text-danger",children:[(0,J.jsx)(s.FA,{name:"exclamation-circle"}),"\xa0",this.error.join().split("\n").map(((t,n)=>(0,J.jsxs)(e.Fragment,{children:[t,(0,J.jsx)("br",{})]},n)))]}),this.error=t}}let Ci=(pi=class{constructor(e){this.text=void 0,this.p=void 0,this.group=void 0,this.stop=void 0,(0,Ce.Z)(this,"hasError",fi,this),(0,Ce.Z)(this,"seconds",mi,this),this.sectionId=1,(0,Ce.Z)(this,"sections",vi,this),this.containerElement=void 0,this.containerElement=e}add(e){if(this.stop=!1,void 0===this.text?(this.p=0,this.text=e):this.text=this.text+e,!(this.text.length<10))for(;!1===this.stop;)this.addToGroup(),this.addText()}addHtml(e){const t=document.createRange();t.selectNode(this.containerElement);const n=t.createContextualFragment(e);this.containerElement.appendChild(n)}addSection(e){e.rowId=this.sectionId,this.sectionId++,this.sections.push(e);let t=e.renderHtml();this.addHtml(t),e.afterMount()}mayStart(e){let t=this.text.length-e.length;if(this.p<t)return!1;for(let n=0;n<t;n++)if(this.text.charCodeAt(this.p+n)!==e.charCodeAt(n))return!1;return!0}parse(){let e="",t=this.group.length;for(let n=0;n<t;n++){let t=this.group[n],i=t.indexOf("\n");if(i<0)e+=t;else{e+=t.substr(0,i);for(let e=0;e<n+1;e++)this.group.shift();switch(this.group.unshift(t.substr(i+1)),e){default:case"":return new ji(e,this.group);case"error":return this.hasError=!0,new _i(this.group)}}}return new ki(e)}addToGroup(){if(void 0===this.group)return;if(void 0===this.text)return;let e=this.text.indexOf(bi,this.p);if(e<0){if(!0===this.mayStart(bi))return;return this.group.push(0===this.p?this.text:this.text.substr(this.p)),this.p=0,this.text=void 0,void(this.stop=!0)}this.group.push(this.text.substring(this.p,e));let t=this.parse();if(void 0!==t.render)this.addSection(t);else{let e=t.name;for(let t=this.sections.length-1;t>=0;t--){let n=this.sections[t];if(n&&!0===n.isMe(e)){n.setCollaps(2);break}}}this.group=void 0,this.p=e+9}addText(){if(void 0===this.text)return;let e=this.text.indexOf(yi,this.p);if(e<0){if(!0===this.mayStart(yi))return;return this.addSection(new xi(0===this.p?this.text:this.text.substr(this.p))),this.p=0,this.text=void 0,void(this.stop=!0)}let t=this.text.substring(this.p,e);this.addSection(new xi(t)),this.p=e+9,this.group=[]}},fi=(0,Se.Z)(pi.prototype,"hasError",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mi=(0,Se.Z)(pi.prototype,"seconds",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=(0,Se.Z)(pi.prototype,"sections",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pi);var Si;let Ni=(0,X.Pi)(Si=class extends e.Component{constructor(e){super(e),this.resultSections=void 0,this.timeHandler=void 0,this.autoScrollEnd=!1,this.autoScroll=!0,this.doubleClick=()=>{if(!0===this.autoScrollEnd)return;var e=document.getElementById("scrollDiv");let t=this.getParent(e);t&&(t.scrollTop>=t.scrollHeight/2?this.topIntoView():this.bottomIntoView())},this.lastScrollTop=0,this.onScroll=e=>{let t=e.target,{scrollTop:n,scrollHeight:i,offsetHeight:r}=t;n<=this.lastScrollTop?this.pauseAutoScrollToBottom():n+r>i-30&&this.startAutoScrollToBottom(),this.lastScrollTop=n},this.startTime=void 0,this.total=void 0,this.renderText=(e,t)=>(0,J.jsx)(e.render,{},e.rowId),this.resultSections=new Ci(void 0)}startAutoScrollToBottom(){!0!==this.autoScrollEnd&&(this.autoScroll=!0,void 0===this.timeHandler&&(this.timeHandler=setInterval((()=>{if(!1!==this.autoScroll){var e=document.getElementById("bottomDiv");e&&e.scrollIntoView()}}),100)))}endAutoScrollToBottom(){setTimeout((()=>{this.autoScroll=!1,this.autoScrollEnd=!0,void 0!==this.timeHandler&&(clearInterval(this.timeHandler),this.timeHandler=void 0)}),300)}pauseAutoScrollToBottom(){this.autoScroll=!1}getParent(e){if(e)return"MAIN"===e.tagName?e:this.getParent(e.parentElement)}topIntoView(){var e=document.getElementById("topDiv");e&&e.scrollIntoView()}bottomIntoView(){var e=document.getElementById("bottomDiv");e&&e.scrollIntoView()}uintToString(e){let t=String.fromCharCode(...e);try{return decodeURIComponent(escape(t))}catch(n){return t}}async pump(e,t){let n=await e.read(),{done:i,value:r}=n;if(i){this.resultSections.seconds=(new Date).getTime()-this.startTime.getTime();let{action:e,services:t}=this.props;if(void 0!==t){let n=Date.now()/1e3;for(let i of t)switch(e){case"test":i.compile_time=n;break;case"deploy":i.deploy_time=n}}return!0}let s=r;for(let a=0;a<s.length;a+=16384){let e=s.slice(a,a+16384),n=this.uintToString(e);t.add(n),this.total+=r.byteLength}return!1}async componentDidMount(){s.nav.regConfirmClose((async()=>this.resultSections.seconds>=0||new Promise(((e,t)=>{try{if(!0===window.confirm("\u6b63\u5728".concat(this.props.actionName,"\u4e2d\uff0c\u771f\u7684\u8981\u4e2d\u6b62\u5417\uff1f"))){try{this.props.abortController.abort()}catch(n){console.error(n)}e(!0)}else e(!1)}catch(n){t(n)}})))),this.startAutoScrollToBottom();try{let e=this.props.res.body.getReader();this.startTime=new Date,this.total=0;let t=document.getElementById("scrollDiv"),n=new Ci(t);for(;;){if(!0===await this.pump(e,n))break}}catch(e){console.error(e)}finally{this.endAutoScrollToBottom()}}render(){let e,{uq:t,actionName:n,caption:i}=this.props,{seconds:r,hasError:a}=this.resultSections,o=!0===a?"\u53d1\u751f\u9519\u8bef":"\u5b8c\u6210";return e=i?"["+i+"] ":"",void 0!==t&&(e+=t.name+" - "),e+=n+(r>=0?o:"\u4e2d..."),(0,J.jsxs)(s.T3,{header:e,back:"close",onScroll:this.onScroll,children:[(0,J.jsx)("div",{id:"topDiv"}),(0,J.jsx)("div",{id:"scrollDiv",onDoubleClick:this.doubleClick,className:"py-2 px-3",style:{wordWrap:"break-word",whiteSpace:"normal"}}),r>=0?(0,J.jsxs)("div",{className:"px-3 pb-3",style:{color:"red",fontWeight:"bold"},children:[n,"\u5b8c\u6210\u3002\u5171\u8ba1\u7528\u65f6",Math.floor(r/1e3),"\u79d2"]}):void 0,(0,J.jsx)("div",{id:"bottomDiv"})]})}})||Si;function Ei(t){const[n,i]=(0,e.useState)(!1);let r,{children:s,onClick:a}=t,o=(0,e.useRef)(!1);if((0,e.useEffect)((()=>(o.current=!0,()=>{o.current=!1}))),a&&(r=async e=>{i(!0);try{await a(e)}catch(t){throw console.error(t),t}finally{!0===o.current&&i(!1)}}),!0===n){var l;let{className:e}=t;e=(null!==(l=e)&&void 0!==l?l:"")+" position-relative";let n={zIndex:30001,background:"rgba(0, 0, 0, 0.3)",left:0,top:0,right:0,bottom:0};return(0,J.jsxs)("button",{...t,disabled:!0,className:e,children:[s,(0,J.jsx)("div",{className:"d-flex position-absolute align-items-center justify-content-center",style:n,children:(0,J.jsx)("i",{className:"fa fa-spinner fa-spin"})})]})}return(0,J.jsx)("button",{...t,onClick:r,children:s})}class Ai extends e.Component{constructor(e){super(e),this.fileInput=void 0,this.onFilesChange=e=>{let t=[],{files:n}=e.target,i=n.length;for(let r=0;r<i;r++)t.push(n[r]);this.setState({files:t})},this.fileClick=e=>{let t=new FileReader;t.onload=function(t){s.nav.push((0,J.jsx)(Ti,{name:e.name,content:this.result}))},t.readAsText(e,"utf8")},this.onSubmit=e=>{e.preventDefault()},this.onUpload=async()=>{s.nav.ceaseTop(),await this.upload()},this.state={files:void 0}}fileRender(e,t){let{name:n,size:i,lastModifiedDate:r}=e;return(0,J.jsxs)(s.pA,{className:"px-2 py-1",right:(0,J.jsx)(s.rO,{children:function(){let e,t;return i<1024?(e=i,t="b"):i<1048576?(e=Math.trunc(i/1024*100)/100,t="k"):(e=Math.trunc(i/1024/1024*100)/100,t="m"),e+" "+t}()}),children:[(0,J.jsx)("div",{children:n}),(0,J.jsx)("div",{children:(0,J.jsxs)(s.rO,{children:["\u4fee\u6539\u65e5\u671f: ",(0,J.jsx)(s.KX,{date:r})]})})]})}async upload(){var e=this.fileInput.files,t=new FormData;let n=e.length;for(let s=0;s<n;s++){let n=e[s];t.append("files[]",n,n.name)}let i=tn.uqServer+"uq-compile/"+this.props.uq.id+"/upload";try{let e=new AbortController,n=await fetch(i,{method:"POST",body:t,signal:e.signal,headers:Ui()});s.nav.push((0,J.jsx)(Ni,{...this.props,actionName:"\u4e0a\u4f20",action:"upload",res:n,abortController:e}))}catch(r){console.error("%s %s",i,r)}}render(){let e,t,{files:n}=this.state;return void 0!==n&&(e=(0,J.jsx)(s.aV,{className:"my-3",items:n,item:{render:this.fileRender,onClick:this.fileClick}})),void 0!==n&&n.length>0&&(t=(0,J.jsx)("div",{className:"my-2 d-flex",children:(0,J.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:this.onUpload,children:"\u63d0\u4ea4UQ"})})),(0,J.jsx)(s.T3,{header:"\u63d0\u4ea4UQ - "+this.props.uq.name,children:(0,J.jsxs)("div",{className:"py-2 px-3",children:[(0,J.jsxs)("form",{className:"my-1",encType:"multipart/form-data",onSubmit:this.onSubmit,children:[(0,J.jsxs)("div",{className:"my-1",children:[(0,J.jsx)("button",{className:"btn btn-outline-success",onClick:()=>this.fileInput.click(),children:"\u9009\u62e9UQ\u6e90\u4ee3\u7801\u6587\u4ef6"}),(0,J.jsx)("input",{ref:e=>this.fileInput=e,type:"file",className:"w-100 form-control-file d-none",name:"files",multiple:!0,onChange:this.onFilesChange})]}),e,t]}),(0,J.jsx)("pre",{children:this.state.compiled}),(0,J.jsx)("div",{children:this.state.text})]})})}}const Pi={action:"test",caption:"\u6d4b\u8bd5\u7248",compile:"\u7f16\u8bd1",description:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("li",{children:"\u7528\u4e0a\u4f20\u7684UQ\u4ee3\u7801\uff0c\u751f\u6210\u6d4b\u8bd5\u6570\u636e\u5e93"}),(0,J.jsx)("li",{children:"\u81ea\u52a8\u505a\u589e\u91cf\u5feb\u901f\u7f16\u8bd1\u3002\u6bd4\u8f83\u6e90\u4ee3\u7801\uff0c\u4ec5\u5bf9\u4fee\u6539\u7684\u6e90\u4ee3\u7801\uff0c\u751f\u6210\u6570\u636e\u5e93"}),(0,J.jsx)("li",{children:"\u7f16\u8bd1\u5668\u5347\u7ea7\u540e\uff0c\u4f1a\u81ea\u52a8\u5b8c\u5168\u7f16\u8bd1"})]})},Oi={action:"deploy",caption:"\u53d1\u5e03\u7248",compile:"\u7f16\u8bd1",description:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("li",{children:"\u5c06\u5df2\u7ecf\u7f16\u8bd1\u6d4b\u8bd5\u8fc7\u7684\u4ee3\u7801\uff0c\u53d1\u5e03\u5230\u751f\u4ea7\u670d\u52a1\u5668"}),(0,J.jsx)("li",{children:"\u81ea\u52a8\u505a\u589e\u91cf\u5feb\u901f\u7f16\u8bd1\u3002\u6bd4\u8f83\u6e90\u4ee3\u7801\uff0c\u4ec5\u5bf9\u4fee\u6539\u7684\u6e90\u4ee3\u7801\uff0c\u751f\u6210\u6570\u636e\u5e93"}),(0,J.jsx)("li",{children:"\u7f16\u8bd1\u5668\u5347\u7ea7\u540e\uff0c\u4f1a\u81ea\u52a8\u5b8c\u5168\u7f16\u8bd1"})]})};class Ii extends e.Component{constructor(e){switch(super(e),this.options=void 0,this.onCompile=async e=>{e.currentTarget.disabled=!0,s.nav.ceaseTop(),await this.compile()},e.action){case"test":this.options=Pi;break;case"deploy":this.options=Oi}}async compile(){let e,{caption:t,action:n,compile:i}=this.options,r=tn.uqServer+"uq-compile/"+this.props.uq.id+"/"+n;e=i;try{let i=new AbortController,a=await fetch(r,{method:"POST",signal:i.signal,headers:Ui()});s.nav.push((0,J.jsx)(Ni,{...this.props,caption:t,action:n,actionName:e,res:a,abortController:i}))}catch(a){console.error("%s %s",r,a)}}render(){let{caption:e,compile:t,description:n}=this.options;return(0,J.jsx)(s.T3,{header:e+" - "+this.props.uq.name,children:(0,J.jsxs)("div",{className:"bg-white p-3",children:[(0,J.jsx)("ul",{className:"my-3",children:n}),(0,J.jsx)("div",{className:"d-flex p-3 justify-content-center",children:(0,J.jsx)(Ei,{className:"btn btn-primary w-8c",type:"submit",onClick:this.onCompile,children:t})})]})})}}class Ti extends e.Component{render(){return(0,J.jsx)(s.T3,{header:this.props.name,children:(0,J.jsx)("pre",{className:"px-3 py-2",children:this.props.content})})}}function Ui(){let e={};return e["user-token"]=s.nav.userToken,e}var Ri,Li,Vi,Fi,qi;let Di=(Ri=class{constructor(e){this.formView=void 0,this.formView=e}render(){return(0,J.jsx)("div",{className:"col-sm-10",children:this.renderControl()})}get hasError(){return!1}get filled(){return!1}clear(){}clearErrors(){}readValues(e){}setError(e,t){}setInitValues(e){}isOk(){return this.validate(),!this.hasError}validate(){}},(0,Se.Z)(Ri.prototype,"hasError",[A.Fl],Object.getOwnPropertyDescriptor(Ri.prototype,"hasError"),Ri.prototype),(0,Se.Z)(Ri.prototype,"filled",[A.Fl],Object.getOwnPropertyDescriptor(Ri.prototype,"filled"),Ri.prototype),Ri),zi=(Li=class extends Di{constructor(e,t,n){super(e),this._field=void 0,this._face=void 0,this.props=void 0,this.rules=void 0,this.element=void 0,(0,Ce.Z)(this,"isOK",Vi,this),(0,Ce.Z)(this,"error",Fi,this),(0,Ce.Z)(this,"value",qi,this),this._field=t,this._face=n,this.init(),this.setProps()}ref(e){this.element=e}init(){this.rules=[];let e=this._field.rules;void 0!==e&&(!0===Array.isArray(e)?this.rules.push(...e):this.rules.push(e))}setProps(){return this.props={ref:this.ref.bind(this),name:this._field.name}}get hasError(){return void 0!==this.error}get filled(){return void 0!==this.value&&this.value!==this._field.defaultValue}clearValue(){this.value=void 0}clear(){this.clearErrors(),this.clearValue()}clearErrors(){this.isOK=void 0,this.error=void 0}readValues(e){e[this._field.name]=this.value}setError(e,t){}setInitValues(e){}getValueFromElement(){return this.value}validate(){try{let e=this.getValueFromElement();if(this.rules.length>0){let t;for(let n of this.rules){console.log("validate: %s",e);let i=n(e);if(console.log("validate: %s err: %s",e,i),!0===i)this.error=void 0,t=!0;else if(void 0!==i)return this.error=i,void(this.isOK=!1)}this.isOK=t}this.value=e}catch(e){this.error=e.message}}render(){let e;if(void 0!==this._face){let{notes:t}=this._face;void 0!==t&&(e=(0,J.jsx)("small",{className:"text-muted",children:t}))}return(0,J.jsxs)("div",{className:"col-sm-10",children:[this.renderControl(),e]})}},Vi=(0,Se.Z)(Li.prototype,"isOK",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fi=(0,Se.Z)(Li.prototype,"error",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qi=(0,Se.Z)(Li.prototype,"value",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,Se.Z)(Li.prototype,"hasError",[A.Fl],Object.getOwnPropertyDescriptor(Li.prototype,"hasError"),Li.prototype),(0,Se.Z)(Li.prototype,"filled",[A.Fl],Object.getOwnPropertyDescriptor(Li.prototype,"filled"),Li.prototype),Li);class Bi extends zi{constructor(){super(...arguments),this.element=void 0}init(){super.init(),!0===this._field.required&&this.rules.push((e=>null!==e&&void 0!==e&&0!==e.trim().length||"\u5fc5\u987b\u586b\u5165\u8981\u6c42\u5185\u5bb9"))}getValueFromElement(){return this.parseValue(this.element.value)}setProps(){super.setProps(),o().assign(this.props,{onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onChange:this.onChange.bind(this)});let e=this._face;return void 0!==e&&o().assign(this.props,{placeholder:e.placeholder}),this.props}parseValue(e){return e}onBlur(){this.validate()}onChange(){console.log("onChange"),this.validate()}onFocus(){this.clearErrors()}className(){return sn()({"form-control":!0,"has-success":!0===this.isOK,"is-invalid":void 0!==this.error,"is-valid":void 0===this.error&&!0===this.isOK})}renderInput(){return(0,J.jsx)("input",{className:this.className(),...this.props})}ref(e){super.ref(e),e&&(e.value=void 0===this.value?"":this.value)}renderError(){return void 0===this.error?null:(0,J.jsx)("div",{className:"invalid-feedback",children:this.error})}clearValue(){super.clearValue(),this.element.value=""}setError(e,t){this._field.name===e&&(this.error=t)}setInitValues(e){let t=e[this._field.name];void 0!==t&&(this.value=t)}renderControl(){return(0,J.jsxs)(e.Fragment,{children:[this.renderInput(),this.renderError()]})}}class Mi extends zi{renderControl(){return(0,J.jsx)("div",{className:"form-control-plaintext",children:(0,J.jsxs)("div",{className:"alert alert-primary",role:"alert",children:["don't know how to create control",(0,J.jsx)("br",{}),"field: ",JSON.stringify(this._field)," must be object ",(0,J.jsx)("br",{}),"face: ",JSON.stringify(this._face)," must be object ",(0,J.jsx)("br",{})]})})}}class Wi extends Di{constructor(e,t){super(e),this.element=void 0,this.element=t}renderControl(){return(0,J.jsx)("div",{className:"form-control-plaintext",children:this.element})}}class Hi extends Bi{get field(){return this._field}setProps(){let e=super.setProps();return o().assign(e,{type:"text",maxLength:this.field.maxLength}),e}parseValue(e){if(void 0!==e&&0!==e.trim().length)return e}}var Zi,$i;let Qi=(Zi=class extends zi{constructor(){super(...arguments),(0,Ce.Z)(this,"caption",$i,this),this.onClick=async()=>{let{pick:e,fromPicked:t}=this.face,n=await e(this.face,this.formView.props,this.formView.readValues());if(void 0===n)return void(this.value=void 0);if(void 0===t)return void(this.value=n.id);let{id:i,caption:r}=t(n);this.value=i,this.caption=r},this.onPicked=e=>{this.value=e.id}}get face(){return this._face}get hasError(){return!0===this._field.required&&void 0===this.value}setInitValues(e){let t=e[this._field.name];this.value=t}controlContent(){let{itemFromId:e,fromPicked:t,initCaption:n}=this.face;if(void 0===this.value)return n||"\u8bf7\u9009\u62e9Id";if(void 0!==this.caption)return this.caption;if(void 0!==e&&void 0!==t){let n=e(this.value);if(n){let e=t(n);if(void 0!==e)return e.caption}}return String(this.value)}renderControl(){let{tuid:e,input:t}=this.face;return void 0===t?(0,J.jsx)("div",{className:"form-control-plaintext px-2 border text-primary rounded cursor-pointer",onClick:this.onClick,children:this.controlContent()}):(0,J.jsx)("div",{className:"form-control-static ",children:(0,J.jsx)(t.component,{id:this.value,ui:e})})}},$i=(0,Se.Z)(Zi.prototype,"caption",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,Se.Z)(Zi.prototype,"hasError",[A.Fl],Object.getOwnPropertyDescriptor(Zi.prototype,"hasError"),Zi.prototype),Zi);var Ki,Gi;let Xi=(Ki=class extends zi{get face(){return this._face}constructor(e,t,n){super(e,t,n),(0,Ce.Z)(this,"caption",Gi,this),this.onIdChanged=this.onIdChanged.bind(this)}onIdChanged(e){this.value=e.id}setInitValues(e){let t=e[this._field.name];this.value=t}buildContent(){return e.createElement(this.face.input.component,{id:this.value,onFormValues:()=>this.formView.readValues(),onIdChanged:this.onIdChanged,...this.face})}renderControl(){return(0,J.jsx)("div",{className:"form-control-static ",children:this.buildContent()})}},Gi=(0,Se.Z)(Ki.prototype,"caption",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ki);var Ji,Yi;let er=(Ji=class extends zi{constructor(){super(...arguments),(0,Ce.Z)(this,"caption",Yi,this),this.onClick=async()=>{let{pick:e,fromPicked:t}=this.face,n=await e(this.face,this.formView.props,this.formView.readValues());if(void 0===n)return void(this.value=void 0);let{id:i,caption:r}=t(n);this.value=i,this.caption=r},this.view=(0,X.Pi)((()=>{let e,{content:t}=this.face;return e=void 0===this.value||null===this.value?"\u8bf7\u9009\u62e9":(0,J.jsx)(t,{id:this.value}),(0,J.jsx)("div",{className:"form-control-plaintext px-2 border text-primary rounded cursor-pointer bg-light",onClick:this.onClick,children:e})}))}get face(){return this._face}setInitValues(e){let t=e[this._field.name];this.value=t}renderControl(){return e.createElement(this.view)}},Yi=(0,Se.Z)(Ji.prototype,"caption",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ji);class tr extends Di{constructor(e){super(e),this.otherClick=this.otherClick.bind(this)}otherClick(){let e=this.formView.props.onOther;void 0!==e&&e(this.formView.readValues())}renderControl(){console.log("buttons.renderControl");let e=this.formView.nothing,t=this.formView.hasError,n=this.formView.props;console.log("buttons.renderControl nothing:%s hasError:%s",e,t);let i,{submitButton:r,otherButton:s}=n;return void 0!==s&&(i=(0,J.jsx)("button",{className:"btn btn-outline-info ms-auto",onClick:this.otherClick,children:s})),(0,J.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,J.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:e||t,children:r||"\u63d0\u4ea4"}),i]})}}const nr=(e,t)=>{let n;t.label;return n=void 0!==t.group?function(e,t,n){return new Mi(e,n,void 0)}(e,0,t):void 0!==t.field?function(e,t,n){let{field:i,face:r}=n;switch(typeof i){case"string":i={name:i,type:"string"};break;case"object":break;default:return new Mi(e,i,r)}let s=i.type||"string";if(void 0===r){if(r=rr[s],void 0===r)return new Mi(e,i,r)}else if(void 0===r.type){let e=rr[s];r.type=void 0===e?"string":e.type}let a=new(ir[r.type||s]||Mi)(e,i,r);return a}(e,0,t):new Wi(e,t.help),n},ir={string:Hi,password:class extends Hi{setProps(){let e=super.setProps();return o().assign(e,{type:"password",maxLength:this.field.maxLength}),e}},number:class extends Bi{constructor(){super(...arguments),this.value=void 0,this.extraChars=void 0}get field(){return this._field}init(){super.init(),this.extraChars=[];let{min:e,max:t}=this.field;switch(void 0!==e?(this.rules.push((t=>{if(void 0!==t)return!(t<e)||"\u6700\u5c0f\u503c\u4e3a"+e})),e<0&&this.extraChars.push(45)):this.extraChars.push(45),void 0!==t&&this.rules.push((e=>{if(void 0!==e)return!(e>t)||"\u6700\u5927\u503c\u4e3a"+t})),this._field.type){case"dec":case"number":this.extraChars.push(46)}}parseValue(e){if(void 0===e)return;if(0===e.trim().length)return;let t=Number.parseFloat(e);if(isNaN(t))throw new Error("\u65e0\u6548\u7684\u6570\u5b57");return t}setProps(){super.setProps(),o().assign(this.props,{type:"number",step:this._field.step,onKeyPress:this.onKeyPress.bind(this)})}onKeyPress(e){let t=e.charCode;if(!(8===t||0===t||13===t||t>=48&&t<=57))if(void 0!==this.extraChars&&this.extraChars.indexOf(t)>=0)switch(t){case 46:this.onKeyDot();break;case 45:this.onKeyNeg(),e.preventDefault()}else e.preventDefault()}onKeyDot(){let e=this.element.value;e.indexOf(".")>=0&&(this.element.value=e.replace(".",""))}onKeyNeg(){let e=this.element.value,t=e.indexOf("-");e=t>=0?e.replace("-",""):"-"+e,this.element.value=e}},checkbox:class extends zi{constructor(){super(...arguments),this.element=void 0,this.trueValue=void 0,this.falseValue=void 0}get field(){return this._field}get face(){return this._face}init(){super.init();let{trueValue:e,falseValue:t}=this.field;void 0===e&&(this.trueValue=1),void 0===t&&(this.falseValue=0)}setProps(){super.setProps(),o().assign(this.props,{onChange:this.onChange.bind(this)})}clearValue(){this.element.checked=this._field.defaultValue===this.trueValue,this.value=this.getValueFromElement()}setInitValues(e){let t=e[this._field.name];void 0===t&&(t=this._field.defaultValue)}getValueFromElement(){return this.element.checked?this.trueValue:this.falseValue}onChange(){this.value=this.getValueFromElement()}renderControl(){return(0,J.jsx)("div",{className:"form-control-static",children:(0,J.jsx)("label",{className:"form-control",children:(0,J.jsxs)("label",{className:"custom-control custom-checkbox mb-0",children:[(0,J.jsx)("input",{type:"checkbox",name:this._field.name,ref:this.props.ref,onChange:this.props.onChange,className:"custom-control-input"}),(0,J.jsx)("span",{className:"custom-control-indicator"}),(0,J.jsx)("span",{className:"custom-control-description",children:this.face.label})]})})})}},radiobox:class extends zi{get face(){return this._face}renderControl(){return(0,J.jsx)("div",{className:"form-control-static",children:(0,J.jsx)("div",{className:"form-control",children:this.face.list.map(((e,t)=>{let n;return n="object"!==typeof e?e:e.text,(0,J.jsxs)("label",{className:"custom-control custom-radio w-25",children:[(0,J.jsx)("input",{type:"radio",name:this._field.name,className:"custom-control-input"}),(0,J.jsx)("span",{className:"custom-control-indicator"}),(0,J.jsx)("span",{className:"custom-control-description",children:n})]},t)}))})})}},select:class extends zi{constructor(e,t,n){super(e,t,n),this.element=void 0,this.ref=this.ref.bind(this)}get face(){return this._face}getValueFromElement(){let{selectedOptions:e}=this.element,t=e[0].value;switch(this._field.type){case"number":t=Number(t);break;case"date":t=new Date(t);break;case"bool":"string"===typeof t&&(t="true"===t.toLowerCase())}return t}renderControl(){let{list:e}=this.face,t=[];return void 0===this.face.default&&t.push((0,J.jsx)("option",{value:void 0,children:"\u8bf7\u9009\u62e9"},-1)),t.push(...e.map(((e,t)=>{let n,i;return"object"!==typeof e?n=i=e:(n=e.text,i=e.value),(0,J.jsx)("option",{value:i,children:n},t)}))),(0,J.jsx)("div",{className:"form-control-static",children:(0,J.jsx)("select",{name:this._field.name,className:"form-control",ref:this.ref,children:t})})}},"pick-id":Qi,"pick-tuid":Xi,textarea:class extends Bi{constructor(){super(...arguments),this.el=void 0}get face(){return this._face}get field(){return this._field}setProps(){let e=super.setProps(),{maxLength:t}=this.field,{rows:n}=this.face;return a.assign(e,{maxLength:t,rows:n}),e}renderInput(){return(0,J.jsx)("textarea",{ref:e=>{this.el=e,void 0!==e&&(e.value="")},className:this.className(),...this.props})}},pick:er},rr={string:{type:"string"},number:{type:"number"},int:{type:"number"},dec:{type:"number"},bool:{type:"checkbox"}};class sr{constructor(e,t){if(this.form=void 0,this.row=void 0,this.control=void 0,this.form=e,this.row=t,void 0===t.type){let n=t.createControl;void 0===n&&(n=e.createControl),void 0===n&&(n=nr),this.control=n(e,t)}}isOk(){return void 0===this.control||this.control.isOk()}contains(e){let t=this.row.field;if(void 0!==t)return e===t.name;let n=this.row.group;return void 0!==n&&void 0!==n.find((t=>t.field.name===e))}get hasError(){return this.control.hasError}get filled(){return this.control.filled}clear(){void 0!==this.control&&this.control.clear()}clearErrors(){void 0!==this.control&&this.control.clearErrors()}readValues(e){void 0!==this.control&&this.control.readValues(e)}setError(e,t){void 0!==this.control&&this.control.setError(e,t)}setInitValues(e){void 0!==this.control&&this.control.setInitValues(e)}}class ar extends sr{render(e){return(0,J.jsx)("div",{className:"form-group",children:this.row},e)}get hasError(){return!1}get filled(){return!1}}class or extends sr{render(e){return(0,J.jsxs)("div",{className:"form-group row",children:[(0,J.jsx)("label",{className:"col-sm-2 col-form-label",children:this.row.label}),this.control.render()]},e)}}function lr(e,t){return new or(e,t)}function ur(e,t){return new ar(e,t)}var cr;let hr=(cr=class{constructor(e){this.uid=void 0,this.rows=[],this.buttonsRow=void 0,this.props=void 0,this.createControl=void 0,this.uid=(0,i.hQ)(),this.props=e,this.buildRows(e),this.createControl=e.createControl,this.onSubmit=this.onSubmit.bind(this)}get hasError(){let e=this.rows.map(((e,t)=>t+": "+e.hasError+"\n"));return console.log(e),this.rows.some((e=>e.hasError))}get nothing(){return this.rows.every((e=>!e.filled))}readValues(){let e={};for(let t of this.rows)t.readValues(e);return e}clear(){for(let e of this.rows)e.clear()}clearErrors(){for(let e of this.rows)e.clearErrors()}setError(e,t){for(let n of this.rows)n.setError(e,t)}setInitValues(e){if(void 0!==e)for(let t of this.rows)t.setInitValues(e)}buildRows(e){let{formRows:t,createRow:n}=e;if(void 0!==t){for(let e of t)this.rows.push(this.buildRow(e,n));!0!==this.props.readOnly&&(this.buttonsRow=this.buildRow({createControl:this.createButtons.bind(this)},void 0))}else this.rows.push(ur(this,(0,J.jsx)("div",{className:"text-warning",children:"TonvaForm need formRows defined"})))}buildRow(e,t){let n;return void 0!==e.type?n=ur:(n=e.createRow,void 0===n&&(n=t,void 0===n&&(n=lr))),n(this,e)}createButtons(e,t){return new tr(e)}isOk(){let e=!0;for(let t of this.rows)t.isOk()||(e=!1);return e}render(){return(0,J.jsxs)("form",{onSubmit:this.onSubmit,children:[this.rows.map(((e,t)=>e.render(this.uid+t))),this.buttons()]})}buttons(){if(void 0!==this.buttonsRow)return this.buttonsRow.render(this.uid+this.rows.length)}async onSubmit(e){if(e.preventDefault(),!this.isOk())return;let t=this.readValues();await this.props.onSubmit(t)}},(0,Se.Z)(cr.prototype,"hasError",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"hasError"),cr.prototype),(0,Se.Z)(cr.prototype,"nothing",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"nothing"),cr.prototype),cr);var dr;let pr=(0,X.Pi)(dr=class extends e.Component{constructor(e){super(e),this.formView=void 0,this.formView=new hr(this.props),this.formView.setInitValues(this.props.initValues)}debug(){}render(){let{className:e,children:t}=this.props;return(0,J.jsx)("div",{className:e,children:void 0===t?this.formView.render():(0,J.jsx)("form",{onSubmit:this.formView.onSubmit,children:t})})}})||dr;class fr extends e.Component{constructor(e){super(e),this.values={},this.stepViews=[],this.topView=void 0,this.onPrev=e=>{o().assign(this.values,e),this.topView=this.stepViews.pop(),this.setState({topView:this.topView,stepViews:this.stepViews})},this.onNext=e=>{o().assign(this.values,e);let t,{next:n}=this.topView.step;if(void 0===n)return this.props.onSubmit(this.values);t="string"===typeof n?n:n(this.values),this.setStep(t)},this.state={topView:void 0,stepViews:[]},this.setStep(this.props.first)}setStep(e){let t,n,i=this.props.steps[e];if(void 0===i)return;void 0!==this.topView&&this.stepViews.push(this.topView),this.stepViews.length>0&&(t=(0,J.jsx)(mr,{prefix:"undo",text:"\u4e0a\u4e00\u6b65"}),n=this.onPrev);let r=void 0===i.next?{prefix:"cloud-upload",text:this.props.submitButton||"\u63d0\u4ea4"}:{suffix:"arrow-right",text:"\u4e0b\u4e00\u6b65"},s={formRows:i.formRows,submitButton:(0,J.jsx)(mr,{...r}),onSubmit:this.onNext,otherButton:t,onOther:n};this.topView={stepName:e,step:i,props:s},this.setState({topView:this.topView,stepViews:this.stepViews})}render(){let{className:e,header:t,footer:n}=this.props,{topView:i,stepViews:r}=this.state,{stepName:s,step:a}=i,o=r.length+1;return(0,J.jsx)("div",{className:e,children:(0,J.jsxs)("div",{children:[t&&t(a,o),(0,J.jsx)(pr,{initValues:this.values,...i.props},s),n&&n(a,o)]})})}}const mr=t=>{let n,i,{prefix:r,suffix:s}=t;return void 0!==r&&(n=(0,J.jsx)("i",{className:sn()("fa","fa-"+r)})),void 0!==s&&(i=(0,J.jsx)("i",{className:sn()("fa","fa-"+s)})),(0,J.jsxs)(e.Fragment,{children:[n," ",t.text," ",i]})},vr=e=>{let{discription:t,cloud:n,ip:i}=e;return(0,J.jsxs)(J.Fragment,{children:[t," ",n," ",i]})},gr={caption:"\u9009\u62e9\u670d\u52a1\u5668",searchPlaceHolder:"\u641c\u7d22\u670d\u52a1\u5668",candidateItems:async(e,t)=>(await tn.dev.searchServer.first(t),tn.dev.searchServer.items),moreCandidates:async()=>{await tn.dev.searchServer.more()},row:(e,t)=>(0,J.jsx)("div",{className:"px-3 py-2",children:(0,J.jsx)(vr,{...e})})},yr=e=>({id:e.id,caption:(0,J.jsx)(vr,{...e})}),br=e=>gt.servers.get(e),wr={label:"\u8fd0\u884c\u670d\u52a1\u5668",field:{name:"server",type:"id",required:!0},face:{type:"pick-id",initCaption:"\u8bf7\u9009\u62e9\u8fd0\u884c\u670d\u52a1\u5668",pick:Fn(gr),fromPicked:yr,itemFromId:br}},xr={label:"\u6d4b\u8bd5\u670d\u52a1\u5668",field:{name:"serverTest",type:"id",required:!0},face:{type:"pick-id",initCaption:"\u8bf7\u9009\u62e9\u6d4b\u8bd5\u670d\u52a1\u5668",pick:Fn(gr),fromPicked:yr,itemFromId:br}},jr=e=>{let{name:t,discription:n}=e;return(0,J.jsx)(J.Fragment,{children:null!==t&&void 0!==t?t:n})},kr={label:"\u5c0f\u53f7($unit)",field:{name:"uqUniqueUnit",type:"id",required:!0},face:{type:"pick-id",initCaption:"\u8bf7\u9009\u62e9\u5c0f\u53f7($unit)",pick:Fn({caption:"\u9009\u62e9\u5c0f\u53f7($unit)",searchPlaceHolder:"\u641c\u7d22\u5c0f\u53f7($unit)",candidateItems:async(e,t)=>tn.accUnits,moreCandidates:async()=>{},row:(e,t)=>(0,J.jsx)("div",{className:"px-3 py-2",children:(0,J.jsx)(jr,{...e})})}),fromPicked:e=>({id:e.id,caption:(0,J.jsx)(jr,{...e})}),itemFromId:e=>gt.units.get(e)}},_r={label:"\u6570\u636e\u5e93\u540d\u5b57",field:{name:"db",type:"string",maxLength:50,required:!0}};class Cr extends Xe.ps{constructor(){super(...arguments),this.formRows=[_r,kr,wr,xr],this.onSubmit=async e=>{e.type=2,e.uqId=this.controller.uq.id,0!==await this.controller.saveService(e)&&s.nav.pop()},this.page=()=>(0,J.jsx)(s.T3,{header:"\u65b0\u5efaService",children:(0,J.jsx)(pr,{className:"m-3",formRows:this.formRows,onSubmit:this.onSubmit})})}async open(){this.openPage(this.page)}}var Sr,Nr;let Er=(Sr=class extends Xe.ps{constructor(){super(...arguments),(0,Ce.Z)(this,"service",Nr,this),this.onDbChanged=async(e,t)=>{if(0===await this.changeProp("db",e))return"Db\u5df2\u7ecf\u88ab\u4f7f\u7528\u4e86";this.service.db=e},this.onUnitPick=async()=>{let e=await this.controller.pickUnit();this.changeProp("uq_unique_unit",e),this.service.uqUniqueUnit=e},this.onServerPick=async()=>{let e=await this.controller.pickServer();this.changeProp("server",e),this.service.server=e},this.onServerTestPick=async()=>{let e=await this.controller.pickServer();this.changeProp("server_test",e),this.service.serverTest=e},this.onDeleteClick=async()=>{!0===window.confirm("\u771f\u7684\u8981\u5220\u9664Service\u5417\uff1f\u5220\u9664\u4e86\u4e0d\u53ef\u6062\u590d\uff0c\u9700\u8981\u91cd\u65b0\u5f55\u5165\u3002")&&(await this.controller.delService(this.service),s.nav.pop())},this.page=(0,X.Pi)((()=>{let{uq:e}=this.controller,t=["",{type:"string",name:"db",label:"\u6570\u636e\u5e93\u540d",onClick:()=>s.nav.push((0,J.jsx)(Tn,{title:"\u6570\u636e\u5e93\u540d\u5b57",value:this.service.db,onChanged:this.onDbChanged}))},{type:"component",label:"\u5c0f\u53f7($unit)",component:(0,J.jsx)(dn,{id:this.service.uqUniqueUnit}),onClick:this.onUnitPick},"",{type:"component",label:"\u751f\u4ea7\u670d\u52a1\u5668",component:(0,J.jsx)(On,{id:this.service.server}),onClick:this.onServerPick},{type:"component",label:"\u6d4b\u8bd5\u670d\u52a1\u5668",component:(0,J.jsx)(On,{id:this.service.serverTest}),onClick:this.onServerTestPick}],n=(0,J.jsx)("button",{onClick:this.onDeleteClick,className:"btn btn-sm btn-success align-self-center",children:"\u5220\u9664"});return(0,J.jsx)(s.T3,{header:"UQ - "+e.name,right:n,children:(0,J.jsx)(s.QX,{rows:t,values:this.service})})}))}async open(e){this.service=e,this.openPage(this.page)}async changeProp(e,t){return await this.controller.changeServiceProp(this.service,e,t)}},Nr=(0,Se.Z)(Sr.prototype,"service",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sr);const Ar=[{label:"\u540d\u79f0",field:{name:"name",type:"string",maxLength:100,required:!0}},{label:"\u63cf\u8ff0",field:{name:"discription",type:"string",maxLength:250},face:{type:"textarea"}}];class Pr extends Xe.ps{constructor(){super(...arguments),this.onSubmit=async e=>{await this.controller.saveUq(e),s.nav.pop()},this.page=void 0}async open(){this.openPage(this.page)}form(e){return(0,J.jsx)(pr,{className:"m-3",formRows:Ar,onSubmit:this.onSubmit,initValues:e})}}class Or extends Pr{constructor(){super(...arguments),this.page=()=>{let{uq:e}=this.controller,{name:t}=e;return(0,J.jsx)(s.T3,{header:"\u4fee\u6539UQ - "+t,back:"close",children:this.form(e)})}}}class Ir extends Pr{constructor(){super(...arguments),this.page=()=>(0,J.jsx)(s.T3,{header:"\u65b0\u5efaUQ",back:"close",children:this.form({})})}}class Tr extends Xe.ps{constructor(){super(...arguments),this.editItem=async()=>{await this.openVPage(Or)},this.deleteItem=async()=>{!0===window.confirm("\u771f\u7684\u8981\u5220\u9664UQ\u5417\uff1f")&&(await this.controller.deleteUq(),s.nav.pop())},this.page=(0,X.Pi)((()=>{let t,n,i,{onUqUpload:r,onUqTest:a,onUqDeploy:o,onShowSource:l,onUqDevsAdmin:u,serviceClick:c,uq:h,services:d}=this.controller,{unit:p}=tn,{isOwner:f}=p,{name:m,discription:v,unit:g,date_init:y,date_update:b}=h,w=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:v}),(0,J.jsx)(ln,{date_update:b,date_init:y})]}),x=[{caption:"\u4fee\u6539UQ",action:this.editItem,icon:"edit"},{caption:"\u5220\u9664",action:this.deleteItem,icon:"trash-o"}],j=f>0&&(0,J.jsx)(s.Qo,{className:"btn-primary me-2",actions:x}),k=(0,J.jsx)(s.FA,{className:"align-self-center",name:"angle-right"}),_=(e,t,n,i)=>({type:"component",label:void 0,component:(0,J.jsx)(s.pA,{onClick:i,className:"w-100 py-2 cursor-pointer",left:(0,J.jsxs)("span",{className:"align-self-center",children:[(0,J.jsx)(s.FA,{className:t,name:e,fixWidth:!0})," \xa0 ",n]}),right:k})}),C=["",{type:"component",component:(0,J.jsxs)(s.pA,{className:"py-2",left:(0,J.jsx)(s.FA,{name:"database",className:"text-primary fa-2x me-3"}),children:[(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:m})}),w]})},{type:"component",label:"\u5f00\u53d1\u53f7",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:g,isLink:!0})})},"",_("code","text-info","\u4e0a\u4f20UQ\u6e90\u4ee3\u7801",r),_("database","text-warning","\u6d4b\u8bd5\u7248 - \u7f16\u8bd1UQ\u6570\u636e\u5e93",a),_("database","text-success","\u53d1\u5e03\u7248 - \u7f16\u8bd1UQ\u6570\u636e\u5e93",o),_("code","text-info","\u67e5\u770bUQ\u6e90\u4ee3\u7801",l)];if(f>0){n=(0,J.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>this.controller.showNewServicePage(),children:"\u589e\u52a0"});let e=this.controller.uqDevs.filter((e=>0===e.isOwner));t=(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)("div",{className:"d-flex mx-3 mt-3 mb-1 align-items-end",children:[(0,J.jsx)(s.rO,{style:{display:"block",flex:1},children:"\u5f00\u53d1\u8005"}),(0,J.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:u,children:"\u7ba1\u7406"})]}),(0,J.jsx)("div",{className:"px-3 py-2 d-flex flex-wrap bg-white",children:0===e.length?(0,J.jsx)("div",{className:"small text-muted",children:"[\u65e0]"}):e.map((e=>(0,J.jsx)("div",{className:"my-2 me-3",children:e.nick||e.name},e.userId)))})]})}return f>0&&(i=c),(0,J.jsxs)(s.T3,{header:"UQ - "+m,right:j,children:[(0,J.jsx)(s.QX,{rows:C,values:h}),t,(0,J.jsxs)("div",{className:"d-flex mx-3 mt-3 mb-1 align-items-end",children:[(0,J.jsx)(s.rO,{style:{display:"block",flex:1},children:"Service"}),n]}),(0,J.jsx)(s.aV,{items:d,item:{render:(t,n)=>e.createElement(this.renderService,{service:t,index:n}),onClick:i}})]})})),this.renderService=(0,X.Pi)((e=>{let{service:t}=e,{db:n,server:i,serverTest:r,uqUniqueUnit:a,compile_time:o,deploy_time:l}=t,u=o?(0,J.jsx)(s.S9,{date:o}):(0,J.jsx)(s.rO,{children:"\u672a\u6d4b\u8bd5"}),c=l?(0,J.jsx)(s.S9,{date:l}):(0,J.jsx)(s.rO,{children:"\u672a\u53d1\u5e03"});return(0,J.jsxs)("div",{className:"d-block w-100 cursor-pointer mb-2 py-2 px-3",children:[(0,J.jsxs)("div",{children:[(0,J.jsx)("small",{children:"\u6570\u636e\u5e93\u540d\uff1a"}),n,"\xa0 \xa0 \xa0",(0,J.jsx)("small",{children:"\u5c0f\u53f7($unit)\uff1a"}),(0,J.jsx)(dn,{id:a})]}),(0,J.jsx)(s.pA,{className:"align-items-center",right:(0,J.jsx)("small",{children:c}),children:(0,J.jsxs)("div",{children:[(0,J.jsx)("small",{children:"\u751f\u4ea7\uff1a"}),(0,J.jsx)(On,{id:i})]})}),(0,J.jsx)(s.pA,{className:"align-items-center",right:(0,J.jsx)("small",{children:u}),children:(0,J.jsxs)("div",{children:[(0,J.jsx)("small",{children:"\u6d4b\u8bd5\uff1a"}),(0,J.jsx)(On,{id:r})]})})]})}))}async open(){this.openPageElement(e.createElement(this.page))}}class Ur extends Xe.ps{constructor(){super(...arguments),this.newItem=()=>{this.controller.uq=void 0,this.openVPage(Ir)},this.batchCompile=()=>{this.openPage(this.batchCompilePage)},this.page=()=>{let{uqList:e,listRowClick:t}=this.controller,{isOwner:n}=tn.unit,i=[{icon:"plus",caption:"\u65b0\u589eUQ",action:this.newItem},{icon:"plus",caption:"\u6279\u91cf\u7f16\u8bd1",action:this.batchCompile}],r=n>0&&(0,J.jsx)(s.Qo,{className:"btn-primary me-2 align-self-center",icon:"bars",actions:i,children:(0,J.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>this.newItem(),children:(0,J.jsx)(s.FA,{name:"plus"})})});return(0,J.jsx)(s.T3,{header:"UQ",right:r,children:(0,J.jsx)(s.aV,{items:e,item:{render:this.listRow,onClick:t}})})},this.listRow=e=>{let{name:t,discription:n,service_count:i,date_update:r}=e;return(0,J.jsx)(s.pA,{className:"py-1 px-3 align-items-center",left:(0,J.jsx)(s.FA,{name:"database",className:"text-primary fa-lg"}),right:(0,J.jsxs)("div",{className:"text-end",children:[(0,J.jsxs)("div",{children:[(0,J.jsx)("small",{className:"text-muted",children:"\u670d\u52a1\u6570:"})," ",i]}),(0,J.jsx)("div",{className:"small text-muted",children:(0,J.jsx)(s.S9,{date:r})})]}),children:(0,J.jsxs)("div",{className:"py-2 px-3",children:[(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:t})}),(0,J.jsx)("div",{children:(0,J.jsx)(s.rO,{children:n})})]})})},this.onSelect=(e,t,n)=>{},this.listCompileRow=e=>{let{name:t,discription:n,date_update:i}=e;return(0,J.jsx)(s.pA,{className:"py-1 px-3 align-items-center",left:(0,J.jsx)(s.FA,{name:"database",className:"text-info fa-lg"}),right:(0,J.jsx)("div",{className:"text-end",children:(0,J.jsx)("div",{className:"small text-muted",children:(0,J.jsx)(s.S9,{date:i})})}),children:(0,J.jsxs)("div",{className:"py-2 px-3",children:[(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:t})}),(0,J.jsx)("div",{children:(0,J.jsx)(s.rO,{children:n})})]})})},this.list=void 0,this.selectAll=()=>{this.list.selectAll()},this.unselectAll=()=>{this.list.unselectAll()},this.test=()=>{this.compile("test",!1)},this.deploy=()=>{this.compile("deploy",!1)},this.batchCompilePage=()=>{let{uqList:e}=this.controller,t=(0,J.jsxs)("span",{children:[(0,J.jsx)("button",{className:"btn btn-sm btn-link",onClick:this.selectAll,children:"\u5168\u9009"}),(0,J.jsx)("button",{className:"btn btn-sm btn-link",onClick:this.unselectAll,children:"\u5168\u6e05"})]}),n="btn btn-sm btn-outline-primary me-3",i=(0,J.jsxs)("span",{className:"px-3 py-1 d-flex w-100",children:[(0,J.jsxs)("span",{className:"flex-grow-1",children:[(0,J.jsx)("button",{className:n,onClick:this.test,children:"\u6d4b\u8bd5"}),(0,J.jsx)("button",{className:n,onClick:this.deploy,children:"\u53d1\u5e03"})]}),t]});return(0,J.jsx)(s.T3,{header:"\u6279\u91cf\u7f16\u8bd1",footer:i,children:(0,J.jsx)(s.aV,{ref:e=>this.list=e,items:e,item:{render:this.listCompileRow,onSelect:this.onSelect}})})}}async open(e){this.openPage(this.page)}async compile(e,t){let n,i=this.list.selectedItems,r=tn.uqServer+"uq-compile/batch";switch(e){case"test":n="\u6d4b\u8bd5";break;case"deploy":n="\u53d1\u5e03"}try{let a=new AbortController,o={test:"test"===e,thoroughly:t,uqs:i.map((e=>e.id))},l=await fetch(r,{method:"POST",signal:a.signal,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});s.nav.push((0,J.jsx)(Ni,{uq:void 0,services:void 0,action:e,actionName:n,res:l,abortController:a}))}catch(a){console.error("%s %s",r,a)}}}class Rr extends Xe.ps{constructor(){super(...arguments),this.onSelect=async(e,t)=>{await this.controller.devChanged(e,t)},this.page=()=>{let{uqDevs:e,admins:t}=this.controller,n=t.devs.filter((t=>void 0!==e.find((e=>e.userId===t.id)))),i=(0,J.jsx)("div",{className:"px-3 py-1 small text-muted",children:"\u5f00\u53d1\u8005"});return(0,J.jsx)(s.T3,{header:"\u589e\u51cf\u5f00\u53d1\u8005",children:(0,J.jsxs)("div",{className:"my-3",children:[i,(0,J.jsx)(s.aV,{items:t.devs,none:"[\u65e0]",selectedItems:n,item:{onSelect:this.onSelect,render:this.row}})]})})},this.row=e=>{let{icon:t,name:n,nick:i}=e,r=i?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("b",{children:i})," \xa0 ",(0,J.jsx)("small",{className:"text-muted",children:n})]}):(0,J.jsx)("b",{children:n}),a=(0,J.jsx)(s.Ee,{className:"w-2-5c h-2-5c",src:t});return(0,J.jsx)(s.pA,{className:"py-2 px-3 align-items-stretch",left:a,children:(0,J.jsx)("div",{className:"px-3",children:r})})}}async open(){await this.controller.loadAdmins(),this.openPage(this.page)}}class Lr extends nn{constructor(){super(...arguments),this.pageItems=void 0,this.onSearch=async e=>{await this.pageItems.first(e)}}async internalStart(){this.pageItems=new Vr}async pick(){return this.pageItems=new Vr,await this.pageItems.first(""),await this.vCall(Fr)}}class Vr extends i.Fu{async loadResults(e,t,n){let i=tn.unit.id;return{$page:await ct.searchServer(i,e,t,n)}}setPageStart(e){this.pageStart=void 0===e?0:e.id}}class Fr extends Xe.ps{constructor(){super(...arguments),this.renderServer=(e,t)=>(0,J.jsx)("div",{className:"px-3 py-2",children:(0,J.jsx)(On,{id:e.id})}),this.clickServer=e=>{this.closePage(),this.returnCall(e.id)},this.onClickNullServer=()=>{this.closePage(),this.returnCall(null)},this.page=(0,X.Pi)((()=>{let e=(0,J.jsx)(s.Rj,{label:"\u9009\u62e9\u670d\u52a1\u5668",onSearch:this.controller.onSearch});return(0,J.jsxs)(s.T3,{header:e,children:[(0,J.jsxs)("div",{className:"px-3 py-2 cursor-pointer bg-white border-bottom",onClick:this.onClickNullServer,children:[(0,J.jsx)("span",{className:"text-danger me-3",children:"NULL"}),(0,J.jsx)("small",{className:"text-muted",children:"[\u4e0d\u9009\u670d\u52a1\u5668]"})]}),(0,J.jsx)(s.aV,{items:this.controller.pageItems.items,item:{render:this.renderServer,onClick:this.clickServer}})]})}))}async open(){this.openPage(this.page)}}var qr,Dr,zr,Br,Mr;let Wr=(qr=class{constructor(e){this.unit=void 0,(0,Ce.Z)(this,"cur",Dr,this),(0,Ce.Z)(this,"owners",zr,this),(0,Ce.Z)(this,"admins",Br,this),(0,Ce.Z)(this,"devs",Mr,this),this.unit=e}async load(){let e=this.unit;if(void 0===e)return;if(void 0===e.id)return;if(void 0!==this.admins)return;let t=await ot.unitAdmins(e.id),n=[],i=[],r=[];t.forEach((e=>{let{isOwner:t,isAdmin:s,isDev:a}=e;a?r.push(e):(1===t&&n.push(e),1===s&&i.push(e))})),this.owners=n,this.admins=i,this.devs=r}removeOneUnitAdmin(e,t){let n=e.findIndex((e=>e.id===t.id));n>=0&&e.splice(n,1)}removeUnitAdmin(e){void 0===e&&(e=this.cur),this.removeOneUnitAdmin(this.owners,e),this.removeOneUnitAdmin(this.admins,e),this.removeOneUnitAdmin(this.devs,e)}async unitSetAdmin(e,t,n){let i=this.cur,r=i.id,s=this.unit.id;await ot.unitSetAdmin(r,s,e,t,n),i.isOwner=e,i.isAdmin=t,this.removeUnitAdmin(),0===e&&0===t?this.devs.unshift(i):(1===e&&this.owners.unshift(i),1===t&&this.admins.unshift(i))}async unitAddAdmin(e,t,n,i){let r=await ot.unitAddAdmin(e,this.unit.id,t,n,i);if(void 0===r)return"unauthorized";let{r:s}=r;if(void 0!==s)return s;let a=this.cur=r;return this.removeUnitAdmin(),0===t&&0===n?this.devs.unshift(a):(1===t&&this.owners.unshift(a),1===n&&this.admins.unshift(a)),r}async unitDelAdmin(e){await ot.unitDelAdmin(this.unit.id,e.id),this.cur===e&&(this.cur=void 0),this.removeUnitAdmin(e)}},Dr=(0,Se.Z)(qr.prototype,"cur",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),zr=(0,Se.Z)(qr.prototype,"owners",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Br=(0,Se.Z)(qr.prototype,"admins",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Mr=(0,Se.Z)(qr.prototype,"devs",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),qr);class Hr extends nn{constructor(){super(...arguments),this.unitItems=void 0}async internalStart(){}async pick(){return this.unitItems=tn.accUnits,await this.vCall(Zr)}}class Zr extends Xe.ps{constructor(){super(...arguments),this.renderUnit=(e,t)=>(0,J.jsx)("div",{className:"px-3 py-2",children:(0,J.jsx)(dn,{id:e.id})}),this.clickUnit=e=>{this.closePage(),this.returnCall(e.id)},this.onClickNullServer=()=>{this.closePage(),this.returnCall(null)},this.page=(0,X.Pi)((()=>(0,J.jsx)(s.T3,{header:"\u9009\u62e9\u5c0f\u53f7($unit)",children:(0,J.jsx)(s.aV,{items:this.controller.unitItems,item:{render:this.renderUnit,onClick:this.clickUnit}})})))}async open(){this.openPage(this.page)}}class $r extends e.Component{constructor(e){super(e),this.source=void 0,this.onCopyToClipborad=()=>{navigator.clipboard.writeText(this.source),alert("\u4ee3\u7801\u5df2\u62f7\u8d1d\u5230\u526a\u8d34\u677f")},this.source=e.source,this.state={files:void 0}}render(){const e=(0,J.jsx)("div",{className:"text-white cursor-pointer p-2",onClick:this.onCopyToClipborad,children:"\u62f7\u8d1d\u5230\u526a\u8d34\u677f"});return(0,J.jsx)(s.T3,{header:"\u6e90\u7801 - "+this.props.uq.name,right:e,children:(0,J.jsx)("div",{className:"py-2 px-3",children:(0,J.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:this.source})})})}}var Qr,Kr,Gr,Xr;let Jr=(Qr=class extends nn{constructor(){super(...arguments),this.unit=void 0,this.uq=void 0,this.access=void 0,this.entities=void 0,this.admins=void 0,(0,Ce.Z)(this,"uqDevs",Kr,this),(0,Ce.Z)(this,"uqList",Gr,this),(0,Ce.Z)(this,"services",Xr,this),this.listRowClick=async e=>{this.uq=e,await this.loadUqEntities(e.id),this.openVPage(Tr)},this.onUqDevsAdmin=()=>{this.openVPage(Rr)},this.serviceClick=e=>{this.openVPage(Er,e)},this.onUqUpload=async()=>{s.nav.push((0,J.jsx)(Ai,{uq:this.uq,services:this.services}),(()=>{}))},this.onUqTest=async()=>{s.nav.push((0,J.jsx)(Ii,{uq:this.uq,action:"test",services:this.services}),(()=>{}))},this.onUqDeploy=async()=>{s.nav.push((0,J.jsx)(Ii,{uq:this.uq,action:"deploy",services:this.services}),(()=>{}))},this.onShowSource=async()=>{let e=await ct.uqSource(this.uq.id);s.nav.push((0,J.jsx)($r,{uq:this.uq,action:"source",services:this.services,source:e}),(()=>{}))},this.saveUq=async e=>{let t;void 0===this.uq?t=o().clone(e):(t=o().clone(this.uq),o().merge(t,e)),t.unit=this.unit.id;let n=await ct.saveUq(t);t.id=n,this.uqList.push(t)},this.deleteUq=async()=>{await ct.delUq(this.unit.id,this.uq.id);let e=this.uqList.findIndex((e=>e.id===this.uq.id));e>=0&&this.uqList.splice(e)},this.showNewServicePage=async()=>{await this.openVPage(Cr)},this.pickServer=async()=>{let e=this.newC(Lr);return await e.pick()},this.pickUnit=async()=>{let e=this.newC(Hr);return await e.pick()}}async internalStart(e){this.unit=e,this.uqList=await ct.uqs(this.unit.id,200),this.openVPage(Ur)}async loadUqEntities(e){let t=await ct.uqGetEntities(this.unit.id,e),n=t[0][0];this.access=n.access,this.entities=n.entities,this.services=t[1],this.uqDevs=t[4]}async loadAdmins(){this.admins=new Wr(this.unit),await this.admins.load()}async devChanged(e,t){let n={unit:this.unit.id,type:"uq",dev:this.uq.id,devUser:e.id};if(!0===t)await ct.adminDevAdd(n),this.uqDevs.push({userId:e.id,icon:e.icon,name:e.name,nick:e.nick,isOwner:0});else{await ct.adminDevDel(n);let t=this.uqDevs.findIndex((t=>t.userId===e.id));this.uqDevs.splice(t,1)}}async changeServiceProp(e,t,n){return await ct.changeServiceProp(this.unit.id,e.id,t,n)}async saveService(e){let t=o().clone(e);t.unit=this.unit.id,t.urlTest||(t.urlTest="-");let n=await ct.saveService(t);return t.id=n,this.services.push(t),n}async delService(e){await ct.delService(this.unit.id,e.id);let t=this.services.findIndex((t=>t.id===e.id));t>=0&&this.services.splice(t)}},Kr=(0,Se.Z)(Qr.prototype,"uqDevs",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gr=(0,Se.Z)(Qr.prototype,"uqList",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xr=(0,Se.Z)(Qr.prototype,"services",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qr);var Yr,es;let ts=(0,X.Pi)(Yr=class extends e.Component{async componentDidMount(){}render(){let{unit:e,owner:t,name:n,discription:i,mine:r,version:a,date_init:o,date_update:l}=this.props,u=(0,J.jsxs)("small",{children:[(0,J.jsx)("div",{children:i}),(0,J.jsx)(ln,{date_update:l,date_init:o})]}),c=t+" / "+n;1===r&&(c=(0,J.jsx)("b",{children:c}));let h=["",{type:"component",component:(0,J.jsx)(s.pA,{className:"py-2",left:(0,J.jsx)(s.FA,{className:"pt-2 pe-1 text-primary",name:"cogs",size:"3x"}),children:(0,J.jsxs)("div",{className:"ps-3",children:[(0,J.jsx)("div",{className:"mb-2",children:c}),u]})})},"",{type:"component",label:"\u6240\u6709\u8005",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:e,isLink:!0})})},{type:"component",label:"\u7248\u672c\u53f7",component:(0,J.jsx)(s.pA,{className:"py-2 w-100",right:(0,J.jsx)("small",{className:"text-muted",children:(0,J.jsx)(s.KX,{date:l})}),children:a})},"",{type:"component",label:"\u4ee3\u7801",vAlign:"stretch",component:(0,J.jsx)(ns,{})}];return(0,J.jsx)("div",{children:(0,J.jsx)(s.QX,{rows:h,values:this.props})})}})||Yr,ns=(0,X.Pi)(es=class extends e.Component{render(){let e=tn.dev.buses.cur;if(null===e)return"...";let t=e.source;return(0,J.jsx)("div",{className:"d-flex py-2 w-100 align-items-center",style:{flex:1},children:(0,J.jsx)("pre",{children:t})})}})||es;const is={title:"BUS",formRows:[{label:"\u540d\u79f0",field:{name:"name",type:"string",maxLength:100,required:!0}},{label:"\u63cf\u8ff0",field:{name:"discription",type:"string",maxLength:250},face:{type:"textarea"}},{label:"\u4ee3\u7801",field:{name:"source",type:"string",maxLength:25e3},face:{type:"textarea",rows:8}}],row:e=>{let{owner:t,name:n,discription:i,mine:r}=e,a=t+" / "+n;return(0,J.jsx)(s.pA,{className:"py-2 px-3 align-items-stretch",left:(0,J.jsx)(s.FA,{className:"pt-2 pe-1 text-primary",name:"cogs",size:"lg"}),children:(0,J.jsxs)("div",{className:"px-3",children:[(0,J.jsx)("div",{children:1===r?(0,J.jsx)("b",{children:a}):a}),(0,J.jsx)("div",{children:(0,J.jsx)(s.rO,{children:i})})]})})},items:()=>tn.dev.buses,repeated:{name:"name",err:"\u8ddf\u5df2\u6709\u7684\u540d\u79f0\u91cd\u590d"},info:ts,canEdit:e=>1===e.mine};class rs extends e.Component{render(){let{name:e,discription:t,unit:n,date_init:i,date_update:r}=this.props,a=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:e})}),(0,J.jsx)("div",{children:t})]}),o=(0,J.jsxs)("div",{className:"text-end small text-muted align-self-end",children:["\u66f4\u65b0:",(0,J.jsx)(s.S9,{date:r}),(0,J.jsx)("br",{}),"\u521b\u5efa:",(0,J.jsx)(s.KX,{date:i})]}),l=["",{type:"component",component:(0,J.jsx)(s.pA,{className:"w-100 py-2",left:(0,J.jsx)(s.FA,{name:"server",className:"text-primary fa-2x me-3"}),right:o,children:a})},"",{type:"component",label:"\u5f00\u53d1\u53f7",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:n,isLink:!0})})},{type:"string",label:"URL",name:"url"},{type:"string",label:"\u4e91\u670d\u52a1",name:"cloud"},{type:"string",label:"IP",name:"ip"}];return(0,J.jsx)("div",{children:(0,J.jsx)(s.QX,{rows:l,values:this.props})})}}const ss={title:"Server",info:rs,formRows:[{label:"\u540d\u79f0",field:{name:"name",type:"string",maxLength:50,required:!0}},{label:"URL",field:{name:"url",type:"string",maxLength:200,required:!0}},{label:"IP\u5730\u5740",field:{name:"ip",type:"string",maxLength:20}},{label:"\u63cf\u8ff0",field:{name:"discription",type:"string",maxLength:50,required:!1}},{label:"\u4e91\u670d\u52a1\u5546",field:{name:"cloud",type:"string",maxLength:20,required:!1}}],row:e=>{let{name:t,discription:n,cloud:i}=e;return(0,J.jsx)(s.pA,{className:"py-2 px-3 align-items-center",left:(0,J.jsx)(s.FA,{name:"server",className:"text-primary fa-lg"}),children:(0,J.jsxs)("div",{className:"px-3",children:[(0,J.jsxs)("div",{children:[(0,J.jsx)("b",{className:"me-3",children:t}),(0,J.jsx)(s.rO,{children:i})]}),(0,J.jsx)("div",{className:"small text-muted",children:n})]})})},items:()=>tn.dev.servers,repeated:{name:"name",err:"\u8ddf\u5df2\u6709\u670d\u52a1\u5668\u540d\u79f0\u91cd\u590d"},canEdit:e=>{let{isOwner:t,isAdmin:n}=tn.unit;return t>0||n>0}};var as,os;let ls=(0,X.Pi)(as=class extends e.Component{constructor(){super(...arguments),this.itemClick=e=>{this.props.items().cur=(0,A.LO)(e),s.nav.push((0,J.jsx)(cs,{...this.props}))}}async componentDidMount(){await this.props.items().load()}newItem(){this.props.items().cur=void 0,s.nav.push((0,J.jsx)(us,{...this.props}))}render(){let{title:e,items:t,row:n}=this.props;tn.unit;let{isOwner:i}=tn.unit;let r=i>0&&(0,J.jsx)("button",{className:"btn btn-success btn-sm me-2",onClick:()=>this.newItem(),children:(0,J.jsx)(s.FA,{name:"plus"})});return(0,J.jsx)(s.T3,{header:e,right:r,children:(0,J.jsx)(s.aV,{items:t().items,item:{render:function(e,t){return n(e)},onClick:this.itemClick}})})}})||as;class us extends e.Component{constructor(e){super(e),this.tonvaForm=void 0,this.onSubmit=this.onSubmit.bind(this)}async onSubmit(e){if(!1===await this.props.items().check(e))return;if(!0===await this.props.items().saveCur(e))s.nav.pop();else{let e=this.props.repeated;this.tonvaForm.formView.setError(e.name,e.err)}}render(){let e,{title:t,steps:n,stepHeader:i}=this.props,{formRows:r,items:a}=this.props;return e=void 0!==n?(0,J.jsx)(fr,{className:"mt-4",header:i,steps:n,first:"step1",onSubmit:this.onSubmit}):void 0!==r?(0,J.jsx)(pr,{ref:e=>this.tonvaForm=e,className:"m-3",formRows:r,onSubmit:this.onSubmit,initValues:a().cur}):"ObjViewProps: no steps and no formRows",(0,J.jsx)(s.T3,{header:"\u65b0\u589e"+t,children:e})}}let cs=(0,X.Pi)(os=class extends e.Component{constructor(){super(...arguments),this.menuItems=[{caption:"\u4fee\u6539"+this.props.title,action:this.editItem.bind(this),icon:"edit"},{caption:"\u5220\u9664",action:this.deleteItem.bind(this),icon:"trash-o"}]}async deleteItem(){!0===window.confirm("\u771f\u7684\u8981\u5220\u9664\u5417\uff1f\u7cfb\u7edf\u5220\u9664\u65f6\u5e76\u4e0d\u4f1a\u68c0\u67e5\u76f8\u5173\u5f15\u7528\uff0c\u8bf7\u8c28\u614e")&&(await this.props.items().del(),s.nav.pop())}editItem(){s.nav.push((0,J.jsx)(hs,{...this.props}))}render(){let t=this.props.items().cur,n=[],i=this.props.extraMenuActions;void 0!==i&&n.push(...i),n.push(...this.menuItems);let r,a=this.props.canEdit;return a&&!0===a(t)&&(r=(0,J.jsx)(s.Qo,{actions:n,className:"btn-primary me-2"})),(0,J.jsx)(s.T3,{header:this.props.title+" - \u8be6\u7ec6\u8d44\u6599",right:r,children:e.createElement(this.props.info,t)})}})||os;class hs extends e.Component{constructor(e){super(e),this.actions=[{caption:"\u5220\u9664",action:this.deleteItem.bind(this),icon:"trash-o"}],this.onSubmit=this.onSubmit.bind(this)}async onSubmit(e){!1!==await this.props.items().check(e)&&(await this.props.items().saveCur(e),s.nav.pop())}async deleteItem(){!0===window.confirm("\u771f\u7684\u8981\u5220\u9664\u5417\uff1f\u7cfb\u7edf\u5220\u9664\u65f6\u5e76\u4e0d\u4f1a\u68c0\u67e5\u76f8\u5173\u5f15\u7528\uff0c\u8bf7\u8c28\u614e")&&(await this.props.items().del(),s.nav.pop())}render(){let e=(0,J.jsx)(s.Qo,{actions:this.actions,className:"btn-primary me-2"});return(0,J.jsx)(s.T3,{header:"\u4fee\u6539 "+this.props.title,right:e,back:"close",children:(0,J.jsx)(pr,{className:"m-3",formRows:this.props.formRows,onSubmit:this.onSubmit,initValues:this.props.items().cur})})}}const ds=(0,J.jsx)(s.FA,{name:"angle-right"});class ps extends Xe.ps{constructor(){super(...arguments),this.appsAction={title:"\u542f\u505cApp",right:ds,icon:"play-circle-o",page:Qn},this.newUsersAction={title:"App\u7ba1\u7406\u5458",right:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("small",{className:"text-muted",children:"\u5404App\u7684\u7ba1\u7406\u5458\u6c47\u603b"})," \xa0 ",ds]}),icon:"user-o",controller:this.controller.cUsers},this.adminsAction={title:on(this.controller.unit)+"\u603b\u7ba1",right:ds,icon:"universal-access",controller:this.controller.cAdmins},this.uqRolesAction={title:"UQ\u89d2\u8272\u8bbe\u7f6e",right:ds,icon:"universal-access",controller:this.controller.cUqRoles},this.noneAction={title:"\u8bf7\u8010\u5fc3\u7b49\u5f85\u5206\u914d\u4efb\u52a1",icon:"hourglass-start"},this.row=(e,t)=>{if("string"===typeof e)return(0,J.jsx)("div",{className:"px-3 pt-3 pb-1 small text-muted cursor-default",style:{backgroundColor:"#f0f0f0"},children:e});let{iconClassName:n,className:i}=e;void 0===n&&(n="text-info");let r,a,o,{dev:l}=e;if(!0===l){let{icon:t,title:i,count:l}=e;r="string"===typeof t?(0,J.jsx)(s.FA,{className:n,name:t,fixWidth:!0,size:"lg"}):t,a=i,o=l>0&&(0,J.jsx)("span",{children:l})}else{let{right:t,title:i,icon:l}=e;r="string"===typeof l?(0,J.jsx)(s.FA,{className:n,name:l,fixWidth:!0,size:"lg"}):e.icon,a=i,o=(0,J.jsx)("span",{children:t})}return(0,J.jsx)(s.pA,{className:sn()("px-3 py-2 align-items-center",i),left:r,right:o,children:(0,J.jsx)("div",{className:"px-3",children:a})})},this.rowClick=async e=>{let{page:t,onClick:n}=e;if(void 0!==t)return void s.nav.push((0,J.jsx)(t,{}));if(n)return void n();let{objProps:i}=e;if(void 0!==i)return s.nav.push((0,J.jsx)(ls,{...i}));let{controller:r}=e;r&&await r.start(tn.unit)},this.appClick=async e=>{await this.controller.showAppXAccount(e)},this.onClickUnitProps=()=>{this.openPageElement((0,J.jsx)(fs,{}))},this.page=(0,X.Pi)((()=>{let e=tn.unit;if(void 0===e)return null;let t,n,i=this.buildItems();if(void 0===i)return(0,J.jsx)(s.T3,{header:""});if(void 0!==e){let i,r,{name:a,nick:o,icon:l,discription:u}=e;o?(i=o,r=(0,J.jsx)("h6",{children:(0,J.jsx)("small",{className:"text-secondary",children:a})})):i=a;let c=on(this.controller.unit);void 0!==c&&(t=c+" - "+i),n=(0,J.jsx)(s.pA,{className:"px-3 my-4 bg-white py-2 cursor-pointer",onClick:this.onClickUnitProps,left:(0,J.jsx)("div",{children:(0,J.jsx)(s.Ee,{className:"w-3c h-3c",src:l})}),children:(0,J.jsxs)("div",{className:"px-3",children:[(0,J.jsx)(s.pA,{right:r,children:(0,J.jsx)("h6",{className:"text-dark font-weight-bold",children:i})}),(0,J.jsx)("div",{className:"text-info overflow-hidden h-max-3c",children:u})]})})}else t="\u7cfb\u7edf\u7ba1\u7406";return(0,J.jsxs)(s.T3,{header:t,logout:this.controller.logout,children:[n,i.length>0&&(0,J.jsx)(s.aV,{items:i,item:{render:this.row,onClick:this.rowClick}}),this.appRender()]})}))}async open(){this.openPage(this.page)}buildItems(){let{unit:e,dev:t}=tn,{isAdmin:n,isOwner:i,isDev:r,type:s}=e,a=[];if(1!==i&&1!==n||(a.push(this.uqRolesAction),a.push(this.adminsAction)),0!==(2&s)&&1===n&&a.push(this.newUsersAction),0!==(1&s)){let{counts:s}=t;if(1!==n&&1!==r||a.push("\u5f00\u53d1\u53f7\u7ba1\u7406"),1===n){let e={title:"\u5f00\u53d1\u8005",right:ds,icon:"user-o",onClick:async()=>await this.controller.onShowDevelopers(),className:"border-bottom",iconClassName:"text-success"};a.push(e)}if(1===r){let t={dev:!0,title:"UQ",count:s&&s.uq,icon:"database",onClick:()=>this.controller.startUq(e)},n={dev:!0,title:"BUS",count:s&&s.bus,icon:"cogs",objProps:is};if(a.push(t,n),i>0){let e={dev:!0,title:"Server",count:s&&s.server,icon:"server",objProps:ss};a.push(e)}}}return a}appItemRender(e,t){let{name:n,discription:i,icon:r,inUnit:a}=e,o=0===a&&(0,J.jsx)(s.FA,{className:"text-danger",name:"ban"});return(0,J.jsx)(s.pA,{className:"px-3 py-2",left:(0,J.jsx)(s.Ct,{children:(0,J.jsx)(s.Ee,{src:r})}),right:o,children:(0,J.jsxs)("div",{className:"px-3",children:[(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:n})}),(0,J.jsx)("small",{className:"text-muted",children:i})]})})}newItem(){s.nav.push((0,J.jsx)(Zn,{}))}appRender(){let{apps:e}=tn;if(void 0===e)return;if(0===e.length)return;let{isAdmin:t,isOwner:n}=tn.unit,i=(1===t||1===n)&&(0,J.jsx)("button",{className:"btn btn-success btn-sm",onClick:()=>this.newItem(),children:(0,J.jsx)(s.FA,{name:"plus"})});return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(s.pA,{className:"mt-4 mb-2 px-3 small text-muted align-items-end",right:i,children:(0,J.jsx)("div",{className:"align-self-end",children:"App"})}),(0,J.jsx)(s.aV,{items:tn.apps,item:{render:this.appItemRender,onClick:this.appClick}})]})}}class fs extends e.Component{constructor(){super(...arguments),this.schema=[{name:"icon",type:"image"},{name:"nick",type:"string"},{name:"discription",type:"string"}],this.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u6807\u5fd7\u56fe"},discription:{widget:"text",label:"\u63cf\u8ff0",placeholder:"\u7b80\u77ed\u6e05\u6670\u7684\u63cf\u8ff0"}}},this.onItemChanged=async(e,t,n)=>{let{name:i}=e;await tn.unitChangeProp(i,t)}}render(){let e=tn.unit,{isRoot:t,isOwner:n,readMe:i}=e,r=on(e),a=i&&(0,J.jsx)("div",{className:"p-3",dangerouslySetInnerHTML:{__html:i}});return(0,J.jsxs)(s.T3,{header:r+"\u8be6\u60c5",children:[(0,J.jsx)(s.I8,{schema:this.schema,uiSchema:this.uiSchema,data:tn.unit,onItemChanged:this.onItemChanged,stopEdit:!(t>0&&n>0)}),a]})}}class ms extends Xe.ps{constructor(){super(...arguments),this.onClickUnit=async e=>{this.closePage(),await this.controller.onShowUnit(e)},this.selectUnitPage=()=>{let{logout:e}=this.controller,{accUnits:t,devUnits:n,bothUnits:i}=tn,r={render:this.renderUnitAdmin,onClick:this.onClickUnit},a=(e,t)=>e.length>0&&(0,J.jsxs)("div",{className:"my-3",children:[(0,J.jsx)("div",{className:"px-3 py-1 small text-muted",children:t}),(0,J.jsx)(s.aV,{items:e,item:r})]});return(0,J.jsxs)(s.T3,{header:"\u540c\u82b1\u7ba1\u7406\u5458",logout:e,children:[a(t,"\u5c0f\u53f7"),a(n,"\u5f00\u53d1\u53f7"),a(i,"\u53cc\u53f7")]})},this.noUnitPage=()=>{let{user:e,logout:t}=this.controller,{nick:n,name:i}=e;return(0,J.jsx)(s.T3,{header:"\u6ca1\u6709\u5c0f\u53f7",logout:t,children:(0,J.jsxs)("div",{className:"p-3 small text-info",children:[n||i,": \u6ca1\u6709\u9700\u8981\u7ba1\u7406\u7684\u5c0f\u53f7"]})})},this.renderUnitAdmin=(e,t)=>{let n,i,{name:r,nick:a,type:o}=e;return 1&o?(n="code",i="text-success"):2&o?(n="flag",i="text-primary"):(n="start",i="text-danger"),(0,J.jsx)(s.pA,{className:"px-3 py-2",right:(0,J.jsxs)("span",{className:"small text-muted",children:["id: ",e.id]}),children:(0,J.jsxs)("div",{children:[(0,J.jsx)(s.FA,{name:n,fixWidth:!0,className:sn()("me-3",i)}),a||r]})})}}async open(){let{isProduction:e}=this.controller,t=tn,{unitAdmins:n,unit:i}=t;if(!1===e)switch(n.length){default:return void this.openPage(this.selectUnitPage);case 0:return void this.openPage(this.noUnitPage);case 1:return void await this.controller.onShowUnit(n[0])}void 0!==i?await this.controller.onShowUnit(n[0]):this.openPage(this.noUnitPage)}get view(){}}class vs extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{appXAccount:e,showDetail:t,users:n,showUserList:i,calcUserColl:r}=this.controller,a=r(),{name:o,discription:l,icon:u,date_init:c,date_update:h}=e,d=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:l}),(0,J.jsx)(ln,{date_update:h,date_init:c})]}),p=(0,J.jsx)("button",{className:"btn btn-success btn-sm me-2 align-self-center",onClick:t,children:(0,J.jsx)(s.FA,{name:"ellipsis-h",fixWidth:!0})}),f=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:u,main:o,discription:d})},""];return(0,J.jsxs)(s.T3,{header:"App - "+o,right:p,children:[(0,J.jsx)(s.QX,{rows:f,values:{}}),this.renderAdmins(a),this.renderRoles(a),this.renderUsers(a),(0,J.jsx)("div",{className:"h-1c"}),this.row("\u5168\u90e8\u7528\u6237",n.length,i,"text-info","list")]})}))}async open(){this.openPage(this.page)}row(e,t,n,i,r){let a=(0,J.jsx)(s.FA,{className:"me-3 "+i,fixWidth:!0,name:r||"user",size:"lg"}),o=(0,J.jsxs)(J.Fragment,{children:[t," \xa0 \xa0 ",(0,J.jsx)(s.FA,{className:"align-self-center",name:"angle-right"})]});return(0,J.jsx)(s.pA,{className:"my-2 px-3 py-2 bg-white align-items-center",onClick:n,left:a,right:o,children:e})}renderAdmins(e){let{showAdmins:t,unit:n}=this.controller;if(1===n.isAdmin)return this.row("\u7ba1\u7406\u5458",e.admins.length,t,"text-danger")}renderRoles(e){let{showRoles:t,roleUserCount:n}=this.controller,{roleUsers:i}=e;if(i)return this.row("\u89d2\u8272\u7528\u6237",n,t,"text-success")}renderUsers(e){let{showUsers:t}=this.controller;return this.row("\u666e\u901a\u7528\u6237",e.users.length,t,"text-info")}}class gs extends Xe.ps{constructor(){super(...arguments),this.renderUqRow=(e,t)=>{let{name:n,owner:i,discription:r}=e;return(0,J.jsxs)(s.pA,{className:"py-2",right:(0,J.jsx)("small",{className:"text-muted",children:r}),children:[i," / ",n]})},this.onTurnOnOff=async()=>{!0===await this.controller.appTurnOnOff()&&this.closePage()},this.status=()=>{let e,t,{inUnit:n}=this.controller.appXAccount;return 1===n?(t=(0,J.jsxs)("button",{className:"btn btn-danger",onClick:this.onTurnOnOff,children:[(0,J.jsx)(s.FA,{name:"ban"})," \u505c\u7528APP"]}),e="\u8fd0\u884c\u4e2d"):0===n?(t=(0,J.jsxs)("button",{className:"btn btn-success",onClick:this.onTurnOnOff,children:[(0,J.jsx)(s.FA,{name:"refresh",size:"lg"})," \u6062\u590dAPP"]}),e="\u505c\u8fd0\u4e2d"):(t=(0,J.jsxs)("button",{className:"btn btn-primary",onClick:this.onTurnOnOff,children:[(0,J.jsx)(s.FA,{name:"plus",size:"lg"})," \u65b0\u5efa"]}),e="\u542f\u7528APP"),(0,J.jsx)(s.pA,{className:"w-100 align-items-center my-1",right:t,children:e})},this.page=(0,X.Pi)((()=>{let{appXAccount:e,uqAccesses:t}=this.controller,{unit:n,name:i,discription:r,icon:a,date_init:o,date_update:l}=e,u=(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:r}),(0,J.jsx)(ln,{date_update:l,date_init:o})]}),c=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:a,main:i,discription:u})},"",{type:"component",label:"\u5f00\u53d1\u53f7",component:(0,J.jsx)("div",{className:"py-2",children:(0,J.jsx)(dn,{id:n,isLink:!0})})},{type:"component",label:"\u5173\u8054UQ",component:(0,J.jsx)(s.aV,{className:"w-100",items:t,item:{render:this.renderUqRow}})},"",{type:"component",label:"\u72b6\u6001",component:this.status()}];return(0,J.jsx)(s.T3,{header:"App\u8be6\u60c5 - "+i,children:(0,J.jsx)(s.QX,{rows:c,values:{},labelFixLeft:!0})})}))}async open(){this.openPage(this.page)}}class ys extends Xe.G7{constructor(){super(...arguments),this.row=(0,X.Pi)((e=>{let{user:t}=e,n=gt.users.get(t.id);if(null===n)return;let{name:i,nick:r,icon:a}=n,{assigned:o,isAdmin:l,roleBins:u}=t;if(void 0!==o&&(r=o),void 0!==i){let{uqRoles:e,showEditUserPage:n,user:o}=this.controller,c=(0,J.jsx)(s.Ee,{className:"w-3c h-3c me-3",src:a}),h=!0===(t.id===o.id)?(0,J.jsxs)("div",{children:[r?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("b",{children:r})," ",i]}):(0,J.jsx)(J.Fragment,{children:(0,J.jsx)("b",{children:i})}),"\xa0 ",(0,J.jsx)("small",{className:"text-muted",children:"[\u81ea\u5df1]"})]}):(0,J.jsx)("div",{children:r?(0,J.jsxs)(J.Fragment,{children:[r," ",(0,J.jsx)("small",{children:i})]}):(0,J.jsx)(J.Fragment,{children:i})}),d=[];if(void 0!==e){let t=e.length;for(let n=0;n<t;n++)0!==(u&1<<n)&&d.push(this.box(e[n],"px-2 text-primary border-primary bg-white"))}return(0,J.jsxs)(s.pA,{className:"px-3 py-3 cursor-pointer",left:c,onClick:()=>n(t),children:[h,(0,J.jsxs)("div",{className:"d-flex flex-wrap mt-1",children:[!0===l&&this.box("\u7ba1\u7406\u5458","px-2 text-success border-success bg-light"),d]})]})}})),this.box=(e,t)=>(0,J.jsx)("div",{className:"me-3 py-0 small border rounded "+t,children:e},e)}render(t){return e.createElement(this.row,{user:t})}}class bs extends Xe.G7{render(e){return(0,J.jsx)("button",{className:"btn btn-sm btn-success align-self-center me-2",onClick:()=>this.controller.showAddUserPage(e),children:(0,J.jsx)(s.FA,{name:"plus"})})}}class ws extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{appXAccount:e,renderUser:t}=this.controller,{name:n}=e,i=this.controller.calcUserColl();return(0,J.jsx)(s.T3,{header:"\u7ba1\u7406\u5458 - "+n,right:this.renderVm(bs,-1),children:(0,J.jsx)(s.aV,{items:i.admins,item:{render:t}})})}))}async open(){this.openPage(this.page)}}class xs extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{appXAccount:e}=this.controller,{name:t}=e,n=this.controller.calcUserColl(),{roleUsers:i}=n;return(0,J.jsx)(s.T3,{header:"\u89d2\u8272\u7528\u6237 - "+t,children:(0,J.jsx)("div",{className:"py-0",children:i&&i.map(((e,t)=>this.renderRole(e,t)))})})})),this.renderRole=(e,t)=>{let{uqRoles:n,renderUser:i}=this.controller;if(n[t])return(0,J.jsxs)("div",{className:"my-3",children:[(0,J.jsx)(s.pA,{className:"ps-3 pb-1 align-items-end",right:this.renderVm(bs,t+1),children:n[t]}),(0,J.jsx)(s.aV,{items:e,item:{render:i},none:()=>(0,J.jsx)("small",{className:"text-muted",children:"[\u65e0]"})})]},t)}}async open(){this.openPage(this.page)}}class js extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{appXAccount:e,renderUser:t}=this.controller,{name:n}=e,i=this.controller.calcUserColl();return(0,J.jsx)(s.T3,{header:"\u666e\u901a\u7528\u6237 - "+n,right:this.renderVm(bs,-2),children:(0,J.jsx)(s.aV,{items:i.users,item:{render:t}})})}))}async open(){this.openPage(this.page)}}class ks extends Xe.ps{constructor(){super(...arguments),this.roleNum=void 0,this.schema=[{name:"user",type:"string",required:!0},{name:"submit",type:"submit"}],this.uiSchema={items:{user:{widget:"text",label:"\u7528\u6237",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u8d26\u53f7"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},this.onSubmit=async(e,t)=>{let n=await this.controller.addUser(this.roleNum,t.data.user);void 0!==n?t.setError("user",n):this.closePage()},this.onEnter=async(e,t)=>{"user"!==e||await this.onSubmit("login",t)},this.page=()=>{let e=this.controller.getRoleCaption(this.roleNum);return(0,J.jsx)(s.T3,{header:"\u65b0\u589e - "+e,back:"close",children:(0,J.jsx)("div",{className:"m-5 px-5 py-3 bg-white border rounded",children:(0,J.jsx)(s.l0,{schema:this.schema,uiSchema:this.uiSchema,onEnter:this.onEnter,onButtonClick:this.onSubmit})})})}}async open(e){this.roleNum=e,this.openPage(this.page)}}class _s extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{appXAccount:e,users:t,renderUser:n}=this.controller,{name:i}=e;return(0,J.jsx)(s.T3,{header:"\u7528\u6237\u5217\u8868 - "+i,children:(0,J.jsx)(s.aV,{items:t,item:{render:n}})})}))}async open(){this.openPage(this.page)}}var Cs,Ss;let Ns=(0,X.Pi)(Cs=class extends e.Component{constructor(){super(...arguments),this.onClick=e=>(e.preventDefault(),s.nav.push((0,J.jsx)(Es,{id:this.props.id})),!1)}render(){let e,{id:t,className:n,assigned:i,isLink:r}=this.props,s=gt.users.get(t);if(null===s)e=t;else{let{name:n,nick:r}=s;void 0!==i&&(r=i),e=void 0!==n?r?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("b",{children:r})," ",n]}):(0,J.jsx)(J.Fragment,{children:(0,J.jsx)("b",{children:n})}):t}return un(r,n,this.onClick,e)}})||Cs,Es=(0,X.Pi)(Ss=class extends e.Component{constructor(){super(...arguments),this.rows=void 0}render(){let e=gt.users.get(this.props.id),{name:t,nick:n,icon:i}=e;return this.rows=["",{type:"component",component:(0,J.jsx)(s.pU,{icon:i,main:n,discription:t})},""],(0,J.jsx)(s.T3,{header:"\u7528\u6237 - \u8be6\u7ec6\u8d44\u6599",children:(0,J.jsx)(s.QX,{rows:this.rows,values:this.props})})}})||Ss;class As extends Xe.ps{constructor(){super(...arguments),this.user=void 0,this.row=(e,t,n,i,r)=>{if(e)return(0,J.jsxs)("label",{className:sn()("px-3 py-2 m-0 d-flex bg-white mb-1 w-100 align-items-center",{"cursor-pointer":!i}),children:[(0,J.jsx)("input",{type:"checkbox",className:"me-4",defaultChecked:n,disabled:i,onChange:r}),(0,J.jsx)("span",{className:t,children:e})]})},this.onAdminChanged=async e=>{let t=await this.controller.setAppAdmin(this.user,e);void 0===t?this.closePage():alert(t)},this.onRoleChanged=async(e,t)=>{let n=await this.controller.setAppRole(this.user,t,e);void 0!==n&&alert(n)},this.onDelUer=async()=>{let e=await this.controller.delUser(this.user);void 0===e?this.closePage():alert(e)},this.page=()=>{let{isAdmin:e,roleBins:t}=this.user,n=(0,J.jsxs)(J.Fragment,{children:["\u7528\u6237 -\xa0",(0,J.jsx)(Ns,{id:this.user.id})]}),i=this.user.id!==this.controller.user.id&&(0,J.jsx)("div",{className:"text-end m-3",children:(0,J.jsxs)("button",{onClick:this.onDelUer,className:"btn btn-sm btn-outline-primary",children:[(0,J.jsx)(s.FA,{name:"trash"})," \u4eceApp\u4e2d\u79fb\u9664"]})}),r=this.user.id===this.controller.user.id;return(0,J.jsx)(s.T3,{header:n,children:(0,J.jsxs)("div",{className:"my-3",children:[this.row("App\u7ba1\u7406\u5458","text-success font-weight-bold",e,r,(async e=>{await this.onAdminChanged(e.target.checked)})),(0,J.jsx)("div",{className:"h-1c"}),this.controller.uqRoles.map(((e,n)=>{let i=0!==(t&1<<n);return this.row(e,"text-primary",i,!1,(async e=>{await this.onRoleChanged(e.target.checked,n)}))})),i]})})}}async open(e){this.user=e,this.openPage(this.page)}}var Ps,Os,Is,Ts;let Us=(Ps=class extends nn{constructor(){super(...arguments),this.unit=void 0,this.appXAccount=void 0,this.uqAccesses=void 0,this.uqMain=void 0,this.uqRoles=void 0,(0,Ce.Z)(this,"users",Os,this),(0,Ce.Z)(this,"unitOnly",Is,this),(0,Ce.Z)(this,"roleUserCount",Ts,this),this.calcUserColl=()=>{let e,t=[],n=[],i=0,r=0;if(this.uqRoles){r=this.uqRoles.length,e=[];for(let t=0;t<r;t++)e.push([])}for(let s of this.users){let{isAdmin:a,roleBins:o}=s,l=!0,u=!1;!0===a&&(t.push(s),l=!1);let c=1;for(let t=0;t<r;t++,c<<=1)if(0!==(o&c)){let n=e[t];this.user.id===s.id?n.unshift(s):n.push(s),l=!1,u=!0}!0===u&&++i,!0===l&&n.push(s)}return this.roleUserCount=i,{admins:t,users:n,roleUsers:e}},this.showDetail=async()=>{this.uqAccesses=await ct.loadAppUqs(this.appXAccount.id),this.openVPage(gs)},this.appTurnOnOff=async()=>{let{id:e,inUnit:t,name:n}=this.appXAccount;if(0===t){return!(await tn.restoreUnitApp(e)<=0)||(alert("app \u6216\u8005 uq \u6ca1\u6709\u5b9a\u4e49 service"),!1)}if(1===t){return"ok"===await this.confirm({caption:"\u505c\u8fd0 - "+n,message:"App\u505c\u8fd0\u4e4b\u540e\uff0c\u4efb\u4f55\u4eba\u90fd\u65e0\u6cd5\u8bbf\u95ee\u3002\u8bf7\u786e\u8ba4",ok:"\u786e\u8ba4"})&&(await tn.stopUnitApp(e),!0)}let i=o().clone(this.appXAccount);return i.id=e,i.inUnit=1,!(await tn.addUnitApp(i)<=0)||(alert("app \u6216\u8005 uq \u6ca1\u6709\u5b9a\u4e49 service"),!1)},this.showAdmins=async()=>{this.openVPage(ws)},this.showRoles=async()=>{this.openVPage(xs)},this.showUsers=async()=>{this.openVPage(js)},this.showUserList=async()=>{this.openVPage(_s)},this.showAddUserPage=e=>{this.openVPage(ks,e)},this.showEditUserPage=e=>{this.openVPage(As,e)},this.renderUser=(e,t)=>this.renderView(ys,e),this.delUser=async e=>{let t=await ot.setAppRoles(this.unit.id,this.appXAccount.id,e.id,void 0,0);if(void 0===t)return"unauthorized";let{id:n,r:i}=t;if(void 0!==i)return i;let r=this.users.findIndex((e=>e.id===n));this.users.splice(r,1)}}async internalStart(e,t){this.unit=e,this.appXAccount=t,this.unitOnly=1===t.unitOnly,await this.loadAppAdmins(),this.openVPage(vs)}async loadAppAdmins(){let e=await ot.unitAppAdmins(this.unit.id,this.appXAccount.id),{uq_main:t,roles:n}=e[0][0];this.uqMain=t,n&&(this.uqRoles=n.split("\t")),this.users=[];for(let r of e[1]){let{user:e}=r,t=this.insertUser(e);t>=0&&(this.users[t].isAdmin=!0)}let i=0;for(let r of e[2]){let{user:e,roles:t}=r,n=this.insertUser(e);n>=0&&(this.users[n].roleBins=t,t||i++)}for(let r of e[3]){let{user:e,assigned:t}=r,n=this.insertUser(e);n>=0&&(this.users[n].assigned=t)}this.roleUserCount=i}insertUser(e){let t,n=this.users.length;for(t=0;t<n;t++){let n=this.users[t].id;if(e===n)return t;if(e<n)break}return this.users.splice(t,0,{id:e}),t}toRolesArr(e){if(void 0===this.uqRoles)return;let t=[],n=this.uqRoles.length,i=1;for(let r=0;r<n;r++,i<<=1)(e&i)===i&&t.push(r);return t}getRoleCaption(e){switch(e){case-1:return"[App\u7ba1\u7406\u5458]";case-2:return"[\u666e\u901a\u7528\u6237]";default:return this.uqRoles[e]}}async addUser(e,t){let n=e<=0?e:1<<e-1,i=await ot.setAppRoles(this.unit.id,this.appXAccount.id,void 0,t,n);if(void 0===i)return"unauthorized";let{r:r,id:s}=i;if(void 0!==r)return r;let a=this.insertUser(s),o=this.users[a];e>0?o.roleBins|=1<<e-1:-1===e&&(o.isAdmin=!0)}async setAppAdmin(e,t){let{id:n,isAdmin:i,roleBins:r,assigned:s}=e;i=t;let a=await ot.setAppAdmin(this.unit.id,this.appXAccount.id,n,void 0,!0===i?1:0);if(void 0===a)return"unauthorized";let{r:o}=a;if(void 0!==o)return o;this.renewUser(e,i,r,s)}async setAppRole(e,t,n){let{id:i,isAdmin:r,assigned:s}=e;!0===n?e.roleBins|=1<<t:e.roleBins&=~(1<<t);let a=e.roleBins,o=await ot.setAppRoles(this.unit.id,this.appXAccount.id,i,void 0,a);if(void 0===o)return"unauthorized";let{r:l}=o;if(void 0!==l)return l;this.renewUser(e,r,a,s)}renewUser(e,t,n,i){let{id:r}=e,s=this.users.findIndex((e=>e.id===r));this.users[s]={id:r,isAdmin:t,roleBins:n,assigned:i}}},Os=(0,Se.Z)(Ps.prototype,"users",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Is=(0,Se.Z)(Ps.prototype,"unitOnly",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ts=(0,Se.Z)(Ps.prototype,"roleUserCount",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ps);class Rs extends Xe.ps{constructor(){super(...arguments),this.renderUserUqsBuses=(e,t)=>{let n,i=this.controller.adminDevs.getUserUqsBuses(e),{uqs:r,buses:a}=i,o=gt.users.get(e);if(null!==o){let{name:e,nick:t,icon:i}=o;n=(0,J.jsx)(s.pA,{className:"w-100",left:(0,J.jsx)(s.Ee,{className:"w-3c h-3c me-4",src:i}),right:(0,J.jsxs)("div",{className:"text-end",children:["uq: ",r.length,(0,J.jsx)("br",{}),"bus: ",a.length]}),children:(0,J.jsx)("div",{children:t?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("b",{children:t}),(0,J.jsx)("br",{}),(0,J.jsx)("small",{className:"text-muted",children:e})]}):(0,J.jsx)(J.Fragment,{children:(0,J.jsx)("b",{children:e})})})})}return(0,J.jsx)("div",{className:"px-3 py-2",children:n})},this.onClickUserUqsBuses=e=>{this.controller.showUserUqsBuses(e)},this.onAddUser=()=>{this.controller.showAddDeveloper()},this.page=(0,X.Pi)((()=>{let{adminDevs:e}=this.controller,{unit:t,users:n}=e,i=(0,J.jsx)("button",{className:"btn btn-sm btn-success align-self-center me-3",onClick:this.onAddUser,children:(0,J.jsx)(s.FA,{name:"plus"})});return(0,J.jsx)(s.T3,{header:"\u5f00\u53d1\u8005 - "+t.name,right:i,children:(0,J.jsx)(s.aV,{className:"my-3",items:n,item:{render:this.renderUserUqsBuses,onClick:this.onClickUserUqsBuses}})})}))}async open(){this.openPage(this.page)}}class Ls extends Xe.ps{constructor(){super(...arguments),this.user=void 0,this.renderUq=(e,t)=>(0,J.jsxs)("div",{className:"px-3 py-2 align-items-center",children:[(0,J.jsx)(s.FA,{className:"text-primary",size:"lg",name:"database",fixWidth:!0}),(0,J.jsx)("div",{className:"mx-3",children:(0,J.jsx)(yn,{id:e})})]}),this.onChangeUq=()=>{this.controller.showUserUqs(this.user)},this.renderBus=(e,t)=>(0,J.jsxs)("div",{className:"px-3 py-2 align-items-center",children:[(0,J.jsx)(s.FA,{className:"text-primary",size:"lg",name:"cogs",fixWidth:!0}),(0,J.jsx)("div",{className:"mx-3",children:(0,J.jsx)(En,{id:e})})]}),this.onChangeBus=()=>{this.controller.showUserBuses(this.user)},this.onDelDev=async()=>{"ok"===await this.controller.confirm({message:"\u771f\u7684\u8981\u53d6\u6d88\u5f00\u53d1\u8005\u8d44\u683c\u5417\uff1f",ok:"\u786e\u8ba4"})&&(await this.controller.delDev(this.user),this.closePage())},this.page=(0,X.Pi)((()=>{let{user:e,uqs:t,buses:n}=this.controller.adminDevs.getUserUqsBuses(this.user),i=(0,J.jsx)("button",{className:"btn btn-success btn-sm",onClick:this.onChangeUq,children:(0,J.jsx)(s.FA,{name:"pencil"})}),r=(0,J.jsx)(s.pA,{className:"px-3 pb-1 align-items-end",right:i,children:"UQ"}),a=(0,J.jsx)("button",{className:"btn btn-success btn-sm",onClick:this.onChangeBus,children:(0,J.jsx)(s.FA,{name:"pencil"})}),o=(0,J.jsx)(s.pA,{className:"px-3 pb-1 align-items-end",right:a,children:"BUS"}),l=(0,J.jsx)("button",{className:"btn btn-outline-info btn-sm align-self-center me-3",onClick:this.onDelDev,children:(0,J.jsx)(s.FA,{name:"minus"})});return(0,J.jsxs)(s.T3,{header:"\u5f00\u53d1\u8005 - UQ BUS",right:l,children:[(0,J.jsx)("div",{className:"px-3 py-2",children:(0,J.jsx)(Ns,{id:e})}),(0,J.jsx)("div",{className:"h-1c"}),r,(0,J.jsx)(s.aV,{className:"mb-3",items:t,item:{render:this.renderUq,onClick:void 0}}),(0,J.jsx)("div",{className:"h-1c"}),o,(0,J.jsx)(s.aV,{className:"mb-3",items:n,item:{render:this.renderBus,onClick:void 0}})]})}))}async open(e){this.user=e,this.openPage(this.page)}}class Vs extends Xe.ps{constructor(){super(...arguments),this.user=void 0,this.onCheckChanged=async(e,t)=>{await this.controller.changeUserDev(e.target.checked,"uq",this.user,t)},this.renderUqItem=(e,t)=>{let{dev:n,selected:i}=e;return(0,J.jsxs)("label",{className:"ms-0 px-3 py-2 align-items-center",children:[(0,J.jsx)("input",{className:"me-4",type:"checkbox",defaultChecked:i,onChange:async e=>await this.onCheckChanged(e,n)}),(0,J.jsx)(s.FA,{className:"text-primary",size:"lg",name:"database",fixWidth:!0}),(0,J.jsx)("div",{className:"mx-3",children:(0,J.jsx)(yn,{id:n})})]})},this.onClickUq=e=>{},this.page=(0,X.Pi)((()=>{let{adminDevs:e}=this.controller,{uqDevs:t}=e,{user:n,uqs:i}=e.getUserUqsBuses(this.user),r=t.map((e=>({dev:e,selected:i.findIndex((t=>t===e))>=0})));return(0,J.jsxs)(s.T3,{header:"\u589e\u51cf - UQ",children:[(0,J.jsx)("div",{className:"px-3 py-2",children:(0,J.jsx)(Ns,{id:n})}),(0,J.jsx)("div",{className:"h-1c"}),(0,J.jsx)(s.aV,{className:"mb-3",items:r,item:{render:this.renderUqItem,onClick:this.onClickUq}}),(0,J.jsx)("div",{className:"h-1c"})]})}))}async open(e){this.user=e,this.openPage(this.page)}}class Fs extends Xe.ps{constructor(){super(...arguments),this.user=void 0,this.onCheckChanged=async(e,t)=>{await this.controller.changeUserDev(e.target.checked,"bus",this.user,t)},this.renderBusItem=(e,t)=>{let{dev:n,selected:i}=e;return(0,J.jsxs)("label",{className:"ms-0 px-3 py-2 align-items-center",children:[(0,J.jsx)("input",{className:"me-4",type:"checkbox",defaultChecked:i,onChange:async e=>await this.onCheckChanged(e,n)}),(0,J.jsx)(s.FA,{className:"text-primary",size:"lg",name:"database",fixWidth:!0}),(0,J.jsx)("div",{className:"mx-3",children:(0,J.jsx)(En,{id:n})})]})},this.onClickBusItem=e=>{},this.page=(0,X.Pi)((()=>{let{adminDevs:e}=this.controller,{buses:t}=e,{user:n,buses:i}=e.getUserUqsBuses(this.user),r=t.map((e=>({dev:e,selected:i.findIndex((t=>t===e))>=0})));return(0,J.jsxs)(s.T3,{header:"\u589e\u51cf - UQ",children:[(0,J.jsx)("div",{className:"px-3 py-2",children:(0,J.jsx)(Ns,{id:n})}),(0,J.jsx)("div",{className:"h-1c"}),(0,J.jsx)(s.aV,{className:"mb-3",items:r,item:{render:this.renderBusItem,onClick:this.onClickBusItem}}),(0,J.jsx)("div",{className:"h-1c"})]})}))}async open(e){this.user=e,this.openPage(this.page)}}class qs extends Xe.ps{constructor(){super(...arguments),this.onSubmitClick=async(e,t)=>{let n,i=await this.controller.addDev(t.data.user),{r:r}=i;if("success"!==r){switch(r){case"is-root":n="\u662f\u521b\u5efa\u4eba\uff0c\u4e0d\u9700\u8981\u8bbe\u4e3a\u5f00\u53d1\u8005";break;case"is-owner":n="\u662f\u6240\u6709\u8005\uff0c\u4e0d\u9700\u8981\u8bbe\u4e3a\u5f00\u53d1\u8005";break;case"is-admin":n="\u662f\u7ba1\u7406\u5458\uff0c\u4e0d\u9700\u8981\u8bbe\u4e3a\u5f00\u53d1\u8005";break;case"is-dev":n="\u5df2\u7ecf\u662f\u5f00\u53d1\u8005\u4e86"}t.setError("user",n)}else this.closePage()},this.page=()=>(0,J.jsx)(s.T3,{header:"\u65b0\u589e\u5f00\u53d1\u8005",children:(0,J.jsx)(s.l0,{className:"m-5",schema:[{name:"user",type:"string",maxLength:50,required:!0},{name:"submit",type:"submit"}],uiSchema:{items:{user:{widget:"text",label:"\u7528\u6237\u540d",placeholder:"\u8bf7\u8f93\u5165\u5f00\u53d1\u8005\u7684\u8d26\u53f7"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-success"}}},onEnter:this.onSubmitClick,onButtonClick:this.onSubmitClick})})}async open(){this.openPage(this.page)}}class Ds extends nn{constructor(){super(...arguments),this.adminDevs=void 0}async internalStart(e){this.adminDevs=e,this.openVPage(Rs)}showUserUqsBuses(e){this.openVPage(Ls,e)}showUserUqs(e){this.openVPage(Vs,e)}showUserBuses(e){this.openVPage(Fs,e)}async changeUserDev(e,t,n,i){if(!0===e)await ct.adminDevAdd({unit:this.adminDevs.unit.id,type:t,dev:i,devUser:n}),this.adminDevs.devs.push({type:t,user:n,dev:i});else{await ct.adminDevDel({unit:this.adminDevs.unit.id,type:t,dev:i,devUser:n});let e=this.adminDevs.devs.findIndex((e=>e.dev===i&&e.type===t&&e.user===n));e>=0&&this.adminDevs.devs.splice(e,1)}}showAddDeveloper(){this.openVPage(qs)}async addDev(e){let{users:t,unit:n}=this.adminDevs,i=await ot.addDev(n.id,e);if(void 0===i)throw new Error("unauthorized!");let{r:r,id:s}=i;return"success"===r&&t.push(s),i}async delDev(e){let{users:t,unit:n}=this.adminDevs;await ot.delDev(n.id,e);let i=t.findIndex((t=>t===e));i>=0&&t.splice(i,1)}}var zs,Bs,Ms,Ws,Hs;let Zs=(zs=class{constructor(e){this.loaded=!1,this.unit=void 0,(0,Ce.Z)(this,"users",Bs,this),(0,Ce.Z)(this,"uqDevs",Ms,this),(0,Ce.Z)(this,"buses",Ws,this),(0,Ce.Z)(this,"devs",Hs,this),this.unit=e}async load(){if(!0===this.loaded)return;let e=await ot.adminDevs(this.unit.id);this.loaded=!0,this.users=e[0].map((e=>e.user)),this.devs=e[1],this.uqDevs=e[2].map((e=>e.id)),this.buses=e[3].map((e=>e.id))}getUserUqsBuses(e){let t=[],n=[],i={user:e,uqs:t,buses:n};for(let r of this.devs)if(r.user===e)switch(r.type){case"uq":t.push(r.dev);break;case"bus":n.push(r.dev)}return i}getUqUsers(){let e=[];for(let t of this.uqDevs){let n=[];e.push({uq:t,users:n});for(let e of this.devs)"uq"===e.type&&e.dev===t&&n.push(e.user)}return e}getBusUsers(){let e=[];for(let t of this.buses){let n=[];e.push({bus:t,users:n});for(let e of this.devs)"bus"===e.type&&e.dev===t&&n.push(e.user)}return e}},Bs=(0,Se.Z)(zs.prototype,"users",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ms=(0,Se.Z)(zs.prototype,"uqDevs",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ws=(0,Se.Z)(zs.prototype,"buses",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hs=(0,Se.Z)(zs.prototype,"devs",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zs);class $s extends Xe.ps{constructor(){super(...arguments),this.renderDevUQ=(e,t)=>{let{name:n,discription:i,roles:r}=e;return(0,J.jsxs)("div",{className:"px-3 py-2",children:[(0,J.jsx)(s.FA,{name:"database",className:"text-info my-2 mx-1",size:"lg"}),(0,J.jsxs)("div",{className:"ms-3",children:[(0,J.jsx)("div",{children:n}),(0,J.jsx)("div",{className:"small text-muted",children:i}),(0,J.jsxs)("div",{className:"mt-3",children:[(0,J.jsx)("small",{className:"text-muted me-1",children:"\u89d2\u8272:"}),null===r||void 0===r?void 0:r.map(((e,t)=>(0,J.jsx)("span",{className:"mx-2",children:e},t)))]})]})]})}}header(){return"UQ\u89d2\u8272\u8bbe\u7f6e"}content(){let{devUQs:e,onDevUQ:t}=this.controller;return(0,J.jsx)("div",{children:(0,J.jsx)(s.aV,{items:e,item:{render:this.renderDevUQ,onClick:t}})})}}class Qs extends Xe.ps{constructor(){super(...arguments),this.onClick=async(e,t)=>{let n=await this.controller.newUser(t.data.userName);n?t.setError("userName",n):this.closePage()},this.onEnter=async(e,t)=>{await this.onClick(e,t)}}header(){return"\u65b0\u589e\u89d2\u8272\u7528\u6237"}content(){return(0,J.jsx)("div",{className:"p-3",children:(0,J.jsx)(s.l0,{schema:[{name:"userName",required:!0,type:"string",maxLength:60},{name:"ok",type:"submit"}],uiSchema:{items:{userName:{widget:"text",label:"\u7528\u6237\u8d26\u53f7",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u7684\u8d26\u53f7"},ok:{widget:"button",className:"btn btn-primary",label:"\u63d0\u4ea4"}}},onButtonClick:this.onClick,onEnter:this.onEnter})})}}class Ks extends Xe.ps{constructor(){super(...arguments),this.renderItem=(e,t)=>{if(!e)return null;let n,i,{user:r,roles:a,isDeleted:o}=e,{allRoles:l}=this.controller,u=()=>this.controller.restoreUser(e),c=()=>this.controller.deleteUser(e),h=this.renderUser(r),d="bg-white border-top ";!0===t&&(d+="mb-1",h=(0,J.jsxs)(J.Fragment,{children:[h,(0,J.jsx)("small",{className:"ms-1 text-success",children:"[\u81ea\u5df1]"})]})),!0===o?(n=u,i="undo",h=(0,J.jsx)("del",{children:h})):(n=c,i="times");let p=(0,J.jsx)("div",{className:"p-3 cursor-pointer text-info",onClick:n,children:(0,J.jsx)(s.FA,{name:i})});return(0,J.jsx)(s.pA,{className:d,left:(0,J.jsx)("div",{className:"p-3 w-12c",children:h}),right:p,children:(0,J.jsx)("div",{className:"d-flex flex-wrap",children:a.map(((t,n)=>{let i=l[n];return!0===o&&(i=(0,J.jsx)("del",{children:i})),(0,J.jsxs)("label",{className:"m-3",children:[(0,J.jsx)("input",{className:"me-2",type:"checkbox",disabled:o,defaultChecked:t,onChange:t=>this.onRoleChange(t,n,e)}),i]},n)}))})},r)}}header(){return"\u8bbe\u7f6e\u7528\u6237\u89d2\u8272"}content(){let{userRoles:e}=this.controller,t=(0,X.Pi)((e=>this.renderItem(e.userRole,e.isMe))),n=(0,X.Pi)((()=>(0,J.jsx)(J.Fragment,{children:e.map((e=>(0,J.jsx)(t,{userRole:e,isMe:!1},e.user)))}))),i=(0,X.Pi)((()=>(0,J.jsx)(t,{userRole:this.controller.meRoles,isMe:!0})));return(0,J.jsxs)("div",{children:[(0,J.jsxs)("div",{className:"mx-3 mt-3 mb-1 d-flex align-items-end",children:[(0,J.jsx)("div",{className:"me-auto",children:"\u7528\u6237\u89d2\u8272"}),(0,J.jsxs)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>this.openVPage(Qs),children:[(0,J.jsx)(s.FA,{name:"plus"})," \u589e\u52a0"]})]}),e.length>0?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(i,{}),(0,J.jsx)(n,{})]}):(0,J.jsx)("div",{className:"small text-muted p-3",children:"[\u65e0\u89d2\u8272\u7528\u6237]"})]})}async onRoleChange(e,t,n){let{target:i}=e;i.disabled=!0,await this.controller.setUserRole(i.checked,t,n),i.disabled=!1}}var Gs,Xs,Js;let Ys=(Gs=class extends nn{constructor(){super(...arguments),this.unit=void 0,this.uqApi=void 0,this.myRolesChanged=void 0,this.devUQs=void 0,this.allRoles=void 0,(0,Ce.Z)(this,"meRoles",Xs,this),(0,Ce.Z)(this,"userRoles",Js,this),this.onDevUQ=async e=>{let t,n,i,s=e.owner,a=e.name;this.uqApi=new r.zC("tv/",t,n,s,a,i,!1),await this.uqApi.init(),this.allRoles=e.roles;let o=await this.uqApi.getAllRoleUsers();(0,A.z)((()=>{let e=o.shift(),{roles:t}=e,n=this.allRoles.map((e=>"|".concat(e,"|")));function i(e){return e?n.map((t=>e.indexOf(t)>=0)):n.map((e=>!1))}this.userRoles=[];let r=this.user.id;for(let s of o){let{user:e,roles:t}=s,n=s;n.roles=i(t),e===r?this.meRoles=n:this.userRoles.push(n)}})),this.openVPage(Ks)}}async internalStart(e){this.unit=e,await this.loadUQs(),this.openVPage($s)}async loadUQs(){let e=await ct.unitUQs(this.unit.id,1e3);this.devUQs=e.map((e=>{let t;try{t=JSON.parse(e.roles)}catch{try{t=e.roles.split("\t")}catch{t=[]}}return t?(t=t.filter((e=>e)),{...e,roles:t}):e}))}async setUserRole(e,t,n){let{roles:i}=n,r=i.length,s="";for(let a=0;a<r;a++){!0===(a===t?e:i[a])&&(s+="|"+this.allRoles[a])}s+="|",await this.uqApi.setUserRoles(n.user,s),i[t]=e,this.fireMyRolesChanged(n)}fireMyRolesChanged(e,t){if(!this.myRolesChanged)return;if(e!==this.meRoles)return;let{roles:n}=e;t&&(n=t);let i=["$"];for(let r=0;r<n.length;r++)!0===n[r]&&i.push(this.allRoles[r]);this.myRolesChanged(i)}buildRolesText(e){let t=e.roles.map(((e,t)=>!0===e?this.allRoles[t]:"")).join("|");return"|".concat(t,"|")}async newUser(e){let t=await Ye.userFromKey(e);if(!t)return"\u8fd9\u4e2a\u7528\u6237\u540d\u6ca1\u6709\u6ce8\u518c";let n,i=t.id;if(!0===this.isMe(i))this.meRoles?this.meRoles.isDeleted=!1:this.meRoles={user:i,roles:this.allRoles.map((e=>!1))};else{let e=this.userRoles.find((e=>e.user===i));if(e){if(!0!==e.isDeleted)return"\u8fd9\u4e2a\u7528\u6237\u5df2\u7ecf\u662f\u89d2\u8272\u7528\u6237\u4e86";e.isDeleted=!1,n=this.buildRolesText(e)}else e={user:i,roles:this.allRoles.map((e=>!1))},this.userRoles.push(e),n=""}await this.uqApi.setUserRoles(i,n),!0===this.isMe(i)&&this.fireMyRolesChanged(this.meRoles)}async deleteUser(e){let{user:t}=e;e.isDeleted=!0,await this.uqApi.deleteUserRoles(t),this.fireMyRolesChanged(e,this.allRoles.map((e=>!1)))}async restoreUser(e){let{user:t}=e;e.isDeleted=!1;let n=this.buildRolesText(e);await this.uqApi.setUserRoles(t,n),this.fireMyRolesChanged(e)}},Xs=(0,Se.Z)(Gs.prototype,"meRoles",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Js=(0,Se.Z)(Gs.prototype,"userRoles",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gs);class ea extends Xe.ps{constructor(){super(...arguments),this.onSubmit=async(e,t)=>{let{isOwner:n,isAdmin:i}=t.form.data;await this.controller.setAdmin(n,i),this.closePage()},this.page=(0,X.Pi)((()=>{let e,{unit:t,admins:n}=this.controller,{isRoot:i,isOwner:r}=t,a=n.cur,o={name:"isAdmin",type:"boolean"},l={name:"submit",type:"submit"};1===i?e=[{name:"isOwner",type:"boolean"},o,l]:1===r&&(e=[o,l]);let u={isOwner:a.isOwner,isAdmin:a.isAdmin};return(0,J.jsx)(s.T3,{header:"\u6743\u9650",children:(0,J.jsxs)("div",{className:"px-3",children:[(0,J.jsx)(ta,{...n.cur}),(0,J.jsx)(s.l0,{schema:e,uiSchema:{items:{isOwner:{widget:"checkbox",label:"\u9ad8\u7ba1",trueValue:1,falseValue:0},isAdmin:{widget:"checkbox",label:"\u7ba1\u7406\u5458",trueValue:1,falseValue:0},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},formData:u,onButtonClick:this.onSubmit})]})})}))}async open(){this.openPage(this.page)}}const ta=e=>{let{name:t,nick:n,icon:i}=e;return(0,J.jsxs)("div",{children:[(0,J.jsxs)("div",{className:"d-flex my-4",children:[(0,J.jsx)(s.Ee,{className:"w-3c h-3c me-3",src:i}),(0,J.jsxs)("div",{className:"",children:[(0,J.jsx)("h4",{className:"text-dark",children:t}),n&&(0,J.jsx)("h6",{children:(0,J.jsx)("small",{className:"text-secondary",children:n})})]})]}),(0,J.jsx)("hr",{className:"mb-4"})]})};class na extends Xe.ps{constructor(){super(...arguments),this.roleNum=void 0,this.schema=[{name:"user",type:"string",required:!0},{name:"submit",type:"submit"}],this.uiSchema={items:{user:{widget:"text",label:"\u7528\u6237",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u8d26\u53f7"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary"}}},this.onSubmit=async(e,t)=>{let n,i=await this.controller.addAdmin(t.data.user);if(void 0!==i){switch(i){default:n="\u672a\u77e5\u9519\u8bef";break;case"no-exist":n="\u7528\u6237\u4e0d\u5b58\u5728";break;case"me":n="\u4f60\u81ea\u5df1\u5df2\u7ecf\u662f\u7ba1\u7406\u5458";break;case"admin":n="\u5df2\u7ecf\u662f\u7ba1\u7406\u5458"}t.setError("user",n)}else this.closePage()},this.onEnter=async(e,t)=>{"user"!==e||await this.onSubmit("login",t)},this.page=()=>(0,J.jsx)(s.T3,{header:"\u65b0\u589e - "+on(this.controller.unit)+"\u7ba1\u7406\u5458",back:"close",children:(0,J.jsx)("div",{className:"m-5 px-5 py-3 bg-white border rounded",children:(0,J.jsx)(s.l0,{schema:this.schema,uiSchema:this.uiSchema,onEnter:this.onEnter,onButtonClick:this.onSubmit})})})}async open(e){this.roleNum=e,this.openPage(this.page)}}var ia,ra,sa,aa;let oa=(ia=class extends Xe.ps{constructor(){super(...arguments),this.list=void 0,(0,Ce.Z)(this,"allSelectVisible",ra,this),(0,Ce.Z)(this,"allUnSelectVisible",sa,this),(0,Ce.Z)(this,"disableDel",aa,this),this.onNewFellow=()=>{},this.onItemClick=e=>{this.controller.admins.cur=e,this.openVPage(ea)},this.onItemSelect=(e,t,n)=>{this.disableDel=!n},this.onSelectAll=()=>{this.list.selectAll()},this.onClearAll=()=>{this.list.unselectAll()},this.onDel=async()=>{await this.controller.delAdmins(this.list.selectedItems)},this.row=e=>{let{icon:t,name:n,nick:i}=e,r=i?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("b",{children:i})," \xa0 ",(0,J.jsx)("small",{className:"text-muted",children:n})]}):(0,J.jsx)("b",{children:n}),a=(0,J.jsx)(s.Ee,{className:"w-2-5c h-2-5c",src:t});return(0,J.jsx)(s.pA,{className:"py-2 px-3 align-items-stretch",left:a,children:(0,J.jsx)("div",{className:"px-3",children:r})})},this.onAddAdmin=()=>{this.openVPage(na)},this.page=(0,X.Pi)((()=>{let{admins:e}=this.controller,t=(0,J.jsx)("button",{className:"btn btn-sm btn-success me-2 align-self-center",onClick:this.onAddAdmin,children:(0,J.jsx)(s.FA,{name:"plus"})}),n=(0,J.jsx)(s.aV,{ref:e=>this.list=e,className:"my-1",items:e.admins,none:"[\u65e0]",item:{render:this.row,onSelect:this.onItemSelect}}),i="btn btn-sm btn-outline-info me-1",r=e.admins.length>0&&(0,J.jsxs)("div",{className:"ps-3",children:[(0,J.jsx)("button",{className:i,onClick:this.onSelectAll,children:"\u5168\u9009"}),(0,J.jsx)("button",{className:i,onClick:this.onClearAll,children:"\u5168\u6e05"}),(0,J.jsx)("button",{className:i,disabled:this.disableDel,onClick:this.onDel,children:"\u79fb\u9664"})]});return(0,J.jsx)(s.T3,{header:"\u7ba1\u7406\u5458",right:t,children:(0,J.jsxs)("div",{className:"my-3",children:[r,n,r]})})}))}async open(){this.openPage(this.page)}},ra=(0,Se.Z)(ia.prototype,"allSelectVisible",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),sa=(0,Se.Z)(ia.prototype,"allUnSelectVisible",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),aa=(0,Se.Z)(ia.prototype,"disableDel",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ia);class la extends nn{constructor(){super(...arguments),this.unit=void 0,this.admins=void 0,this.setAdmin=async(e,t)=>{await this.admins.unitSetAdmin(e,t,0)},this.addAdmin=async e=>{let t=await this.admins.unitAddAdmin(e,0,1,0);if("object"!==typeof t)return t},this.delAdmins=async e=>{if("ok"===await this.confirm({caption:"\u786e\u8ba4\u79fb\u9664",message:"\u771f\u7684\u8981\u79fb\u9664\u8fd9\u4e9b\u7ba1\u7406\u5458\u5417\uff1f"+e.map((e=>e.name)).join(","),ok:"\u786e\u8ba4"})){let t=e.map((e=>this.admins.unitDelAdmin(e)));await Promise.all(t)}}}async internalStart(e){this.unit=e,this.admins=new Wr(e),await this.admins.load(),this.openVPage(oa)}}class ua extends Xe.ps{constructor(){super(...arguments),this.renderRow=(e,t)=>{let{app:n,more:i,users:r}=e,{name:a,discription:o}=n,l=(0,J.jsx)("small",{className:"text-muted",children:o});return(0,J.jsxs)("div",{className:"d-block px-3 py-2",children:[(0,J.jsxs)(s.pA,{className:"mb-2",right:l,children:[(0,J.jsx)(s.FA,{name:"address-card-o",className:"text-primary me-3"}),(0,J.jsx)("b",{children:a})]}),(0,J.jsxs)("div",{children:[(0,J.jsx)("small",{className:"text-muted",children:"\u7528\u6237: "}),0===r.length?"[\u65e0]":r.map((e=>e.assigned||e.nick||e.name)).join(", ")+(!0===i?" ...":"")]})]})},this.page=(0,X.Pi)((()=>{let{appUsersList:e,searchApp:t,onAppsClick:n}=this.controller,i=(0,J.jsx)(s.Rj,{className:"w-100 pe-1",onSearch:t,placeholder:"\u641c\u7d22App",allowEmptySearch:!0});return(0,J.jsx)(s.T3,{header:i,children:(0,J.jsx)(s.aV,{items:e,item:{render:this.renderRow,onClick:n,key:e=>e.app.id}})})}))}async open(){this.openPage(this.page)}}class ca extends Xe.ps{constructor(){super(...arguments),this.renderRow=(e,t)=>{let{user:n,apps:i}=e,{name:r,nick:a,assigned:o}=n,l=(0,J.jsx)(s.FA,{name:"user-o",size:"lg",className:"text-info mx-3 mt-2",fixWidth:!0});return(0,J.jsxs)(s.pA,{className:"py-2",left:l,children:[(0,J.jsx)("div",{className:"mb-2",children:(0,J.jsx)("b",{children:o||a||r})}),(0,J.jsx)("div",{className:"d-flex flex-wrap mt-1",children:0===i.length?(0,J.jsx)("small",{className:"text-muted",children:"[\u65e0]"}):i.map((e=>this.box(e.name,"px-2 text-info border-muted bg-white")))})]})},this.box=(e,t)=>(0,J.jsx)("div",{className:"me-3 mb-1 py-1 small border rounded "+t,children:e},e),this.page=(0,X.Pi)((()=>{let{userAppsList:e,searchUser:t,onUsersClick:n}=this.controller,i=(0,J.jsx)(s.Rj,{className:"w-100 pe-1",label:"App\u7ba1\u7406\u5458 \xa0 ",onSearch:t,placeholder:"\u641c\u7d22\u7ba1\u7406\u5458",allowEmptySearch:!0});return(0,J.jsx)(s.T3,{header:i,children:(0,J.jsx)(s.aV,{items:e,item:{render:this.renderRow,onClick:n,key:e=>e.user.id}})})}))}async open(){this.openPage(this.page)}}class ha extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{curApp:e,curAppUsers:t,onAppEditUsers:n}=this.controller,i=(0,J.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>n(),children:"\u589e\u51cf\u7528\u6237"});return(0,J.jsx)(s.T3,{header:"App - "+e.name,right:i,children:(0,J.jsx)(s.aV,{items:t,item:{render:this.renderApp}})})})),this.renderApp=(e,t)=>{let n,{name:i,nick:r,assigned:s}=e;return n=s?(0,J.jsxs)("span",{children:[s," \xa0 ",(0,J.jsx)("small",{className:"text-muted",children:i})]}):r?(0,J.jsxs)("span",{children:[r," \xa0 ",(0,J.jsx)("small",{className:"text-muted",children:i})]}):(0,J.jsx)(J.Fragment,{children:i}),(0,J.jsx)("div",{className:"px-3 py-2",children:n})}}async open(){this.openPage(this.page)}}class da extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{curUser:e,curUserApps:t,onUserEditApps:n}=this.controller,i=(0,J.jsx)("button",{className:"btn btn-sm btn-success align-self-center me-2",onClick:()=>n(),children:"\u589e\u51cfApp"});return(0,J.jsx)(s.T3,{header:"\u7528\u6237 - "+(e.assigned||e.nick||e.name),right:i,children:(0,J.jsx)(s.aV,{items:t,item:{render:this.renderApp}})})})),this.renderApp=(e,t)=>{let{name:n,discription:i}=e,r=(0,J.jsx)(s.FA,{name:"caret-square-o-right",size:"lg",className:"me-3 mt-1 text-info"}),a=(0,J.jsx)("small",{className:"text-muted",children:i});return(0,J.jsx)(s.pA,{className:"px-3 py-2",left:r,right:a,children:(0,J.jsx)("b",{children:n})})}}async open(){this.openPage(this.page)}}class pa extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{curApp:e,appEditUsers:t}=this.controller;return(0,J.jsx)(s.T3,{header:e.name+" - \u589e\u51cf\u7528\u6237",children:(0,J.jsx)(s.aV,{items:t,item:{render:this.renderUserItem}})})})),this.renderUserItem=(e,t)=>{let n,{name:i,nick:r,assigned:a,bind:o}=e;n=a?(0,J.jsxs)(J.Fragment,{children:[a," ",(0,J.jsx)(s.rO,{children:i})]}):r?(0,J.jsxs)(J.Fragment,{children:[r," ",(0,J.jsx)(s.rO,{children:i})]}):(0,J.jsx)(J.Fragment,{children:i});let l=(0,J.jsx)("input",{type:"checkbox",defaultChecked:1===o,onChange:t=>this.onUserChanged(e,t.target.checked)});return(0,J.jsx)(s.pA,{className:"px-3 py-2 align-items-center",right:l,children:n})},this.onUserChanged=async(e,t)=>{await this.controller.bindAppUser(e,t),e.bind=!0===t?1:0}}async open(){this.openPage(this.page)}}class fa extends Xe.ps{constructor(){super(...arguments),this.page=(0,X.Pi)((()=>{let{curUser:e,userEditApps:t}=this.controller;return(0,J.jsx)(s.T3,{header:"\u589e\u51cfApp - "+(e.assigned||e.nick||e.name),children:(0,J.jsx)(s.aV,{items:t,item:{render:this.renderApp}})})})),this.renderApp=(e,t)=>{let{name:n,discription:i,bind:r}=e,a=(0,J.jsx)("input",{type:"checkbox",defaultChecked:1===r,onChange:t=>this.onAppChanged(e,t.target.checked)});return(0,J.jsxs)(s.pA,{className:"px-3 py-2",right:a,children:[n," ",i]})},this.onAppChanged=async(e,t)=>{await this.controller.bindUserApp(e,t),e.bind=!0===t?1:0}}async open(){this.openPage(this.page)}}var ma,va;let ga=(ma=class extends Xe.ps{constructor(){super(...arguments),(0,Ce.Z)(this,"user",va,this),this.searchBox=void 0,this.page=(0,X.Pi)((()=>{let e,t=(0,J.jsx)(s.Rj,{ref:e=>this.searchBox=e,className:"w-100",onSearch:this.onSearch,onFocus:this.onSearchFocus,placeholder:"\u7528\u6237\u5168\u540d/\u624b\u673a\u53f7/\u90ae\u7bb1"});if(null===this.user);else if(void 0===this.user)e=(0,J.jsx)("div",{className:"text-info p-3",children:"\u6ca1\u6709\u627e\u5230\u7528\u6237"});else{let t,{name:n,nick:i,icon:r}=this.user;t=i?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:i})}),(0,J.jsx)("div",{children:n})]}):(0,J.jsx)("div",{children:(0,J.jsx)("b",{children:n})}),e=(0,J.jsxs)("div",{children:[(0,J.jsxs)("div",{className:"m-3 p-3 d-flex bg-white",children:[(0,J.jsx)(s.Ee,{src:r}),(0,J.jsx)("div",{className:"ms-3",children:t})]}),(0,J.jsx)("div",{className:"d-flex justify-content-center",children:(0,J.jsx)("button",{className:"btn btn-success text-center",onClick:this.onAddUser,children:"\u589e\u52a0\u7528\u6237"})})]})}return(0,J.jsx)(s.T3,{header:t,children:e})})),this.onSearch=async e=>{this.user=await ot.userFromKey(e)},this.onAddUser=async()=>{await this.controller.addUser(this.user.id),this.controller.curUser=this.user,this.user=null,this.searchBox.clear(),this.replacePage(this.addedPage)},this.onSearchFocus=()=>{this.user=null,this.searchBox&&this.searchBox.clear()},this.onAddApps=()=>{this.closePage(),this.controller.onUserEditApps()},this.onContinueAddUser=()=>{this.closePage(),this.controller.onAddUser()},this.addedPage=()=>(0,J.jsx)(s.T3,{header:"\u6dfb\u52a0\u6210\u529f",children:(0,J.jsxs)("div",{className:"p-3 text-center",children:[(0,J.jsxs)("div",{children:["\u65b0\u589e\u7528\u6237: ",this.controller.curUser.name]}),(0,J.jsxs)("div",{className:"mt-3",children:[(0,J.jsx)("button",{className:"btn btn-success me-3",onClick:this.onAddApps,children:"\u4e3a\u7528\u6237\u6dfb\u52a0App"}),(0,J.jsx)("button",{className:"btn btn-outline-primary",onClick:this.onContinueAddUser,children:"\u7ee7\u7eed\u6dfb\u52a0\u65b0\u7528\u6237"})]})]})})}async open(){this.openPage(this.page)}},va=(0,Se.Z)(ma.prototype,"user",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ma);var ya,ba,wa,xa,ja,ka,_a;let Ca=(ya=class extends Xe.Qr{constructor(){super(...arguments),this.unit=void 0,(0,Ce.Z)(this,"userAppsList",ba,this),(0,Ce.Z)(this,"appUsersList",wa,this),this.curUser=void 0,(0,Ce.Z)(this,"curUserApps",xa,this),(0,Ce.Z)(this,"userEditApps",ja,this),this.curApp=void 0,(0,Ce.Z)(this,"curAppUsers",ka,this),(0,Ce.Z)(this,"appEditUsers",_a,this),this.onAppUsers=async()=>{await this.loadAppUsers(void 0),this.openVPage(ua)},this.onUserApps=async()=>{await this.loadUserApps(void 0),this.openVPage(ca)},this.searchUser=async e=>{await this.loadUserApps(e)},this.searchApp=async e=>{await this.loadAppUsers(e)},this.onAppsClick=async e=>{this.curApp=e.app;this.curAppUsers=await ot.unitOneAppUsers(this.unit.id,this.curApp.id,0,100),this.openVPage(ha)},this.onUsersClick=async e=>{this.curUser=e.user;this.curUserApps=await ot.unitOneUserApps(this.unit.id,this.curUser.id,0,100),this.openVPage(da)},this.onAppEditUsers=async e=>{this.appEditUsers=await ot.unitAppEditUsers(this.unit.id,this.curApp.id,e,0,100),this.openVPage(pa)},this.onAddUser=()=>{this.openVPage(ga)},this.onUserEditApps=async e=>{this.userEditApps=await ot.unitUserEditApps(this.unit.id,this.curUser.id,e,0,100),this.openVPage(fa)},this.bindAppUser=async(e,t)=>{await ot.bindAppUser(this.unit.id,this.curApp.id,e.id,!0===t?1:0);let n=this.appUsersList.find((e=>e.app.id===this.curApp.id));if(!0===t)this.curAppUsers.push(e),n&&n.users.push(e);else{let t=this.curAppUsers.findIndex((t=>t.id===e.id));t>=0&&this.curAppUsers.splice(t,1),n&&(t=n.users.findIndex((t=>t.id===e.id)),t>=0&&n.users.splice(t,1))}},this.bindUserApp=async(e,t)=>{if(await ot.bindAppUser(this.unit.id,e.id,this.curUser.id,!0===t?1:0),void 0===this.userAppsList)return;let n=this.userAppsList.find((e=>e.user.id===this.curUser.id));if(!0===t)this.curUserApps.push(e),n&&n.apps.push(e);else{let t=this.curUserApps.findIndex((t=>t.id===e.id));t>=0&&this.curUserApps.splice(t,1),n&&(t=n.apps.findIndex((t=>t.id===e.id)),t>=0&&n.apps.splice(t,1))}},this.addUser=async e=>{await ot.unitAddUser(this.unit.id,e)}}async internalStart(e){this.unit=e,await this.loadUserApps(void 0),this.openVPage(ca)}async loadAppUsers(e){let t=[],n=await ot.unitAppUsers(this.unit.id,e,0,100),i=n[0],r=n[1],s={};for(let a of i){let e={id:a.id,name:a.name,discription:a.discription};t.push(s[a.id]={app:e,more:!1,users:[]})}for(let a of r){let e={id:a.user,name:a.name,nick:a.nick,icon:a.icon,assigned:a.assigned},t=s[a.app],{users:n}=t;n.length>=5?t.more=!0:n.push(e)}this.appUsersList=t}async loadUserApps(e){let t=[],n=await ot.unitUsers(this.unit.id,e,0,100),i=n[0],r=n[1],s={};for(let a of i){let e={id:a.id,name:a.name,nick:a.nick,icon:a.icon,assigned:a.assigned};t.push(s[a.id]={user:e,apps:[]})}for(let a of r){let e={id:a.app,name:a.name,discription:a.discription};s[a.user].apps.push(e)}this.userAppsList=t}},ba=(0,Se.Z)(ya.prototype,"userAppsList",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa=(0,Se.Z)(ya.prototype,"appUsersList",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xa=(0,Se.Z)(ya.prototype,"curUserApps",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ja=(0,Se.Z)(ya.prototype,"userEditApps",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ka=(0,Se.Z)(ya.prototype,"curAppUsers",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_a=(0,Se.Z)(ya.prototype,"appEditUsers",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ya);class Sa extends nn{constructor(){super(...arguments),this.unit=void 0,this.isProduction=void 0,this.adminDevs=void 0,this.cAdmins=void 0,this.cUsers=void 0,this.cUqRoles=void 0,this.startUq=e=>{this.newC(Jr).start(e)},this.startApp=e=>{new ci(this.res).start(e.id)},this.onShowUnit=async e=>{r.appInFrame.unit=e.id,tn.init(),await tn.loadUnit();let{unit:t}=tn;this.adminDevs=new Zs(t);let{isDev:n,type:i}=t;1===n&&(0!==(1&i)&&await tn.dev.loadCounts(),0!==(2&i)&&await tn.loadApps()),this.unit=t,this.cUqRoles=this.newC(Ys,this.unit.id),this.openVPage(ps)},this.logout=async()=>{tn.logout()},this.showAppXAccount=async e=>{let t=this.newC(Us);await t.start(this.unit,e)}}async internalStart(e){this.cAdmins=this.newC(la),this.cUsers=new Ca(this.res),tn.init(),this.isProduction=document.location.hash.startsWith("#tv"),console.log("admins isProduction %s",this.isProduction),!1===this.isProduction?await tn.loadAdminUnits():await tn.loadUnit(),this.openVPage(ms)}async onShowDevelopers(){await this.adminDevs.load(),this.newC(Ds).start(this.adminDevs)}}class Na extends rt{constructor(){super(...arguments),this.cHome=void 0}newC(e){return new e(this)}async internalStart(){this.cHome=this.newC(Sa),this.cHome.start()}}const Ea=function(){return(0,J.jsx)(s.gc,{onLogined:async()=>{s.nav.clear(),await async function(e,t,n){if(t){let{htmlTitle:e}=t;e&&(document.title=e);let n=document.getElementsByTagName("html")[0];if(n){let e=null===n||void 0===n?void 0:n.getAttribute("data-version");e&&(t.version=e)}}let i=new e(t);await i.start(n)}(Na,void 0)}})},Aa=e=>{e&&e instanceof Function&&n.e(377).then(n.bind(n,377)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:a}=t;n(e),i(e),r(e),s(e),a(e)}))};t.render((0,J.jsx)(e.StrictMode,{children:(0,J.jsx)(Ea,{})}),document.getElementById("root")),Aa()})()})();
//# sourceMappingURL=main.50e74492.js.map